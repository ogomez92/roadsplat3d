{"version":3,"sources":["keycodes.js","utilities.js","strings.js","input.js","tts.js","soundObject.js","scrollingText.js","soundSource.js","soundHandler.js","languageSelector.js","timer.js","gameObject.js","item.js","coin.js","tile.js","street.js","objective.js","stationaryObject.js","car.js","road.js","effect.js","bonus.js","player.js","world.js","game.js","menuItem.js","menu.js","main.js"],"names":["KeyEvent","DOM_VK_CANCEL","DOM_VK_HELP","DOM_VK_BACK_SPACE","DOM_VK_TAB","DOM_VK_CLEAR","DOM_VK_RETURN","DOM_VK_ENTER","DOM_VK_SHIFT","DOM_VK_CONTROL","DOM_VK_ALT","DOM_VK_PAUSE","DOM_VK_CAPS_LOCK","DOM_VK_ESCAPE","DOM_VK_SPACE","DOM_VK_PAGE_UP","DOM_VK_PAGE_DOWN","DOM_VK_END","DOM_VK_HOME","DOM_VK_LEFT","DOM_VK_UP","DOM_VK_RIGHT","DOM_VK_DOWN","DOM_VK_PRINTSCREEN","DOM_VK_INSERT","DOM_VK_DELETE","DOM_VK_0","DOM_VK_1","DOM_VK_2","DOM_VK_3","DOM_VK_4","DOM_VK_5","DOM_VK_6","DOM_VK_7","DOM_VK_8","DOM_VK_9","DOM_VK_SEMICOLON","DOM_VK_EQUALS","DOM_VK_A","DOM_VK_B","DOM_VK_C","DOM_VK_D","DOM_VK_E","DOM_VK_F","DOM_VK_G","DOM_VK_H","DOM_VK_I","DOM_VK_J","DOM_VK_K","DOM_VK_L","DOM_VK_M","DOM_VK_N","DOM_VK_O","DOM_VK_P","DOM_VK_Q","DOM_VK_R","DOM_VK_S","DOM_VK_T","DOM_VK_U","DOM_VK_V","DOM_VK_W","DOM_VK_X","DOM_VK_Y","DOM_VK_Z","DOM_VK_CONTEXT_MENU","DOM_VK_NUMPAD0","DOM_VK_NUMPAD1","DOM_VK_NUMPAD2","DOM_VK_NUMPAD3","DOM_VK_NUMPAD4","DOM_VK_NUMPAD5","DOM_VK_NUMPAD6","DOM_VK_NUMPAD7","DOM_VK_NUMPAD8","DOM_VK_NUMPAD9","DOM_VK_MULTIPLY","DOM_VK_ADD","DOM_VK_SEPARATOR","DOM_VK_SUBTRACT","DOM_VK_DECIMAL","DOM_VK_DIVIDE","DOM_VK_F1","DOM_VK_F2","DOM_VK_F3","DOM_VK_F4","DOM_VK_F5","DOM_VK_F6","DOM_VK_F7","DOM_VK_F8","DOM_VK_F9","DOM_VK_F10","DOM_VK_F11","DOM_VK_F12","DOM_VK_F13","DOM_VK_F14","DOM_VK_F15","DOM_VK_F16","DOM_VK_F17","DOM_VK_F18","DOM_VK_F19","DOM_VK_F20","DOM_VK_F21","DOM_VK_F22","DOM_VK_F23","DOM_VK_F24","DOM_VK_NUM_LOCK","DOM_VK_SCROLL_LOCK","DOM_VK_COMMA","DOM_VK_PERIOD","DOM_VK_SLASH","DOM_VK_BACK_QUOTE","DOM_VK_OPEN_BRACKET","DOM_VK_BACK_SLASH","DOM_VK_CLOSE_BRACKET","DOM_VK_QUOTE","DOM_VK_META","GameUtils","calculateDelta","lx","sx","sr","delta","progressPan","current","max","progressPitch","min","minPitch","maxPitch","progressVolume","minVolume","maxVolume","getProportion","distance3D","x1","y1","z1","x2","y2","z2","Math","sqrt","distance","jx","jy","kx","ky","calculateAngle","angle","atan2","PI","isCollide3D","a","b","x","width","y","height","z","depth","randomInt","floor","random","getRandomArbitrary","sleep","ms","Promise","resolve","setTimeout","percent","int1","int2","percentOf","percentage","percented","value","average","arr","startIndex","len","length","val","i","averageInt","neg","num","numericSort","shuffle","j","objSize","obj","size","key","hasOwnProperty","copyObject","Object","assign","create","getPrototypeOf","arraysEqual","arr1","arr2","pauseTimeout","timerId","start","Date","now","clearTimeout","resumeTimeout","remaining","window","callback","randomProperty","keys","findFiles","path","ext","list","fileExt","walk","filesSync","pb","pf","stat","next","push","substr","findFolders","dirsSync","randomElement","utils","Strings","constructor","strings","noBombs","shopbombs","bonus3","bonus4","bonus5","coins","iBombs","mShopBack","mShopIntro","shophyperjump","shopgalleryMembership","shopshortfuse","galleryLocked","mBullet","locked","bulletIntro","iJumps","emptyInventory","mainMenu","mStart","mShop","upArrowMove","bonus1","bonus2","selectVoice","mSelectVoice","mLang","newUpdate","mSapi","mReader","newRate","rating","mRate","K","Q","A","J","cspades","cdiamonds","cclubs","chearts","dq","lang","langs","mSelect","mBack","yes","no","ok","get","what","rep","str","forEach","v","i1","Number","replace","speak","speech","check","lng","ScrollingText","EventEmitter","require","KeyboardInput","keyDown","justPressed","chars","justReleased","justPressedEventCallback","charEventCallback","init","that","document","addEventListener","event","handleKeyDown","handleKeyUp","handleChar","pause","isPaused","resume","which","emit","char","String","fromCharCode","destroy","isDown","isJustPressed","isJustReleased","keysDown","kd","getChars","keysPressed","splice","releaseAllKeys","keysReleased","app","remote","exec","useWebTTS","TTS","webTTS","voices","speechController","ducking","synth","Speech","rate","interrupt","VK_SHIFT","childProcess","kill","unduck","VK_UP","setRate","VK_DOWN","splitSentences","then","data","catch","e","setLanguage","process","platform","setVoice","console","log","voice","err","r","text","queue","accessibilitySupportEnabled","oldText","speakUnthreaded","listeners","onstart","duck","onend","onerror","error","getElementById","innerHTML","para","createElement","appendChild","createTextNode","setWebTTS","tts","stop","cancel","changeRate","inp","changeVoice","name","voiceArray","k","includes","cb","silent","wl","vl","split","input","selection","ducker","stdout","stderr","message","panner","defaults","panningModel","maxDistance","sono","playInBackground","playOnceTimer","SoundObjectItem","file","tag","stream","duckingFirstTime","fileName","sound","src","onComplete","doneLoading","timeout","checkProgress","loaded","Audio","playbackRate","pitch","loop","progress","replay","play","unload","time","oldVolume","volume","fade","pos","forcePlay","playSync","die","evt","once","removeAllListeners","active","playing","pan","effects","add","currentPan","set","seek","currentTime","duration","position","SoundObject","sounds","Array","loadingQueue","queueCallback","loadedSounds","loadingSounds","loadedCallback","queueLength","statusCallback","directory","extension","oneShots","debug","oneShotSound","setStatusCallback","findSound","findSoundIndex","resetQueuedInstance","found","returnObject","loadQueueSync","so","setQueueCallback","loadQueue","createSync","snd","enqueue","handleQueue","resetQueue","setCallback","result","isLoading","loading","stillLoading","playOnce","on","noMore","filename","destroyAll","runningText","undefined","delimiter","splitText","currentLine","sndOpen","sndContinue","sndClose","id","prom","res","handleKeys","readCurrentLine","copyCurrentLine","advance","handleTap","action","removeEventListener","SoundSource","son","speed","minRate","maxRate","toDestroy","rateShiftSpeed","currentPosition","setPosition","update","SoundHandler","directional","staticSounds","dynamicSounds","currentDynamicSound","maxDynamicSounds","currentStaticSound","maxStaticSounds","reuseSounds","playStatic","slot","findFreeStaticSlot","SoundItem","findFreeDynamicSlot","findDynamicSound","reuse","threeD","LanguageSelector","element","container","buttons","type","focus","module","exports","GameObject","world","alive","mediaSource","context","createMediaElementSource","source","scene","createSource","sourceWidth","sourceHeight","sourceDepth","connect","Item","player","step","round","target","Coin","game","level","pool","Tile","hasSomething","scoreType","score","currentSpeed","clearInterval","scoreTimeout","levelCap","tileType","Street","Objective","setInterval","scoreDeduct","generateTiles","slowDown","StationaryObject","Car","tile","side","canHorn","blowUp","blowUpSound","bulletGallery","hornSound","passed","hornSource","hornResonanceSource","jump","generateCar","content","numberOfVehicles","spawnTime","jumps","flyTo","nearestObjective","healthLoss","hp","hit","nearestStreet","furthestStreet","Road","generator","force","carType","dynamicObjects","parsedCars","hornable","blowup","stepProgress","nearestRoad","furthestRoad","Effect","onFunction","ofFunction","Bonus","bonuses","forceSpeed","bonusType","crawl","oldSpeed","speedUp","forcedSpeed","bombs","coffeeOn","coffeeOff","Player","playerHitSound","center","xLimit","ceil","fallTime","setListenerPosition","unableToMove","speedUpSound","speedDownSound","speeds","speedModifier","move","speedTimeout","number","heart","land","fall","stand","interval","tick","throwBomb","fusetime","ResonanceAudio","World","tiles","AudioContext","convolution","createConvolver","output","destination","lastStreet","lastStreetLimit","roadsPerLevel","lastRoad","Game","canChangeSpeed","scoreSound","timer","render","dt","debugRoad","nothing","MenuTypes","NORMAL","SELECTOR","SLIDER","EDIT","AUDIO","MenuItem","select","AudioItem","SelectorItem","options","defaultOption","selectCallback","currentOption","increase","decrease","SliderItem","from","to","currentValue","increaseBy","minValue","maxValue","EditItem","defaultText","addChar","removeChar","substring","Menu","menuData","music","kp","handleInput","fadeTime","audio","isAudio","prependAudio","first","cursor","dir","sndKeyChar","sndKeyDelete","sndSliderLeft","sndSliderRight","sndBoundary","sndChoose","sndMove","sndSelector","sndWrap","hammer","Hammer","nextItem","sndName","previousItem","moveCallback","insertCharacter","shortcut","toLowerCase","removeCharacter","destroySounds","runSync","reject","run","s","selected","handleSwipe","items","addItem","toReturn","musicDuration","_","bonusTypes","shopItems","hyperjump","galleryMembership","shortfuse","gameID","version","unlocks","version2","ttsVoice","ttsRate","setup","localStorage","getItem","JSON","parse","fs","readFileSync","lines","elements","horning","blow","fetch","menu","shop","browseGallery","save","setItem","stringify","getUnlock","unlocked","entries","setUnlock","setData","getData","shopAmbience","buy","nobuy"],"mappings":"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","file":"main.js","sourceRoot":"js","sourcesContent":["\r\n'use strict';\r\nconst KeyEvent = {\r\nDOM_VK_CANCEL: 3,\r\n\t       DOM_VK_HELP: 6,\r\n\t       DOM_VK_BACK_SPACE: 8,\r\n\t       DOM_VK_TAB: 9,\r\n\t       DOM_VK_CLEAR: 12,\r\n\t       DOM_VK_RETURN: 13,\r\n\t       DOM_VK_ENTER: 14,\r\n\t       DOM_VK_SHIFT: 16,\r\n\t       DOM_VK_CONTROL: 17,\r\n\t       DOM_VK_ALT: 18,\r\n\t       DOM_VK_PAUSE: 19,\r\n\t       DOM_VK_CAPS_LOCK: 20,\r\n\t       DOM_VK_ESCAPE: 27,\r\n\t       DOM_VK_SPACE: 32,\r\n\t       DOM_VK_PAGE_UP: 33,\r\n\t       DOM_VK_PAGE_DOWN: 34,\r\n\t       DOM_VK_END: 35,\r\n\t       DOM_VK_HOME: 36,\r\n\t       DOM_VK_LEFT: 37,\r\n\t       DOM_VK_UP: 38,\r\n\t       DOM_VK_RIGHT: 39,\r\n\t       DOM_VK_DOWN: 40,\r\n\t       DOM_VK_PRINTSCREEN: 44,\r\n\t       DOM_VK_INSERT: 45,\r\n\t       DOM_VK_DELETE: 46,\r\n\t       DOM_VK_0: 48,\r\n\t       DOM_VK_1: 49,\r\n\t       DOM_VK_2: 50,\r\n\t       DOM_VK_3: 51,\r\n\t       DOM_VK_4: 52,\r\n\t       DOM_VK_5: 53,\r\n\t       DOM_VK_6: 54,\r\n\t       DOM_VK_7: 55,\r\n\t       DOM_VK_8: 56,\r\n\t       DOM_VK_9: 57,\r\n\t       DOM_VK_SEMICOLON: 59,\r\n\t       DOM_VK_EQUALS: 61,\r\n\t       DOM_VK_A: 65,\r\n\t       DOM_VK_B: 66,\r\n\t       DOM_VK_C: 67,\r\n\t       DOM_VK_D: 68,\r\n\t       DOM_VK_E: 69,\r\n\t       DOM_VK_F: 70,\r\n\t       DOM_VK_G: 71,\r\n\t       DOM_VK_H: 72,\r\n\t       DOM_VK_I: 73,\r\n\t       DOM_VK_J: 74,\r\n\t       DOM_VK_K: 75,\r\n\t       DOM_VK_L: 76,\r\n\t       DOM_VK_M: 77,\r\n\t       DOM_VK_N: 78,\r\n\t       DOM_VK_O: 79,\r\n\t       DOM_VK_P: 80,\r\n\t       DOM_VK_Q: 81,\r\n\t       DOM_VK_R: 82,\r\n\t       DOM_VK_S: 83,\r\n\t       DOM_VK_T: 84,\r\n\t       DOM_VK_U: 85,\r\n\t       DOM_VK_V: 86,\r\n\t       DOM_VK_W: 87,\r\n\t       DOM_VK_X: 88,\r\n\t       DOM_VK_Y: 89,\r\n\t       DOM_VK_Z: 90,\r\n\t       DOM_VK_CONTEXT_MENU: 93,\r\n\t       DOM_VK_NUMPAD0: 96,\r\n\t       DOM_VK_NUMPAD1: 97,\r\n\t       DOM_VK_NUMPAD2: 98,\r\n\t       DOM_VK_NUMPAD3: 99,\r\n\t       DOM_VK_NUMPAD4: 100,\r\n\t       DOM_VK_NUMPAD5: 101,\r\n\t       DOM_VK_NUMPAD6: 102,\r\n\t       DOM_VK_NUMPAD7: 103,\r\n\t       DOM_VK_NUMPAD8: 104,\r\n\t       DOM_VK_NUMPAD9: 105,\r\n\t       DOM_VK_MULTIPLY: 106,\r\n\t       DOM_VK_ADD: 107,\r\n\t       DOM_VK_SEPARATOR: 108,\r\n\t       DOM_VK_SUBTRACT: 109,\r\n\t       DOM_VK_DECIMAL: 110,\r\n\t       DOM_VK_DIVIDE: 111,\r\n\t       DOM_VK_F1: 112,\r\n\t       DOM_VK_F2: 113,\r\n\t       DOM_VK_F3: 114,\r\n\t       DOM_VK_F4: 115,\r\n\t       DOM_VK_F5: 116,\r\n\t       DOM_VK_F6: 117,\r\n\t       DOM_VK_F7: 118,\r\n\t       DOM_VK_F8: 119,\r\n\t       DOM_VK_F9: 120,\r\n\t       DOM_VK_F10: 121,\r\n\t       DOM_VK_F11: 122,\r\n\t       DOM_VK_F12: 123,\r\n\t       DOM_VK_F13: 124,\r\n\t       DOM_VK_F14: 125,\r\n\t       DOM_VK_F15: 126,\r\n\t       DOM_VK_F16: 127,\r\n\t       DOM_VK_F17: 128,\r\n\t       DOM_VK_F18: 129,\r\n\t       DOM_VK_F19: 130,\r\n\t       DOM_VK_F20: 131,\r\n\t       DOM_VK_F21: 132,\r\n\t       DOM_VK_F22: 133,\r\n\t       DOM_VK_F23: 134,\r\n\t       DOM_VK_F24: 135,\r\n\t       DOM_VK_NUM_LOCK: 144,\r\n\t       DOM_VK_SCROLL_LOCK: 145,\r\n\t       DOM_VK_COMMA: 188,\r\n\t       DOM_VK_PERIOD: 190,\r\n\t       DOM_VK_SLASH: 191,\r\n\t       DOM_VK_BACK_QUOTE: 192,\r\n\t       DOM_VK_OPEN_BRACKET: 219,\r\n\t       DOM_VK_BACK_SLASH: 220,\r\n\t       DOM_VK_CLOSE_BRACKET: 221,\r\n\t       DOM_VK_QUOTE: 222,\r\n\t       DOM_VK_META: 224\r\n};\r\nexport {KeyEvent};\r\n","import \"babel-polyfill\";\r\n'use strict';\r\nclass GameUtils {\r\n\tcalculateDelta(lx, sx, sr = 0) {\r\n\t\tsx = sx + sr;\r\n\t\tif (sx < lx) {\r\n\t\t\tdelta = lx - sx;\r\n\t\t}\r\n\t\tif (sx > lx) {\r\n\t\t\tdelta = sx - lx;\r\n\t\t}\r\n\r\n\t}\r\n\tprogressPan(current, max) {\r\n\t\treturn ((current * 200 / max) - 100) / 100;\r\n\t}\r\n\r\n\tprogressPitch(current, min, max, minPitch, maxPitch) {\r\n\t\treturn (current / (min + max)) * (maxPitch - minPitch) + minPitch;\r\n\t}\r\n\r\n\tprogressVolume(current, min, max, minVolume, maxVolume) {\r\n\t\tif (current > max) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\treturn (current / (min + max)) * (maxVolume - minVolume) + minVolume;\r\n\t}\r\n\r\n\tgetProportion(current, min, max, minVolume, maxVolume) {\r\n\t\tif (current > max) {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\treturn (current / (min + max)) * (maxVolume - minVolume) + minVolume;\r\n\t}\r\n\r\n\tdistance3D(x1, y1, z1, x2, y2, z2) {\r\n\t\treturn Math.sqrt((x2 - x1) * (x2 - x1) +\r\n\t\t\t(y2 - y1) * (y2 - y1) +\r\n\t\t\t(z2 - z1) * (z2 - z1));\r\n\t}\r\n\r\n\tdistance(jx, jy, kx, ky) {\r\n\t\t// Return Math.hypot(jx-kx, jy-ky)\r\n\t\treturn Math.sqrt(((jx - kx) * (jx - kx)) + ((jy - ky)) * (jy - ky));\r\n\t}\r\n\r\n\tcalculateAngle(x1, y1, x2, y2) {\r\n\t\tlet angle = Math.atan2((y2 - y1), (x2 - x1));\r\n\t\tangle = (angle >= 0) ? 0 : (2 * Math.PI) + angle;\r\n\t\treturn angle;\r\n\t\t// Return Math.atan2((y2 - y1),(x2 - x1));\r\n\t}\r\n\r\n\tisCollide3D(a, b) {\r\n\t\treturn (a.x <= (b.x + b.width) && (a.x + a.width) >= b.x) && (a.y <= (b.y + b.height) && (a.y + a.height) >= b.y) && (a.z <= (b.z + b.depth) && (a.z + a.depth) >= b.z);\r\n\t}\r\n\r\n\trandomInt(min, max) {\r\n\t\treturn Math.floor(Math.random() * (max - min + 1)) + min;\r\n\t}\r\n\r\n\tgetRandomArbitrary(min, max) {\r\n\t\treturn Math.random() * (max - min) + min;\r\n\t}\r\n\r\n\tsleep(ms) {\r\n\t\treturn new Promise(resolve => setTimeout(resolve, ms));\r\n\t}\r\n\r\n\tpercent(int1, int2) {\r\n\t\treturn int1 * 100 / int2;\r\n\t}\r\n\r\n\tpercentOf(int1, int2) {\r\n\t\treturn int2 * int1 / 100;\r\n\t}\r\n\tpercentage(percented, value) {\r\n\t\treturn value * percented / 100;\r\n\t}\r\n\r\n\taverage(arr, startIndex = 0) {\r\n\t\tconst len = arr.length;\r\n\t\tlet val = 0;\r\n\t\tlet average = 0;\r\n\t\tif (arr.length < startIndex) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\r\n\t\tfor (let i = startIndex; i < arr.length; i++) {\r\n\t\t\tval += arr[i];\r\n\t\t}\r\n\r\n\t\taverage = val / (len - startIndex);\r\n\t\treturn average;\r\n\t}\r\n\r\n\taverageInt(arr, startIndex = 0) {\r\n\t\tconst len = arr.length;\r\n\t\tlet val = 0;\r\n\t\tlet average = 0;\r\n\t\tif (arr.length < startIndex) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\r\n\t\tfor (let i = startIndex; i < arr.length; i++) {\r\n\t\t\tval += arr[i];\r\n\t\t}\r\n\r\n\t\taverage = val / (len - startIndex);\r\n\t\treturn Math.floor(average);\r\n\t}\r\n\r\n\tneg(num) {\r\n\t\treturn (num >= 0 ? (num == 0 ? 0 : 1) : -1);\r\n\t}\r\n\r\n\tnumericSort(a, b) {\r\n\t\treturn (a < b ? -1 : (a == b ? 0 : 1));\r\n\t}\r\n\r\n\tshuffle(a) {\r\n\t\tfor (let i = a.length - 1; i > 0; i--) {\r\n\t\t\tconst j = Math.floor(Math.random() * (i + 1));\r\n\t\t\t[a[i], a[j]] = [a[j], a[i]];\r\n\t\t}\r\n\r\n\t\treturn a;\r\n\t}\r\n\r\n\tobjSize(obj) {\r\n\t\tlet size = 0;\r\n\r\n\t\tlet key;\r\n\t\tfor (key in obj) {\r\n\t\t\tif (obj.hasOwnProperty(key)) {\r\n\t\t\t\tsize++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn size;\r\n\t}\r\n\tcopyObject(obj) {\r\n\t\treturn Object.assign(Object.create(Object.getPrototypeOf(obj)), obj);\r\n\t}\r\n\tarraysEqual(arr1, arr2) {\r\n\t\tfor (var i = 0; i < arr1.length; i++) {\r\n\r\n\t\t\tif (arr1[i] !== arr2[i])\r\n\t\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tpauseTimeout(timerId) {\r\n\t\tlet start = Date.now();\r\n\t\tclearTimeout(timerId);\r\n\t};\r\n\r\n\tresumeTimeout(timerId) {\r\n\t\tremaining -= Date.now() - start;\r\n\t\treturn window.setTimeout(callback, remaining);\r\n\t};\r\n\trandomProperty(obj) {\r\n\t\tvar keys = Object.keys(obj)\r\n\t\treturn obj[keys[keys.length * Math.random() << 0]];\r\n\t};\r\n\t\tasync findFiles(path,ext=\"\") {\r\nlet list=[];\r\nlet fileExt=\"\";\r\nawait walk.filesSync(path, (pb, pf, stat, next) => {\r\nif (ext==\"\") {\r\nlist.push(pf);\r\n}\r\nelse {\r\nfileExt=pf.substr(0-ext.length,ext.length);\r\nif (fileExt==ext) {\r\nlist.push(pf);\r\n}\r\n}\r\n});\r\nreturn list;\r\n}\r\nasync findFolders(path) {\r\nlet list=[];\r\nawait walk.dirsSync(path, (pb, pf, stat, next) => {\r\nlist.push(pf);\r\n});\r\nreturn list;\r\n}\nrandomElement(arr) {\n\treturn arr[Math.floor(Math.random() * arr.length)];\n}\r\n}\r\nexport var utils = new GameUtils();\r\n","'use strict';\r\nimport { lang } from './main';\r\nimport { utils } from './utilities';\r\nimport { speech } from './tts';\r\nimport { ScrollingText } from './scrollingText';\r\n\r\nclass Strings {\r\n\tconstructor() {\r\n\t\tthis.strings = {};\r\n\t\tthis.strings[1] = {\r\n\t\t\t// New English\n\t\t\tnoBombs: \"You don't have any bombs!\",\n\t\t\t\n\t\t\tshopbombs: \"Bombs, to make cars explode. Also allows unlocking of explosion sounds in the explosions gallery\",\n\t\t\tbonus3: \"Slowdown\",\n\t\t\tbonus4: \"Nothing!\",\n\t\t\tbonus5: \"bomb\",\n\t\t\tcoins: \"coins\",\n\t\t\tiBombs: \"Bombs\",\n\t\t\tmShopBack:\"Leave shop (You have %1 coins)\",\n\t\t\tmShopIntro:\"Welcome to the item shop! Press enter on any item to buy it.\",\n\t\t\tshophyperjump: \"Hyper jumps: Allows collecting of hyperjump items, which save you from being hit by incoming cars\",\n\t\t\tshopgalleryMembership: \"Explosions gallery lifetime membership\",\n\t\t\tshopshortfuse: \"Short fuse: Divides the time it takes for bombs to explode by 3.\",\n\t\t\tgalleryLocked: \"The explosions gallery will remain locked until you buy a membership from the store. Darn!\",\n\t\t\tmBullet:\"Explosions gallery\",\n\t\t\tlocked:\"Locked!\",\n\t\t\tbulletIntro:\"Welcome to the explosions gallery! You have unlocked %1 out of %2 possible explosions. Press enter to go back to the main menu.\",\r\n\t\t\tiJumps: \"You have %1 hyperjumps\",\r\n\t\t\temptyInventory: \"Your inventory is empty\",\r\n\t\t\tmainMenu: \"Use arrows to move, enter to continue.\",\r\n\t\t\tmStart: \"Start Game\",\r\n\t\t\tmShop: \"Item Shop (You have %1 coins)\",\r\n\t\t\tupArrowMove: \"Press a number between 1 and 5 to start moving, 1 being the slowest speed possible. Letter s to check your score, h checks your health, l to check level.\",\r\n\t\t\tbonus1: \"Health bonus!\",\r\n\t\t\tbonus2: \"Hyper jump!\",\r\n\t\t\tselectVoice: \"%1 voices available, use the up and down arrows to select a voice, enter when you're done.\",\r\n\t\t\tmSelectVoice: \"text to speech voice\",\r\n\t\t\tmLang: 'Change language',\r\n\t\t\tnewUpdate: 'There is a new version available! You have version %1, version %2 is available.',\r\n\t\t\tmSapi: 'Use text to speech for the game',\r\n\t\t\tmReader: 'Use your screen reader for the game',\r\n\t\t\tnewRate: 'This is a text to speech rate test. Please press enter when done',\r\n\t\t\trating: 'Press right and left arrow keys to change the rate. Press enter when done',\r\n\t\t\tmRate: 'Change speech rate',\r\n\r\n\t\t\tK: 'king',\r\n\t\t\tQ: 'queen',\r\n\t\t\tA: 'ace',\r\n\t\t\tJ: 'jack',\r\n\t\t\tcspades: 'spades',\r\n\t\t\tcdiamonds: 'diamonds',\r\n\t\t\tcclubs: 'clubs',\r\n\t\t\tchearts: 'hearts',\r\n\t\t\tdq: 'This is a game of risk. You will risk losing %1 beatcoins. Continue?',\r\n\t\t\tlang: 'English',\r\n\t\t\tlangs: 'Select your language',\r\n\t\t\tmSelect: 'Please select',\r\n\t\t\tmBack: 'go back',\r\n\t\t\tmStart: 'Start Game',\r\n\t\t\tyes: 'Yes',\r\n\t\t\tno: 'no',\r\n\t\t\tok: 'ok',\r\n\t\t};\r\n\t\tthis.strings[2] = {\r\n\t\t\t// New Spanish\n\t\t\tnoBombs: \"No tienes bombas!\",\n\t\t\tshopbombs: \"Bombas, para hacer explotar los coches con la tecla g. Tambin podrs desbloquear los sonidos de las explosiones\",\n\t\t\tselectVoice: \"%1 voces disponibles. Usa las flechas y enter para cambiar la voz\",\n\t\t\tmSelectVoice: \"Voz de la tts\",\n\t\t\tmLang: \"Cambiar Idioma\",\n\t\t\tnewUpdate: \"Nueva versin disponible! Tienes la %1, la %2 est disponible\",\n\t\t\tmSapi: \"Usar SAPI para el juego\",\n\t\t\tmReader: \"Usar lector de pantalla\",\n\t\t\tnewRate: \"Prueba de la velocidad de la voz. Pulsa enter para dejarla as\",\n\t\t\trating: \"Pulsa las flechas izquierda y derecha para cambiar la velocidad y enter para aceptar\",\n\t\t\tmRate: \"Cambiar velocidad de la voz.\",\n\t\t\tmSelect: \"Por favor, selecciona\",\n\t\t\tmBack: \"Volver\",\n\t\t\tyes: \"s\",\n\t\t\tno: \"no\",\n\t\t\tok: \"aceptar\",\n\t\t\t\n\t\t\tcoins: \"Monedas\",\n\t\t\tiBombs: \"Bombas\",\n\t\t\tmShopBack: \"Salir de la tienda (tienes %1 monedas)\",\n\t\t\tmShopIntro: \"Te doy la bienvenida a la tienda, donde puedes comprar mejoras para el juego. Pulsa nter en cualquier item para comprarlo.\",\n\t\t\tshophyperjump: \"Hipersaltos: Permite obtener los bonus de hipersalto, que saltarn los autos automticamente.\",\n\t\t\tshopgalleryMembership: \"Pase de oro para la galera de explosiones\",\n\t\t\tshopshortfuse: \"Mecha corta, divide el tiempo de explosin de las bombas por 3\",\n\t\t\tgalleryLocked: \"La galera de explosiones estar bloqueada hasta que compres el pase de oro. Vaya!\",\n\t\t\tmBullet: \"Galera de explosiones\",\n\t\t\tlocked: \"Bloqueado\",\n\t\t\tbulletIntro: \"Te doy la bienvenida a la galera de explosiones! Has desbloqueado %1 de %2 explosiones posibles. Pulsa enter para volver al men\",\n\t\t\tiJumps: \"Tienes %1 hipersaltos\",\n\t\t\temptyInventory: \"Tu inventario est vaco.\",\n\t\t\tupArrowMove: \"Pulsa un nmero del 1 al 5 para empezar a moverte, 1 el ms lento. S para ver la puntuacin, h para la energa, l para el nivel, i para el inventario.\",\n\t\t\tbonus1: \"Bonus de energa\",\n\t\t\tbonus2: \"Hipersalto\",\n\t\t\tbonus3: \"Ralentizado\",\n\t\t\tbonus4: \"Nada!\",\n\t\t\tbonus5: \"bomba\",\n\t\t\t\r\n\t\t\tmStart: \"Empezar juego\",\r\n\t\t\tmShop: \"Tienda (Tienes %1 monedas)\",\r\n\t\t\tmainMenu: \"Men Principal. Flechas para navegar, enter para continuar.\",\r\n\t\t};\r\n\t}\r\n\r\n\tget(what, rep = []) {\r\n\t\tlet str;\r\n\t\tif (typeof this.strings[lang][what] !== 'undefined') {\r\n\t\t\tstr = this.strings[lang][what];\r\n\t\t} else if (typeof this.strings[1][what] !== 'undefined') {\r\n\t\t\tstr = this.strings[1][what];\r\n\t\t} else {\r\n\t\t\treturn what;\r\n\t\t}\r\n\t\trep.forEach((v, i) => {\r\n\t\t\tconst i1 = Number(i) + 1;\r\n\t\t\tstr = str.replace('%' + i1, v);\r\n\t\t});\r\n\t\treturn str;\r\n\t}\r\n\r\n\tspeak(what, rep = []) {\r\n\t\tlet str;\r\n\t\tif (typeof this.strings[lang][what] !== 'undefined') {\r\n\t\t\tstr = this.strings[lang][what];\r\n\t\t} else if (typeof this.strings[1][what] !== 'undefined') {\r\n\t\t\tstr = this.strings[1][what];\r\n\t\t} else {\r\n\t\t\tspeech.speak(what);\r\n\t\t}\r\n\t\trep.forEach((v, i) => {\r\n\t\t\tconst i1 = Number(i) + 1;\r\n\t\t\tstr = str.replace('%' + i1, v);\r\n\t\t});\r\n\t\tspeech.speak(str);\r\n\t}\r\n\r\n\tasync check(lng) {\r\n\t\tconst len = utils.objSize(this.strings) - 2;\r\n\t\tfor (const i in this.strings[1]) {\r\n\t\t\tif (!this.strings[lng].hasOwnProperty(i)) {\r\n\t\t\t\tawait new ScrollingText(i + ': ' + this.strings[1][i]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\nexport var strings = new Strings();\r\n","import $ from 'jquery';\r\nconst EventEmitter = require('events');\r\n'use strict';\r\nclass KeyboardInput extends EventEmitter {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.keyDown = [];\r\n\t\tthis.justPressed = [];\r\n\t\tthis.chars = [];\r\n\t\tthis.justReleased = [];\r\n\t\tthis.justPressedEventCallback = null;\r\n\t\tthis.charEventCallback = null;\r\n\t}\r\n\r\n\tinit() {\r\n\t\tconst that = this;\r\n\t\t// \t\t$(document).keydown(function(event) { that.handleKeyDown(event); });\r\n\t\t// \t\t$(document).keyup(function(event) { that.handleKeyUp(event); });\r\n\t\tdocument.addEventListener('keydown', event => {\r\n\t\t\tthat.handleKeyDown(event);\r\n\t\t});\r\n\t\tdocument.addEventListener('keyup', event => {\r\n\t\t\tthat.handleKeyUp(event);\r\n\t\t});\r\n\t\tdocument.addEventListener('keypress', event => {\r\n\t\t\tthat.handleChar(event);\r\n\t\t});\r\n\t}\r\n\tpause() {\r\n\t\tthis.isPaused = true;\r\n\t}\r\n\tresume() {\r\n\t\tthis.isPaused = false;\r\n\t}\r\n\thandleKeyDown(event) {\r\n\t\tif (this.keyDown[event.which] != true || typeof this.keyDown[event.which] === 'undefined') {\r\n\t\t\tthis.keyDown[event.which] = true;\r\n\t\t\tthis.justPressed[event.which] = true;\r\n\t\t\tthis.emit(event.which);\r\n\t\t\tthis.justReleased[event.which] = false;\r\n\t\t\tif (typeof this.justPressedEventCallback !== 'undefined' && this.justPressedEventCallback != null) {\r\n\t\t\t\tthis.justPressedEventCallback(event.which);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\thandleChar(char) {\r\n\t\tif (char.which < 48 || char.which > 122) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (String.fromCharCode(char.which) != '') {\r\n\t\t\tthis.chars += String.fromCharCode(char.which);\r\n\t\t\tthis.emit(\"chr\" + String.fromCharCode(char.which));\r\n\t\t\tif (typeof this.charEventCallback !== 'undefined' && this.charEventCallback != null) {\r\n\t\t\t\tthis.charEventCallback(String.fromCharCode(char.which));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\thandleKeyUp(event) {\r\n\t\tif (this.keyDown[event.which] == true) {\r\n\t\t\tthis.keyDown[event.which] = false;\r\n\t\t\tthis.justPressed[event.which] = false;\r\n\t\t\tthis.justReleased[event.which] = true;\r\n\t\t\tthis.emit(\"!\" + event.which);\r\n\t\t}\r\n\t\tthis.chars = '';\r\n\t}\r\n\tdestroy() {\r\n\t\tthis.charEventCallback = null;\r\n\t\tthis.justPressedEventCallback = null;\r\n\t}\r\n\tisDown(event) {\r\n\t\tif (this.isPaused) return false;\r\n\t\treturn this.keyDown[event];\r\n\t}\r\n\r\n\tisJustPressed(event) {\r\n\t\tif (this.isPaused) return false;\r\n\t\tif (this.justPressed[event] == true) {\r\n\t\t\tthis.justPressed[event] = false;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tisJustReleased(event) {\r\n\t\tif (this.justReleased[event]) {\r\n\t\t\tthis.justReleased[event] = false;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tkeysDown() {\r\n\t\tconst kd = [];\r\n\t\tthis.keyDown.forEach((v, i) => {\r\n\t\t\tif (v) {\r\n\t\t\t\tkd.push(i);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn kd;\r\n\t}\r\n\r\n\tgetChars() {\r\n\t\tconst kd = this.chars;\r\n\t\tthis.chars = '';\r\n\t\treturn kd;\r\n\t}\r\n\r\n\tkeysPressed() {\r\n\t\tconst kd = [];\r\n\t\tthis.justPressed.forEach((v, i) => {\r\n\t\t\tif (v) {\r\n\t\t\t\tkd.push(i);\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.justPressed.splice();\r\n\t\treturn kd;\r\n\t}\r\n\r\n\treleaseAllKeys() {\r\n\r\n\t}\r\n\r\n\tkeysReleased() {\r\n\t\tconst kd = [];\r\n\t\tthis.justReleased.forEach((v, i) => {\r\n\t\t\tif (v) {\r\n\t\t\t\tkd.push(i);\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.justReleased.splice();\r\n\t\treturn kd;\r\n\t}\r\n}\r\n\r\nexport { KeyboardInput };\r\n","import \"babel-polyfill\";\r\nconst { app } = require('electron').remote;\n\tconst { exec } = require(\"child_process\");\r\nimport { report } from './main';\r\n\r\n'use strict';\r\n\r\nimport { strings } from './strings';\r\nimport { utils } from './utilities'\r\nimport { lang, ttsVoice, ttsRate } from './main';\r\nimport { KeyboardInput } from './input.js';\r\nimport { KeyEvent } from './keycodes';\r\nconst useWebTTS = true;\r\nimport Speech from 'speak-tts' // es6\r\nclass TTS {\r\n\tconstructor(webTTS = true) {\r\n\t\tthis.voices = []\r\n\t\tthis.speechController = new KeyboardInput();\r\n\t\tthis.speechController.init();\r\n\t\tthis.ducking = false;\r\n\t\tif (lang == 1) this.lang = \"en\";\r\n\t\tif (lang == 2) this.lang = \"es\";\r\n\t\tthis.webTTS = webTTS;\r\n\t\tthis.synth = new Speech()\r\n\t\tthis.rate = 3;\r\n\t\tthis.speechController.justPressedEventCallback = (key) => {\r\n\t\t\tif (this.interrupt) this.speak(\"\", false);\r\n\t\t\tif (key == KeyEvent.VK_SHIFT || key == KeyEvent.DOM_VK_ESCAPE) {\r\n\t\t\t\tthis.speak(\"\", false);\n\t\t\t\tif (this.childProcess) this.childProcess.kill()\n\t\t\t\tthis.unduck()\r\n\t\t\t}\n\t\t\tif (key == KeyEvent.VK_UP && this.speechController.isDown(KeyEvent.DOM_VK_SHIFT)) {\n//rate here\nthis.setRate(this.rate+1)\nstrings.speak('newRate');\n\t\t\t}\n\t\t\tif (key == KeyEvent.VK_DOWN && this.speechController.isDown(KeyEvent.DOM_VK_CONTROL)) {\n//rate here\nthis.setRate(this.rate+1)\nstrings.speak('newRate');\n\t\t\t}\n\t\t\t\n\t\t\t\r\n\t\t};\r\n\r\n\t\tthis.synth.init({\r\n\t\t\tlang: this.lang,\r\n\t\t\trate: this.rate,\r\n\t\t\tsplitSentences: false,\n\t\t\t'listeners': {\n\t\t\t}\n\r\n\t\t})\r\n\t\t\t.then((data) => {\n\t\t\t\tthis.voices = data.voices;\n\t\t\t}).catch(e => {\r\n\t\t\t\treport(e);\r\n\t\t\t})\r\n\t}\r\n\tsetLanguage(lang) {\n\r\n\t\ttry {\r\n\t\t\tif (lang == 1) this.lang = \"en\";\r\n\t\t\tif (lang == 2) this.lang = \"es\";\r\n\t\t\tthis.synth.setLanguage(this.lang)\n\t\t\tif (process.platform=='darwin') this.setVoice(null,true)\n\t\t\t\t\t\t\t\tconsole.log(\"default voice \",this.voice)\n\r\n\t\t} catch (err) {\r\n\t\t\treport(err);\r\n\t\t}\r\n\t}\r\n\tsetRate(r) {\r\n\t\tlet newRate = r;\r\n\t\tif (r < 1) newRate == 1;\r\n\t\tif (r > 10) newRate = 10;\r\n\t\tthis.rate = newRate;\r\n\t\tthis.synth.setRate(newRate);\r\n\t}\r\n\tspeak(text, queue = false) {\r\n\t\tlet sr = app.accessibilitySupportEnabled;\r\n\r\n\t\tif (sr) this.webTTS = false;\r\n\t\tif (!sr) this.webTTS = true;\n\t\tif (process.platform == 'darwin') this.webTTS=true\r\n\t\tif (this.webTTS) {\r\n\t\t\ttry {\n\t\t\t\tlet oldText=text;\r\n\t\t\t\tif (typeof text == \"number\") {\r\n\t\t\t\t\ttext = \" \"+text + \".\";\n\t\t\t\t\t//we need this because some voices fail to process numbers. Why? Don't ask me.\r\n\t\t\t\t}\n\t\t\t\tif (process.platform == 'darwin') {\n\t\t\t\t\tthis.speakUnthreaded(text)\n\t\t\t\t} else {\r\n\t\t\t\tthis.synth.speak({\r\n\t\t\t\t\ttext: text,\r\n\t\t\t\t\tqueue: queue,\r\n\t\t\t\t\tlisteners: {\r\n\t\t\t\t\t\tonstart: () => {\r\n\t\t\t\t\t\t\tthis.duck();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tonend: () => {\r\n\t\t\t\t\t\t\tthis.unduck();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tonerror: (err) => {\r\n\t\t\t\t\t\t\t//this.setVoice(null,true);\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t}\r\n\t\t\t\t})\n\t\t\t\t}\r\n\t\t\t} catch(e) {\n\t\t\t\tconsole.error(e)\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.duck();\r\n\t\t\tdocument.getElementById('speech').innerHTML = '';\r\n\t\t\tconst para = document.createElement('p');\r\n\t\t\tpara.appendChild(document.createTextNode(text));\r\n\t\t\tdocument.getElementById('speech').appendChild(para);\r\n\t\t}\r\n\t} // End speak()\r\n\r\n\tsetWebTTS(tts) {\r\n\t\tthis.webTTS = tts;\r\n\t}\r\n\r\n\tstop() {\r\n\t\tif (this.webTTS) {\r\n\t\t\tthis.synth.cancel();\r\n\t\t}\r\n\t}\r\n\tasync changeRate() {\r\n\t\tlet rate = speech.rate;\r\n\t\tconst inp = new KeyboardInput();\r\n\t\tinp.init();\r\n\t\tstrings.speak('rating');\r\n\t\twhile (!inp.isJustPressed(KeyEvent.DOM_VK_RETURN)) {\r\n\t\t\tawait utils.sleep(5);\r\n\t\t\tif (inp.isJustPressed(KeyEvent.DOM_VK_RIGHT)) {\r\n\t\t\t\trate += 0.25;\r\n\t\t\t\tif (rate > 10) rate = 10;\r\n\r\n\t\t\t\tspeech.setRate(rate)\r\n\t\t\t\tstrings.speak('newRate');\r\n\t\t\t}\r\n\t\t\tif (inp.isJustPressed(KeyEvent.DOM_VK_LEFT)) {\r\n\t\t\t\trate -= 0.25;\r\n\t\t\t\tif (rate < 1) rate = 1;\r\n\t\t\t\tspeech.setRate(rate)\r\n\t\t\t\tstrings.speak('newRate');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tchangeVoice(name) {\r\n\t\tlet voiceArray = []\r\n\t\tfor (var k in this.voices) {\r\n\t\t\tvoiceArray.push(this.voices[k].name)\r\n\t\t}\r\n\t\tif (voiceArray.includes(name)) {\r\n\t\t\tspeech.synth.setVoice(name);\n\t\t\tthis.voice=name\r\n\t\t}\r\n\r\n\t}\r\n\tsetVoice(cb, silent = false) {\r\n\t\t//what language do we want?\r\n\t\tlet wl = \"en\";\r\n\t\tif (lang == 1) wl = \"en\";\r\n\t\tif (lang == 2) wl = \"es\";\r\n\t\tlet voiceArray = []\r\n\t\tfor (var k in this.voices) {\r\n\t\t\t//get the first part of the voice languages\r\n\t\t\tlet vl = this.voices[k].lang.split(\"-\")[0]\r\n\t\t\t//do we want this language?\r\n\t\t\tif (vl == wl) {\r\n\t\t\t\tvoiceArray.push(this.voices[k].name)\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!silent) speech.speak(strings.get(\"selectVoice\", [voiceArray.length]));\r\n\t\tlet input = new KeyboardInput()\r\n\t\tlet selection = -1;\r\n\t\tinput.init();\r\n\t\tif (!silent) {\r\n\t\t\tinput.justPressedEventCallback = ((key) => {\r\n\t\t\t\tif (key == KeyEvent.DOM_VK_DOWN) {\r\n\t\t\t\t\tselection++;\r\n\t\t\t\t\tif (selection >= voiceArray.length) selection = 0;\r\n\t\t\t\t}\r\n\t\t\t\tif (key == KeyEvent.DOM_VK_UP) {\r\n\t\t\t\t\tselection--;\r\n\t\t\t\t\tif (selection <= -1) selection = voiceArray.length - 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (key != KeyEvent.DOM_VK_RETURN && (key == KeyEvent.DOM_VK_UP || key == KeyEvent.DOM_VK_DOWN)) { //dirty hack\r\n\t\t\t\t\tthis.synth.setVoice(voiceArray[selection]);\r\n\t\t\t\t\tspeech.speak(voiceArray[selection])\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t//it is enter\r\n\t\t\t\t\tif (selection != -1) { //don't crash if it's -1.\r\n\t\t\t\t\t\tinput.destroy();\r\n\t\t\t\t\t\tif (typeof cb !== \"undefined\") {\r\n\t\t\t\t\t\t\tcb(voiceArray[selection])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn voiceArray[selection]\r\n\t\t\t\t\t}\r\n\t\t\t\t}//enter action\r\n\t\t\t});//callback\r\n\t\t} //not silent\r\n\t\telse {\r\n\t\t\ttry {\r\n\t\t\t\tthis.synth.setVoice(voiceArray[0]);\n\t\t\t\tthis.voice=voiceArray[0]\r\n\t\t\t\treturn voiceArray[0];\r\n\t\t\t} catch (err) {\r\n\t\t\t\treport(err);\r\n\t\t\t\tthis.synth.setVoice(voiceArray[1]);\n\t\t\t\tthis.voice=voiceArray[1]\r\n\t\t\t\treturn voiceArray[1];\r\n\t\t\t} // catch block\r\n\t\t}//else\r\n\t}//function\r\n\tduck() {\r\n\t\tif (this.ducking) return;\r\n\t\tthis.ducking = true;\r\n\t\tif (typeof this.ducker !== \"undefined\") this.ducker.duck();\r\n\t}\r\n\tunduck() {\r\n\t\tthis.ducking = false;\r\n\t\tif (typeof this.ducker !== \"undefined\") this.ducker.unduck();\r\n\t}\r\nspeakUnthreaded(text) {\n\tlet rate=this.rate*100\nif (this.childProcess) this.childProcess.kill()\nthis.duck()\n\tthis.childProcess=exec('say \"'+text+'\" -r '+rate+ ' -v '+this.voice, (error, stdout, stderr) => {\n\t\tif (error) {\n\t\t\tthrow(`error: ${error.message}`);\n\t\t\treturn;\n\t\t}\n\t\tif (stderr) {\n\t\t\tconsole.log(`stderr: ${stderr}`);\n\t\t\treturn;\n\t\t}\n\t\tconsole.log(`stdout: ${stdout}`);\n\t\tthis.unduck();\n\t});\n}\r\n} // End class\r\nconst speech = new TTS(false);\r\nexport { TTS, speech };\r\n","import \"babel-polyfill\";\r\nimport { report } from './main';\r\nimport { speech } from './tts';\r\nimport panner from 'sono/effects/panner';\r\nconst EventEmitter = require('events');\r\nimport sono from 'sono';\r\nimport { KeyboardInput } from './input';\r\nimport { KeyEvent } from './keycodes';\r\nimport { utils } from './utilities';\r\npanner.defaults = {\r\n\tpanningModel: 'HRTF',\r\n\tmaxDistance: 50,\r\n};\r\nsono.playInBackground = true;\r\nvar playOnceTimer;\r\nclass SoundObjectItem extends EventEmitter {\r\n\tconstructor(file, callback = 0, tag = 0, stream = false) {\r\n\t\tsuper();\r\n\t\tthis.duckingFirstTime = true;\r\n\t\tthis.stream = stream;\r\n\t\tthis.panner = null;\r\n\t\tthis.fileName = file;\r\n\t\tif (typeof file == \"string\") {\r\n\t\t\tif (!stream) {\r\n\t\t\t\tthis.sound = sono.create({\r\n\t\t\t\t\tsrc: file,\r\n\t\t\t\t\tonComplete: () => { this.doneLoading(); }\r\n\t\t\t\t});\r\n\t\t\t\tthis.timeout = setTimeout(() => { this.checkProgress(); }, 2000);\r\n\t\t\t\tthis.loaded = false;\r\n\t\t\t\tthis.callback = callback;\r\n\t\t\t\tthis.tag = tag;\r\n\t\t\t}\r\n\t\t\tif (stream) {\r\n\t\t\t\tthis.loaded = true;\r\n\t\t\t\tthis.callback = callback;\r\n\t\t\t\tthis.tag = tag;\r\n\t\t\t\tthis.sound = sono.create(new Audio(file));\r\n\t\t\t\tthis.doneLoading();\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (typeof file == \"object\") {\r\n\t\t\tthis.sound = sono.create(\"\");\r\n\t\t\tthis.sound.data = file;\r\n\t\t\tthis.loaded = false;\r\n\t\t\tthis.callback = callback;\r\n\t\t\tthis.tag = tag;\r\n\t\t\tthis.doneLoading();\r\n\t\t}\r\n\r\n\r\n\t}\r\n\r\n\tget playbackRate() {\r\n\t\treturn this.sound.playbackRate\r\n\t}\r\n\r\n\tset playbackRate(v) {\r\n\t\treturn this.sound.playbackRate = v;\r\n\t}\r\n\tget pitch() {\r\n\t\treturn this.sound.playbackRate\r\n\t}\r\n\r\n\tset pitch(v) {\r\n\t\treturn this.sound.playbackRate = v;\r\n\t}\r\n\r\n\tset loop(v) {\r\n\t\tthis.sound.loop = v;\r\n\t}\r\n\r\n\tcheckProgress() {\r\n\t\tif (this.stream) return;\r\n\t\tif (this.sound.progress == 0) {\r\n\t\t\tthis.sound.destroy();\r\n\t\t\tthis.sound = sono.create({ src: this.fileName, onComplete: () => { this.doneLoading(); } }, this.stream);\r\n\t\t}\r\n\r\n\t\tif (this.sound.progress == 1) {\r\n\t\t\tthis.doneLoading();\r\n\t\t} else {\r\n\t\t\tthis.timeout = setTimeout(() => { this.checkProgress(); }, 500);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tdoneLoading() {\r\n\t\tif (!this.stream) clearTimeout(this.timeout);\r\n\t\tthis.loaded = true;\r\n\t\tif (this.callback != 0) {\r\n\t\t\tthis.callback();\r\n\t\t}\r\n\t}\r\n\treplay() {\r\n\t\tthis.sound.stop()\r\n\t\tthis.sound.play()\r\n\t}\r\n\tplay() {\r\n\t\t//sometimes, html element sounds complain about having a different connection, so wrap it in a try catch block.\r\n\t\ttry {\r\n\t\t\tthis.sound.play();\r\n\t\t} catch (err) {\r\n\t\t\t//report(err);\r\n\t\t\t//recreate the sound and replay\r\n\t\t\tif (this.stream) this.sound = sono.create(new Audio(this.fileName));\r\n\t\t\tif (!this.stream) this.sound = sono.create({\r\n\t\t\t\tsrc: this.fileName,\r\n\t\t\t\tonComplete: () => { this.doneLoading(); }\r\n\t\t\t});\r\n\t\t\tthis.sound.play();\r\n\t\t}\r\n\t}\r\n\tstop() {\r\n\t\tthis.sound.stop();\r\n\r\n\t}\r\n\tpause() {\r\n\t\tthis.sound.pause();\r\n\t}\r\n\tresume() {\r\n\t\tthis.sound.resume();\r\n\t}\r\n\tdestroy() {\r\n\t\ttry {\r\n\r\n\t\t\tthis.sound.destroy();\r\n\t\t} catch (err) {\r\n\r\n\t\t}\r\n\t}\r\n\tunload() { this.sound.destroy(); }\r\n\tduck(time) {\r\n\t\tif (this.duckingFirstTime) this.oldVolume = this.volume;\r\n\t\tthis.duckingFirstTime = false;\r\n\t\tthis.sound.fade(0.3, 0.15);\r\n\t}\r\n\tunduck(time) {\r\n\t\tthis.sound.fade(this.oldVolume, 0.15);\r\n\t}\r\n\tasync fade(time) {\r\n\t\tthis.sound.fade(0, time / 1000);\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.sound.stop();\r\n\t\t\t\tresolve('ok');\r\n\t\t\t}, time);// End\r\n\t\t});// Promise\r\n\r\n\t}\r\n\r\n\tpos(x, y, z) {\r\n\r\n\t}\r\n\r\n\tforcePlay() {\r\n\t\tthis.sound.stop();\r\n\t\tthis.sound.play();\r\n\t}\r\n\tasync playSync(die = false) {\r\n\t\tconst inp = new KeyboardInput();\r\n\t\tinp.init();\r\n\t\tthis.sound.play();\r\n\r\n\t\tinp.justPressedEventCallback = (evt => {\r\n\t\t\tif (evt == KeyEvent.DOM_VK_Q || evt == KeyEvent.DOM_VK_X || evt == KeyEvent.DOM_VK_ESCAPE || evt == KeyEvent.DOM_VK_SPACE || evt == KeyEvent.DOM_VK_ENTER) {\r\n\t\t\t\tthis.sound.stop();\r\n\t\t\t\tinp.justPressedEventCallback = null;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tthis.sound.once('ended', () => {\r\n\t\t\t\tthis.sound.removeAllListeners();\r\n\t\t\t\tif (die) this.sound.destroy();\r\n\t\t\t\tresolve('ok');\r\n\t\t\t\tinp.justPressedEventCallback = null;\r\n\t\t\t});// End\r\n\t\t\tthis.sound.once('stop', () => {\r\n\t\t\t\tthis.sound.removeAllListeners();\r\n\t\t\t\tif (die) this.sound.destroy();\r\n\t\t\t\tresolve('ok');\r\n\t\t\t\tinp.justPressedEventCallback = null;\r\n\t\t\t});// Stop\r\n\t\t});// Promise\r\n\t}\r\n\r\n\tget active() {\r\n\t\tif (!this.sound.loaded) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (this.sound.progress < 1) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (this.sound.loaded) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t}\r\n\tget playing() {\r\n\t\treturn this.sound.playing;\r\n\t}\r\n\r\n\tget pan() {\r\n\t\tif (!this.panner) {\r\n\t\t\tthis.panner = this.sound.effects.add(panner());\r\n\t\t\tthis.currentPan = 0;\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\treturn this.currentPan;\r\n\t}\r\n\r\n\tset pan(v) {\r\n\t\tif (!this.panner) {\r\n\t\t\tthis.panner = this.sound.effects.add(panner());\r\n\t\t}\r\n\t\tthis.currentPan = v;\r\n\t\treturn this.panner.set(v);\r\n\t}\r\n\tget volume() {\r\n\t\treturn this.sound.volume;\r\n\t}\r\n\tset volume(v) {\r\n\t\tthis.sound.volume = v;\r\n\t}\r\n\r\n\tseek(time) {\r\n\t\treturn this.sound.seek(time);\r\n\t}\r\n\r\n\tget currentTime() {\r\n\t\treturn this.sound.currentTime;\r\n\t}\r\n\r\n\tget duration() {\r\n\t\treturn this.sound.duration * 1000;\r\n\t}\r\n\r\n\tget position() {\r\n\t\treturn this.sound.currentTime;\r\n\t}\r\n\r\n\tset currentTime(v) {\r\n\t\treturn this.sound.seek(v);\r\n\t}\r\n\r\n}\r\n\r\nclass SoundObject {\r\n\tconstructor() {\r\n\t\tthis.sounds = new Array();\r\n\t\tthis.loadingQueue = false;\r\n\t\tthis.queueCallback = 0;\r\n\t\tthis.loadedSounds = 0;\r\n\t\tthis.loadingSounds = 0;\r\n\t\tthis.loadedCallback = 0;\r\n\t\tthis.queue = new Array();\r\n\t\tthis.queueLength = 0;\r\n\t\tthis.statusCallback = null;\r\n\t\tthis.directory = \"./sounds/\";\r\n\t\tthis.extension = \".ogg\";\r\n\t\tthis.oneShots = new Array();\r\n\t\tthis.debug = false;\r\n\r\n\r\n\t\tthis.oneShotSound = null;\r\n\t}\r\n\tsetStatusCallback(callback) {\r\n\t\tthis.statusCallback = callback;\r\n\t}\r\n\tfindSound(file) {\r\n\t\tfor (let i = 0; i < this.sounds.length; i++) {\r\n\t\t\tif (this.sounds[i].fileName == file && this.sounds[i].loaded) {\r\n\t\t\t\treturn this.sounds[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\tfindSoundIndex(file) {\r\n\t\tfor (const i in this.sounds) {\r\n\t\t\tif (this.sounds[i].fileName == file) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t}\r\n\r\n\r\n\tresetQueuedInstance() {\r\n\t\tfor (let i = 0; i < this.sounds.length; i++) {\r\n\t\t\tif (typeof this.sounds[i] != \"undefined\") {\r\n\t\t\t\tif (this.sounds[i].tag == 1) {\r\n\t\t\t\t\tthis.sounds[i].sound.destroy();\r\n\t\t\t\t\tthis.sounds.splice(i, 1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.loadingQueue = false;\r\n\t\tthis.queueCallback = 0;\r\n\t\tthis.loadedSounds = 0;\r\n\t\tthis.loadingSounds = 0;\r\n\t\tthis.loadedCallback = 0;\r\n\t\tthis.queue = new Array();\r\n\t\tthis.queueLength = 0;\r\n\t\tthis.statusCallback = null;\r\n\t}\r\n\r\n\r\n\r\n\tcreate(file, stream = false) {\r\n\t\tfile = this.directory + file + this.extension;\r\n\t\tlet found = -1;\r\n\t\tfound = this.findSound(file);\r\n\t\tlet returnObject = null;\r\n\t\tif (found == -1 || found.sound.data == null) {\r\n\t\t\treturnObject = new SoundObjectItem(file, () => { if (!stream) this.doneLoading(); }, 0, stream);\r\n\t\t\tthis.sounds.push(returnObject);\r\n\t\t} else {\r\n\t\t\treturnObject = new SoundObjectItem(found.sound.data, () => { if (!stream) this.doneLoading(); }, 0, stream);\r\n\t\t\treturnObject.fileName = found.fileName;\r\n\t\t}\r\n\t\treturnObject.fileName = file; //otherwise html element fileNames get fucked up.\r\n\t\treturn returnObject;\r\n\t}\r\n\tasync loadQueueSync() {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tso.setQueueCallback(() => {\r\n\t\t\t\tresolve(true);\r\n\t\t\t});\r\n\t\t\tso.loadQueue();\r\n\t\t});\r\n\t}\r\n\tasync createSync(file, stream = false) {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tfile = this.directory + file + this.extension;\r\n\t\t\tlet found = -1;\r\n\t\t\tfound = this.findSound(file);\r\n\t\t\tlet returnObject = null;\r\n\t\t\tif (found == -1 || found.sound.data == null) {\r\n\t\t\t\treturnObject = new SoundObjectItem(file, () => { if (!stream) this.doneLoading(); }, 0, stream);\r\n\t\t\t\tthis.sounds.push(returnObject);\r\n\t\t\t\tif (stream) resolve(returnObject);\r\n\t\t\t} else {\r\n\t\t\t\treturnObject = new SoundObjectItem(found.sound.data, () => { if (!stream) this.doneLoading(); }, 0, stream);\r\n\t\t\t\tresolve(returnObject);\r\n\t\t\t}\r\n\t\t\treturnObject.fileName = file; //otherwise html element fileNames get fucked up.\r\n\t\t\tif (stream) resolve(returnObject);\r\n\t\t\tif (!stream) {\r\n\t\t\t\treturnObject.sound.once('loaded', () => {\r\n\t\t\t\t\tresolve(returnObject);\r\n\t\t\t\t\tthis.doneLoading();\r\n\t\t\t\t});// End\r\n\t\t\t}//stream\r\n\t\t});// Promise\r\n\t}\r\n\tasync playSync(file) {\r\n\t\tlet snd = await so.createSync(file);\r\n\t\tawait snd.playSync();\r\n\t\tsnd.destroy();\r\n\t}\r\n\r\n\tenqueue(file, stream = false) {\r\n\t\tfile = this.directory + file + this.extension;\r\n\t\tthis.queue.push({ file, stream });\r\n\t\tthis.queueLength = this.queue.length;\r\n\t}\r\n\r\n\tloadQueue() {\r\n\r\n\t\tthis.handleQueue();\r\n\t\tthis.loadingQueue = true;\r\n\r\n\t}\r\n\tsetQueueCallback(callback) {\r\n\t\tthis.queueCallback = callback;\r\n\t}\r\n\tresetQueue() {\r\n\t\tthis.queue = [];\r\n\t\tthis.loadingQueue = false;\r\n\t}\r\n\thandleQueue() {\r\n\t\tif (this.queue.length > 0) {\r\n\t\t\tif (typeof this.statusCallback != \"undefined\" && this.statusCallback != null) {\r\n\t\t\t\tthis.statusCallback(1 - this.queue.length / this.queueLength);\r\n\t\t\t}\r\n\t\t\tif (this.findSound(this.queue[0].file) != -1) {\r\n\t\t\t\tthis.queue.splice(0, 1);\r\n\t\t\t\tthis.handleQueue();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet file = this.queue[0].file;\r\n\t\t\tlet stream = this.queue[0].stream;\r\n\t\t\tthis.queue.splice(0, 1);\r\n\t\t\tthis.sounds.push(new SoundObjectItem(file, () => { this.handleQueue(); }, 1, stream));\r\n\r\n\t\t} else {\r\n\t\t\tthis.loadingQueue = false;\r\n\t\t\tif (typeof this.queueCallback != \"undefined\" && this.queueCallback != 0) {\r\n\t\t\t\tthis.queueCallback();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\tsetCallback(callback) {\r\n\t\tthis.loadedCallback = callback;\r\n\t}\r\n\tdoneLoading() {\r\n\t\tlet result = this.isLoading();\r\n\r\n\t\tif (result == 1) {\r\n\r\n\t\t\tif (typeof this.loadedCallback != \"undefined\" && this.loadedCallback != 0 && this.loadedCallback != null) {\r\n\t\t\t\tthis.loadedCallback();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tisLoading() {\r\n\t\tlet loading = 0;\r\n\t\tthis.loadedSounds = 0;\r\n\t\tthis.loadingSounds = 0;\r\n\t\tlet stillLoading = new Array();\r\n\t\tfor (let i = 0; i < this.sounds.length; i++) {\r\n\t\t\tif (typeof this.sounds[i] != \"undefined\") {\r\n\t\t\t\tif (this.sounds[i].loaded == false) {\r\n\t\t\t\t\tthis.loadingSounds++;\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.loadedSounds++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this.loadedSounds / this.sounds.length;\r\n\t}\r\n\r\n\tplayOnce(file) {\r\n\t\tthis.oneShotSound = this.create(file).sound;\r\n\t\tthis.oneShotSound.stop();\r\n\t\tthis.oneShotSound.play();\r\n\t\tthis.oneShotSound.on(\"ended\", () => {\r\n\t\t\tif (this.oneShotSound.playing == false) this.oneShotSound.destroy();\r\n\t\t});\r\n\r\n\t}\r\n\tdestroy(file, callback = 0) {\r\n\t\tlet noMore = false;\r\n\t\tconst filename = this.directory + file + this.extension;\r\n\t\twhile (!noMore) {\r\n\t\t\tconst found = this.findSoundIndex(filename);\r\n\t\t\tif (found == -1) {\r\n\t\t\t\tnoMore = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.sounds[found].sound.unload();\r\n\t\t\t\tthis.sounds.splice(found, 1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (callback != 0) {\r\n\t\t\tcallback();\r\n\t\t}\r\n\t}\r\n\r\n\tkill(callback = 0) {\r\n\t\twhile (this.sounds.length > 0) {\r\n\t\t\tthis.sounds.splice(0, 1);\r\n\t\t}\r\n\r\n\t\tsono.destroyAll();\r\n\t\tif (callback != 0) {\r\n\t\t\tcallback();\r\n\t\t}\r\n\t}\r\n\r\n}\r\nexport let so = new SoundObject();","import \"babel-polyfill\";\r\n'use strict';\r\nimport $ from 'jquery';\r\nimport {KeyEvent} from './keycodes';\r\nimport {so} from './soundObject';\r\nimport {speech} from './tts';\r\nimport copy from 'copy-to-clipboard';\r\nif (runningText == undefined) {\r\n\tvar runningText = 0;\r\n}\r\nclass ScrollingText {\r\n\tconstructor(text, delimiter = '\\n', callback = 0) {\r\n\t\tthis.callback = callback;\r\n\r\n\t\tthis.text = text;\r\n\t\tthis.delimiter = delimiter;\r\n\t\tthis.splitText = this.text.split(delimiter);\r\n\t\tthis.currentLine = 0;\r\n\t\tthis.sndOpen = so.create('ui/textOpen');\r\n\t\tthis.sndContinue = so.create('ui/textScroll');\r\n\t\tthis.sndClose = so.create('ui/textClose');\r\n\t\tconst id = document.getElementById('touchArea');\r\n\t\t// This.hammer = new Hammer(id);\r\n\t\tthis.init();\r\n\t\tif (this.callback == 0) {\r\n\t\t\treturn this.prom = new Promise(resolve => {\r\n\t\t\t\t\tthis.res = resolve;\r\n\t\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tinit() {\r\n\t\tconst that = this;\r\n\t\trunningText = this;\r\n\t\tdocument.addEventListener('keydown', this.handleKeys);\r\n\t\t// This.hammer.on(\"swipeleft swiperight\", function() { that.handleTap(0); });\r\n\t\t// this.hammer.on(\"tap\", function() { that.handleTap(1); });\r\n\t\tthis.sndOpen.play();\r\n\t\tthis.currentLine = 0;\r\n\t\tthis.readCurrentLine();\r\n\t}\r\n\r\n\thandleKeys(event) {\r\n\t\tswitch (event.which) {\r\n\t\t\tcase KeyEvent.DOM_VK_UP:\r\n\t\t\tcase KeyEvent.DOM_VK_DOWN:\r\n\t\t\tcase KeyEvent.DOM_VK_LEFT:\r\n\t\t\tcase KeyEvent.DOM_VK_RIGHT:\r\n\t\t\t\trunningText.readCurrentLine();\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase KeyEvent.DOM_VK_C:\r\n\t\t\t\trunningText.copyCurrentLine();\r\n\t\t\t\tbreak;\r\n\t\t\tcase KeyEvent.DOM_VK_RETURN:\r\n\t\t\t\trunningText.advance();\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\thandleTap(action) {\r\n\t\tif (action == 0) {\r\n\t\t\tthis.readCurrentLine();\r\n\t\t}\r\n\r\n\t\tif (action == 1) {\r\n\t\t\tthis.advance();\r\n\t\t}\r\n\t}\r\n\r\n\treadCurrentLine() {\r\n\t\tif (this.splitText[this.currentLine][0] == '!') {\r\n\t\t\tconst str = this.splitText[this.currentLine].substr(1);\r\n\t\t\tconst snd = so.create(str, true);\r\n\t\t\tsnd.play();\r\n\t\t\tsnd.sound.once('end', () => {\r\n\t\t\t\t\tthis.advance();\r\n\t\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tspeech.speak(this.splitText[this.currentLine]);\r\n\t\t}\r\n\t}\r\ncopyCurrentLine() {\r\n\t\t\tcopy(this.splitText[this.currentLine]);\t\r\n\t\t\tthis.advance();\r\n}\r\n\r\n\tadvance() {\r\n\t\tif (this.currentLine < this.splitText.length - 1) {\r\n\t\t\tthis.currentLine++;\r\n\t\t\tthis.sndContinue.play();\r\n\t\t\tthis.readCurrentLine();\r\n\t\t} else {\r\n\t\t\tthis.sndClose.play();\r\n\t\t\tthis.sndClose.unload();\r\n\t\t\tthis.sndOpen.unload();\r\n\t\t\tthis.sndContinue.unload();\r\n\t\t\tdocument.removeEventListener('keydown', this.handleKeys);\r\n\t\t\t//\t\t\tThis.hammer.unload();\r\n\t\t\tif (this.callback != 0) {\r\n\t\t\t\tthis.callback();\r\n\t\t\t} else {\r\n\t\t\t\tthis.res();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\nexport {ScrollingText, speech};\r\n","'use strict';\r\nimport sono from 'sono';\r\nimport { so } from './soundObject';\r\nimport panner from 'sono/effects/panner';\r\npanner.defaults = {\r\n\tpanningModel: 'HRTF',\r\n\tmaxDistance: 50,\r\n};\r\n/** Simple wrapper for agk-soundobject to quickly create 3D sound sources.\r\n* @constructor\r\n\t* @param {string} file - the path to the file without base directory and extension.\r\n\t* @param {number} x - Initial X coordinate of the sound\r\n\t* @param {number} y - Initial Y coordinate of the sound\r\n\t* @param {number} z - Initial Z coordinate of the sound\r\n\t* @param {boolean} loop - True if the sound should loop\r\n\t* @return {object} A Sound Source object\r\n*/\r\nexport class SoundSource {\r\n\tconstructor(file, x = 0, y = 0, z = 0) {\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\t\tthis.sound = son.create(file);\r\n\t\tthis.pan = this.sound.effects.add(panner());\r\n\t\tthis.pos(this.x, this.y, this.z);\r\n\t\tthis.rate = 1;\r\n\t\tthis.speed = 0;\r\n\t\tthis.minRate = 0.8;\r\n\t\tthis.maxRate = 1.2;\r\n\t\tthis.toDestroy = false;\r\n\t\tthis.rateShiftSpeed = 0.015;\r\n\t\tthis.sound.currentPosition = 0;\r\n\t}\r\n\tset loop(v) {\r\n\t\tthis.sound.loop = v;\r\n\t}\r\n\t/** Plays the sound source */\r\n\tplay() {\r\n\t\t// This.sound.seek(0);\r\n\t\tthis.sound.play();\r\n\t}\r\n\r\n\t/** Positions the sound source in 3D space.\r\n\t* @param {number} x - The new X coordinate of the sound\r\n\t* @param {number} y - The new Y coordinate of the sound\r\n\t* @param {number} z - The new Z coordinate of the sound\r\n*/\r\n\tpos(x, y, z) {\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\t\tthis.pan.setPosition(x, y, z);\r\n\t}\r\n\r\n\t/** Empty update method */\r\n\tupdate() {\r\n\t}\r\n}","import { SoundSource } from './soundSource.js';\r\nimport { so } from './soundObject.js';\r\n\r\nclass SoundHandler {\r\n\tconstructor(directional = false) {\r\n\t\tthis.staticSounds = [];\r\n\t\tthis.dynamicSounds = [];\r\n\t\tthis.currentDynamicSound = 0;\r\n\t\tthis.maxDynamicSounds = 512;\r\n\t\tthis.currentStaticSound = 0;\r\n\t\tthis.maxStaticSounds = 512;\r\n\t\tthis.reuseSounds = true;\r\n\t\tthis.x = 0;\r\n\t\tthis.y = 0;\r\n\t\tthis.z = 0;\r\n\t\tthis.directional = directional;\r\n\t}\r\n\r\n\tplayStatic(file, loop = 1, slot = -1, stream = false) {\r\n\t\tif (slot = -1) {\r\n\t\t\tslot = this.findFreeStaticSlot();\r\n\t\t}\r\n\t\tthis.staticSounds[slot] = new SoundItem(file, this.directional, stream);\r\n\t\tif (loop == 1) {\r\n\t\t\tthis.staticSounds[slot].sound.loop = true;\r\n\t\t}\r\n\t\tthis.staticSounds[slot].sound.play();\r\n\t\treturn slot;\r\n\t}\r\n\r\n\tfindFreeStaticSlot() {\r\n\t\tfor (let i = 0; i < this.maxStaticSounds; i++) {\r\n\t\t\tif (this.staticSounds[i] == -1 || typeof this.staticSounds[i] === 'undefined') {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.currentStaticSound < this.maxStaticSounds) {\r\n\t\t\tthis.currentStaticSound++;\r\n\t\t\treturn this.currentStaticSound;\r\n\t\t}\r\n\t\tthis.currentStaticSound = 0;\r\n\t\treturn this.currentStaticSound;\r\n\t}\r\n\r\n\tfindFreeDynamicSlot() {\r\n\t\tfor (let i = 0; i < this.maxDynamicSounds; i++) {\r\n\t\t\tif (this.dynamicSounds[i] == -1 || typeof this.dynamicSounds[i] === 'undefined') {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.currentDynamicSound < this.maxDynamicSounds) {\r\n\t\t\tthis.currentDynamicSound++;\r\n\t\t\treturn this.currentDynamicSound;\r\n\t\t}\r\n\t\tthis.currentDynamicSound = 0;\r\n\t\treturn this.currentDynamicSound;\r\n\t}\r\n\r\n\tfindDynamicSound(file) {\r\n\t\tfor (let i = 0; i < this.dynamicSounds.length; i++) {\r\n\t\t\tif (this.dynamicSounds[i].file == file) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\r\n\tplay(file) {\r\n\t\tlet slot = 0;\r\n\r\n\t\tlet reuse = 0;\r\n\t\tif (this.reuseSounds) {\r\n\t\t\tslot = this.findDynamicSound(file);\r\n\t\t\treuse = true;\r\n\t\t}\r\n\t\tif (slot == -1 || this.reuseSounds == false) {\r\n\t\t\tslot = this.findFreeDynamicSlot();\r\n\t\t\treuse = false;\r\n\t\t}\r\n\t\tif (typeof this.dynamicSounds[slot] === 'undefined') {\r\n\t\t\tif (reuse == false) {\r\n\t\t\t\tthis.dynamicSounds[slot] = new SoundItem(file, this.directional);\r\n\t\t\t}\r\n\t\t} else if (reuse == false) {\r\n\t\t\tthis.dynamicSounds[slot].sound.destroy();\r\n\t\t\tthis.dynamicSounds[slot] = new SoundItem(file, directional);\r\n\t\t}\r\n\t\tthis.dynamicSounds[slot].sound.play();\r\n\t}\r\n\r\n\tupdate(position) {\r\n\t\tif (this.directional == true) {\r\n\t\t\tfor (let i = 0; i < this.dynamicSounds.length; i++) {\r\n\t\t\t\tthis.dynamicSounds[i].sound.pos(position.x, position.y, position.z);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdestroy() {\r\n\t\tfor (var i = 0; i < this.dynamicSounds.length; i++) {\r\n\t\t\tthis.dynamicSounds[i].destroy();\r\n\t\t\tthis.dynamicSounds.splice(i, 1);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < this.staticSounds.length; i++) {\r\n\t\t\tthis.staticSounds[i].destroy();\r\n\t\t\tthis.staticSounds.splice(i, 1);\r\n\t\t}\r\n\t}\r\n}\r\nclass SoundItem {\r\n\tconstructor(file, threeD = false, stream = false) {\r\n\t\tthis.file = file;\r\n\t\tthis.threeD = threeD;\r\n\t\tif (this.threeD == true) {\r\n\t\t\tthis.sound = new SoundSource(file, 0, 0, 0);\r\n\t\t} else {\r\n\t\t\tthis.sound = so.create(file, stream);\r\n\t\t}\r\n\t}\r\n\r\n\tdestroy() {\r\n\t\tthis.sound.destroy();\r\n\t}\r\n}\r\n\r\nexport { SoundHandler };\r\n","'use strict';\r\nimport { so } from './soundObject';\r\n\r\nimport { KeyboardInput } from './input';\r\nimport { KeyEvent } from './keycodes';\r\nimport { speech } from './tts';\r\nclass LanguageSelector {\r\n\tconstructor(element, callback) {\r\n\t\tthis.langs = [];\r\n\t\tthis.input = new KeyboardInput();\r\n\t\tthis.input.init();\r\n\t\tthis.langs.push(\"select a language. Selecciona un idioma.\");\r\n\t\tthis.langs.push(\"I want to play in English\");\r\n\t\tthis.langs.push(\"Quiero jugar en espaol.\");\r\n\t\tthis.id = document.getElementById(element);\r\n\t\tthis.callback = callback;\r\n\t\tthis.container = document.createElement('div');\r\n\t\tthis.buttons = [];\r\n\t\tthis.buttons[0] = document.createElement('div');\r\n\t\tthis.buttons[0].innerHTML = this.langs[0];\r\n\t\tthis.container.appendChild(this.buttons[0]);\r\n\t\tfor (let i = 1; i < this.langs.length; i++) {\r\n\t\t\tthis.buttons[i] = document.createElement('input');\r\n\t\t\tthis.buttons[i].type = 'button';\r\n\t\t\tthis.buttons[i].value = this.langs[i];\r\n\t\t\tthis.buttons[i].addEventListener('click', () => {\r\n\t\t\t\tthis.sound.stop()\r\n\t\t\t\tthis.callback(i);\r\n\t\t\t\tthis.container.innerHTML = '';\r\n\t\t\t\tthis.input.removeAllListeners();\r\n\t\t\t\tdocument.getElementById(\"app\").focus();\r\n\t\t\t});\r\n\t\t\tthis.buttons[i].addEventListener('focus', () => {\r\n\t\t\t\tthis.sound.stop();\r\n\t\t\t\tspeech.setLanguage(i);\r\n\t\t\t\tspeech.speak(this.langs[i]);\r\n\t\t\t});\r\n\t\t\tthis.container.appendChild(this.buttons[i]);\r\n\t\t\tthis.input.once(\"chr\" + i, () => {\r\n\t\t\t\tthis.sound.stop()\r\n\t\t\t\tthis.callback(i);\r\n\t\t\t\tthis.container.innerHTML = '';\r\n\t\t\t\tthis.input.removeAllListeners();\r\n\t\t\t\tdocument.getElementById(\"app\").focus();\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.id.appendChild(this.container);\r\n\t\tthis.sound = so.create(\"ui/langSelect\");\r\n\t\tthis.sound.play();\r\n\r\n\t}\r\n}\r\nmodule.exports.LanguageSelector = LanguageSelector;\r\n","function Timer(callbacks, step) {\r\n\tlet last = 0;\r\n\tlet active = false;\r\n\tlet acc = 0;\r\n\tlet tick = 0;\r\n\tlet inc = step || 1 / 120;\r\n\tlet frameId;\r\n\r\n\tfunction onFrame(time) {\r\n\t\tif (last !== null) {\r\n\t\t\tacc += (time - last) / 1000;\r\n\t\t\twhile (acc > inc) {\r\n\t\t\t\tcallbacks.update(inc, tick);\r\n\t\t\t\ttick += 1;\r\n\t\t\t\tacc -= inc;\r\n\t\t\t}\r\n\t\t}\r\n\t\tlast = time;\r\n\t\tcallbacks.render();\r\n\t\tif (active) {\r\n\t\t\tframeId = requestAnimationFrame(onFrame);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction start() {\r\n\t\tlast = null;\r\n\t\tactive = true;\r\n\t\tframeId = requestAnimationFrame(onFrame);\r\n\t}\r\n\r\n\tfunction stop() {\r\n\t\tactive = false;\r\n\t\tcancelAnimationFrame(frameId);\r\n\t}\r\n\tfunction change(value) {\r\n\t\tinc = value || 1 / 60;\r\n\t\tacc = inc;\r\n\t\ttick = 0;\r\n\t\tstop();\r\n\t\tstart();\r\n\t}\r\n\treturn {\r\n\t\tstart,\r\n\t\t\tstop,\r\n\t\t\tchange\r\n\t};\r\n}\r\n\r\nmodule.exports = Timer;\r\n","const EventEmitter = require('events')\r\nexport class GameObject extends EventEmitter {\r\n\r\n    constructor(world, sound, x, y, z, width, height, depth) {\r\n        super()\r\n        this.world = world\r\n        this.alive = true\r\n        this.x = x\r\n        this.y = y\r\n        this.z = z\r\n        if (sound != \"\") {\r\n            this.sound = document.createElement(\"audio\")\r\n            this.sound.src = \"./sounds/\" + sound + \".ogg\"\r\n            this.mediaSource = this.world.context.createMediaElementSource(this.sound)\r\n            this.source = this.world.scene.createSource();\r\n            this.source.sourceWidth = width;\r\n            this.source.sourceHeight = height\r\n            this.source.sourceDepth = depth;\r\n            this.mediaSource.connect(this.source.input);\r\n            this.source.setPosition(this.x, this.y, this.z)\r\n            this.sound.play()\r\n            this.sound.loop = true\r\n\r\n        }\r\n    }\r\n    update() {\r\n\r\n    }\n    destroy() {\n        if (this.sound != \"\") {\n        this.sound.pause()\n        }\n    }\r\n}","import { GameObject } from './gameObject'\r\nimport { utils } from './utilities'\r\nimport { speech } from './tts'\r\nexport class Item extends GameObject {\r\n    constructor(world, x, y, sound) {\r\n        super(world, sound, x, y, 0, 1, 1, 1)\r\n        this.world.player.on(\"step\" + this.y, (() => {\r\n            if (this.world.player.x == this.x) this.step()\r\n        }))\r\n        this.world.player.on(\"step\" + (this.y + 1), (() => {\r\n            this.destroy()\r\n        }))\r\n        this.world.player.on(\"x\" + this.x, (() => {\r\n            if (!this.alive) return;\r\n            let distance = Math.round(utils.distance(this.world.player.x, this.world.player.y, this.x, this.y))\r\n            if (distance < 8) {\r\n                this.world.player.target.replay()\r\n            }\r\n        }))\r\n    }\r\n    step() {\r\n    }\r\n    destroy() {\r\n        this.alive = false;\r\n    }\r\n    update() {\r\n\r\n    }\r\n}","import { Item } from './item'\r\nimport { data, save } from './main'\r\nimport { speech } from './tts'\r\nexport class Coin extends Item {\r\n    constructor(world, x, y) {\r\n        super(world, x, y, \"loop/coin\")\r\n    }\r\n    step() {\r\n        this.world.player.coins+=this.world.game.level\r\n        this.world.game.pool.playStatic(\"player/getCoin\",0)\r\n        data.coins = this.world.player.coins\r\n        save()\r\n        this.alive = false\r\n    }\r\n}","import { GameObject } from './gameObject'\r\nimport { utils } from './utilities'\r\nimport { speech } from './scrollingText';\r\n\r\nexport class Tile {\r\n    constructor(world, pos, type, name) {\r\n        this.y = pos;\r\n        this.type = type;\r\n        this.hasSomething = false\r\n        this.world = world;\r\n        this.name = name;\r\n        this.alive = true\r\n        this.world.player.on(\"step\" + this.y, (() => {\r\n            this.step()\r\n        }))\r\n    }\r\n    step() {\r\n        let scoreType = this.type\r\n        if (this.type == 0) scoreType = 1;\r\n        let score = scoreType * this.world.player.currentSpeed\r\n        if (this.type != 2) {\r\n            clearInterval(this.world.player.scoreTimeout)\r\n            this.world.player.levelCap = this.world.game.level\r\n            if (this.world.player.levelCap > 15) this.levelCap = 15\r\n\r\n        }\r\n        this.world.game.pool.playStatic(\"steps/\" + this.name + utils.randomInt(1, 3), 0)\r\n        this.world.player.tileType = this.type\r\n    }\r\n    update() {\r\n\r\n    }\r\n    destroy() {\r\n\r\n    }\r\n}","import { GameObject } from './gameObject'\r\nimport {utils} from './utilities'\r\nimport { Tile } from './tile'\r\nexport class Street extends Tile {\r\n    constructor(world, pos) {\r\n        super(world, pos, 0, \"street\")\r\n    }\r\n    step() {\r\n        super.step()\r\n    }\r\n}","import { GameObject } from './gameObject'\r\nimport { Tile } from './tile'\r\nimport { speech } from './tts'\r\nexport class Objective extends Tile {\r\n    constructor(world, pos) {\r\n        super(world, pos, 2, \"objective\")\r\n    }\r\n    destroy() {\r\n\r\n    }\r\n    step() {\r\n        super.step()\r\n        this.world.game.pool.playStatic(\"steps/objective\", 0)\r\n        this.world.player.scoreTimeout = setInterval(() => {\r\n            this.world.player.scoreDeduct()\r\n        }, 1300 - (this.world.player.levelCap * 75))\r\n        this.world.generateTiles()\n        this.world.game.score+=(100*this.world.game.level)\r\n        this.world.player.slowDown(10)\r\n    }\r\n}","import { GameObject } from './gameObject'\r\nimport { utils } from './utilities'\r\nimport { speech } from './tts'\r\nexport class StationaryObject extends GameObject {\r\n    constructor(world, y, sound, loop=false, x=0) {\r\n        super(world, sound, x, y, 0, 1, 1, 1)\n        this.sound.loop=loop\n    }\r\n}","import { GameObject } from \"./gameObject\";\nimport {StationaryObject} from './stationaryObject'\r\nimport { utils } from \"./utilities\";\r\nimport { speech } from \"./tts\";\r\nimport { save, data, content } from \"./main\";\r\nexport class Car extends GameObject {\r\n  constructor(\r\n    world,\r\n    tile,\r\n    x,\r\n    y,\r\n    width,\r\n    height,\r\n    depth,\r\n    sound = \"car\",\r\n    speed,\r\n    side,\r\n    z = 1,\r\n    canHorn = \"\",\r\n    name, blowUp=\"\"\r\n  ) {\r\n    super(world, sound, x, y, z, width, height, depth);\n    this.blowUpSound=blowUp\n    console.log(this.blowUpSound)\n    this.world.player.on(\"blowup\", (()=> {\n      \n      if (!this.alive || (this.x<-10 && this.x>10)) return;\n      this.alive = false;\n      if (this.blowUpSound!=\"\") new StationaryObject(this.world, this.world.player.y+2, \"blowup/\"+this.blowUpSound, false, this.x)\n            if (this.blowUpSound==\"\") new StationaryObject(this.world, this.world.player.y+2, \"blowup/generic\", false, this.x)\n            if (typeof data.bulletGallery===\"undefined\") {\n              data.bulletGallery={}\n            }\n              if (this.blowUpSound!=\"\") data.bulletGallery[this.blowUpSound]=true\nsave()\n      if (this.canHorn != \"\") this.hornSound.pause();\n      this.tile.hasSomething = false;\n      this.world.game.score+=(this.speed*1500)\n    }));\n\r\n    this.name = name;\r\n    this.speed = speed;\r\n    this.passed = false;\r\n    this.side = side;\r\n    this.tile = tile;\r\n    this.tile.hasSomething = true;\r\n    this.canHorn = canHorn;\r\n    if (this.canHorn != \"\") {\r\n      if (this.canHorn == 1) this.canHorn = this.name;\r\n      this.hornSound = document.createElement(\"audio\");\r\n      this.hornSound.src = \"./sounds/horn/\" + this.name + \".ogg\";\r\n      this.hornSource = this.world.context.createMediaElementSource(\r\n        this.hornSound\r\n      );\r\n      this.hornResonanceSource = this.world.scene.createSource();\r\n      this.hornSource.connect(this.hornResonanceSource.input);\r\n      //horn follows the player because a it plays only if player is on the road and b we want the player to feel trapped on the road by this honking car since that's what happens\r\n      this.hornResonanceSource.setPosition(this.x, this.world.player.y, this.z);\r\n      this.hornSound.loop = true;\r\n    }\n  }\r\n  update() {\r\n    if (this.side == 2) this.x += this.speed;\r\n    if (this.side == 1) this.x -= this.speed;\r\n    if (this.x >= this.world.size / 2 || this.x <= (this.world.size / 2) * -1) {\r\n      this.alive = false;\r\n      if (this.canHorn != \"\") this.hornSound.pause();\r\n      this.tile.hasSomething = false;\r\n    } else {\r\n      //ok, player spans the entire road. So the car sound should equally follow the player to make him feel trapped.\r\n      if (this.world.player.tileType != 1)\r\n        this.source.setPosition(this.x, this.y, this.z);\r\n      if (this.world.player.tileType == 1)\r\n        this.source.setPosition(this.x, this.world.player.y, this.z);\r\n      if (\r\n        this.passed ||\r\n        (this.canHorn != \"\" && this.y != this.world.player.y)\r\n      ) {\r\n        if (this.canHorn != \"\") this.hornSound.pause();\r\n      }\r\n      if (\r\n        !this.passed &&\r\n        this.canHorn != \"\" &&\r\n        this.world.player.tileType == 1\r\n      ) {\r\n        this.hornResonanceSource.setPosition(this.x, this.y, this.z);\r\n        this.hornSound.play();\r\n      }\r\n      if (!this.world.player.jump) {\r\n        if (!this.passed) {\r\n          if (\r\n            Math.round(this.x) == this.world.player.x &&\r\n            this.world.player.tileType != 1\r\n          ) {\r\n            this.passed = true;\r\n            this.tile.hasSomething = false;\r\n            //let score = Math.round(this.speed * (1000 * this.world.game.level));\r\n            //if (this.world.player.tileType != 2) {\r\n//              this.world.game.score += score;\r\n//              speech.speak(score);\r\n            //}\r\n            if (typeof this.tile.timeout !== \"undefined\") {\r\n              clearTimeout(this.tile.timeout);\r\n            }\r\n            this.tile.timeout = setTimeout(() => {\r\n              this.tile.generateCar(\r\n                utils.randomInt(1, content.numberOfVehicles)\r\n              );\r\n            }, utils.randomInt(0, this.world.game.spawnTime - this.world.game.level * 100));\r\n          }\r\n          if (\r\n            !this.passed &&\r\n            this.alive &&\r\n            Math.round(this.x) == this.world.player.x &&\r\n            this.world.player.tileType == 1\r\n          ) {\r\n            if (data.jumps >= 1) {\r\n              this.world.game.pool.playStatic(\"bonus/hyperjump\", 0);\r\ndata.jumps--;\n              this.world.player.flyTo(this.world.player.nearestObjective,\r\n                3,\r\n                \"air\"\r\n              );\r\n            } else {\r\n              let healthLoss = Math.round(this.speed * 45);\r\n              this.world.player.hp -= healthLoss;\r\n              this.world.player.hit();\r\n              this.world.player.flyTo(\r\n                utils.randomInt(\r\n                  this.world.player.nearestStreet,\r\n                  this.world.player.furthestStreet\r\n                ),\r\n                this.side,\r\n                \"air\"\r\n              );\r\n            }\r\n            this.passed = true;\r\n            this.tile.hasSomething = false;\r\n          }\r\n          if (typeof this.tile.timeout !== \"undefined\") {\r\n            clearTimeout(this.tile.timeout);\r\n          }\r\n          this.tile.timeout = setTimeout(() => {\r\n            this.tile.generateCar(utils.randomInt(1, content.numberOfVehicles));\r\n          }, utils.randomInt(0, this.world.game.spawnTime - this.world.game.level * 100));\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { GameObject } from './gameObject'\r\nimport { Car } from './car'\r\nimport { debug } from './main'\r\nimport { parsedCars, content } from './main'\r\nimport { utils } from './utilities'\r\nimport { Tile } from './tile'\r\nimport { speech } from './tts'\r\nexport class Road extends Tile {\r\n    constructor(world, pos, generator = false) {\r\n        super(world, pos, 1, \"road\")\r\n        this.generator = generator\r\n        this.timeout = setTimeout(() => {\r\n            if (!debug) this.generateCar(utils.randomInt(1, content.numberOfVehicles))\r\n        }, utils.randomInt(0, this.world.game.spawnTime - (this.world.game.level * 100)))\r\n    }\r\n    generateCar(force) {\r\n        if (!this.generator || !this.alive) return;\r\n        if (typeof this.timeout !== \"undefined\") clearTimeout(this.timeout)\r\n        this.timeout = setTimeout(() => {\r\n            if (!debug) this.generateCar(utils.randomInt(1, content.numberOfVehicles))\r\n        }, utils.randomInt(0, this.world.game.spawnTime - (this.world.game.level * 100)))\r\n        if (this.hasSomething) return;\r\n        let side = utils.randomInt(1, 2)\r\n        let size = this.world.size / 2\r\n        if (side == 1) size = size * 1\r\n        if (side == 2) size = size * -1\r\n        let carType = force\r\n        try {\r\n            this.world.dynamicObjects.push(new Car(this.world, this, size, this.y, 2, 1, 2, parsedCars[carType].sound, parsedCars[carType].speed, side, parsedCars[carType].z, parsedCars[carType].hornable, parsedCars[carType].name, parsedCars[carType].blowup))\r\n        } catch (e) {\r\n            speech.speak(\"Error generating car \" + carType + \": \" + e)\r\n        }\r\n        this.hasSomething = true\r\n    }\r\n    destroy() {\r\n        if (typeof this.timeout !== \"undefined\") clearTimeout(this.timeout)\r\n    }\r\n    step() {\r\n        super.step()\r\n        this.world.player.stepProgress.pitch = utils.getProportion(this.y, this.world.player.nearestRoad, this.world.player.furthestRoad, 0.3, 1.7)\r\n        this.world.player.stepProgress.replay()\r\n    }\r\n}","export class Effect {\r\n    constructor(world, name, time, onFunction, ofFunction) {\r\n        this.world = world\r\n        this.world.game.pool.playStatic(\"effects/\" + name, 0)\r\n        onFunction()\r\n        setTimeout(() => {\r\n            ofFunction()\r\n            this.world.game.pool.playStatic(\"effects/\" + name + \"Off\", 0)\r\n        }, time)\r\n    }\r\n}","import { Item } from './item'\r\nimport { Effect } from './effect'\r\nimport { utils } from './utilities'\r\nimport { strings } from './strings'\r\nimport { getUnlock, setUnlock, data, save, content } from './main'\r\nimport { speech } from './tts'\r\nexport class Bonus extends Item {\r\n    constructor(world, x, y) {\r\n        super(world, x, y, \"loop/bonus\")\r\n    }\r\n    step() {\n        if (!this.alive) return;\r\n        this.alive = false\n        let bonuses=[1,4]\n        if (getUnlock(\"hyperjump\")) bonuses.push(2)\n        if (!this.world.player.forceSpeed) bonuses.push(3)\n        if (!this.world.player.forceSpeed) bonuses.push(6)        \n        if (getUnlock(\"bombs\")) bonuses.push(5)\nlet        bonusType=utils.randomElement(bonuses)\r\n        switch (bonusType) {\r\n\r\n            case 1:\r\n                this.world.game.pool.playStatic(\"bonus/health\", 0)\r\n                this.world.player.hp += 25\r\n                break;\r\n            case 2:\r\n                this.world.game.pool.playStatic(\"bonus/hyperjump\", 0)\r\n                data.jumps++\r\n                break;\r\n            case 3:\r\n                    let crawl = new Effect(this.world, \"crawl\", 20000, (() => {\r\n                        this.oldSpeed = this.world.player.currentSpeed\r\n                        this.world.player.slowDown(10)\r\n                        this.world.player.speedUp(6)\r\n                        this.world.player.forceSpeed = true\r\n                        this.world.player.forcedSpeed = 6\r\n                    }), (() => {\n                        this.world.player.forceSpeed = false\n                        this.world.player.slowDown(10)\n                        this.world.player.speedUp(this.oldSpeed)\r\n                    }))\r\n                break;\n                //case 4 is fake bonus so default\n                case 5:\n                data.bombs++;\n                this.world.game.pool.playStatic(\"bonus/bomb\",false)\n                break;\n                case 6: \n                let speedUp = new Effect(this.world, \"speed\", 20000, this.coffeeOn(this), this.coffeeOff(this))\n                \n                break;\n                default:\n                this.world.game.pool.playStatic(\"bonus/fake\", 0)\nbreak;\r\n        }\r\n        setTimeout(() => {\r\n            speech.speak(strings.get(\"bonus\" + bonusType))\r\n        }, 280)\r\n        save()\r\n    }\n    coffeeOn(that) {\n        that.oldSpeed = that.world.player.currentSpeed\n        that.world.player.slowDown(10)\n        that.world.player.speedUp(7)\n        that.world.player.forceSpeed = true\n        that.world.player.forcedSpeed = 7\n\n    }\n    coffeeOff(that) {\n        that.world.player.forceSpeed = false\n        that.world.player.slowDown(10)\n    that.world.player.speedUp(that.oldSpeed)\n    }\r\n}","import { GameObject } from './gameObject'\nimport {StationaryObject} from './stationaryObject'\r\nimport { KeyEvent } from './keycodes.js'\r\nimport { so } from './soundObject'\r\nimport { speech } from './tts';\r\nimport { utils } from './utilities'\r\nimport {getUnlock,  data, debug } from './main'\r\nconst EventEmitter = require('events');\r\nexport class Player extends GameObject {\r\n    constructor(world) {\r\n        super(world, \"\", 0, 0, 1.6, 1, 0.5, 1.6)\r\n        this.playerHitSound = so.create(\"player/hit\")\r\n        this.forceSpeed = false\r\n        this.stepProgress = so.create(\"steps/progress\")\r\n        this.target = so.create(\"player/target\")\r\n        this.coins = 0\r\n        if (data.coins) this.coins = data.coins;\r\n        this.jumps = 0;\r\n        if (data.jumps) this.jumps = data.jumps\r\n        this.center = so.create(\"ui/center\")\r\n        this.xLimit = Math.ceil(this.world.size / 10)\r\n        this.fallTime = 55\r\n        this.world.scene.setListenerPosition(this.x, this.y, this.z)\r\n        this.unableToMove = false\r\n        this.hp = 100\r\n        this.speedUpSound = so.create(\"ui/speedUp\")\r\n        this.nearestStreet = 0\r\n        this.nearestRoad = 0\r\n        this.nearestObjective = 0\r\n        this.furthestStreet = 0\r\n        this.furthestRoad = 0\r\n\r\n        this.speedDownSound = so.create(\"ui/speedDown\")\r\n        this.speed = 650\r\n        //speed 0 is unused, speeds 1 to 5 are manually attainable, speed 6 is a crawl and speed 7 is super speed.\r\n        this.speeds = [\r\n            0, 650, 530, 420, 350, 235, 890, 120\r\n        ]\r\n        this.speedModifier = 0\r\n        this.currentSpeed = 0\r\n    }\r\n    move() {\r\n        if (this.unableToMove) return;\r\n        this.speedTimeout = setTimeout(() => {\r\n            this.move()\r\n        }, this.speeds[this.currentSpeed] - this.speedModifier)\r\n        if (this.currentSpeed == 0) this.currentSpeed = 1;\r\n        this.xLimit = Math.ceil(this.world.size / 8)\r\n        this.y += 1\r\n\r\n        this.emit(\"step\" + this.y)\r\n        if (this.world.game.input.isDown(KeyEvent.DOM_VK_RIGHT)) {\r\n            this.x++;\r\n            if (this.x > 0 + this.xLimit) this.x = 0 + this.xLimit\r\n            if (this.x == this.world.size / 2) this.center.replay();\r\n        }\r\n        if (this.world.game.input.isDown(KeyEvent.DOM_VK_LEFT)) {\r\n            this.x--;\r\n            if (this.x < 0 - this.xLimit) this.x = 0 - this.xLimit\r\n            if (this.x == this.world.size / 2) this.center.replay();\r\n        }\r\n        this.world.scene.setListenerPosition(this.x, this.y, this.z)\r\n        this.emit(\"x\" + this.x)\r\n    }\r\n    speedUp(number = 1) {\r\n        if (this.forceSpeed) return;\r\n        if (this.unableToMove) return;\r\n        if (this.currentSpeed == 0) {\r\n            this.speedUpSound.pitch = utils.getProportion(1, 1, 5, 0.8, 1.2)\r\n            this.speedUpSound.replay()\r\n            this.move()\r\n        }\r\n        this.currentSpeed += (number - 1);\r\n        if (this.currentSpeed > 7) this.currentSpeed = 7\r\n        this.speedUpSound.pitch = utils.getProportion(this.currentSpeed, 1, 5, 0.8, 1.2)\r\n        this.speedUpSound.replay()\r\n    }\r\n    slowDown(number = 1) {\r\n        if (this.forceSpeed) return;\r\n        if (this.unableToMove) return;\r\n        this.currentSpeed -= number;\r\n        //we don't want the player to be able to stop with the down arrow key, but if some item is forcing the player to stop, we can allow it.\r\n        if (number == 1 && this.currentSpeed == 0) this.currentSpeed = 1;\r\n        if (this.currentSpeed <= 0) {\r\n            this.currentSpeed = 0;\r\n            if (typeof this.speedTimeout !== \"undefined\") clearTimeout(this.speedTimeout)\r\n        }\r\n        if (number == 1) this.speedDownSound.pitch = utils.getProportion(this.currentSpeed, 1, 5, 0.8, 1.2)\r\n        if (number == 1) this.speedDownSound.replay()\r\n    }\r\n    hit() {\r\n        this.playerHitSound.play()\r\n        this.world.game.pool.playStatic(\"player/impact/\" + utils.randomInt(1, 4), 0)\r\n\r\n    }\r\n    flyTo(y, side, snd) {\r\n        if (this.unableToMove) return;\r\n        this.tileType = -1\r\n        this.unableToMove = true\r\n        let heart = so.create(\"player/heart\")\r\n        heart.play()\r\n        let sound = so.create(snd)\r\n        sound.loop = true\r\n        sound.volume = 0.3\r\n        let land = so.create(\"player/land\")\r\n        let fall = so.create(\"player/fall\" + utils.randomInt(1, 4))\r\n        let stand = so.create(\"player/stand\")\r\n        sound.pitch = 0.7\r\n        sound.play()\r\n        sound.loop = true\r\n        heart.loop = true\r\n        this.slowDown(10)\r\n        let z = utils.randomInt(11, 21)\r\n\r\n        let x;\r\n        let jump = false\r\n        if (side == 1) x = -1;\r\n        if (side == 2) x = 1\r\n        if (side == 3) {\r\n            jump = true;\r\n            this.jump = true;\r\n            z = utils.randomInt(5, 10)\r\n        }\r\n        this.interval = setInterval(() => {\r\n            if (!jump) this.x += (x * utils.randomInt(3, 5))\r\n            if (this.x < 0 - this.world.size / 2) {\r\n                x = 1\r\n                this.world.game.pool.playStatic(\"player/wall\" + utils.randomInt(1, 3), 0)\r\n            }\r\n            if (this.x > this.world.size / 2) {\r\n                x = -1\r\n                this.world.game.pool.playStatic(\"player/wall\" + utils.randomInt(1, 3), 0)\r\n            }\r\n            sound.pitch += 0.07\r\n            if (this.y > y) {\r\n                this.y -= 0.5;\r\n            }\r\n            if (this.y < y) {\r\n                this.y += 0.5;\r\n            }\r\n            this.z += 1;\r\n            if (this.z >= z) {\r\n                this.y = y;\r\n                clearInterval(this.interval)\r\n                this.interval = setInterval(() => {\r\n                    this.z -= 1;\r\n                    sound.pitch -= 0.07\r\n                    if (this.z <= 0) {\r\n                        this.tileType = 0\r\n                        clearInterval(this.interval)\r\n                        if (jump) {\r\n                            land.play()\r\n                            this.z = 1.6\r\n                            this.jump = false\r\n                            this.unableToMove = false;\r\n                            heart.stop();\r\n                            if (this.forceSpeed) {\r\n                                this.forceSpeed = false\r\n                                this.speedUp(this.forcedSpeed)\r\n                                this.forceSpeed = true\r\n                            }\r\n                        }\r\n                        if (!jump) {\r\n                            this.x = 0\r\n                            fall.play()\r\n                            this.z = 0\r\n                            setTimeout(() => {\r\n                                stand.replay()\r\n                                heart.stop();\r\n                                stand.sound.on(\"ended\", (() => {\n                                    this.z = 1.6\r\n                                    this.jump = false\r\n                                    this.unableToMove = false;\r\n                                    if (this.forceSpeed) {\r\n                                        this.forceSpeed = false\r\n                                        this.slowDown(10)\n                                        this.forceSpeed=true\r\n                                    } else {\r\n                                        this.slowDown(10)\r\n                                    }\n                                    \r\n                                    if (this.forceSpeed) {\r\n                                        this.forceSpeed = false\r\n                                        this.speedUp(this.forcedSpeed)\n                                        this.forceSpeed=true\r\n                                    }\r\n                                }))\r\n                                this.world.scene.setListenerPosition(this.x, this.y, this.z)\r\n                            }, utils.randomInt(1000, 2000))\r\n                        }\r\n                        this.world.scene.setListenerPosition(this.x, this.y, this.z)\r\n                        sound.stop()\r\n                        //heart.stop()\r\n                        this.x = 0\r\n                        this.emit(\"step\" + this.y)\r\n                        //if (this.forceSpeed) this.speedUp(this.forcedSpeed)\r\n                    }\r\n                    this.world.scene.setListenerPosition(this.x, this.y, this.z)\r\n                }, this.fallTime)\r\n            }\r\n            this.world.scene.setListenerPosition(this.x, this.y, this.z)\r\n        }, this.fallTime * 1.2)\r\n    }\r\n    scoreDeduct() {\r\n        this.world.game.tick.replay()\r\n        this.world.game.score -= (100 * this.world.game.level)\r\n        if (this.world.game.score < 0) this.world.game.score = 0\r\n        this.levelCap = this.world.game.level\r\n        if (this.levelCap > 15) this.levelCap = 15\r\n    }\n    throwBomb() {\n        try {\n    new StationaryObject(this.world,this.y+0.5, \"bomb_drop\")\n    let fusetime=1000     \n    if (getUnlock(\"shortfuse\")) fusetime=fusetime/3\n    let sound=so.create(\"bomb_start\")\n    sound.play();\n    setTimeout(()=> {\n        sound.destroy();\n        new StationaryObject(this.world,this.y+0.5, \"bomb_explode\")\n        this.emit(\"blowup\")\n    },fusetime)\n        } catch(e) {\n            speech.speak(e.message)\n        }\n    }\r\n}","import { so } from './soundObject';\r\nimport { Coin } from './coin'\r\nimport { Street } from './street'\r\nimport { Objective } from './objective'\r\nimport { Road } from './road'\r\nimport { Bonus } from './bonus'\r\nimport { utils } from './utilities'\r\nimport {Car} from './car'\r\nimport 'resonance-audio';\r\nconst { ResonanceAudio } = require('resonance-audio')\r\nimport { Player } from './player'\r\nimport { content } from './main'\r\nimport { speech } from './tts';\r\nexport class World {\r\n\tconstructor(game, size = 100) {\r\n\t\tthis.size = size;\r\n\t\tthis.game = game\r\n\t\tthis.dynamicObjects = []\r\n\t\tthis.tiles = []\r\n\t\tthis.context = new AudioContext()\r\n\t\tthis.convolution = this.context.createConvolver()\r\n\t\tthis.scene = new ResonanceAudio(this.context);\r\n\t\tthis.convolution.connect(this.scene.output)\r\n\t\tthis.scene.output.connect(this.context.destination)\r\n\t\tthis.player = new Player(this)\r\n\t}\r\n\tgenerateTiles() {\r\n\t\tfor (let i = 0; i < this.tiles.length; i++) {\r\n\t\t\tthis.tiles[i].alive=false\r\n\t\t\tthis.tiles[i].destroy();\r\n\t\t}\r\n\t\tthis.tiles = []\r\n\t\tlet lastStreet = this.player.y;\r\n\t\t//the below line will sound weird, but I want as many streets as x squares the player can move to either side, so as to have a fair chance at targetting bonuses\r\n\t\tlet lastStreetLimit = lastStreet + utils.randomInt(this.player.xLimit, this.player.xLimit + 4)\r\n\t\tthis.player.nearestStreet = lastStreet + 1\r\n\t\tfor (let i = lastStreet + 1; i <= lastStreetLimit; i++) {\r\n\t\t\tthis.tiles.push(new Street(this, i))\r\n\t\t\tlastStreet = i;\r\n\t\t}\r\n\t\tlet tiles = Math.round(this.game.roadsPerLevel + (this.game.level/2))\r\n\t\tlet lastRoad = 0;\r\n\t\tthis.player.nearestRoad = lastStreet + 1\r\n\t\tthis.player.furthestStreet = lastStreet;\r\n\t\t//let generator = (this.player.nearestRoad + tiles) - tiles/2\r\n\t\tlet generator=this.player.nearestRoad\r\n\t\tfor (let i = lastStreet + 1; i <= lastStreet + tiles; i++) {\r\n\t\t\tif (generator == i) this.tiles.push(new Road(this, i, true))\r\n\t\t\tif (generator != i) this.tiles.push(new Road(this, i, false))\r\n\t\t\tlastRoad = i;\r\n\t\t}\r\n\t\tthis.player.nearestObjective = lastRoad + 1\r\n\t\tthis.player.furthestRoad = lastRoad;\r\n\t\tthis.tiles.push(new Objective(this, lastRoad + 1))\r\n\t\t//item spawning, one item chance per level, doesn't always spawn\r\n\t\tfor (let i = 1; i <= this.game.level; i++) {\r\n\t\t\tlet x = utils.randomInt(0 - this.player.xLimit, 0 + this.player.xLimit)\r\n\t\t\tlet random = utils.randomInt(1, 2)\r\n\t\t\tswitch (random) {\r\n\t\t\t\tdefault: break;\r\n\t\t\t\t//coins are dropped on the street\r\n\t\t\t\tcase 1: this.dynamicObjects.push(new Coin(this, x, this.player.nearestStreet + this.player.xLimit, this.player.furthestStreet)); break;\r\n\t\t\t\t//bonuses appear anywhere on the road\r\n\t\t\t\tcase 2: this.dynamicObjects.push(new Bonus(this, x, this.player.nearestRoad, this.player.furthestRoad)); break;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tupdate() {\r\n\t\tfor (let i = 0; i < this.dynamicObjects.length; i++) {\r\n\t\t\tif (!this.dynamicObjects[i].alive) {\r\n\t\t\t\tthis.dynamicObjects[i].sound.pause()\r\n\t\t\t\tthis.dynamicObjects.splice(i, 1)\r\n\t\t\t\ti--;\r\n\t\t\t} else {\r\n\t\t\t\tthis.dynamicObjects[i].update()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","import { speech } from './tts';\r\nimport { strings } from './strings'\r\nimport { debug, _, content, data } from './main'\r\nimport { SoundHandler } from './soundHandler'\r\nimport Timer from './timer';\r\nimport $ from 'jquery';\r\nimport { utils } from './utilities';\r\nimport { ScrollingText } from './scrollingText';\r\nimport { KeyboardInput } from './input.js';\r\nimport { KeyEvent } from './keycodes.js';\r\nimport { so } from './soundObject';\r\nimport { World } from './world'\r\nimport { Road } from './road';\r\nclass Game {\r\n\tconstructor() {\n\t\tthis.canChangeSpeed=true\r\n\t\tthis.tick = so.create(\"tick\")\r\n\t\tthis.scoreSound = so.create(\"scoreCounter\")\r\n\t\tthis.scoreSound.volume = 0.4\r\n\t\tthis.input = new KeyboardInput();\r\n\t\tthis.pool = new SoundHandler()\r\n\t\tthis.input.init();\r\n\t\tthis.timer = Timer({\r\n\t\t\tupdate: () => this.update(),\r\n\t\t\trender: () => this.render()\r\n\t\t}, 1 / 45);\r\n\t\tthis.score = 0\r\n\t\tthis.level = 1\r\n\t\tthis.spawnTime = 3000 - (this.level * 100)\r\n\t\tthis.roadsPerLevel = 5\r\n\t}\r\n\r\n\tstart() {\r\n\t\tthis.timer.start();\r\n\t\tthis.world = new World(this, 80)\r\n\t\tif (!debug) this.world.generateTiles()\r\n\t\t//speech.speak(strings.get(\"upArrowMove\"))\r\n\t}\r\n\tupdate(dt) {\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_0)) {\r\n\t\t\tthis.world.player.slowDown(10)\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_D) && debug) {\r\n\t\t\tlet debugRoad = new Road(this.world, 1, true)\r\n\t\t\tlet number = content.numberOfVehicles\r\n\t\t\tdebugRoad.generateCar(number)\r\n\t\t\tdebugRoad.generator = false\r\n\t\t\tthis.world.player.y = 0\r\n\t\t}\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_G)) {\n\t\t\tif (data.bombs>=1) {\n\t\t\tthis.world.player.throwBomb()\n\t\t\t}\n\t\t\telse {\n\t\t\t\tspeech.speak(strings.get(\"noBombs\"))\n\t\t\t}\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_I)) {\r\n\t\t\tlet nothing = true\n\t\t\tlet str=\"\"\r\n\t\t\tif (data.jumps > 0) {\r\n\t\t\t\tnothing = false\r\n\t\t\t\tstr+=strings.get(\"iJumps\", [data.jumps])+\", \"\r\n\t\t\t}\n\t\t\tif (data.bombs > 0) {\n\t\t\t\tnothing = false\n\t\t\t\tstr+=strings.get(\"iBombs\", [data.bombs])+\", \"\n\t\t\t}\n\t\t\t\r\n\t\t\tif (nothing) {\r\n\t\t\t\tspeech.speak(strings.get(\"emptyInventory\"))\r\n\t\t\t}\n\t\t\telse {\n\t\t\t\tspeech.speak(str)\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_UP)) {\r\n\t\t\tthis.world.player.speedUp()\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_DOWN)) {\r\n\t\t\tthis.world.player.slowDown()\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_C)) {\r\n\t\t\tspeech.speak(data.coins + strings.get(\"coins\"))\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_S)) {\r\n\t\t\tspeech.speak(this.score + strings.get(\"points\"))\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_X)) {\r\n\t\t\tspeech.speak(this.world.player.nearestRoad+\", \"+this.world.player.furthestRoad)\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_L)) {\r\n\t\t\tspeech.speak(strings.get(\"level\") + this.level)\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_H)) {\r\n\t\t\tspeech.speak(this.world.player.hp + \" \" + strings.get(\"hp\"))\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_1) && this.canChangeSpeed) {\n\t\t\tthis.canChangeSpeed=false; setTimeout(()=> { this.canChangeSpeed=true},800)\r\n\t\t\tthis.world.player.slowDown(10)\r\n\t\t\tthis.world.player.speedUp(1)\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_2)&& this.canChangeSpeed) {\n\t\t\tthis.canChangeSpeed=false; setTimeout(()=> { this.canChangeSpeed=true},800)\n\r\n\t\t\tthis.world.player.slowDown(10)\r\n\t\t\tthis.world.player.speedUp(2)\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_3)&& this.canChangeSpeed) {\n\t\t\tthis.canChangeSpeed=false; setTimeout(()=> { this.canChangeSpeed=true},800)\n\r\n\t\t\tthis.world.player.slowDown(10)\r\n\t\t\tthis.world.player.speedUp(3)\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_4)&& this.canChangeSpeed) {\n\t\t\tthis.canChangeSpeed=false; setTimeout(()=> { this.canChangeSpeed=true},800)\n\r\n\t\t\tthis.world.player.slowDown(10)\r\n\t\t\tthis.world.player.speedUp(4)\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_5)&& this.canChangeSpeed) {\n\t\t\tthis.canChangeSpeed=false; setTimeout(()=> { this.canChangeSpeed=true},800)\n\r\n\t\t\tthis.world.player.slowDown(10)\r\n\t\t\tthis.world.player.speedUp(5)\r\n\t\t}\r\n\t\tthis.world.update()\r\n\t}\r\n\trender() {\r\n\t}\r\n}\r\nexport { Game }","'use strict';\r\nimport {speech} from './tts';\r\nimport {so} from './soundObject';\r\nconst MenuTypes = {\r\n\tNORMAL: 0,\r\n\t\tSELECTOR: 1,\r\n\t\tSLIDER: 2,\r\n\t\tEDIT: 3,\r\n\t\tAUDIO: 4,\r\n};\r\nclass MenuItem {\r\n\tconstructor(id, name) {\r\n\t\tthis.name = name;\n\t\t\t\t\tthis.id = id;\r\n\t\t\tthis.type = MenuTypes.NORMAL;\r\n\t}\r\n\t\r\n\t\tspeak() {\r\n\t\t\tspeech.speak(this.name);\r\n\t\t}\r\n\t\r\n\t\tselect() {\r\n\t\t\treturn this.id;\r\n\t\t}\r\n}\r\nclass AudioItem extends MenuItem{\r\n\tconstructor(id, name) {\r\n\t\tsuper();\r\n\t\t\tthis.name = name;\r\n\t\t\tthis.type = MenuTypes.AUDIO;\r\n\t\t\tthis.id = id;\r\n\t\t\tthis.snd=so.create(this.name);\r\n\t}\r\n\t\r\n\t\tspeak() {\n\t\t\tthis.snd.stop();\r\n\t\t\t\tthis.snd.play();\r\n\t\t}\r\n\t\r\n\t\tselect() {\r\n\t\t\treturn this.id;\r\n\t\t}\r\n}\r\n\r\n\r\nclass SelectorItem extends MenuItem {\r\n\tconstructor(id, name, options, defaultOption = 0, selectCallback) {\r\n\t\tsuper();\r\n\t\t\tthis.id = id;\r\n\t\t\tthis.name = name;\r\n\t\t\tthis.options = options;\r\n\t\t\tthis.type = MenuTypes.SELECTOR;\r\n\t\t\tthis.currentOption = defaultOption;\r\n\t\t\tthis.selectCallback = selectCallback;\r\n\t}\r\n\t\r\n\t\tspeak() {\r\n\t\t\tspeech.speak(this.name + '. Selector. Set to ' + this.options[this.currentOption]);\r\n\t\t}\r\n\t\r\n\t\tincrease() {\r\n\t\t\tif (this.currentOption < this.options.length - 1) {\r\n\t\t\t\tthis.currentOption++;\r\n\t\t\t}\r\n\t\t\tspeech.speak(this.options[this.currentOption]);\r\n\t\t\t\tif (typeof this.selectCallback !== 'undefined') {\r\n\t\t\t\t\tthis.selectCallback(this.options[this.currentOption]);\r\n\t\t\t\t}\r\n\t\t}\r\n\t\r\n\t\tdecrease() {\r\n\t\t\tif (this.currentOption > 0) {\r\n\t\t\t\tthis.currentOption--;\r\n\t\t\t}\r\n\t\t\tspeech.speak(this.options[this.currentOption]);\r\n\t\t\t\tif (typeof this.selectCallback !== 'undefined') {\r\n\t\t\t\t\tthis.selectCallback(this.options[this.currentOption]);\r\n\t\t\t\t}\r\n\t\t}\r\n\t\r\n\t\tselect() {\r\n\t\t\treturn this.id;\r\n\t\t}\r\n}\r\n\r\nclass SliderItem extends MenuItem {\r\n\tconstructor(id, name, from, to, currentValue = 0,increaseBy=1) {\r\n\t\tsuper();\r\n\t\t\tthis.id = id;\r\n\t\t\tthis.name = name;\r\n\t\t\tthis.minValue = from;\r\n\t\t\tthis.maxValue = to;\r\n\t\t\tthis.currentValue = currentValue;\r\n\t\t\tthis.increaseBy=increaseBy;\r\n\t\t\tthis.type = MenuTypes.SLIDER;\r\n\t}\r\n\t\r\n\t\tspeak() {\r\n\t\t\tspeech.speak(this.name + '. Slider. Set to ' + this.currentValue);\r\n\t\t}\r\n\t\r\n\t\tincrease() {\r\n\t\t\tif (this.currentValue < this.maxValue) {\r\n\t\t\t\tthis.currentValue+=this.increaseBy;\r\n\t\t\t}\r\n\t\t\tif (this.currentValue>this.maxValue) this.currentValue=this.maxValue;\r\n\t\t\t\tspeech.speak(this.currentValue);\r\n\t\t}\r\n\t\r\n\t\tdecrease() {\r\n\t\t\tif (this.currentValue > this.minValue) {\r\n\t\t\t\tthis.currentValue-=this.increaseBy;\r\n\t\t\t}\r\n\t\t\tif (this.currentValue<this.minValue) this.currentValue=this.minValue;\r\n\t\t\t\tspeech.speak(this.currentValue);\r\n\t\t}\r\n\t\r\n\t\tselect() {\r\n\t\t\treturn this.id;\r\n\t\t}\r\n}\r\n\r\nclass EditItem extends MenuItem {\r\n\tconstructor(id, name, defaultText = '') {\r\n\t\tsuper();\r\n\t\t\tthis.id = id;\r\n\t\t\tthis.name = name;\r\n\t\t\tthis.text = defaultText;\r\n\t\t\tthis.type = MenuTypes.EDIT;\r\n\t}\r\n\t\r\n\t\tspeak() {\r\n\t\t\tspeech.speak(this.name + '. Editable. ' + (this.text == '' ? 'Nothing entered.' : 'Set to ' + this.text));\r\n\t\t}\r\n\t\r\n\t\taddChar(char) {\r\n\t\t\tthis.text += char;\r\n\t\t\t\tspeech.speak(char);\r\n\t\t}\r\n\t\r\n\t\tremoveChar() {\r\n\t\t\tthis.text = this.text.substring(0, this.text.length - 1);\r\n\t\t\t\tspeech.speak(this.text);\r\n\t\t}\r\n\t\r\n\t\tselect() {\r\n\t\t\treturn this.text;\r\n\t\t}\r\n}\r\nexport {MenuItem,AudioItem,SliderItem,SelectorItem,MenuTypes};\r\n","'use strict';\nimport \"babel-polyfill\";\r\nimport { utils } from './utilities';\r\nimport Hammer from 'hammerjs';\r\nimport { speech } from './tts';\r\nimport { so } from './soundObject.js';\r\nimport { MenuTypes, MenuItem } from './menuItem';\r\nimport { KeyEvent } from './keycodes';\r\nimport { KeyboardInput } from './input';\r\n\r\nclass Menu {\n\tconstructor(name, menuData, music) {\n\t\tthis.kp=event => {\nthis.handleInput(event);\n\t\t\t\t\t};\n\t\tthis.kd=event => {\nthis.handleKeys(event);\n\t\t\t\t\t\t\t};\n\t\tthis.fadeTime = 0.6;\r\n\t\tthis.menuData = menuData;\r\n\t\tlet audio = name.split(\" \");\r\n\t\tif (audio.length < 2) this.isAudio = true;\r\n\t\tif (audio.length >= 2) this.isAudio = false;\r\n\t\tthis.silent = false;\r\n\t\tthis.prependAudio = \"\";\r\n\t\tthis.first = true;\r\n\t\tthis.cursor = 0;\r\n\t\tthis.name = name;\r\n\t\tlet dir = so.directory;\r\n\t\tso.directory = \"./sounds/\";\r\n\t\tthis.sndKeyChar = so.create('ui/keyChar');\r\n\t\tthis.sndKeyDelete = so.create('ui/keyDelete');\r\n\t\tthis.sndSliderLeft = so.create('ui/menuSliderLeft');\r\n\t\tthis.sndSliderRight = so.create('ui/menuSliderRight');\r\n\t\tthis.sndBoundary = so.create('ui/menuBoundary');\r\n\t\tthis.sndChoose = so.create('ui/menuChoose');\r\n\t\tthis.sndMove = so.create('ui/menuMove');\r\n\t\tthis.sndOpen = so.create('ui/menuOpen');\r\n\t\tthis.sndSelector = so.create('ui/menuSelector');\r\n\t\tthis.sndWrap = so.create('ui/menuWrap');\r\n\t\tso.directory = dir;\r\n\t\tthis.selectCallback = null;\r\n\t\tif (typeof music !== 'undefined') {\r\n\t\t\tthis.music = music;\r\n\t\t}\r\n\t\tconst id = document.getElementById('touchArea');\r\n\t\tthis.hammer = new Hammer(id);\r\n\t}\r\n\r\n\tnextItem() {\r\n\t\tspeech.stop();\r\n\t\tif (!this.first) {\r\n\t\t\tif (this.cursor < this.menuData.length - 1) {\r\n\t\t\t\tif (!this.silent) this.sndMove.play();\r\n\t\t\t\tthis.cursor++;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (!this.silent) this.sndWrap.play();\r\n\t\t\t\tthis.cursor = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (!this.silent) this.sndMove.play();\r\n\t\t\tthis.first = false;\r\n\t\t}\r\n\t\tif (this.isAudio) {\r\n\t\t\tthis.sndName.stop();\r\n\t\t\tfor (let i = 0; i < this.menuData.length; i++) {\r\n\t\t\t\tif (this.menuData[i].type == MenuTypes.AUDIO) this.menuData[i].snd.stop();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.menuData[this.cursor].speak();\r\n\t}\r\n\r\n\tpreviousItem() {\r\n\t\tspeech.stop();\r\n\r\n\t\tif (this.first) {\r\n\t\t\tthis.first = false;\r\n\t\t\tif (!this.silent) this.sndMove.play();\r\n\t\t}\r\n\t\tif (this.cursor > 0) {\r\n\t\t\tif (!this.silent) this.sndMove.play();\r\n\t\t\tthis.cursor--;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.cursor = this.menuData.length - 1;\r\n\t\t\tif (!this.silent) this.sndWrap.play();\r\n\r\n\t\t}\r\n\t\tif (this.isAudio) {\r\n\t\t\tthis.sndName.stop();\r\n\t\t\tfor (let i in this.menuData) {\r\n\t\t\t\tif (this.menuData[i].type == MenuTypes.AUDIO) this.menuData[i].snd.stop();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.menuData[this.cursor].speak();\r\n\t\tif (typeof this.moveCallback !== \"undefined\") {\r\n\t\t\tthis.moveCallback(this.menuData[this.cursor].id);\r\n\t\t}\r\n\t}\r\n\r\n\tincrease() {\r\n\t\tif (this.menuData[this.cursor].type == MenuTypes.SLIDER || this.menuData[this.cursor].type == MenuTypes.SELECTOR) {\r\n\t\t\tthis.menuData[this.cursor].increase();\r\n\t\t\tif (this.menuData[this.cursor].type == MenuTypes.SLIDER) {\r\n\t\t\t\tif (!this.silent) this.sndSliderRight.play();\r\n\t\t\t} else {\r\n\t\t\t\tif (!this.silent) this.sndSelector.play();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdecrease() {\r\n\t\tif (this.menuData[this.cursor].type == MenuTypes.SLIDER || this.menuData[this.cursor].type == MenuTypes.SELECTOR) {\r\n\t\t\tthis.menuData[this.cursor].decrease();\r\n\t\t\tif (this.menuData[this.cursor].type == MenuTypes.SLIDER) {\r\n\t\t\t\tif (!this.silent) this.sndSliderLeft.play();\r\n\t\t\t} else {\r\n\t\t\t\tif (!this.silent) this.sndSelector.play();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinsertCharacter(char) {\r\n\t\tif (this.menuData[this.cursor].type == MenuTypes.EDIT) {\r\n\t\t\tthis.menuData[this.cursor].addChar(String.fromCharCode(char));\r\n\t\t\tif (!this.silent) this.sndKeyChar.play();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// Char navigation code\r\n\t\tfor (let i = this.cursor + 1; i < this.menuData.length; i++) {\r\n\t\t\tif (this.menuData[i].shortcut == String.fromCharCode(char).toLowerCase()) {\r\n\t\t\t\tthis.cursor = i;\r\n\t\t\t\tthis.select();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this.menuData[i].name.toLowerCase().substr(0, 1) == String.fromCharCode(char).toLowerCase()) {\r\n\t\t\t\tthis.cursor = i;\r\n\t\t\t\tthis.menuData[this.cursor].speak();\r\n\t\t\t\tthis.first = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (let i = 0; i < this.menuData.length; i++) {\r\n\t\t\tif (this.menuData[i].shortcut == String.fromCharCode(char).toLowerCase()) {\r\n\t\t\t\tthis.cursor = i;\r\n\t\t\t\tthis.select();\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.menuData[i].name.toLowerCase().substr(0, 1) == String.fromCharCode(char).toLowerCase()) {\r\n\t\t\t\tthis.cursor = i;\r\n\t\t\t\tthis.menuData[this.cursor].speak();\r\n\t\t\t\tthis.first = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tremoveCharacter() {\r\n\t\tif (this.menuData[this.cursor].type == MenuTypes.EDIT) {\r\n\t\t\tthis.menuData[this.cursor].removeChar();\r\n\t\t\tif (!this.silent) this.sndKeyDelete.play();\r\n\t\t}\r\n\t}\r\n\r\n\thandleInput(event) {\r\n\t\tthis.insertCharacter(event.which);\r\n\t}\r\n\r\n\tdestroySounds() {\r\n\t\tthis.sndKeyChar.destroy();\r\n\t\tthis.sndKeyDelete.destroy();\r\n\t\tthis.sndSliderLeft.destroy();\r\n\t\tthis.sndSliderRight.destroy();\r\n\t\tif (this.isAudio) this.sndName.destroy();\r\n\t\tthis.sndBoundary.destroy();\r\n\t\tthis.sndChoose.destroy();\r\n\t\tthis.sndMove.destroy();\r\n\t\tthis.sndOpen.destroy();\r\n\t\tthis.sndSelector.destroy();\r\n\t\tthis.sndWrap.destroy();\r\n\t\tfor (let i = 0; i < this.menuData.length; i++) {\r\n\t\t\tif (this.menuData[i].type == MenuTypes.AUDIO) this.menuData[i].snd.destroy();\r\n\t\t}\r\n\t\tif (typeof this.music !== 'undefined') {\r\n\t\t\tthis.music.destroy();\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tdestroy() {\r\ndocument.removeEventListener('keydown',this.kd);\r\ndocument.removeEventListener('keypress',this.kp);\r\n\t\tthis.hammer.destroy();\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.destroySounds();\r\n\t\t}, this.fadeTime * 1000);\r\n\t}\r\n\r\n\thandleKeys(event) {\r\n\t\tswitch (event.which) {\r\n\t\t\tcase KeyEvent.DOM_VK_RETURN:\r\n\t\t\t\tthis.select();\r\n\t\t\t\tbreak;\r\n\t\t\tcase KeyEvent.DOM_VK_PAGE_UP:\r\n\t\t\t\tthis.music.volume += 0.03;\r\n\t\t\t\tbreak;\r\n\t\t\tcase KeyEvent.DOM_VK_PAGE_DOWN:\r\n\t\t\t\tthis.music.volume -= 0.03;\r\n\t\t\t\tbreak;\r\n\t\t\tcase KeyEvent.DOM_VK_BACK_SPACE:\r\n\t\t\t\tthis.removeCharacter();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase KeyEvent.DOM_VK_DOWN:\r\n\r\n\t\t\t\tthis.nextItem();\r\n\t\t\t\tbreak;\r\n\t\t\tcase KeyEvent.DOM_VK_UP:\r\n\t\t\t\tthis.previousItem();\r\n\t\t\t\tbreak;\r\n\t\t\tcase KeyEvent.DOM_VK_RIGHT:\r\n\r\n\t\t\t\tthis.increase();\r\n\r\n\t\t\t\tbreak;\r\n\t\t\tcase KeyEvent.DOM_VK_LEFT:\r\n\r\n\t\t\t\tthis.decrease();\r\n\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\tasync runSync() {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tthis.run((s) => {\r\n\t\t\t\tresolve(s.selected);\r\n\t\t\t\tthis.destroy();\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\trun(callback) {\r\n\t\tif (typeof this.music === 'object') {\r\n\t\t\tthis.music.volume = 0.8;\r\n\t\t\tthis.music.loop = true;\r\n\t\t\tthis.music.play();\r\n\t\t\tspeech.ducker = this.music;\r\n\r\n\t\t} else if (typeof this.music === 'string') {\r\n\t\t\tthis.music = so.create(this.music, true);\r\n\t\t\tthis.music.volume = 0.8;\r\n\t\t\tthis.music.loop = true;\r\n\t\t\tthis.music.play();\r\n\t\t\tspeech.ducker = this.music;\r\n\t\t} else {\r\n\t\t}\r\n\t\tthis.selectCallback = callback;\r\n\t\tconst that = this;\r\n\t\tdocument.addEventListener('keypress', this.kp);\r\ndocument.addEventListener('keydown',this.kd);\n\r\n\t\tthis.hammer.on(\"swipeleft\", function (event) { that.handleSwipe(0); });\r\n\t\tthis.hammer.on(\"swiperight\", function (event) { that.handleSwipe(1); });\r\n\t\tthis.hammer.on(\"panup\", function (event) { that.handleSwipe(3); });\r\n\t\tthis.hammer.on(\"pandown\", function (event) { that.handleSwipe(4); });\r\n\t\tthis.hammer.on(\"tap\", function (event) { that.handleSwipe(2); });\r\n\t\tif (this.isAudio) {\r\n\t\t\tthis.sndName = so.create(this.name);\r\n\t\t\tthis.sndName.play();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (!this.silent) speech.speak(this.name);\r\n\t\t}\r\n\t\tif (!this.silent) this.sndOpen.play();\r\n\t}\r\n\r\n\thandleSwipe(action) {\r\n\t\tif (action == 3) {\r\n\t\t\tthis.decrease();\r\n\t\t}\r\n\t\tif (action == 4) {\r\n\t\t\tthis.increase();\r\n\t\t}\r\n\r\n\t\tif (action == 0) {\r\n\t\t\tthis.previousItem();\r\n\t\t}\r\n\t\tif (action == 1) {\r\n\t\t\tthis.nextItem();\r\n\t\t}\r\n\t\tif (action == 2) {\r\n\t\t\tthis.select();\r\n\t\t}\r\n\t}\r\n\r\n\tselect() {\r\n\t\t//select function\r\n\t\tconst selected = this.menuData[this.cursor].id;\r\n\t\tconst items = [];\r\n\t\tfor (let i = 0; i < this.menuData.length; i++) {\r\n\t\t\tlet addItem = null;\r\n\t\t\tif (this.menuData[i].type == MenuTypes.SLIDER) {\r\n\t\t\t\taddItem = {\r\n\t\t\t\t\tid: this.menuData[i].id,\r\n\t\t\t\t\tvalue: this.menuData[i].currentValue,\r\n\t\t\t\t\t//name: this.menuData[i].options[this.menuData[i].currentValue]\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tif (this.menuData[i].type == MenuTypes.EDIT) {\r\n\t\t\t\taddItem = {\r\n\t\t\t\t\tid: this.menuData[i].id,\r\n\t\t\t\t\tvalue: this.menuData[i].text\r\n\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tif (this.menuData[i].type == MenuTypes.SELECTOR) {\r\n\t\t\t\taddItem = {\r\n\t\t\t\t\tid: this.menuData[i].id,\r\n\t\t\t\t\tvalue: this.menuData[i].currentOption,\r\n\t\t\t\t\tname: this.menuData[i].options[this.menuData[i].currentOption]\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\titems.push(addItem);\r\n\t\t}\r\n\r\n\t\tconst toReturn = {\r\n\t\t\tselected,\r\n\t\t\tcursor: this.cursor,\r\n\t\t\titems\r\n\t\t};\r\n\t\tif (!this.silent) this.sndChoose.play();\r\n\t\tdocument.removeEventListener('keydown',this.kd);\r\n\t\tdocument.removeEventListener('keypress',this.kp);\r\n\t\tif (this.isAudio) {\r\n\t\t\tthis.sndName.stop();\r\n\t\t\tfor (let i = 0; i < this.menuData.length; i++) {\r\n\t\t\t\tif (this.menuData[i].type == MenuTypes.AUDIO) this.menuData[i].snd.stop();\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!this.silent) this.musicDuration = this.fadeTime * 1000;\r\n\t\tif (typeof this.music === \"undefined\" || this.silent) this.musicDuration = 0;\r\n\r\n\t\tconst that = this;\r\n\t\tif (typeof this.music !== \"undefined\") {\r\n\t\t\tthis.music.sound.fade(0, this.fadeTime);\r\n\t\t}\r\n\t\tif (this.silent) this.musicDuration = 0;\r\n\t\tsetTimeout(() => {\r\n\t\t\tthat.selectCallback(toReturn);\r\n\t\t}, this.musicDuration);\r\n\t}\r\n}\r\nexport { Menu };\r\n","export const debug = false\nimport {ScrollingText} from './scrollingText'\nimport {utils} from './utilities'\nimport {SoundHandler} from './soundHandler'\r\nimport { strings } from './strings'\r\nimport { so } from './soundObject'\r\nexport let _\r\nexport let content = {\r\n\tnumberOfVehicles: 7,\r\n\tbonusTypes: 3,\n\tshopItems:{\n\thyperjump: 500,\n\tbombs: 250,\n\tgalleryMembership: 75,\nshortfuse: 450,\n\t\n\t}\r\n}\r\nexport var gameID = \"road\";\r\nexport let parsedCars = []\r\nparsedCars.push({})\r\nimport { speech } from './tts'\r\nimport { LanguageSelector } from './languageSelector'\r\nimport { Game } from './game';\r\nexport var version = \"1.0\";\r\nexport let data = {\r\n\tcoins: 0,\r\n\tjumps: 0,\r\n\tunlocks: {\r\n\t\thyperjump: false,\r\n\t},\r\n}\r\nexport var version2 = \"\";\r\n\r\nexport var lang = 0;\r\nexport var ttsVoice;\r\nexport var ttsRate = 1;\r\nimport $ from 'jquery';\r\nimport { Menu } from './menu';\r\nimport { AudioItem, MenuItem, MenuTypes } from './menuItem'\r\ndocument.addEventListener('DOMContentLoaded', setup);\r\nasync function setup() {\r\n\tdocument.getElementById(\"app\").focus();\r\n\tif (localStorage.getItem(\"string_data\") != null) {\r\n\t\tdata = JSON.parse(localStorage.getItem(\"string_data\"))\r\n\t}\r\n\ttry {\r\n\t\tconst fs = require('fs')\r\n\t\tlet file = fs.readFileSync(\"./cars.txt\", \"utf8\")\r\n\t\tconsole.log(file)\r\n\t\tlet lines = file.split(\"\\n\")\r\n\t\tconsole.log(lines[0])\r\n\t\tlines.forEach(element => {\r\n\t\t\tlet elements = element.split(\",\")\r\n\t\t\tlet name = elements[0]\r\n\t\t\tlet speed = Number(elements[1])\r\n\t\t\tlet horning = elements[2]\r\n\t\t\tlet hornable = \"\"\r\n\t\t\tif (horning == 1) {\r\n\t\t\t\thornable = name\r\n\t\t\t}\r\n\t\t\telse if (horning == 0) {\r\n\t\t\t\thornable = \"\"\r\n\t\t\t} else {\r\n\t\t\t\thornable = horning;\r\n\t\t\t}\r\n\t\t\tlet z = Number(elements[3])\n\t\t\tlet blowup=0\n\t\t\tlet blow=\"generic\";\n\n\t\t\tif (typeof elements[4]!==\"undefined\") {\n\t\t\t\tblowup=Number(elements[4])\n\t\t\t\tconsole.log(blowup)\n\t\t\tswitch(blowup) {\n\t\t\t\tcase 0: blow=\"generic\"; break;\n\t\t\t\tcase 1: blow=name; break;\n\t\t\t\tdefault: blow=\"generic\"; break;\n\t\t\t}\n\t\t\tif (typeof data.bulletGallery===\"undefined\") {\n\t\t\t\tdata.bulletGallery={}\n\t\t\t}\n\t\t\tif (typeof data.bulletGallery[blow]===\"undefined\") {\n\t\t\t\tdata.bulletGallery[blow]=false\n\t\t\t}\n\t\t\t}\r\n\t\t\tparsedCars.push({ sound: \"vehicles/\" + name, speed: speed, hornable: hornable, name: name, z: z, blowup: blow})\r\n\t\t});\r\n\t\tcontent.numberOfVehicles = parsedCars.length - 1\r\n\t} catch (e) {\r\n\t\tconsole.log(\"Error parsing cars file: \" + e)\r\n\t}\r\n\t//the below is an example of a new version notifier. The version2 variable can be used and compared inside a menu or wherever, and would contain the new version of your game based on what your server returns.\r\n\tlet prom = new Promise((resolve, reject) => {\r\n\t\tfetch('http://yourserver.com/versions.php?gameVersionRequest=' + gameID)\r\n\t\t\t.then(event => event.text()) //convert http response into text\r\n\t\t\t.then(data => {\r\n\t\t\t\tversion2 = data;\r\n\t\t\t\tresolve(data); //resolve promise let go.\r\n\t\t\t});\r\n\t});\r\n\tlet langs = new LanguageSelector(\"langSelect\", async (result) => {\r\n\t\tlang = result;\r\n\t\tspeech.setLanguage(lang);\r\n\t\t_ = strings.get\n\t\tspeech.setRate(3)\n\t\t//await strings.check(2)\n\t\tmainMenu();\r\n})\n}\nexport async function mainMenu() {\n\tlet music = so.create(\"music/menu\")\n\tmusic.volume = 0.6\n\tmusic.loop=true;\n\tmusic.play()\n\tspeech.ducker=music\n\tlet items = []\n\titems.push(new MenuItem(0, strings.get(\"mStart\")))\n\titems.push(new MenuItem(1, strings.get(\"mShop\", [data.coins])))\n\titems.push(new MenuItem(2, strings.get(\"mBullet\")))\t\n\tlet menu = new Menu(strings.get(\"mainMenu\"), items)\n\tlet selection = await menu.runSync()\n\tawait music.fade(0)\n\tswitch (selection) {\n\t\tcase 0:\n\t\t\tlet game = new Game()\n\t\t\tgame.start()\n\t\t\tbreak;\n\t\t\tcase 1: await shop(); break;\n\t\t\tcase 2:\n\t\t\tawait browseGallery()\n\t\t\tbreak;\n\t\tdefault: break;\n\t}\n}\n\r\nexport function save() {\r\n\tlocalStorage.setItem(\"string_data\", JSON.stringify(data))\r\n}\nasync function browseGallery() {\n\tif (!getUnlock(\"galleryMembership\")) {\n\t\tlet sound=so.create(\"gallery_locked\")\nawait sound.playSync()\nawait new ScrollingText(strings.get(\"galleryLocked\"))\nmainMenu();\nreturn;\n\t}\n\tlet locked=0,unlocked=0;\n\tlet pool=new SoundHandler()\n\tlet items=[]\n\titems.push(new MenuItem(-1,strings.get(\"mBack\")))\nlet arr=Object.entries(data.bulletGallery)\narr.forEach((v)=> {\n\tif (v[1]==false) {\n\t\titems.push(new AudioItem(-1, \"blowup/locked\"))\n\t\tlocked++;\n\t}\n\tif (v[1]==true) {\nitems.push(new AudioItem(-1,\"blowup/\"+v[0]))\n\t\tunlocked++;\n\t}\n\t})\n\t\n\tspeech.speak(strings.get(\"bulletIntro\",[unlocked,(locked+unlocked)]))\n\tlet menu=new Menu(\" \",items)\n\tmenu.silent=true\n\tmenu.run((s)=> {\n\t\t\tmenu.destroy();\n\t\t\tmainMenu()\n\t\t\treturn;\n\t})\n}\nexport function getUnlock(v) {\n\tif (typeof data.unlocks===\"undefined\") data.unlocks={}\n\tif (typeof data.unlocks[v]===\"undefined\") data.unlocks[v]=false;\n\treturn data.unlocks[v]\n}\nexport function setUnlock(v, value=true) {\n\tconsole.log(v)\n\tif (typeof data.unlocks===\"undefined\") data.unlocks={}\n\tif (typeof data.unlocks[v]===\"undefined\") data.unlocks[v]=false;\n\tdata.unlocks[v] = value\n\tsave()\n\treturn value;\n\n}\nexport function setData(v, value) {\n\tif (typeof data[v]===\"undefined\") data[v]=value\n\t\tdata[v] = value\n\t\tsave()\n\treturn value;\n\t\n}\nexport function getData(v) {\n\tif (typeof data[v]===\"undefined\") data[v]=0\nreturn data[v] \n}\nasync function shop() {\n\tlet shopAmbience=so.create(\"shop_ambience\")\n\tshopAmbience.volume=0.6\n\tshopAmbience.loop=true\n\tshopAmbience.play()\n\tlet menu;\n\tlet result;\n\tlet buy=so.create(\"purchase_item\")\n\tlet nobuy=so.create(\"no_cash\")\n\tdata.coins=100000\n\tspeech.speak(strings.get(\"mShopIntro\"))\n\twhile (result!=0) {\n\t\tawait utils.sleep(5)\n\t\tlet items=[]\n\t\titems.push(new MenuItem(0,strings.get(\"mShopBack\",[data.coins])))\n\t\tfor (var k in content.shopItems) {\n\t\t\tif (!getUnlock(k)) {\n\t\t\t\titems.push(new MenuItem(k,strings.get(\"shop\"+k)+\": \"+content.shopItems[k]+\" \"+strings.get(\"coins\")))\n\t\t}\n\t\t}\nmenu=new Menu(\" \",items)\nmenu.silent=true\n\t\tresult=await menu.runSync()\n\t\tif (result!=0) {\n\t\tif (data.coins>=content.shopItems[result]) {\n\t\t\tdata.coins-=content.shopItems[result]\n\t\t\tsetUnlock(result)\n\t\t\tbuy.replay();\n\t\t} else {\n\t\t\tnobuy.replay();\n\t\t}\n}\n\t}\n\nmenu.destroy()\nshopAmbience.destroy()\nawait mainMenu()\nreturn;\n}"]}