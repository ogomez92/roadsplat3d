{"version":3,"sources":["keycodes.js","utilities.js","strings.js","input.js","tts.js","soundObject.js","scrollingText.js","soundSource.js","soundHandler.js","languageSelector.js","timer.js","gameObject.js","item.js","coin.js","tile.js","street.js","objective.js","stationaryObject.js","car.js","levelPortal.js","road.js","effect.js","bonus.js","player.js","world.js","game.js","menuItem.js","menu.js","main.js"],"names":["KeyEvent","DOM_VK_CANCEL","DOM_VK_HELP","DOM_VK_BACK_SPACE","DOM_VK_TAB","DOM_VK_CLEAR","DOM_VK_RETURN","DOM_VK_ENTER","DOM_VK_SHIFT","DOM_VK_CONTROL","DOM_VK_ALT","DOM_VK_PAUSE","DOM_VK_CAPS_LOCK","DOM_VK_ESCAPE","DOM_VK_SPACE","DOM_VK_PAGE_UP","DOM_VK_PAGE_DOWN","DOM_VK_END","DOM_VK_HOME","DOM_VK_LEFT","DOM_VK_UP","DOM_VK_RIGHT","DOM_VK_DOWN","DOM_VK_PRINTSCREEN","DOM_VK_INSERT","DOM_VK_DELETE","DOM_VK_0","DOM_VK_1","DOM_VK_2","DOM_VK_3","DOM_VK_4","DOM_VK_5","DOM_VK_6","DOM_VK_7","DOM_VK_8","DOM_VK_9","DOM_VK_SEMICOLON","DOM_VK_EQUALS","DOM_VK_A","DOM_VK_B","DOM_VK_C","DOM_VK_D","DOM_VK_E","DOM_VK_F","DOM_VK_G","DOM_VK_H","DOM_VK_I","DOM_VK_J","DOM_VK_K","DOM_VK_L","DOM_VK_M","DOM_VK_N","DOM_VK_O","DOM_VK_P","DOM_VK_Q","DOM_VK_R","DOM_VK_S","DOM_VK_T","DOM_VK_U","DOM_VK_V","DOM_VK_W","DOM_VK_X","DOM_VK_Y","DOM_VK_Z","DOM_VK_CONTEXT_MENU","DOM_VK_NUMPAD0","DOM_VK_NUMPAD1","DOM_VK_NUMPAD2","DOM_VK_NUMPAD3","DOM_VK_NUMPAD4","DOM_VK_NUMPAD5","DOM_VK_NUMPAD6","DOM_VK_NUMPAD7","DOM_VK_NUMPAD8","DOM_VK_NUMPAD9","DOM_VK_MULTIPLY","DOM_VK_ADD","DOM_VK_SEPARATOR","DOM_VK_SUBTRACT","DOM_VK_DECIMAL","DOM_VK_DIVIDE","DOM_VK_F1","DOM_VK_F2","DOM_VK_F3","DOM_VK_F4","DOM_VK_F5","DOM_VK_F6","DOM_VK_F7","DOM_VK_F8","DOM_VK_F9","DOM_VK_F10","DOM_VK_F11","DOM_VK_F12","DOM_VK_F13","DOM_VK_F14","DOM_VK_F15","DOM_VK_F16","DOM_VK_F17","DOM_VK_F18","DOM_VK_F19","DOM_VK_F20","DOM_VK_F21","DOM_VK_F22","DOM_VK_F23","DOM_VK_F24","DOM_VK_NUM_LOCK","DOM_VK_SCROLL_LOCK","DOM_VK_COMMA","DOM_VK_PERIOD","DOM_VK_SLASH","DOM_VK_BACK_QUOTE","DOM_VK_OPEN_BRACKET","DOM_VK_BACK_SLASH","DOM_VK_CLOSE_BRACKET","DOM_VK_QUOTE","DOM_VK_META","GameUtils","calculateDelta","lx","sx","sr","delta","progressPan","current","max","progressPitch","min","minPitch","maxPitch","progressVolume","minVolume","maxVolume","getProportion","distance3D","x1","y1","z1","x2","y2","z2","Math","sqrt","distance","jx","jy","kx","ky","calculateAngle","angle","atan2","PI","isCollide3D","a","b","x","width","y","height","z","depth","randomInt","floor","random","getRandomArbitrary","sleep","ms","Promise","resolve","setTimeout","percent","int1","int2","percentOf","percentage","percented","value","average","arr","startIndex","len","length","val","i","averageInt","neg","num","numericSort","shuffle","j","objSize","obj","size","key","hasOwnProperty","copyObject","Object","assign","create","getPrototypeOf","arraysEqual","arr1","arr2","pauseTimeout","timerId","Date","now","clearTimeout","resumeTimeout","window","remaining","start","callback","randomProperty","keys","findFiles","path","ext","list","fileExt","walk","filesSync","pb","pf","stat","next","push","substr","findFolders","dirsSync","randomElement","utils","Strings","constructor","strings","bankedScore","ws","bonus7","iStoppers","noBombs","noStoppers","shopbombs","bonus3","bonus4","bonus5","bonus6","coins","iBombs","mShopBack","mShopIntro","shophyperjump","shopgalleryMembership","shopshortfuse","galleryLocked","mBullet","locked","bulletIntro","iJumps","emptyInventory","mainMenu","mStart","mShop","level","upArrowMove","bonus1","bonus2","selectVoice","mSelectVoice","mLang","newUpdate","mSapi","mReader","newRate","rating","mRate","K","Q","A","J","cspades","cdiamonds","cclubs","chearts","dq","lang","langs","mSelect","mBack","yes","no","ok","get","what","rep","str","forEach","v","i1","Number","replace","speak","check","lng","ScrollingText","EventEmitter","require","KeyboardInput","keyDown","justPressed","chars","justReleased","justPressedEventCallback","charEventCallback","init","that","document","addEventListener","event","handleKeyDown","handleKeyUp","handleChar","pause","isPaused","resume","which","emit","char","String","fromCharCode","destroy","isDown","isJustPressed","isJustReleased","keysDown","kd","getChars","keysPressed","splice","releaseAllKeys","keysReleased","app","remote","exec","useWebTTS","TTS","webTTS","voices","speechController","ducking","synth","Speech","rate","interrupt","VK_SHIFT","childProcess","kill","unduck","VK_UP","setRate","VK_DOWN","splitSentences","then","data","catch","e","setLanguage","process","platform","setVoice","console","log","voice","err","r","text","queue","accessibilitySupportEnabled","speakUnthreaded","listeners","onstart","duck","onend","onerror","error","getElementById","innerHTML","para","createElement","appendChild","createTextNode","setWebTTS","tts","stop","cancel","changeRate","speech","inp","changeVoice","name","voiceArray","k","includes","cb","silent","wl","split","input","selection","ducker","stdout","stderr","message","playOnceTimer","panner","defaults","panningModel","maxDistance","sono","playInBackground","SoundObjectItem","file","tag","stream","taggedAs","duckingFirstTime","fileName","sound","src","onComplete","doneLoading","timeout","checkProgress","loaded","Audio","playbackRate","pitch","loop","progress","replay","play","unload","time","oldVolume","volume","fade","pos","forcePlay","playSync","die","evt","once","removeAllListeners","active","playing","pan","currentPan","effects","add","set","seek","currentTime","duration","position","SoundObject","sounds","Array","loadingQueue","queueCallback","loadedSounds","loadingSounds","loadedCallback","queueLength","statusCallback","directory","extension","oneShots","debug","oneShotSound","setStatusCallback","findSound","findSoundIndex","resetQueuedInstance","found","returnObject","loadQueueSync","so","setQueueCallback","loadQueue","createSync","snd","enqueue","handleQueue","resetQueue","setCallback","isLoading","playOnce","on","noMore","filename","destroyAll","destroyWithTag","index","undefined","runningText","delimiter","splitText","currentLine","sndOpen","sndContinue","sndClose","prom","res","handleKeys","readCurrentLine","copyCurrentLine","advance","handleTap","action","removeEventListener","SoundSource","son","speed","minRate","maxRate","toDestroy","rateShiftSpeed","currentPosition","setPosition","update","SoundHandler","directional","staticSounds","dynamicSounds","currentDynamicSound","maxDynamicSounds","currentStaticSound","maxStaticSounds","reuseSounds","playStatic","slot","findFreeStaticSlot","SoundItem","findFreeDynamicSlot","findDynamicSound","reuse","threeD","LanguageSelector","element","id","container","buttons","type","focus","module","exports","GameObject","world","alive","mediaSource","context","createMediaElementSource","source","scene","createSource","sourceWidth","sourceHeight","sourceDepth","connect","load","Item","player","step","round","target","Coin","game","pool","Tile","hasSomething","scoreType","currentSpeed","clearInterval","scoreTimeout","levelCap","tileType","Street","Objective","canLevel","nearestStreet","setListenerPosition","setInterval","scoreDeduct","generateTiles","score","slowDown","StationaryObject","Car","tile","side","canHorn","blowUp","blowUpSound","objective","bulletGallery","hornSound","removeAttribute","hornSource","hornResonanceSource","passed","jump","generateCar","content","numberOfVehicles","spawnTime","jumps","flyTo","nearestObjective","healthLoss","hp","hit","furthestStreet","LevelPortal","canLevelNotify","Road","generator","force","greenLight","carType","chance","dynamicObjects","parsedCars","hornable","blowup","stepProgress","nearestRoad","furthestRoad","Effect","onFunction","ofFunction","Bonus","bonuses","bonusType","coffeeOn","oldSpeed","speedUp","forceSpeed","forcedSpeed","coffeeOff","Player","playerHitSound","center","xLimit","ceil","fallTime","unableToMove","speedUpSound","speedDownSound","speeds","speedModifier","move","speedTimeout","number","landsound","heart","land","fall","stand","interval","tick","throwBomb","fusetime","ResonanceAudio","World","tiles","AudioContext","setAmbisonicOrder","output","destination","setMaxListeners","lastStreet","lastStreetLimit","roadsPerLevel","lastRoad","levelScore","Game","canChangeSpeed","scoreSound","timer","render","dt","stoppers","debugRoad","bombs","nothing","MenuTypes","NORMAL","SELECTOR","SLIDER","EDIT","AUDIO","MenuItem","select","AudioItem","SelectorItem","options","defaultOption","selectCallback","currentOption","increase","decrease","SliderItem","from","to","currentValue","increaseBy","minValue","maxValue","EditItem","defaultText","addChar","removeChar","substring","Menu","menuData","music","kp","handleInput","fadeTime","audio","isAudio","prependAudio","first","cursor","dir","sndKeyChar","sndKeyDelete","sndSliderLeft","sndSliderRight","sndBoundary","sndChoose","sndMove","sndSelector","sndWrap","hammer","Hammer","nextItem","sndName","previousItem","moveCallback","insertCharacter","shortcut","toLowerCase","removeCharacter","destroySounds","runSync","reject","run","s","selected","handleSwipe","items","addItem","toReturn","musicDuration","_","bonusTypes","shopItems","hyperjump","galleryMembership","shortfuse","gameID","version","unlocks","version2","ttsVoice","ttsRate","setup","localStorage","getItem","JSON","parse","readFileSync","lines","elements","horning","blow","fetch","result","menu","shop","browseGallery","save","setItem","stringify","getUnlock","unlocked","entries","setUnlock","setData","getData","shopAmbience","buy","nobuy"],"mappings":"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","file":"main.js","sourceRoot":"js","sourcesContent":["\r\n'use strict';\r\nconst KeyEvent = {\r\nDOM_VK_CANCEL: 3,\r\n\t       DOM_VK_HELP: 6,\r\n\t       DOM_VK_BACK_SPACE: 8,\r\n\t       DOM_VK_TAB: 9,\r\n\t       DOM_VK_CLEAR: 12,\r\n\t       DOM_VK_RETURN: 13,\r\n\t       DOM_VK_ENTER: 14,\r\n\t       DOM_VK_SHIFT: 16,\r\n\t       DOM_VK_CONTROL: 17,\r\n\t       DOM_VK_ALT: 18,\r\n\t       DOM_VK_PAUSE: 19,\r\n\t       DOM_VK_CAPS_LOCK: 20,\r\n\t       DOM_VK_ESCAPE: 27,\r\n\t       DOM_VK_SPACE: 32,\r\n\t       DOM_VK_PAGE_UP: 33,\r\n\t       DOM_VK_PAGE_DOWN: 34,\r\n\t       DOM_VK_END: 35,\r\n\t       DOM_VK_HOME: 36,\r\n\t       DOM_VK_LEFT: 37,\r\n\t       DOM_VK_UP: 38,\r\n\t       DOM_VK_RIGHT: 39,\r\n\t       DOM_VK_DOWN: 40,\r\n\t       DOM_VK_PRINTSCREEN: 44,\r\n\t       DOM_VK_INSERT: 45,\r\n\t       DOM_VK_DELETE: 46,\r\n\t       DOM_VK_0: 48,\r\n\t       DOM_VK_1: 49,\r\n\t       DOM_VK_2: 50,\r\n\t       DOM_VK_3: 51,\r\n\t       DOM_VK_4: 52,\r\n\t       DOM_VK_5: 53,\r\n\t       DOM_VK_6: 54,\r\n\t       DOM_VK_7: 55,\r\n\t       DOM_VK_8: 56,\r\n\t       DOM_VK_9: 57,\r\n\t       DOM_VK_SEMICOLON: 59,\r\n\t       DOM_VK_EQUALS: 61,\r\n\t       DOM_VK_A: 65,\r\n\t       DOM_VK_B: 66,\r\n\t       DOM_VK_C: 67,\r\n\t       DOM_VK_D: 68,\r\n\t       DOM_VK_E: 69,\r\n\t       DOM_VK_F: 70,\r\n\t       DOM_VK_G: 71,\r\n\t       DOM_VK_H: 72,\r\n\t       DOM_VK_I: 73,\r\n\t       DOM_VK_J: 74,\r\n\t       DOM_VK_K: 75,\r\n\t       DOM_VK_L: 76,\r\n\t       DOM_VK_M: 77,\r\n\t       DOM_VK_N: 78,\r\n\t       DOM_VK_O: 79,\r\n\t       DOM_VK_P: 80,\r\n\t       DOM_VK_Q: 81,\r\n\t       DOM_VK_R: 82,\r\n\t       DOM_VK_S: 83,\r\n\t       DOM_VK_T: 84,\r\n\t       DOM_VK_U: 85,\r\n\t       DOM_VK_V: 86,\r\n\t       DOM_VK_W: 87,\r\n\t       DOM_VK_X: 88,\r\n\t       DOM_VK_Y: 89,\r\n\t       DOM_VK_Z: 90,\r\n\t       DOM_VK_CONTEXT_MENU: 93,\r\n\t       DOM_VK_NUMPAD0: 96,\r\n\t       DOM_VK_NUMPAD1: 97,\r\n\t       DOM_VK_NUMPAD2: 98,\r\n\t       DOM_VK_NUMPAD3: 99,\r\n\t       DOM_VK_NUMPAD4: 100,\r\n\t       DOM_VK_NUMPAD5: 101,\r\n\t       DOM_VK_NUMPAD6: 102,\r\n\t       DOM_VK_NUMPAD7: 103,\r\n\t       DOM_VK_NUMPAD8: 104,\r\n\t       DOM_VK_NUMPAD9: 105,\r\n\t       DOM_VK_MULTIPLY: 106,\r\n\t       DOM_VK_ADD: 107,\r\n\t       DOM_VK_SEPARATOR: 108,\r\n\t       DOM_VK_SUBTRACT: 109,\r\n\t       DOM_VK_DECIMAL: 110,\r\n\t       DOM_VK_DIVIDE: 111,\r\n\t       DOM_VK_F1: 112,\r\n\t       DOM_VK_F2: 113,\r\n\t       DOM_VK_F3: 114,\r\n\t       DOM_VK_F4: 115,\r\n\t       DOM_VK_F5: 116,\r\n\t       DOM_VK_F6: 117,\r\n\t       DOM_VK_F7: 118,\r\n\t       DOM_VK_F8: 119,\r\n\t       DOM_VK_F9: 120,\r\n\t       DOM_VK_F10: 121,\r\n\t       DOM_VK_F11: 122,\r\n\t       DOM_VK_F12: 123,\r\n\t       DOM_VK_F13: 124,\r\n\t       DOM_VK_F14: 125,\r\n\t       DOM_VK_F15: 126,\r\n\t       DOM_VK_F16: 127,\r\n\t       DOM_VK_F17: 128,\r\n\t       DOM_VK_F18: 129,\r\n\t       DOM_VK_F19: 130,\r\n\t       DOM_VK_F20: 131,\r\n\t       DOM_VK_F21: 132,\r\n\t       DOM_VK_F22: 133,\r\n\t       DOM_VK_F23: 134,\r\n\t       DOM_VK_F24: 135,\r\n\t       DOM_VK_NUM_LOCK: 144,\r\n\t       DOM_VK_SCROLL_LOCK: 145,\r\n\t       DOM_VK_COMMA: 188,\r\n\t       DOM_VK_PERIOD: 190,\r\n\t       DOM_VK_SLASH: 191,\r\n\t       DOM_VK_BACK_QUOTE: 192,\r\n\t       DOM_VK_OPEN_BRACKET: 219,\r\n\t       DOM_VK_BACK_SLASH: 220,\r\n\t       DOM_VK_CLOSE_BRACKET: 221,\r\n\t       DOM_VK_QUOTE: 222,\r\n\t       DOM_VK_META: 224\r\n};\r\nexport {KeyEvent};\r\n","import \"babel-polyfill\";\r\n'use strict';\r\nclass GameUtils {\r\n\tcalculateDelta(lx, sx, sr = 0) {\r\n\t\tsx = sx + sr;\r\n\t\tif (sx < lx) {\r\n\t\t\tdelta = lx - sx;\r\n\t\t}\r\n\t\tif (sx > lx) {\r\n\t\t\tdelta = sx - lx;\r\n\t\t}\r\n\r\n\t}\r\n\tprogressPan(current, max) {\r\n\t\treturn ((current * 200 / max) - 100) / 100;\r\n\t}\r\n\r\n\tprogressPitch(current, min, max, minPitch, maxPitch) {\r\n\t\treturn (current / (min + max)) * (maxPitch - minPitch) + minPitch;\r\n\t}\r\n\r\n\tprogressVolume(current, min, max, minVolume, maxVolume) {\r\n\t\tif (current > max) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\treturn (current / (min + max)) * (maxVolume - minVolume) + minVolume;\r\n\t}\r\n\r\n\tgetProportion(current, min, max, minVolume, maxVolume) {\r\n\t\tif (current > max) {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\treturn (current / (min + max)) * (maxVolume - minVolume) + minVolume;\r\n\t}\r\n\r\n\tdistance3D(x1, y1, z1, x2, y2, z2) {\r\n\t\treturn Math.sqrt((x2 - x1) * (x2 - x1) +\r\n\t\t\t(y2 - y1) * (y2 - y1) +\r\n\t\t\t(z2 - z1) * (z2 - z1));\r\n\t}\r\n\r\n\tdistance(jx, jy, kx, ky) {\r\n\t\t// Return Math.hypot(jx-kx, jy-ky)\r\n\t\treturn Math.sqrt(((jx - kx) * (jx - kx)) + ((jy - ky)) * (jy - ky));\r\n\t}\r\n\r\n\tcalculateAngle(x1, y1, x2, y2) {\r\n\t\tlet angle = Math.atan2((y2 - y1), (x2 - x1));\r\n\t\tangle = (angle >= 0) ? 0 : (2 * Math.PI) + angle;\r\n\t\treturn angle;\r\n\t\t// Return Math.atan2((y2 - y1),(x2 - x1));\r\n\t}\r\n\r\n\tisCollide3D(a, b) {\r\n\t\treturn (a.x <= (b.x + b.width) && (a.x + a.width) >= b.x) && (a.y <= (b.y + b.height) && (a.y + a.height) >= b.y) && (a.z <= (b.z + b.depth) && (a.z + a.depth) >= b.z);\r\n\t}\r\n\r\n\trandomInt(min, max) {\r\n\t\treturn Math.floor(Math.random() * (max - min + 1)) + min;\r\n\t}\r\n\r\n\tgetRandomArbitrary(min, max) {\r\n\t\treturn Math.random() * (max - min) + min;\r\n\t}\r\n\r\n\tsleep(ms) {\r\n\t\treturn new Promise(resolve => setTimeout(resolve, ms));\r\n\t}\r\n\r\n\tpercent(int1, int2) {\r\n\t\treturn int1 * 100 / int2;\r\n\t}\r\n\r\n\tpercentOf(int1, int2) {\r\n\t\treturn int2 * int1 / 100;\r\n\t}\r\n\tpercentage(percented, value) {\r\n\t\treturn value * percented / 100;\r\n\t}\r\n\r\n\taverage(arr, startIndex = 0) {\r\n\t\tconst len = arr.length;\r\n\t\tlet val = 0;\r\n\t\tlet average = 0;\r\n\t\tif (arr.length < startIndex) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\r\n\t\tfor (let i = startIndex; i < arr.length; i++) {\r\n\t\t\tval += arr[i];\r\n\t\t}\r\n\r\n\t\taverage = val / (len - startIndex);\r\n\t\treturn average;\r\n\t}\r\n\r\n\taverageInt(arr, startIndex = 0) {\r\n\t\tconst len = arr.length;\r\n\t\tlet val = 0;\r\n\t\tlet average = 0;\r\n\t\tif (arr.length < startIndex) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\r\n\t\tfor (let i = startIndex; i < arr.length; i++) {\r\n\t\t\tval += arr[i];\r\n\t\t}\r\n\r\n\t\taverage = val / (len - startIndex);\r\n\t\treturn Math.floor(average);\r\n\t}\r\n\r\n\tneg(num) {\r\n\t\treturn (num >= 0 ? (num == 0 ? 0 : 1) : -1);\r\n\t}\r\n\r\n\tnumericSort(a, b) {\r\n\t\treturn (a < b ? -1 : (a == b ? 0 : 1));\r\n\t}\r\n\r\n\tshuffle(a) {\r\n\t\tfor (let i = a.length - 1; i > 0; i--) {\r\n\t\t\tconst j = Math.floor(Math.random() * (i + 1));\r\n\t\t\t[a[i], a[j]] = [a[j], a[i]];\r\n\t\t}\r\n\r\n\t\treturn a;\r\n\t}\r\n\r\n\tobjSize(obj) {\r\n\t\tlet size = 0;\r\n\r\n\t\tlet key;\r\n\t\tfor (key in obj) {\r\n\t\t\tif (obj.hasOwnProperty(key)) {\r\n\t\t\t\tsize++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn size;\r\n\t}\r\n\tcopyObject(obj) {\r\n\t\treturn Object.assign(Object.create(Object.getPrototypeOf(obj)), obj);\r\n\t}\r\n\tarraysEqual(arr1, arr2) {\r\n\t\tfor (var i = 0; i < arr1.length; i++) {\r\n\r\n\t\t\tif (arr1[i] !== arr2[i])\r\n\t\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tpauseTimeout(timerId) {\r\n\t\tlet start = Date.now();\r\n\t\tclearTimeout(timerId);\r\n\t};\r\n\r\n\tresumeTimeout(timerId) {\r\n\t\tremaining -= Date.now() - start;\r\n\t\treturn window.setTimeout(callback, remaining);\r\n\t};\r\n\trandomProperty(obj) {\r\n\t\tvar keys = Object.keys(obj)\r\n\t\treturn obj[keys[keys.length * Math.random() << 0]];\r\n\t};\r\n\t\tasync findFiles(path,ext=\"\") {\r\nlet list=[];\r\nlet fileExt=\"\";\r\nawait walk.filesSync(path, (pb, pf, stat, next) => {\r\nif (ext==\"\") {\r\nlist.push(pf);\r\n}\r\nelse {\r\nfileExt=pf.substr(0-ext.length,ext.length);\r\nif (fileExt==ext) {\r\nlist.push(pf);\r\n}\r\n}\r\n});\r\nreturn list;\r\n}\r\nasync findFolders(path) {\r\nlet list=[];\r\nawait walk.dirsSync(path, (pb, pf, stat, next) => {\r\nlist.push(pf);\r\n});\r\nreturn list;\r\n}\nrandomElement(arr) {\n\treturn arr[Math.floor(Math.random() * arr.length)];\n}\r\n}\r\nexport var utils = new GameUtils();\r\n","'use strict';\r\nimport { lang } from './main';\r\nimport { utils } from './utilities';\r\nimport { speech } from './tts';\r\nimport { ScrollingText } from './scrollingText';\r\n\r\nclass Strings {\r\n\tconstructor() {\r\n\t\tthis.strings = {};\r\n\t\tthis.strings[1] = {\r\n\t\t\t// New English\r\n\t\t\tbankedScore: \"With a saved score of\",\r\n\t\t\tws: \"world size\",\r\n\t\t\tbonus7: \"Stopper\",\r\n\t\t\tiStoppers: \"%1 Stoppers\",\r\n\t\t\tnoBombs: \"You don't have any bombs!\",\r\n\t\t\tnoStoppers: \"You don't have any stoppers\",\r\n\t\t\tshopbombs: \"Bombs, to make cars explode by pressing the b key. Also allows unlocking of explosion sounds in the explosions gallery\",\r\n\t\t\tbonus3: \"Slowdown\",\r\n\t\t\tbonus4: \"Nothing!\",\r\n\t\t\tbonus5: \"bomb\",\r\n\t\t\tbonus6: \"Coffee rush\",\r\n\t\t\tcoins: \"coins\",\r\n\t\t\tiBombs: \"%1 Bombs\",\r\n\t\t\tmShopBack: \"Leave shop (You have %1 coins)\",\r\n\t\t\tmShopIntro: \"Welcome to the item shop! Press enter on any item to buy it.\",\r\n\t\t\tshophyperjump: \"Hyper jumps: Allows collecting of hyperjump items, which save you from being hit by incoming cars\",\r\n\t\t\tshopgalleryMembership: \"Explosions gallery lifetime membership\",\r\n\t\t\tshopshortfuse: \"Short fuse: Divides the time it takes for bombs to explode by 3.\",\r\n\t\t\tgalleryLocked: \"The explosions gallery will remain locked until you buy a membership from the store. Darn!\",\r\n\t\t\tmBullet: \"Explosions gallery\",\r\n\t\t\tlocked: \"Locked!\",\r\n\t\t\tbulletIntro: \"Welcome to the explosions gallery! You have unlocked %1 out of %2 possible explosions. Press enter to go back to the main menu.\",\r\n\t\t\tiJumps: \"%1 hyperjumps\",\r\n\t\t\temptyInventory: \"Your inventory is empty\",\r\n\t\t\tmainMenu: \"Use arrows to move, enter to continue.\",\r\n\t\t\tmStart: \"Start Game\",\r\n\t\t\tmShop: \"Item Shop (You have %1 coins)\",\r\n\t\t\tlevel: \"Level\",\r\n\t\t\tupArrowMove: \"Press a number between 1 and 5 to start moving, 1 being the slowest speed possible. Letter s to check your score, h checks your health, l to check level.\",\r\n\t\t\tbonus1: \"Health bonus!\",\r\n\t\t\tbonus2: \"Hyper jump!\",\r\n\t\t\tselectVoice: \"%1 voices available, use the up and down arrows to select a voice, enter when you're done.\",\r\n\t\t\tmSelectVoice: \"text to speech voice\",\r\n\t\t\tmLang: 'Change language',\r\n\t\t\tnewUpdate: 'There is a new version available! You have version %1, version %2 is available.',\r\n\t\t\tmSapi: 'Use text to speech for the game',\r\n\t\t\tmReader: 'Use your screen reader for the game',\r\n\t\t\tnewRate: 'This is a text to speech rate test. Please press enter when done',\r\n\t\t\trating: 'Press right and left arrow keys to change the rate. Press enter when done',\r\n\t\t\tmRate: 'Change speech rate',\r\n\r\n\t\t\tK: 'king',\r\n\t\t\tQ: 'queen',\r\n\t\t\tA: 'ace',\r\n\t\t\tJ: 'jack',\r\n\t\t\tcspades: 'spades',\r\n\t\t\tcdiamonds: 'diamonds',\r\n\t\t\tcclubs: 'clubs',\r\n\t\t\tchearts: 'hearts',\r\n\t\t\tdq: 'This is a game of risk. You will risk losing %1 beatcoins. Continue?',\r\n\t\t\tlang: 'English',\r\n\t\t\tlangs: 'Select your language',\r\n\t\t\tmSelect: 'Please select',\r\n\t\t\tmBack: 'go back',\r\n\t\t\tmStart: 'Start Game',\r\n\t\t\tyes: 'Yes',\r\n\t\t\tno: 'no',\r\n\t\t\tok: 'ok',\r\n\t\t};\r\n\t\tthis.strings[2] = {\r\n\t\t\t// New Spanish\r\n\t\t\tnoBombs: \"No tienes bombas!\",\r\n\t\t\tshopbombs: \"Bombas, para hacer explotar los coches con la tecla b. También podrás desbloquear los sonidos de las explosiones\",\r\n\t\t\tselectVoice: \"%1 voces disponibles. Usa las flechas y enter para cambiar la voz\",\r\n\t\t\tmSelectVoice: \"Voz de la tts\",\r\n\t\t\tmLang: \"Cambiar Idioma\",\r\n\t\t\tnewUpdate: \"Nueva versión disponible! Tienes la %1, la %2 está disponible\",\r\n\t\t\tmSapi: \"Usar SAPI para el juego\",\r\n\t\t\tmReader: \"Usar lector de pantalla\",\r\n\t\t\tnewRate: \"Prueba de la velocidad de la voz. Pulsa enter para dejarla así\",\r\n\t\t\trating: \"Pulsa las flechas izquierda y derecha para cambiar la velocidad y enter para aceptar\",\r\n\t\t\tmRate: \"Cambiar velocidad de la voz.\",\r\n\t\t\tmSelect: \"Por favor, selecciona\",\r\n\t\t\tmBack: \"Volver\",\r\n\t\t\tyes: \"sí\",\r\n\t\t\tno: \"no\",\r\n\t\t\tok: \"aceptar\",\r\n\t\t\tiStoppers: \"Frenados %1\",\r\n\t\t\tcoins: \"Monedas\",\r\n\t\t\tiBombs: \"%1 Bombas\",\r\n\t\t\tmShopBack: \"Salir de la tienda (tienes %1 monedas)\",\r\n\t\t\tmShopIntro: \"Te doy la bienvenida a la tienda, donde puedes comprar mejoras para el juego. Pulsa énter en cualquier item para comprarlo.\",\r\n\t\t\tshophyperjump: \"Hipersaltos: Permite obtener los bonus de hipersalto, que saltarán los autos automáticamente.\",\r\n\t\t\tshopgalleryMembership: \"Pase de oro para la galería de explosiones\",\r\n\t\t\tshopshortfuse: \"Mecha corta, divide el tiempo de explosión de las bombas por 3\",\r\n\t\t\tgalleryLocked: \"La galería de explosiones estará bloqueada hasta que compres el pase de oro. ¡Vaya!\",\r\n\t\t\tmBullet: \"Galería de explosiones\",\r\n\t\t\tlocked: \"Bloqueado\",\r\n\t\t\tbulletIntro: \"Te doy la bienvenida a la galería de explosiones! Has desbloqueado %1 de %2 explosiones posibles. Pulsa enter para volver al menú\",\r\n\t\t\tiJumps: \"Tienes %1 hipersaltos\",\r\n\t\t\temptyInventory: \"Tu inventario está vacío.\",\r\n\t\t\tupArrowMove: \"Pulsa un número del 1 al 5 para empezar a moverte, 1 el más lento. S para ver la puntuación, h para la energía, l para el nivel, i para el inventario.\",\r\n\t\t\tbonus1: \"Bonus de energía\",\r\n\t\t\tbonus2: \"Hipersalto\",\r\n\t\t\tbonus3: \"Ralentizado\",\r\n\t\t\tbonus4: \"Nada!\",\r\n\t\t\tbonus5: \"bomba\",\r\n\r\n\t\t\tmStart: \"Empezar juego\",\r\n\t\t\tmShop: \"Tienda (Tienes %1 monedas)\",\r\n\t\t\tmainMenu: \"Menú Principal. Flechas para navegar, enter para continuar.\",\r\n\t\t};\r\n\t}\r\n\r\n\tget(what, rep = []) {\r\n\t\tlet str;\r\n\t\tif (typeof this.strings[lang][what] !== 'undefined') {\r\n\t\t\tstr = this.strings[lang][what];\r\n\t\t} else if (typeof this.strings[1][what] !== 'undefined') {\r\n\t\t\tstr = this.strings[1][what];\r\n\t\t} else {\r\n\t\t\treturn what;\r\n\t\t}\r\n\t\trep.forEach((v, i) => {\r\n\t\t\tconst i1 = Number(i) + 1;\r\n\t\t\tstr = str.replace('%' + i1, v);\r\n\t\t});\r\n\t\treturn str;\r\n\t}\r\n\r\n\tspeak(what, rep = []) {\r\n\t\tlet str;\r\n\t\tif (typeof this.strings[lang][what] !== 'undefined') {\r\n\t\t\tstr = this.strings[lang][what];\r\n\t\t} else if (typeof this.strings[1][what] !== 'undefined') {\r\n\t\t\tstr = this.strings[1][what];\r\n\t\t} else {\r\n\t\t\tspeech.speak(what);\r\n\t\t}\r\n\t\trep.forEach((v, i) => {\r\n\t\t\tconst i1 = Number(i) + 1;\r\n\t\t\tstr = str.replace('%' + i1, v);\r\n\t\t});\r\n\t\tspeech.speak(str);\r\n\t}\r\n\r\n\tasync check(lng) {\r\n\t\tconst len = utils.objSize(this.strings) - 2;\r\n\t\tfor (const i in this.strings[1]) {\r\n\t\t\tif (!this.strings[lng].hasOwnProperty(i)) {\r\n\t\t\t\tawait new ScrollingText(i + ': ' + this.strings[1][i]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\nexport var strings = new Strings();\r\n","import $ from 'jquery';\r\nconst EventEmitter = require('events');\r\n'use strict';\r\nclass KeyboardInput extends EventEmitter {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.keyDown = [];\r\n\t\tthis.justPressed = [];\r\n\t\tthis.chars = [];\r\n\t\tthis.justReleased = [];\r\n\t\tthis.justPressedEventCallback = null;\r\n\t\tthis.charEventCallback = null;\r\n\t}\r\n\r\n\tinit() {\r\n\t\tconst that = this;\r\n\t\t// \t\t$(document).keydown(function(event) { that.handleKeyDown(event); });\r\n\t\t// \t\t$(document).keyup(function(event) { that.handleKeyUp(event); });\r\n\t\tdocument.addEventListener('keydown', event => {\r\n\t\t\tthat.handleKeyDown(event);\r\n\t\t});\r\n\t\tdocument.addEventListener('keyup', event => {\r\n\t\t\tthat.handleKeyUp(event);\r\n\t\t});\r\n\t\tdocument.addEventListener('keypress', event => {\r\n\t\t\tthat.handleChar(event);\r\n\t\t});\r\n\t}\r\n\tpause() {\r\n\t\tthis.isPaused = true;\r\n\t}\r\n\tresume() {\r\n\t\tthis.isPaused = false;\r\n\t}\r\n\thandleKeyDown(event) {\r\n\t\tif (this.keyDown[event.which] != true || typeof this.keyDown[event.which] === 'undefined') {\r\n\t\t\tthis.keyDown[event.which] = true;\r\n\t\t\tthis.justPressed[event.which] = true;\r\n\t\t\tthis.emit(event.which);\r\n\t\t\tthis.justReleased[event.which] = false;\r\n\t\t\tif (typeof this.justPressedEventCallback !== 'undefined' && this.justPressedEventCallback != null) {\r\n\t\t\t\tthis.justPressedEventCallback(event.which);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\thandleChar(char) {\r\n\t\tif (char.which < 48 || char.which > 122) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (String.fromCharCode(char.which) != '') {\r\n\t\t\tthis.chars += String.fromCharCode(char.which);\r\n\t\t\tthis.emit(\"chr\" + String.fromCharCode(char.which));\r\n\t\t\tif (typeof this.charEventCallback !== 'undefined' && this.charEventCallback != null) {\r\n\t\t\t\tthis.charEventCallback(String.fromCharCode(char.which));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\thandleKeyUp(event) {\r\n\t\tif (this.keyDown[event.which] == true) {\r\n\t\t\tthis.keyDown[event.which] = false;\r\n\t\t\tthis.justPressed[event.which] = false;\r\n\t\t\tthis.justReleased[event.which] = true;\r\n\t\t\tthis.emit(\"!\" + event.which);\r\n\t\t}\r\n\t\tthis.chars = '';\r\n\t}\r\n\tdestroy() {\r\n\t\tthis.charEventCallback = null;\r\n\t\tthis.justPressedEventCallback = null;\r\n\t}\r\n\tisDown(event) {\r\n\t\tif (this.isPaused) return false;\r\n\t\treturn this.keyDown[event];\r\n\t}\r\n\r\n\tisJustPressed(event) {\r\n\t\tif (this.isPaused) return false;\r\n\t\tif (this.justPressed[event] == true) {\r\n\t\t\tthis.justPressed[event] = false;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tisJustReleased(event) {\r\n\t\tif (this.justReleased[event]) {\r\n\t\t\tthis.justReleased[event] = false;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tkeysDown() {\r\n\t\tconst kd = [];\r\n\t\tthis.keyDown.forEach((v, i) => {\r\n\t\t\tif (v) {\r\n\t\t\t\tkd.push(i);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn kd;\r\n\t}\r\n\r\n\tgetChars() {\r\n\t\tconst kd = this.chars;\r\n\t\tthis.chars = '';\r\n\t\treturn kd;\r\n\t}\r\n\r\n\tkeysPressed() {\r\n\t\tconst kd = [];\r\n\t\tthis.justPressed.forEach((v, i) => {\r\n\t\t\tif (v) {\r\n\t\t\t\tkd.push(i);\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.justPressed.splice();\r\n\t\treturn kd;\r\n\t}\r\n\r\n\treleaseAllKeys() {\r\n\r\n\t}\r\n\r\n\tkeysReleased() {\r\n\t\tconst kd = [];\r\n\t\tthis.justReleased.forEach((v, i) => {\r\n\t\t\tif (v) {\r\n\t\t\t\tkd.push(i);\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.justReleased.splice();\r\n\t\treturn kd;\r\n\t}\r\n}\r\n\r\nexport { KeyboardInput };\r\n","import \"babel-polyfill\";\r\nconst { app } = require('electron').remote;\n\tconst { exec } = require(\"child_process\");\r\nimport { report } from './main';\r\n\r\n'use strict';\r\n\r\nimport { strings } from './strings';\r\nimport { utils } from './utilities'\r\nimport { lang, ttsVoice, ttsRate } from './main';\r\nimport { KeyboardInput } from './input.js';\r\nimport { KeyEvent } from './keycodes';\r\nconst useWebTTS = true;\r\nimport Speech from 'speak-tts' // es6\r\nclass TTS {\r\n\tconstructor(webTTS = true) {\r\n\t\tthis.voices = []\r\n\t\tthis.speechController = new KeyboardInput();\r\n\t\tthis.speechController.init();\r\n\t\tthis.ducking = false;\r\n\t\tif (lang == 1) this.lang = \"en\";\r\n\t\tif (lang == 2) this.lang = \"es\";\r\n\t\tthis.webTTS = webTTS;\r\n\t\tthis.synth = new Speech()\r\n\t\tthis.rate = 3;\r\n\t\tthis.speechController.justPressedEventCallback = (key) => {\r\n\t\t\tif (this.interrupt) this.speak(\"\", false);\r\n\t\t\tif (key == KeyEvent.VK_SHIFT || key == KeyEvent.DOM_VK_ESCAPE) {\r\n\t\t\t\tthis.speak(\"\", false);\n\t\t\t\tif (this.childProcess) this.childProcess.kill()\n\t\t\t\tthis.unduck()\r\n\t\t\t}\n\t\t\tif (key == KeyEvent.VK_UP && this.speechController.isDown(KeyEvent.DOM_VK_SHIFT)) {\n//rate here\nthis.setRate(this.rate+1)\nstrings.speak('newRate');\n\t\t\t}\n\t\t\tif (key == KeyEvent.VK_DOWN && this.speechController.isDown(KeyEvent.DOM_VK_CONTROL)) {\n//rate here\nthis.setRate(this.rate+1)\nstrings.speak('newRate');\n\t\t\t}\n\t\t\t\n\t\t\t\r\n\t\t};\r\n\r\n\t\tthis.synth.init({\r\n\t\t\tlang: this.lang,\r\n\t\t\trate: this.rate,\r\n\t\t\tsplitSentences: false,\n\t\t\t'listeners': {\n\t\t\t}\n\r\n\t\t})\r\n\t\t\t.then((data) => {\n\t\t\t\tthis.voices = data.voices;\n\t\t\t}).catch(e => {\r\n\t\t\t\treport(e);\r\n\t\t\t})\r\n\t}\r\n\tsetLanguage(lang) {\n\r\n\t\ttry {\r\n\t\t\tif (lang == 1) this.lang = \"en\";\r\n\t\t\tif (lang == 2) this.lang = \"es\";\r\n\t\t\tthis.synth.setLanguage(this.lang)\n\t\t\tif (process.platform=='darwin') this.setVoice(null,true)\n\t\t\t\t\t\t\t\tconsole.log(\"default voice \",this.voice)\n\r\n\t\t} catch (err) {\r\n\t\t\treport(err);\r\n\t\t}\r\n\t}\r\n\tsetRate(r) {\r\n\t\tlet newRate = r;\r\n\t\tif (r < 1) newRate == 1;\r\n\t\tif (r > 10) newRate = 10;\r\n\t\tthis.rate = newRate;\r\n\t\tthis.synth.setRate(newRate);\r\n\t}\r\n\tspeak(text, queue = false) {\r\n\t\tlet sr = app.accessibilitySupportEnabled;\r\n\r\n\t\tif (sr) this.webTTS = false;\r\n\t\tif (!sr) this.webTTS = true;\n\t\tif (process.platform == 'darwin') this.webTTS=true\r\n\t\tif (this.webTTS) {\r\n\t\t\ttry {\n\t\t\t\tlet oldText=text;\r\n\t\t\t\tif (typeof text == \"number\") {\r\n\t\t\t\t\ttext = \" \"+text + \".\";\n\t\t\t\t\t//we need this because some voices fail to process numbers. Why? Don't ask me.\r\n\t\t\t\t}\n\t\t\t\tif (process.platform == 'darwin') {\n\t\t\t\t\tthis.speakUnthreaded(text)\n\t\t\t\t} else {\r\n\t\t\t\tthis.synth.speak({\r\n\t\t\t\t\ttext: text,\r\n\t\t\t\t\tqueue: queue,\r\n\t\t\t\t\tlisteners: {\r\n\t\t\t\t\t\tonstart: () => {\r\n\t\t\t\t\t\t\tthis.duck();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tonend: () => {\r\n\t\t\t\t\t\t\tthis.unduck();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tonerror: (err) => {\r\n\t\t\t\t\t\t\t//this.setVoice(null,true);\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t}\r\n\t\t\t\t})\n\t\t\t\t}\r\n\t\t\t} catch(e) {\n\t\t\t\tconsole.error(e)\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.duck();\r\n\t\t\tdocument.getElementById('speech').innerHTML = '';\r\n\t\t\tconst para = document.createElement('p');\r\n\t\t\tpara.appendChild(document.createTextNode(text));\r\n\t\t\tdocument.getElementById('speech').appendChild(para);\r\n\t\t}\r\n\t} // End speak()\r\n\r\n\tsetWebTTS(tts) {\r\n\t\tthis.webTTS = tts;\r\n\t}\r\n\r\n\tstop() {\r\n\t\tif (this.webTTS) {\r\n\t\t\tthis.synth.cancel();\r\n\t\t}\r\n\t}\r\n\tasync changeRate() {\r\n\t\tlet rate = speech.rate;\r\n\t\tconst inp = new KeyboardInput();\r\n\t\tinp.init();\r\n\t\tstrings.speak('rating');\r\n\t\twhile (!inp.isJustPressed(KeyEvent.DOM_VK_RETURN)) {\r\n\t\t\tawait utils.sleep(5);\r\n\t\t\tif (inp.isJustPressed(KeyEvent.DOM_VK_RIGHT)) {\r\n\t\t\t\trate += 0.25;\r\n\t\t\t\tif (rate > 10) rate = 10;\r\n\r\n\t\t\t\tspeech.setRate(rate)\r\n\t\t\t\tstrings.speak('newRate');\r\n\t\t\t}\r\n\t\t\tif (inp.isJustPressed(KeyEvent.DOM_VK_LEFT)) {\r\n\t\t\t\trate -= 0.25;\r\n\t\t\t\tif (rate < 1) rate = 1;\r\n\t\t\t\tspeech.setRate(rate)\r\n\t\t\t\tstrings.speak('newRate');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tchangeVoice(name) {\r\n\t\tlet voiceArray = []\r\n\t\tfor (var k in this.voices) {\r\n\t\t\tvoiceArray.push(this.voices[k].name)\r\n\t\t}\r\n\t\tif (voiceArray.includes(name)) {\r\n\t\t\tspeech.synth.setVoice(name);\n\t\t\tthis.voice=name\r\n\t\t}\r\n\r\n\t}\r\n\tsetVoice(cb, silent = false) {\r\n\t\t//what language do we want?\r\n\t\tlet wl = \"en\";\r\n\t\tif (lang == 1) wl = \"en\";\r\n\t\tif (lang == 2) wl = \"es\";\r\n\t\tlet voiceArray = []\r\n\t\tfor (var k in this.voices) {\r\n\t\t\t//get the first part of the voice languages\r\n\t\t\tlet vl = this.voices[k].lang.split(\"-\")[0]\r\n\t\t\t//do we want this language?\r\n\t\t\tif (vl == wl) {\r\n\t\t\t\tvoiceArray.push(this.voices[k].name)\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!silent) speech.speak(strings.get(\"selectVoice\", [voiceArray.length]));\r\n\t\tlet input = new KeyboardInput()\r\n\t\tlet selection = -1;\r\n\t\tinput.init();\r\n\t\tif (!silent) {\r\n\t\t\tinput.justPressedEventCallback = ((key) => {\r\n\t\t\t\tif (key == KeyEvent.DOM_VK_DOWN) {\r\n\t\t\t\t\tselection++;\r\n\t\t\t\t\tif (selection >= voiceArray.length) selection = 0;\r\n\t\t\t\t}\r\n\t\t\t\tif (key == KeyEvent.DOM_VK_UP) {\r\n\t\t\t\t\tselection--;\r\n\t\t\t\t\tif (selection <= -1) selection = voiceArray.length - 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (key != KeyEvent.DOM_VK_RETURN && (key == KeyEvent.DOM_VK_UP || key == KeyEvent.DOM_VK_DOWN)) { //dirty hack\r\n\t\t\t\t\tthis.synth.setVoice(voiceArray[selection]);\r\n\t\t\t\t\tspeech.speak(voiceArray[selection])\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t//it is enter\r\n\t\t\t\t\tif (selection != -1) { //don't crash if it's -1.\r\n\t\t\t\t\t\tinput.destroy();\r\n\t\t\t\t\t\tif (typeof cb !== \"undefined\") {\r\n\t\t\t\t\t\t\tcb(voiceArray[selection])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn voiceArray[selection]\r\n\t\t\t\t\t}\r\n\t\t\t\t}//enter action\r\n\t\t\t});//callback\r\n\t\t} //not silent\r\n\t\telse {\r\n\t\t\ttry {\r\n\t\t\t\tthis.synth.setVoice(voiceArray[0]);\n\t\t\t\tthis.voice=voiceArray[0]\r\n\t\t\t\treturn voiceArray[0];\r\n\t\t\t} catch (err) {\r\n\t\t\t\treport(err);\r\n\t\t\t\tthis.synth.setVoice(voiceArray[1]);\n\t\t\t\tthis.voice=voiceArray[1]\r\n\t\t\t\treturn voiceArray[1];\r\n\t\t\t} // catch block\r\n\t\t}//else\r\n\t}//function\r\n\tduck() {\r\n\t\tif (this.ducking) return;\r\n\t\tthis.ducking = true;\r\n\t\tif (typeof this.ducker !== \"undefined\") this.ducker.duck();\r\n\t}\r\n\tunduck() {\r\n\t\tthis.ducking = false;\r\n\t\tif (typeof this.ducker !== \"undefined\") this.ducker.unduck();\r\n\t}\r\nspeakUnthreaded(text) {\n\tlet rate=this.rate*100\nif (this.childProcess) this.childProcess.kill()\nthis.duck()\n\tthis.childProcess=exec('say \"'+text+'\" -r '+rate+ ' -v '+this.voice, (error, stdout, stderr) => {\n\t\tif (error) {\n\t\t\tthrow(`error: ${error.message}`);\n\t\t\treturn;\n\t\t}\n\t\tif (stderr) {\n\t\t\tconsole.log(`stderr: ${stderr}`);\n\t\t\treturn;\n\t\t}\n\t\tconsole.log(`stdout: ${stdout}`);\n\t\tthis.unduck();\n\t});\n}\r\n} // End class\r\nconst speech = new TTS(false);\r\nexport { TTS, speech };\r\n","import \"babel-polyfill\";\r\nimport { report } from './main';\r\nimport { speech } from './tts';\r\nimport panner from 'sono/effects/panner';\r\nconst EventEmitter = require('events');\r\nimport sono from 'sono';\r\nimport { KeyboardInput } from './input';\r\nimport { KeyEvent } from './keycodes';\r\nimport { utils } from './utilities';\r\npanner.defaults = {\r\n\tpanningModel: 'HRTF',\r\n\tmaxDistance: 50,\r\n};\r\nsono.playInBackground = true;\r\nvar playOnceTimer;\r\nclass SoundObjectItem extends EventEmitter {\r\n\tconstructor(file, callback = 0, tag = 0, stream = false, taggedAs = \"\") {\r\n\t\tsuper();\r\n\t\tthis.duckingFirstTime = true;\r\n\t\tthis.taggedAs = taggedAs;\r\n\t\tthis.stream = stream;\r\n\t\tthis.panner = null;\r\n\t\tthis.fileName = file;\r\n\t\tif (typeof file == \"string\") {\r\n\t\t\tif (!stream) {\r\n\t\t\t\tthis.sound = sono.create({\r\n\t\t\t\t\tsrc: file,\r\n\t\t\t\t\tonComplete: () => { this.doneLoading(); }\r\n\t\t\t\t});\r\n\t\t\t\tthis.timeout = setTimeout(() => { this.checkProgress(); }, 2000);\r\n\t\t\t\tthis.loaded = false;\r\n\t\t\t\tthis.callback = callback;\r\n\t\t\t\tthis.tag = tag;\r\n\t\t\t}\r\n\t\t\tif (stream) {\r\n\t\t\t\tthis.loaded = true;\r\n\t\t\t\tthis.callback = callback;\r\n\t\t\t\tthis.tag = tag;\r\n\t\t\t\tthis.sound = sono.create(new Audio(file));\r\n\t\t\t\tthis.doneLoading();\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (typeof file == \"object\") {\r\n\t\t\tthis.sound = sono.create(\"\");\r\n\t\t\tthis.sound.data = file;\r\n\t\t\tthis.loaded = false;\r\n\t\t\tthis.callback = callback;\r\n\t\t\tthis.tag = tag;\r\n\t\t\tthis.doneLoading();\r\n\t\t}\r\n\t}\r\n\r\n\tget playbackRate() {\r\n\t\treturn this.sound.playbackRate\r\n\t}\r\n\r\n\tset playbackRate(v) {\r\n\t\treturn this.sound.playbackRate = v;\r\n\t}\r\n\tget pitch() {\r\n\t\treturn this.sound.playbackRate\r\n\t}\r\n\r\n\tset pitch(v) {\r\n\t\treturn this.sound.playbackRate = v;\r\n\t}\r\n\r\n\tset loop(v) {\r\n\t\tthis.sound.loop = v;\r\n\t}\r\n\r\n\tcheckProgress() {\r\n\t\tif (this.stream) return;\r\n\t\tif (this.sound.progress == 0) {\r\n\t\t\tthis.sound.destroy();\r\n\t\t\tthis.sound = sono.create({ src: this.fileName, onComplete: () => { this.doneLoading(); } }, this.stream);\r\n\t\t}\r\n\r\n\t\tif (this.sound.progress == 1) {\r\n\t\t\tthis.doneLoading();\r\n\t\t} else {\r\n\t\t\tthis.timeout = setTimeout(() => { this.checkProgress(); }, 500);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tdoneLoading() {\r\n\t\tif (!this.stream) clearTimeout(this.timeout);\r\n\t\tthis.loaded = true;\r\n\t\tif (this.callback != 0) {\r\n\t\t\tthis.callback();\r\n\t\t}\r\n\t}\r\n\treplay() {\r\n\t\tthis.sound.stop()\r\n\t\tthis.sound.play()\r\n\t}\r\n\tplay() {\r\n\t\t//sometimes, html element sounds complain about having a different connection, so wrap it in a try catch block.\r\n\t\ttry {\r\n\t\t\tthis.sound.play();\r\n\t\t} catch (err) {\r\n\t\t\t//report(err);\r\n\t\t\t//recreate the sound and replay\r\n\t\t\tif (this.stream) this.sound = sono.create(new Audio(this.fileName));\r\n\t\t\tif (!this.stream) this.sound = sono.create({\r\n\t\t\t\tsrc: this.fileName,\r\n\t\t\t\tonComplete: () => { this.doneLoading(); }\r\n\t\t\t});\r\n\t\t\tthis.sound.play();\r\n\t\t}\r\n\t}\r\n\tstop() {\r\n\t\tthis.sound.stop();\r\n\r\n\t}\r\n\tpause() {\r\n\t\tthis.sound.pause();\r\n\t}\r\n\tresume() {\r\n\t\tthis.sound.resume();\r\n\t}\r\n\tdestroy() {\r\n\t\ttry {\r\n\r\n\t\t\tthis.sound.destroy();\r\n\t\t} catch (err) {\r\n\r\n\t\t}\r\n\t}\r\n\tunload() { this.sound.destroy(); }\r\n\tduck(time) {\r\n\t\tif (this.duckingFirstTime) this.oldVolume = this.volume;\r\n\t\tthis.duckingFirstTime = false;\r\n\t\tthis.sound.fade(0.3, 0.15);\r\n\t}\r\n\tunduck(time) {\r\n\t\tthis.sound.fade(this.oldVolume, 0.15);\r\n\t}\r\n\tasync fade(time) {\r\n\t\tthis.sound.fade(0, time / 1000);\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.sound.stop();\r\n\t\t\t\tresolve('ok');\r\n\t\t\t}, time);// End\r\n\t\t});// Promise\r\n\r\n\t}\r\n\r\n\tpos(x, y, z) {\r\n\r\n\t}\r\n\r\n\tforcePlay() {\r\n\t\tthis.sound.stop();\r\n\t\tthis.sound.play();\r\n\t}\r\n\tasync playSync(die = false) {\r\n\t\tconst inp = new KeyboardInput();\r\n\t\tinp.init();\r\n\t\tthis.sound.play();\r\n\r\n\t\tinp.justPressedEventCallback = (evt => {\r\n\t\t\tif (evt == KeyEvent.DOM_VK_Q || evt == KeyEvent.DOM_VK_X || evt == KeyEvent.DOM_VK_ESCAPE || evt == KeyEvent.DOM_VK_SPACE || evt == KeyEvent.DOM_VK_ENTER) {\r\n\t\t\t\tthis.sound.stop();\r\n\t\t\t\tinp.justPressedEventCallback = null;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tthis.sound.once('ended', () => {\r\n\t\t\t\tthis.sound.removeAllListeners();\r\n\t\t\t\tif (die) this.sound.destroy();\r\n\t\t\t\tresolve('ok');\r\n\t\t\t\tinp.justPressedEventCallback = null;\r\n\t\t\t});// End\r\n\t\t\tthis.sound.once('stop', () => {\r\n\t\t\t\tthis.sound.removeAllListeners();\r\n\t\t\t\tif (die) this.sound.destroy();\r\n\t\t\t\tresolve('ok');\r\n\t\t\t\tinp.justPressedEventCallback = null;\r\n\t\t\t});// Stop\r\n\t\t});// Promise\r\n\t}\r\n\r\n\tget active() {\r\n\t\tif (!this.sound.loaded) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (this.sound.progress < 1) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (this.sound.loaded) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t}\r\n\tget playing() {\r\n\t\treturn this.sound.playing;\r\n\t}\r\n\r\n\tget pan() {\r\n\t\tif (!this.panner) {\r\n\t\t\tthis.panner = this.sound.effects.add(panner());\r\n\t\t\tthis.currentPan = 0;\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\treturn this.currentPan;\r\n\t}\r\n\r\n\tset pan(v) {\r\n\t\tif (!this.panner) {\r\n\t\t\tthis.panner = this.sound.effects.add(panner());\r\n\t\t}\r\n\t\tthis.currentPan = v;\r\n\t\treturn this.panner.set(v);\r\n\t}\r\n\tget volume() {\r\n\t\treturn this.sound.volume;\r\n\t}\r\n\tset volume(v) {\r\n\t\tthis.sound.volume = v;\r\n\t}\r\n\r\n\tseek(time) {\r\n\t\treturn this.sound.seek(time);\r\n\t}\r\n\r\n\tget currentTime() {\r\n\t\treturn this.sound.currentTime;\r\n\t}\r\n\r\n\tget duration() {\r\n\t\treturn this.sound.duration * 1000;\r\n\t}\r\n\r\n\tget position() {\r\n\t\treturn this.sound.currentTime;\r\n\t}\r\n\r\n\tset currentTime(v) {\r\n\t\treturn this.sound.seek(v);\r\n\t}\r\n\r\n}\r\n\r\nclass SoundObject {\r\n\tconstructor() {\r\n\t\tthis.sounds = new Array();\r\n\t\tthis.loadingQueue = false;\r\n\t\tthis.queueCallback = 0;\r\n\t\tthis.loadedSounds = 0;\r\n\t\tthis.loadingSounds = 0;\r\n\t\tthis.loadedCallback = 0;\r\n\t\tthis.queue = new Array();\r\n\t\tthis.queueLength = 0;\r\n\t\tthis.statusCallback = null;\r\n\t\tthis.directory = \"./sounds/\";\r\n\t\tthis.extension = \".ogg\";\r\n\t\tthis.oneShots = new Array();\r\n\t\tthis.debug = false;\r\n\r\n\r\n\t\tthis.oneShotSound = null;\r\n\t}\r\n\tsetStatusCallback(callback) {\r\n\t\tthis.statusCallback = callback;\r\n\t}\r\n\tfindSound(file) {\r\n\t\tfor (let i = 0; i < this.sounds.length; i++) {\r\n\t\t\tif (this.sounds[i].fileName == file && this.sounds[i].loaded) {\r\n\t\t\t\treturn this.sounds[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\tfindSoundIndex(file) {\r\n\t\tfor (const i in this.sounds) {\r\n\t\t\tif (this.sounds[i].fileName == file) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t}\r\n\r\n\r\n\tresetQueuedInstance() {\r\n\t\tfor (let i = 0; i < this.sounds.length; i++) {\r\n\t\t\tif (typeof this.sounds[i] != \"undefined\") {\r\n\t\t\t\tif (this.sounds[i].tag == 1) {\r\n\t\t\t\t\tthis.sounds[i].sound.destroy();\r\n\t\t\t\t\tthis.sounds.splice(i, 1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.loadingQueue = false;\r\n\t\tthis.queueCallback = 0;\r\n\t\tthis.loadedSounds = 0;\r\n\t\tthis.loadingSounds = 0;\r\n\t\tthis.loadedCallback = 0;\r\n\t\tthis.queue = new Array();\r\n\t\tthis.queueLength = 0;\r\n\t\tthis.statusCallback = null;\r\n\t}\r\n\r\n\r\n\r\n\tcreate(file, stream = false, taggedAs = \"general\") {\r\n\t\tfile = this.directory + file + this.extension;\r\n\t\tlet found = -1;\r\n\t\tfound = this.findSound(file);\r\n\t\tlet returnObject = null;\r\n\t\tif (found == -1 || found.sound.data == null) {\r\n\t\t\treturnObject = new SoundObjectItem(file, () => { if (!stream) this.doneLoading(); }, 0, stream, taggedAs);\r\n\t\t\tthis.sounds.push(returnObject);\r\n\t\t} else {\r\n\t\t\treturnObject = new SoundObjectItem(found.sound.data, () => { if (!stream) this.doneLoading(); }, 0, stream, taggedAs);\r\n\t\t\treturnObject.fileName = found.fileName;\r\n\t\t}\r\n\t\treturnObject.fileName = file; //otherwise html element fileNames get fucked up.\r\n\t\treturn returnObject;\r\n\t}\r\n\tasync loadQueueSync() {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tso.setQueueCallback(() => {\r\n\t\t\t\tresolve(true);\r\n\t\t\t});\r\n\t\t\tso.loadQueue();\r\n\t\t});\r\n\t}\r\n\tasync createSync(file, stream = false, taggedAs = \"general\") {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tfile = this.directory + file + this.extension;\r\n\t\t\tlet found = -1;\r\n\t\t\tfound = this.findSound(file);\r\n\t\t\tlet returnObject = null;\r\n\t\t\tif (found == -1 || found.sound.data == null) {\r\n\t\t\t\treturnObject = new SoundObjectItem(file, () => { if (!stream) this.doneLoading(); }, 0, stream, taggedAs);\r\n\t\t\t\tthis.sounds.push(returnObject);\r\n\t\t\t\tif (stream) resolve(returnObject);\r\n\t\t\t} else {\r\n\t\t\t\treturnObject = new SoundObjectItem(found.sound.data, () => { if (!stream) this.doneLoading(); }, 0, stream, taggedAs);\r\n\t\t\t\tresolve(returnObject);\r\n\t\t\t}\r\n\t\t\treturnObject.fileName = file; //otherwise html element fileNames get fucked up.\r\n\t\t\tif (stream) resolve(returnObject);\r\n\t\t\tif (!stream) {\r\n\t\t\t\treturnObject.sound.once('loaded', () => {\r\n\t\t\t\t\tresolve(returnObject);\r\n\t\t\t\t\tthis.doneLoading();\r\n\t\t\t\t});// End\r\n\t\t\t}//stream\r\n\t\t});// Promise\r\n\t}\r\n\tasync playSync(file) {\r\n\t\tlet snd = await so.createSync(file);\r\n\t\tawait snd.playSync();\r\n\t\tsnd.destroy();\r\n\t}\r\n\r\n\tenqueue(file, stream = false) {\r\n\t\tfile = this.directory + file + this.extension;\r\n\t\tthis.queue.push({ file, stream });\r\n\t\tthis.queueLength = this.queue.length;\r\n\t}\r\n\r\n\tloadQueue() {\r\n\r\n\t\tthis.handleQueue();\r\n\t\tthis.loadingQueue = true;\r\n\r\n\t}\r\n\tsetQueueCallback(callback) {\r\n\t\tthis.queueCallback = callback;\r\n\t}\r\n\tresetQueue() {\r\n\t\tthis.queue = [];\r\n\t\tthis.loadingQueue = false;\r\n\t}\r\n\thandleQueue() {\r\n\t\tif (this.queue.length > 0) {\r\n\t\t\tif (typeof this.statusCallback != \"undefined\" && this.statusCallback != null) {\r\n\t\t\t\tthis.statusCallback(1 - this.queue.length / this.queueLength);\r\n\t\t\t}\r\n\t\t\tif (this.findSound(this.queue[0].file) != -1) {\r\n\t\t\t\tthis.queue.splice(0, 1);\r\n\t\t\t\tthis.handleQueue();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet file = this.queue[0].file;\r\n\t\t\tlet taggedAs = this.queue[0].taggedAs;\r\n\t\t\tlet stream = this.queue[0].stream;\r\n\t\t\tthis.queue.splice(0, 1);\r\n\t\t\tthis.sounds.push(new SoundObjectItem(file, () => { this.handleQueue(); }, 1, stream, taggedAs));\r\n\r\n\t\t} else {\r\n\t\t\tthis.loadingQueue = false;\r\n\t\t\tif (typeof this.queueCallback != \"undefined\" && this.queueCallback != 0) {\r\n\t\t\t\tthis.queueCallback();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\tsetCallback(callback) {\r\n\t\tthis.loadedCallback = callback;\r\n\t}\r\n\tdoneLoading() {\r\n\t\tlet result = this.isLoading();\r\n\r\n\t\tif (result == 1) {\r\n\r\n\t\t\tif (typeof this.loadedCallback != \"undefined\" && this.loadedCallback != 0 && this.loadedCallback != null) {\r\n\t\t\t\tthis.loadedCallback();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tisLoading() {\r\n\t\tlet loading = 0;\r\n\t\tthis.loadedSounds = 0;\r\n\t\tthis.loadingSounds = 0;\r\n\t\tlet stillLoading = new Array();\r\n\t\tfor (let i = 0; i < this.sounds.length; i++) {\r\n\t\t\tif (typeof this.sounds[i] != \"undefined\") {\r\n\t\t\t\tif (this.sounds[i].loaded == false) {\r\n\t\t\t\t\tthis.loadingSounds++;\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.loadedSounds++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this.loadedSounds / this.sounds.length;\r\n\t}\r\n\r\n\tplayOnce(file) {\r\n\t\tthis.oneShotSound = this.create(file).sound;\r\n\t\tthis.oneShotSound.stop();\r\n\t\tthis.oneShotSound.play();\r\n\t\tthis.oneShotSound.on(\"ended\", () => {\r\n\t\t\tif (this.oneShotSound.playing == false) this.oneShotSound.destroy();\r\n\t\t});\r\n\r\n\t}\r\n\tdestroy(file, callback = 0) {\r\n\t\tlet noMore = false;\r\n\t\tconst filename = this.directory + file + this.extension;\r\n\t\twhile (!noMore) {\r\n\t\t\tconst found = this.findSoundIndex(filename);\r\n\t\t\tif (found == -1) {\r\n\t\t\t\tnoMore = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.sounds[found].sound.unload();\r\n\t\t\t\tthis.sounds.splice(found, 1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (callback != 0) {\r\n\t\t\tcallback();\r\n\t\t}\r\n\t}\r\n\r\n\tkill(callback = 0) {\r\n\t\twhile (this.sounds.length > 0) {\r\n\t\t\tthis.sounds.splice(0, 1);\r\n\t\t}\r\n\t\tsono.destroyAll();\r\n\t\tif (callback != 0) {\r\n\t\t\tcallback();\r\n\t\t}\r\n\t}\r\n\tdestroyWithTag(which) {\r\n\t\tthis.sounds.forEach((sound, index) => {\r\n\t\t\tif (sound.taggedAs == which) {\r\n\t\t\t\tthis.sounds.splice(index, 1)\r\n\t\t\t\tconsole.log(\"destroyed via tag\")\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n}\r\nexport let so = new SoundObject();","import \"babel-polyfill\";\r\n'use strict';\r\nimport $ from 'jquery';\r\nimport {KeyEvent} from './keycodes';\r\nimport {so} from './soundObject';\r\nimport {speech} from './tts';\r\nimport copy from 'copy-to-clipboard';\r\nif (runningText == undefined) {\r\n\tvar runningText = 0;\r\n}\r\nclass ScrollingText {\r\n\tconstructor(text, delimiter = '\\n', callback = 0) {\r\n\t\tthis.callback = callback;\r\n\r\n\t\tthis.text = text;\r\n\t\tthis.delimiter = delimiter;\r\n\t\tthis.splitText = this.text.split(delimiter);\r\n\t\tthis.currentLine = 0;\r\n\t\tthis.sndOpen = so.create('ui/textOpen');\r\n\t\tthis.sndContinue = so.create('ui/textScroll');\r\n\t\tthis.sndClose = so.create('ui/textClose');\r\n\t\tconst id = document.getElementById('touchArea');\r\n\t\t// This.hammer = new Hammer(id);\r\n\t\tthis.init();\r\n\t\tif (this.callback == 0) {\r\n\t\t\treturn this.prom = new Promise(resolve => {\r\n\t\t\t\t\tthis.res = resolve;\r\n\t\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tinit() {\r\n\t\tconst that = this;\r\n\t\trunningText = this;\r\n\t\tdocument.addEventListener('keydown', this.handleKeys);\r\n\t\t// This.hammer.on(\"swipeleft swiperight\", function() { that.handleTap(0); });\r\n\t\t// this.hammer.on(\"tap\", function() { that.handleTap(1); });\r\n\t\tthis.sndOpen.play();\r\n\t\tthis.currentLine = 0;\r\n\t\tthis.readCurrentLine();\r\n\t}\r\n\r\n\thandleKeys(event) {\r\n\t\tswitch (event.which) {\r\n\t\t\tcase KeyEvent.DOM_VK_UP:\r\n\t\t\tcase KeyEvent.DOM_VK_DOWN:\r\n\t\t\tcase KeyEvent.DOM_VK_LEFT:\r\n\t\t\tcase KeyEvent.DOM_VK_RIGHT:\r\n\t\t\t\trunningText.readCurrentLine();\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase KeyEvent.DOM_VK_C:\r\n\t\t\t\trunningText.copyCurrentLine();\r\n\t\t\t\tbreak;\r\n\t\t\tcase KeyEvent.DOM_VK_RETURN:\r\n\t\t\t\trunningText.advance();\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\thandleTap(action) {\r\n\t\tif (action == 0) {\r\n\t\t\tthis.readCurrentLine();\r\n\t\t}\r\n\r\n\t\tif (action == 1) {\r\n\t\t\tthis.advance();\r\n\t\t}\r\n\t}\r\n\r\n\treadCurrentLine() {\r\n\t\tif (this.splitText[this.currentLine][0] == '!') {\r\n\t\t\tconst str = this.splitText[this.currentLine].substr(1);\r\n\t\t\tconst snd = so.create(str, true);\r\n\t\t\tsnd.play();\r\n\t\t\tsnd.sound.once('end', () => {\r\n\t\t\t\t\tthis.advance();\r\n\t\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tspeech.speak(this.splitText[this.currentLine]);\r\n\t\t}\r\n\t}\r\ncopyCurrentLine() {\r\n\t\t\tcopy(this.splitText[this.currentLine]);\t\r\n\t\t\tthis.advance();\r\n}\r\n\r\n\tadvance() {\r\n\t\tif (this.currentLine < this.splitText.length - 1) {\r\n\t\t\tthis.currentLine++;\r\n\t\t\tthis.sndContinue.play();\r\n\t\t\tthis.readCurrentLine();\r\n\t\t} else {\r\n\t\t\tthis.sndClose.play();\r\n\t\t\tthis.sndClose.unload();\r\n\t\t\tthis.sndOpen.unload();\r\n\t\t\tthis.sndContinue.unload();\r\n\t\t\tdocument.removeEventListener('keydown', this.handleKeys);\r\n\t\t\t//\t\t\tThis.hammer.unload();\r\n\t\t\tif (this.callback != 0) {\r\n\t\t\t\tthis.callback();\r\n\t\t\t} else {\r\n\t\t\t\tthis.res();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\nexport {ScrollingText, speech};\r\n","'use strict';\r\nimport sono from 'sono';\r\nimport { so } from './soundObject';\r\nimport panner from 'sono/effects/panner';\r\npanner.defaults = {\r\n\tpanningModel: 'HRTF',\r\n\tmaxDistance: 50,\r\n};\r\n/** Simple wrapper for agk-soundobject to quickly create 3D sound sources.\r\n* @constructor\r\n\t* @param {string} file - the path to the file without base directory and extension.\r\n\t* @param {number} x - Initial X coordinate of the sound\r\n\t* @param {number} y - Initial Y coordinate of the sound\r\n\t* @param {number} z - Initial Z coordinate of the sound\r\n\t* @param {boolean} loop - True if the sound should loop\r\n\t* @return {object} A Sound Source object\r\n*/\r\nexport class SoundSource {\r\n\tconstructor(file, x = 0, y = 0, z = 0) {\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\t\tthis.sound = son.create(file);\r\n\t\tthis.pan = this.sound.effects.add(panner());\r\n\t\tthis.pos(this.x, this.y, this.z);\r\n\t\tthis.rate = 1;\r\n\t\tthis.speed = 0;\r\n\t\tthis.minRate = 0.8;\r\n\t\tthis.maxRate = 1.2;\r\n\t\tthis.toDestroy = false;\r\n\t\tthis.rateShiftSpeed = 0.015;\r\n\t\tthis.sound.currentPosition = 0;\r\n\t}\r\n\tset loop(v) {\r\n\t\tthis.sound.loop = v;\r\n\t}\r\n\t/** Plays the sound source */\r\n\tplay() {\r\n\t\t// This.sound.seek(0);\r\n\t\tthis.sound.play();\r\n\t}\r\n\r\n\t/** Positions the sound source in 3D space.\r\n\t* @param {number} x - The new X coordinate of the sound\r\n\t* @param {number} y - The new Y coordinate of the sound\r\n\t* @param {number} z - The new Z coordinate of the sound\r\n*/\r\n\tpos(x, y, z) {\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\t\tthis.pan.setPosition(x, y, z);\r\n\t}\r\n\r\n\t/** Empty update method */\r\n\tupdate() {\r\n\t}\r\n}","import { SoundSource } from './soundSource.js';\r\nimport { so } from './soundObject.js';\r\n\r\nclass SoundHandler {\r\n\tconstructor(directional = false) {\r\n\t\tthis.staticSounds = [];\r\n\t\tthis.dynamicSounds = [];\r\n\t\tthis.currentDynamicSound = 0;\r\n\t\tthis.maxDynamicSounds = 512;\r\n\t\tthis.currentStaticSound = 0;\r\n\t\tthis.maxStaticSounds = 512;\r\n\t\tthis.reuseSounds = true;\r\n\t\tthis.x = 0;\r\n\t\tthis.y = 0;\r\n\t\tthis.z = 0;\r\n\t\tthis.directional = directional;\r\n\t}\r\n\r\n\tplayStatic(file, loop = 1, slot = -1, stream = false) {\r\n\t\tif (slot = -1) {\r\n\t\t\tslot = this.findFreeStaticSlot();\r\n\t\t}\r\n\t\tthis.staticSounds[slot] = new SoundItem(file, this.directional, stream);\r\n\t\tif (loop == 1) {\r\n\t\t\tthis.staticSounds[slot].sound.loop = true;\r\n\t\t} else {\r\n\t\tthis.staticSounds[slot].sound.sound.on(\"ended\",()=> { \r\n\t\tthis.staticSounds[slot].destroy()\r\n\t\t })\r\n\t\t}\r\n\t\tthis.staticSounds[slot].sound.play();\r\n\t\treturn slot;\r\n\t}\r\n\r\n\tfindFreeStaticSlot() {\r\n\t\tfor (let i = 0; i < this.maxStaticSounds; i++) {\r\n\t\t\tif (this.staticSounds[i] == -1 || typeof this.staticSounds[i] === 'undefined') {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.currentStaticSound < this.maxStaticSounds) {\r\n\t\t\tthis.currentStaticSound++;\r\n\t\t\treturn this.currentStaticSound;\r\n\t\t}\r\n\t\tthis.currentStaticSound = 0;\r\n\t\treturn this.currentStaticSound;\r\n\t}\r\n\r\n\tfindFreeDynamicSlot() {\r\n\t\tfor (let i = 0; i < this.maxDynamicSounds; i++) {\r\n\t\t\tif (this.dynamicSounds[i] == -1 || typeof this.dynamicSounds[i] === 'undefined') {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.currentDynamicSound < this.maxDynamicSounds) {\r\n\t\t\tthis.currentDynamicSound++;\r\n\t\t\treturn this.currentDynamicSound;\r\n\t\t}\r\n\t\tthis.currentDynamicSound = 0;\r\n\t\treturn this.currentDynamicSound;\r\n\t}\r\n\r\n\tfindDynamicSound(file) {\r\n\t\tfor (let i = 0; i < this.dynamicSounds.length; i++) {\r\n\t\t\tif (this.dynamicSounds[i].file == file) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\r\n\tplay(file) {\r\n\t\tlet slot = 0;\r\n\r\n\t\tlet reuse = 0;\r\n\t\tif (this.reuseSounds) {\r\n\t\t\tslot = this.findDynamicSound(file);\r\n\t\t\treuse = true;\r\n\t\t}\r\n\t\tif (slot == -1 || this.reuseSounds == false) {\r\n\t\t\tslot = this.findFreeDynamicSlot();\r\n\t\t\treuse = false;\r\n\t\t}\r\n\t\tif (typeof this.dynamicSounds[slot] === 'undefined') {\r\n\t\t\tif (reuse == false) {\r\n\t\t\t\tthis.dynamicSounds[slot] = new SoundItem(file, this.directional);\r\n\t\t\t}\r\n\t\t} else if (reuse == false) {\r\n\t\t\tthis.dynamicSounds[slot].sound.destroy();\r\n\t\t\tthis.dynamicSounds[slot] = new SoundItem(file, directional);\r\n\t\t}\r\n\t\tthis.dynamicSounds[slot].sound.play();\r\n\t}\r\n\r\n\tupdate(position) {\r\n\t\tif (this.directional == true) {\r\n\t\t\tfor (let i = 0; i < this.dynamicSounds.length; i++) {\r\n\t\t\t\tthis.dynamicSounds[i].sound.pos(position.x, position.y, position.z);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdestroy() {\r\n\t\tfor (var i = 0; i < this.dynamicSounds.length; i++) {\r\n\t\t\tthis.dynamicSounds[i].destroy();\r\n\t\t\tthis.dynamicSounds.splice(i, 1);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < this.staticSounds.length; i++) {\r\n\t\t\tthis.staticSounds[i].destroy();\r\n\t\t\tthis.staticSounds.splice(i, 1);\r\n\t\t}\r\n\t}\r\n}\r\nclass SoundItem {\r\n\tconstructor(file, threeD = false, stream = false) {\r\n\t\tthis.file = file;\r\n\t\tthis.threeD = threeD;\r\n\t\tif (this.threeD == true) {\r\n\t\t\tthis.sound = new SoundSource(file, 0, 0, 0);\r\n\t\t} else {\r\n\t\t\tthis.sound = so.create(file, stream);\r\n\t\t}\r\n\t}\r\n\r\n\tdestroy() {\r\n\t\tthis.sound.destroy();\r\n\t}\r\n}\r\n\r\nexport { SoundHandler };\r\n","'use strict';\r\nimport { so } from './soundObject';\r\n\r\nimport { KeyboardInput } from './input';\r\nimport { KeyEvent } from './keycodes';\r\nimport { speech } from './tts';\r\nclass LanguageSelector {\r\n\tconstructor(element, callback) {\r\n\t\tthis.langs = [];\r\n\t\tthis.input = new KeyboardInput();\r\n\t\tthis.input.init();\r\n\t\tthis.langs.push(\"select a language. Selecciona un idioma.\");\r\n\t\tthis.langs.push(\"I want to play in English\");\r\n\t\tthis.langs.push(\"Quiero jugar en español.\");\r\n\t\tthis.id = document.getElementById(element);\r\n\t\tthis.callback = callback;\r\n\t\tthis.container = document.createElement('div');\r\n\t\tthis.buttons = [];\r\n\t\tthis.buttons[0] = document.createElement('div');\r\n\t\tthis.buttons[0].innerHTML = this.langs[0];\r\n\t\tthis.container.appendChild(this.buttons[0]);\r\n\t\tfor (let i = 1; i < this.langs.length; i++) {\r\n\t\t\tthis.buttons[i] = document.createElement('input');\r\n\t\t\tthis.buttons[i].type = 'button';\r\n\t\t\tthis.buttons[i].value = this.langs[i];\r\n\t\t\tthis.buttons[i].addEventListener('click', () => {\r\n\t\t\t\tthis.sound.stop()\r\n\t\t\t\tthis.callback(i);\r\n\t\t\t\tthis.container.innerHTML = '';\r\n\t\t\t\tthis.input.removeAllListeners();\r\n\t\t\t\tdocument.getElementById(\"app\").focus();\r\n\t\t\t});\r\n\t\t\tthis.buttons[i].addEventListener('focus', () => {\r\n\t\t\t\tthis.sound.stop();\r\n\t\t\t\tspeech.setLanguage(i);\r\n\t\t\t\tspeech.speak(this.langs[i]);\r\n\t\t\t});\r\n\t\t\tthis.container.appendChild(this.buttons[i]);\r\n\t\t\tthis.input.once(\"chr\" + i, () => {\r\n\t\t\t\tthis.sound.stop()\r\n\t\t\t\tthis.callback(i);\r\n\t\t\t\tthis.container.innerHTML = '';\r\n\t\t\t\tthis.input.removeAllListeners();\r\n\t\t\t\tdocument.getElementById(\"app\").focus();\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.id.appendChild(this.container);\r\n\t\tthis.sound = so.create(\"ui/langSelect\");\r\n\t\tthis.sound.play();\r\n\r\n\t}\r\n}\r\nmodule.exports.LanguageSelector = LanguageSelector;\r\n","function Timer(callbacks, step) {\r\n\tlet last = 0;\r\n\tlet active = false;\r\n\tlet acc = 0;\r\n\tlet tick = 0;\r\n\tlet inc = step || 1 / 120;\r\n\tlet frameId;\r\n\r\n\tfunction onFrame(time) {\r\n\t\tif (last !== null) {\r\n\t\t\tacc += (time - last) / 1000;\r\n\t\t\twhile (acc > inc) {\r\n\t\t\t\tcallbacks.update(inc, tick);\r\n\t\t\t\ttick += 1;\r\n\t\t\t\tacc -= inc;\r\n\t\t\t}\r\n\t\t}\r\n\t\tlast = time;\r\n\t\tcallbacks.render();\r\n\t\tif (active) {\r\n\t\t\tframeId = requestAnimationFrame(onFrame);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction start() {\r\n\t\tlast = null;\r\n\t\tactive = true;\r\n\t\tframeId = requestAnimationFrame(onFrame);\r\n\t}\r\n\r\n\tfunction stop() {\r\n\t\tactive = false;\r\n\t\tcancelAnimationFrame(frameId);\r\n\t}\r\n\tfunction change(value) {\r\n\t\tinc = value || 1 / 60;\r\n\t\tacc = inc;\r\n\t\ttick = 0;\r\n\t\tstop();\r\n\t\tstart();\r\n\t}\r\n\treturn {\r\n\t\tstart,\r\n\t\t\tstop,\r\n\t\t\tchange\r\n\t};\r\n}\r\n\r\nmodule.exports = Timer;\r\n","const EventEmitter = require('events')\r\nexport class GameObject extends EventEmitter {\r\n\r\n    constructor(world, sound, x, y, z, width, height, depth) {\r\n        super()\r\n        this.world = world\r\n        this.alive = true\r\n        this.x = x\r\n        this.y = y\r\n        this.z = z\r\n        if (sound != \"\") {\r\n            this.sound = document.createElement(\"audio\")\r\n            this.sound.src = \"./sounds/\" + sound + \".ogg\"\r\n            this.mediaSource = this.world.context.createMediaElementSource(this.sound)\r\n            this.source = this.world.scene.createSource();\r\n            this.source.sourceWidth = width;\r\n            this.source.sourceHeight = height\r\n            this.source.sourceDepth = depth;\r\n            this.mediaSource.connect(this.source.input);\r\n            this.source.setPosition(this.x, this.y, this.z)\r\n            this.sound.play()\r\n            this.sound.loop = true\r\n\r\n        }\r\n    }\r\n    update() {\r\n\r\n    }\r\n    destroy() {\r\nthis.alive=false\r\n        if (this.sound != null) {\r\n            this.sound.load()\r\n}\r\n            this.sound=null\r\n            this.mediaSource=null;\r\n            this.source=null;\r\n            }\r\n}","import { GameObject } from './gameObject'\r\nimport { utils } from './utilities'\r\nimport { speech } from './tts'\r\nexport class Item extends GameObject {\r\n    constructor(world, x, y, sound) {\r\n        super(world, sound, x, y, 0, 1, 1, 1)\r\n        this.world.player.on(\"step\" + this.y, (() => {\r\n            if (this.world.player.x == this.x) this.step()\r\n        }))\r\n        this.world.player.on(\"step\" + (this.y + 1), (() => {\r\n            this.destroy()\r\n        }))\r\n        this.world.player.on(\"x\" + this.x, (() => {\r\n            if (!this.alive) return;\r\n            let distance = Math.round(utils.distance(this.world.player.x, this.world.player.y, this.x, this.y))\r\n            if (distance < 8) {\r\n                this.world.player.target.replay()\r\n            }\r\n        }))\r\n    }\r\n    step() {\r\n    }\r\n    update() {\r\n\r\n    }\r\n}","import { Item } from './item'\r\nimport { data, save } from './main'\r\nimport { speech } from './tts'\r\nexport class Coin extends Item {\r\n    constructor(world, x, y) {\r\n        super(world, x, y, \"loop/coin\")\r\n    }\r\n    step() {\r\n        data.coins += this.world.game.level\r\n        this.world.game.pool.playStatic(\"player/getCoin\", 0)\r\n        save()\r\n        this.alive = false\r\n    }\r\n}","import { GameObject } from './gameObject'\r\nimport { utils } from './utilities'\r\nimport { speech } from './scrollingText';\r\n\r\nexport class Tile {\r\n    constructor(world, pos, type, name) {\r\n        this.y = pos;\r\n        this.type = type;\r\n        this.hasSomething = false\r\n        this.world = world;\r\n        this.name = name;\r\n        this.alive = true\r\n        this.world.player.on(\"step\" + this.y, (() => {\r\n            this.step()\r\n        }))\r\n    }\r\n    step() {\r\n        let scoreType = this.type\r\n        if (this.type == 0) scoreType = 1;\r\n        let score = scoreType * this.world.player.currentSpeed\r\n        if (this.type != 2) {\r\n            clearInterval(this.world.player.scoreTimeout)\r\n            this.world.player.levelCap = this.world.game.level\r\n            if (this.world.player.levelCap > 15) this.levelCap = 15\r\n\r\n        }\r\n        this.world.game.pool.playStatic(\"steps/\" + this.name + utils.randomInt(1, 3), 0)\r\n        this.world.player.tileType = this.type\r\n    }\r\n    update() {\r\n\r\n    }\r\n    destroy() {\r\n    }\r\n}","import { GameObject } from './gameObject'\r\nimport { utils } from './utilities'\r\nimport { Tile } from './tile'\r\nexport class Street extends Tile {\r\n    constructor(world, pos) {\r\n        super(world, pos, 0, \"street\")\r\n    }\r\n    step() {\r\n        super.step()\r\n    }\r\n}","import { GameObject } from './gameObject'\r\nimport { Tile } from './tile'\r\nimport { speech } from './tts'\r\nexport class Objective extends Tile {\r\n    constructor(world, pos) {\r\n        super(world, pos, 2, \"objective\")\r\n    }\r\n    destroy() {\r\n\r\n    }\r\n    step() {\r\n        super.step()\r\n        if (this.world.game.canLevel) {\r\n            this.world.player.y = this.world.player.nearestStreet;\r\n            this.world.scene.setListenerPosition(this.world.player.x, this.world.player.y, this.world.player.z)\r\n            this.world.game.pool.playStatic(\"level_forcefield\", false)\r\n            return;\r\n        }\r\n        this.world.game.pool.playStatic(\"steps/objective\", 0)\r\n        this.world.player.scoreTimeout = setInterval(() => {\r\n            this.world.player.scoreDeduct()\r\n        }, 1100 - (this.world.player.levelCap * 50))\r\n        this.world.generateTiles()\r\n        this.world.game.score += (250)\r\n        this.world.player.slowDown(10)\r\n    }\r\n}","import { GameObject } from './gameObject'\r\nimport { utils } from './utilities'\r\nimport { speech } from './tts'\r\nexport class StationaryObject extends GameObject {\r\n    constructor(world, y, sound, loop = false, x = 0) {\r\n        super(world, sound, x, y, 0, 1, 1, 1)\r\n        this.sound.loop = loop\r\nthis.sound.addEventListener(\"ended\", ()=> {\r\nconsole.log(\"ended\")\r\nif (!loop) {\r\nconsole.log(\"Stationary item destroyed\")\r\nthis.destroy()\r\n}\r\n})\r\n    }\r\n}","import { GameObject } from \"./gameObject\";\r\nimport { StationaryObject } from './stationaryObject'\r\nimport { utils } from \"./utilities\";\r\nimport { speech } from \"./tts\";\r\nimport { save, data, content } from \"./main\";\r\nexport class Car extends GameObject {\r\n  constructor(\r\n    world,\r\n    tile,\r\n    x,\r\n    y,\r\n    width,\r\n    height,\r\n    depth,\r\n    sound = \"car\",\r\n    speed,\r\n    side,\r\n    z = 1,\r\n    canHorn = \"\",\r\n    name, blowUp = \"\",\r\n    obj\r\n  ) {\r\n    super(world, sound, x, y, z, width, height, depth);\r\n    this.blowUpSound = blowUp\r\n    this.objective = obj;\r\n    this.world.player.on(\"blowup\", (() => {\r\n\r\n      if (!this.alive || (this.x < -7 || this.x > 7)) return;\r\n      this.alive = false;\r\n\r\n      if (this.blowUpSound != \"\") new StationaryObject(this.world, this.world.player.y + 2, \"blowup/\" + this.blowUpSound, false, this.x)\r\n      if (this.blowUpSound == \"\") new StationaryObject(this.world, this.world.player.y + 2, \"blowup/generic\", false, this.x)\r\n      if (typeof data.bulletGallery === \"undefined\") {\r\n        data.bulletGallery = {}\r\n      }\r\n      if (this.blowUpSound != \"\") data.bulletGallery[this.blowUpSound] = true\r\n      save()\r\n      if (this.canHorn != \"\") {\r\nif (this.hornSound!=null) {\r\n        this.hornSound.removeAttribute(\"src\")\r\n        this.hornSound.load()\r\n}\r\nthis.hornSound=null;\r\nthis.hornSource=null;\r\nthis.hornResonanceSource=null;\r\n      }\r\n      this.tile.hasSomething = false;\r\n      this.world.game.score += (this.speed * 550)\r\n    }));\r\n\r\n    this.name = name;\r\n    this.speed = speed;\r\n    this.passed = false;\r\n    this.side = side;\r\n    this.tile = tile;\r\n    this.tile.hasSomething = true;\r\n    this.canHorn = canHorn;\r\n    if (this.canHorn != \"\") {\r\n      if (this.canHorn == 1) this.canHorn = this.name;\r\n      this.hornSound = document.createElement(\"audio\");\r\n      this.hornSound.src = \"./sounds/horn/\" + this.name + \".ogg\";\r\n      this.hornSource = this.world.context.createMediaElementSource(\r\n        this.hornSound\r\n      );\r\n      this.hornResonanceSource = this.world.scene.createSource();\r\n      this.hornSource.connect(this.hornResonanceSource.input);\r\n      //horn follows the player because a it plays only if player is on the road and b we want the player to feel trapped on the road by this honking car since that's what happens\r\n      this.hornResonanceSource.setPosition(this.x, this.world.player.y, this.z);\r\n      this.hornSound.loop = true;\r\n    }\r\n  }\r\n  update() {\r\n    if (this.side == 2) this.x += this.speed;\r\n    if (this.side == 1) this.x -= this.speed;\r\n    if (this.x >= this.world.size / 2 || this.x <= (this.world.size / 2) * -1) {\r\n      this.alive = false;\r\n\r\n      if (this.canHorn != \"\") this.hornSound.pause()\r\n      this.tile.hasSomething = false;\r\n    } else {\r\n      //ok, player spans the entire road. So the car sound should equally follow the player to make him feel trapped.\r\n      if (this.world.player.tileType != 1 || this.world.player.y>this.objective)\r\n        this.source.setPosition(this.x, this.y, this.z);\r\n      if (this.world.player.tileType == 1 && this.world.player.y<this.objective)\r\n        this.source.setPosition(this.x, this.world.player.y, this.z);\r\n      if (\r\n        this.passed ||\r\n        (this.canHorn != \"\" && this.y != this.world.player.y)\r\n      ) {\r\n        if (this.canHorn != \"\") this.hornSound.pause()\r\n      }\r\n      if (\r\n        !this.passed &&\r\n        this.canHorn != \"\" &&\r\n        this.world.player.tileType == 1 && this.world.player.y < this.objective\r\n      ) {\r\n        this.hornResonanceSource.setPosition(this.x, this.y, this.z);\r\n        this.hornSound.play();\r\n      }\r\n      if (!this.world.player.jump) {\r\n        if (!this.passed) {\r\n          if (\r\n            Math.round(this.x) == this.world.player.x &&\r\n            this.world.player.tileType != 1\r\n          ) {\r\n            this.passed = true;\r\n            this.tile.hasSomething = false;\r\n            //let score = Math.round(this.speed * (1000 * this.world.game.level));\r\n            //if (this.world.player.tileType != 2) {\r\n            //              this.world.game.score += score;\r\n            //              speech.speak(score);\r\n            //}\r\n            if (typeof this.tile.timeout !== \"undefined\") {\r\n              clearTimeout(this.tile.timeout);\r\n            }\r\n            this.tile.timeout = setTimeout(() => {\r\n              this.tile.generateCar(\r\n                utils.randomInt(1, content.numberOfVehicles)\r\n              );\r\n            }, utils.randomInt(this.world.game.spawnTime, this.world.game.spawnTime + 300))\r\n          }\r\n          if (\r\n            !this.passed &&\r\n            this.alive &&\r\n            Math.round(this.x) == this.world.player.x &&\r\n            this.world.player.tileType == 1 && this.world.player.y < this.objective\r\n          ) {\r\n            if (data.jumps >= 1) {\r\n              this.world.game.pool.playStatic(\"bonus/hyperjump\", 0);\r\n              data.jumps--;\r\n              save();\r\n              this.world.player.flyTo(this.world.player.nearestObjective,\r\n                3,\r\n                \"air\"\r\n              );\r\n            } else {\r\n              let healthLoss = Math.round(this.speed * 45);\r\n              this.world.player.hp -= healthLoss;\r\n              this.world.player.hit();\r\n              this.world.player.flyTo(\r\n                utils.randomInt(\r\n                  this.world.player.nearestStreet,\r\n                  this.world.player.furthestStreet\r\n                ),\r\n                this.side,\r\n                \"air\"\r\n              );\r\n            }\r\n            this.passed = true;\r\n            this.tile.hasSomething = false;\r\n          }\r\n          if (typeof this.tile.timeout !== \"undefined\") {\r\n            clearTimeout(this.tile.timeout);\r\n          }\r\n          this.tile.timeout = setTimeout(() => {\r\n            this.tile.generateCar(utils.randomInt(1, content.numberOfVehicles));\r\n          }, utils.randomInt(this.world.game.spawnTime, this.world.game.spawnTime + 300))\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { GameObject } from \"./gameObject\";\r\nimport { strings } from './strings'\r\nimport { StationaryObject } from './stationaryObject'\r\nimport { utils } from \"./utilities\";\r\nimport { speech } from \"./tts\";\r\nimport { save, data, content } from \"./main\";\r\nexport class LevelPortal extends GameObject {\r\n  constructor(\r\n    world,\r\n    tile,\r\n    x,\r\n    y,\r\n    width,\r\n    height,\r\n    depth,\r\n    sound = \"car\",\r\n    speed,\r\n    side,\r\n    z = 1,\r\n    canHorn = \"\",\r\n    name, blowUp = \"\"\r\n  ) {\r\n    super(world, sound, x, y, z, width, height, depth);\r\n    this.blowUpSound = blowUp\r\n    this.world.player.on(\"blowup\", (() => {\r\n\r\n      if (!this.alive || (this.x < -7 || this.x > 7)) return;\r\n      this.alive = false;\r\n      if (this.blowUpSound != \"\") new StationaryObject(this.world, this.world.player.y + 2, \"blowup/\" + this.blowUpSound, false, this.x)\r\n      if (this.blowUpSound == \"\") new StationaryObject(this.world, this.world.player.y + 2, \"blowup/generic\", false, this.x)\r\n      if (typeof data.bulletGallery === \"undefined\") {\r\n        data.bulletGallery = {}\r\n      }\r\n      if (this.blowUpSound != \"\") data.bulletGallery[this.blowUpSound] = true\r\n      save()\r\n      this.world.player.hp += 1000\r\n      this.world.game.score = this.world.game.bankedScore\r\n      this.world.game.canLevel = false\r\n      this.world.game.canLevelNotify = false\r\n      if (this.canHorn != \"\") this.hornSound.pause();\r\n      this.tile.hasSomething = false;\r\n    }));\r\n\r\n    this.name = name;\r\n    this.speed = speed;\r\n    this.passed = false;\r\n    this.side = side;\r\n    this.tile = tile;\r\n    this.tile.hasSomething = true;\r\n    this.canHorn = canHorn;\r\n    if (this.canHorn != \"\") {\r\n      if (this.canHorn == 1) this.canHorn = this.name;\r\n      this.hornSound = document.createElement(\"audio\");\r\n      this.hornSound.src = \"./sounds/horn/\" + this.name + \".ogg\";\r\n      this.hornSource = this.world.context.createMediaElementSource(\r\n        this.hornSound\r\n      );\r\n      this.hornResonanceSource = this.world.scene.createSource();\r\n      this.hornSource.connect(this.hornResonanceSource.input);\r\n      //horn follows the player because a it plays only if player is on the road and b we want the player to feel trapped on the road by this honking car since that's what happens\r\n      this.hornResonanceSource.setPosition(this.x, this.world.player.y, this.z);\r\n      this.hornSound.loop = true;\r\n    }\r\n  }\r\n  update() {\r\n    if (this.side == 2) this.x += this.speed;\r\n    if (this.side == 1) this.x -= this.speed;\r\n    if (this.x >= this.world.size / 2 || this.x <= (this.world.size / 2) * -1) {\r\n      this.alive = false;\r\n      if (this.canHorn != \"\") this.hornSound.pause();\r\n      this.tile.hasSomething = false;\r\n    } else {\r\n      //ok, player spans the entire road. So the car sound should equally follow the player to make him feel trapped.\r\n      if (this.world.player.tileType != 1)\r\n        this.source.setPosition(this.x, this.y, this.z);\r\n      if (this.world.player.tileType == 1)\r\n        this.source.setPosition(this.x, this.world.player.y, this.z);\r\n      if (\r\n        this.passed ||\r\n        (this.canHorn != \"\" && this.y != this.world.player.y)\r\n      ) {\r\n        if (this.canHorn != \"\") this.hornSound.pause();\r\n      }\r\n      if (\r\n        !this.passed &&\r\n        this.canHorn != \"\" &&\r\n        this.world.player.tileType == 1\r\n      ) {\r\n        this.hornResonanceSource.setPosition(this.x, this.y, this.z);\r\n        this.hornSound.play();\r\n      }\r\n      if (!this.world.player.jump) {\r\n        if (!this.passed) {\r\n          if (\r\n            Math.round(this.x) == this.world.player.x &&\r\n            this.world.player.tileType != 1\r\n          ) {\r\n            this.passed = true;\r\n            this.tile.hasSomething = false;\r\n            if (typeof this.tile.timeout !== \"undefined\") {\r\n              clearTimeout(this.tile.timeout);\r\n            }\r\n            this.tile.timeout = setTimeout(() => {\r\n              this.tile.generateCar(\r\n                utils.randomInt(1, content.numberOfVehicles)\r\n              );\r\n            }, utils.randomInt(this.world.game.spawnTime, this.world.game.spawnTime + 300))\r\n          }\r\n          if (\r\n            !this.passed &&\r\n            this.alive &&\r\n            Math.round(this.x) == this.world.player.x &&\r\n            this.world.player.tileType == 1\r\n          ) {\r\n            this.passed = true;\r\n            this.tile.hasSomething = false;\r\nthis.alive=false\r\n            //level here\r\n            this.world.game.canLevel = false\r\n            this.world.game.bankedScore = this.world.game.level * 1500\r\n            this.world.game.level++;\r\n            this.world.game.spawnTime -= 150;\r\n            if (this.world.game.spawnTime < 200) this.world.game.spawnTime = 200;\r\n            setTimeout(() => {\r\n              speech.speak(strings.get(\"level\") + \" \" + this.world.game.level)\r\n            }, 400)\r\n            this.world.player.flyTo(this.world.player.nearestObjective,\r\n              3,\r\n              \"level_air\", \"level_land\"\r\n            );\r\n            this.world.game.canLevelNotify = false\r\n\r\n            this.world.game.score += (this.world.game.level * 100)\r\n            this.world.size -= Math.round((this.world.game.level));\r\n            //level code end\r\n          }\r\n          if (typeof this.tile.timeout !== \"undefined\") {\r\n            clearTimeout(this.tile.timeout);\r\n          }\r\n          this.tile.timeout = setTimeout(() => {\r\n            this.tile.generateCar(utils.randomInt(1, content.numberOfVehicles));\r\n          }, utils.randomInt(0, this.world.game.spawnTime - this.world.game.level * 100));\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { GameObject } from './gameObject'\r\nimport { Car } from './car'\r\nimport { LevelPortal } from './levelPortal'\r\nimport { debug } from './main'\r\nimport { parsedCars, content } from './main'\r\nimport { utils } from './utilities'\r\nimport { Tile } from './tile'\r\nimport { speech } from './tts'\r\nexport class Road extends Tile {\r\n    constructor(world, pos, generator = false) {\r\n        super(world, pos, 1, \"road\")\r\n        this.generator = generator\r\n        this.timeout = setTimeout(() => {\r\n            if (!debug) this.generateCar(utils.randomInt(1, content.numberOfVehicles))\r\n        }, utils.randomInt(this.world.game.spawnTime, this.world.game.spawnTime + 300))\r\n    }\r\n    generateCar(force) {\r\n        if (!this.generator || !this.alive || this.world.greenLight) return;\r\n        if (typeof this.timeout !== \"undefined\") clearTimeout(this.timeout)\r\n        this.timeout = setTimeout(() => {\r\n            if (!debug) this.generateCar(utils.randomInt(1, content.numberOfVehicles))\r\n        }, utils.randomInt(this.world.game.spawnTime, this.world.game.spawnTime + 300))\r\n        if (this.hasSomething) return;\r\n        let side = utils.randomInt(1, 2)\r\n        let size = this.world.size / 2\r\n        if (side == 1) size = size * 1\r\n        if (side == 2) size = size * -1\r\n        let carType = force\r\n        try {\r\n            let chance = utils.randomInt(1, 100)\r\n            //carType=content.numberOfVehicles\r\n\r\n            if (this.world.game.canLevel && chance <= 80) {\r\n                this.world.dynamicObjects.push(new LevelPortal(this.world, this, size, this.y, 2, 1, 2, \"level_portal\", 0.40, side, 1, \"\", \"level_portal\", \"level_portal\"))\r\n            } else {\r\n                this.world.dynamicObjects.push(new Car(this.world, this, size, this.y, 2, 1, 2, parsedCars[carType].sound, parsedCars[carType].speed, side, parsedCars[carType].z, parsedCars[carType].hornable, parsedCars[carType].name, parsedCars[carType].blowup,this.world.player.nearestObjective))\r\n            }\r\n        } catch (e) {\r\n            console.error(\"Error generating car \" + carType + \": \" + e)\r\n        }\r\n        this.hasSomething = true\r\n    }\r\n    destroy() {\r\n        if (typeof this.timeout !== \"undefined\") clearTimeout(this.timeout)\r\n    }\r\n    step() {\r\n        super.step()\r\n        this.world.player.stepProgress.pitch = utils.getProportion(this.y, this.world.player.nearestRoad, this.world.player.furthestRoad, 0.3, 1.7)\r\n        this.world.player.stepProgress.replay()\r\n    }\r\n}","export class Effect {\r\n    constructor(world, name, time, onFunction, ofFunction) {\r\n        this.world = world\r\n        this.world.game.pool.playStatic(\"effects/\" + name, 0)\r\n        onFunction()\r\n        setTimeout(() => {\r\n            ofFunction()\r\n            this.world.game.pool.playStatic(\"effects/\" + name + \"Off\", 0)\r\n        }, time)\r\n    }\r\n}","import { Item } from './item'\r\nimport { Effect } from './effect'\r\nimport { utils } from './utilities'\r\nimport { strings } from './strings'\r\nimport { increase, decrease, getUnlock, setUnlock, data, save, content } from './main'\r\nimport { speech } from './tts'\r\nexport class Bonus extends Item {\r\n    constructor(world, x, y) {\r\n        super(world, x, y, \"loop/bonus\")\r\n    }\r\n    step() {\r\n        if (!this.alive) return;\r\n        this.alive = false\r\n        let bonuses = [1, 4, 7]\r\n        if (getUnlock(\"hyperjump\")) bonuses.push(2)\r\n\r\n        if (getUnlock(\"bombs\")) bonuses.push(5)\r\n        let bonusType = utils.randomElement(bonuses)\r\n        switch (bonusType) {\r\n\r\n            case 1:\r\n                this.world.game.pool.playStatic(\"bonus/health\", 0)\r\n                this.world.player.hp += 100\r\n                break;\r\n            case 2:\r\n                this.world.game.pool.playStatic(\"bonus/hyperjump\", 0)\r\n                increase(\"jumps\")\r\n                break;\r\n            //case 4 is fake bonus so default\r\n            case 5:\r\n                increase(\"bombs\")\r\n                this.world.game.pool.playStatic(\"bonus/bomb\", false)\r\n                break;\r\n            case 7:\r\n                increase(\"stoppers\")\r\n                save()\r\n                this.world.game.pool.playStatic(\"bonus/stopper\", false)\r\n                break;\r\n            default:\r\n                this.world.game.pool.playStatic(\"bonus/fake\", false)\r\n                break;\r\n        }\r\n        setTimeout(() => {\r\n            speech.speak(strings.get(\"bonus\" + bonusType))\r\n        }, 280)\r\n        save()\r\n    }\r\n    coffeeOn(that) {\r\n        that.oldSpeed = that.world.player.currentSpeed\r\n        that.world.player.slowDown(10)\r\n        that.world.player.speedUp(7)\r\n        that.world.player.forceSpeed = true\r\n        that.world.player.forcedSpeed = 7\r\n\r\n    }\r\n    coffeeOff(that) {\r\n        that.world.player.forceSpeed = false\r\n        that.world.player.slowDown(10)\r\n        that.world.player.speedUp(that.oldSpeed)\r\n    }\r\n}","import { GameObject } from './gameObject'\nimport { StationaryObject } from './stationaryObject'\nimport { KeyEvent } from './keycodes.js'\nimport { so } from './soundObject'\nimport { speech } from './tts';\nimport { utils } from './utilities'\nimport { getUnlock, data, debug } from './main'\nconst EventEmitter = require('events');\nexport class Player extends GameObject {\n    constructor(world) {\n        super(world, \"\", 0, 0, 1.6, 1, 0.5, 1.6)\n        this.playerHitSound = so.create(\"player/hit\")\n        this.forceSpeed = false\n        this.stepProgress = so.create(\"steps/progress\")\n        this.target = so.create(\"player/target\")\n        this.coins = 0\n        if (data.coins) this.coins = data.coins;\n        this.jumps = 0;\n        if (data.jumps) this.jumps = data.jumps\n        this.center = so.create(\"ui/center\")\n        this.xLimit = Math.ceil(this.world.size / 13)\n        this.fallTime = 55\n        this.world.scene.setListenerPosition(this.x, this.y, this.z)\n        this.unableToMove = false\n        this.hp = 250\n        this.speedUpSound = so.create(\"ui/speedUp\")\n        this.nearestStreet = 0\n        this.nearestRoad = 0\n        this.nearestObjective = 0\n        this.furthestStreet = 0\n        this.furthestRoad = 0\n\n        this.speedDownSound = so.create(\"ui/speedDown\")\n        this.speed = 650\n        //speed 0 is unused, speeds 1 to 5 are manually attainable, speed 6 is a crawl and speed 7 is super speed.\n        this.speeds = [\n            0, 650, 530, 420, 350, 235, 675, 120\n        ]\n        this.speedModifier = 0\n        this.currentSpeed = 0\n    }\n    move() {\n        if (this.unableToMove) return;\n        this.speedTimeout = setTimeout(() => {\n            this.move()\n        }, this.speeds[this.currentSpeed] - this.speedModifier)\n        if (this.currentSpeed == 0) this.currentSpeed = 1;\n        this.xLimit = Math.ceil(this.world.size / 13)\n        this.y += 1\n\n        this.emit(\"step\" + this.y)\n        if (this.world.game.input.isDown(KeyEvent.DOM_VK_RIGHT)) {\n            this.x++;\n            if (this.x > 0 + this.xLimit) this.x = 0 + this.xLimit\n            if (this.x == 0) this.center.replay();\n        }\n        if (this.world.game.input.isDown(KeyEvent.DOM_VK_LEFT)) {\n            this.x--;\n            if (this.x < 0 - this.xLimit) this.x = 0 - this.xLimit\n            if (this.x == 0) this.center.replay();\n        }\n        this.world.scene.setListenerPosition(this.x, this.y, this.z)\n        this.emit(\"x\" + this.x)\n    }\n    speedUp(number = 1) {\n        if (this.forceSpeed) return;\n        if (this.unableToMove) return;\n        if (this.currentSpeed == 0) {\n            this.speedUpSound.pitch = utils.getProportion(1, 1, 5, 0.8, 1.2)\n            this.speedUpSound.replay()\n            this.move()\n        }\n        this.currentSpeed += (number - 1);\n        if (this.currentSpeed > 7) this.currentSpeed = 7\n        this.speedUpSound.pitch = utils.getProportion(this.currentSpeed, 1, 5, 0.8, 1.2)\n        this.speedUpSound.replay()\n    }\n    slowDown(number = 1) {\n        if (this.forceSpeed) return;\n        if (this.unableToMove) return;\n        this.currentSpeed -= number;\n        //we don't want the player to be able to stop with the down arrow key, but if some item is forcing the player to stop, we can allow it.\n        if (number == 1 && this.currentSpeed == 0) this.currentSpeed = 1;\n        if (this.currentSpeed <= 0) {\n            this.currentSpeed = 0;\n            if (typeof this.speedTimeout !== \"undefined\") clearTimeout(this.speedTimeout)\n        }\n        if (number == 1) this.speedDownSound.pitch = utils.getProportion(this.currentSpeed, 1, 5, 0.8, 1.2)\n        if (number == 1) this.speedDownSound.replay()\n    }\n    hit() {\n        this.playerHitSound.play()\n        this.world.game.pool.playStatic(\"player/impact/\" + utils.randomInt(1, 4), 0)\n\n    }\n    flyTo(y, side, snd, landsound = \"player/land\") {\n        if (this.unableToMove) return;\n        this.tileType = -1\n        this.unableToMove = true\n        let heart = so.create(\"player/heart\",false,\"falling\")\n        heart.play()\n        let sound = so.create(snd,false,\"falling\")\n        sound.loop = true\n        sound.volume = 0.3\n        let land = so.create(landsound,false,\"falling\")\n        let fall = so.create(\"player/fall\" + utils.randomInt(1, 4),false,\"falling\")\n        let stand = so.create(\"player/stand\",false,\"falling\")\n        sound.pitch = 0.7\n        sound.play()\n        sound.loop = true\n        heart.loop = true\n        this.slowDown(10)\n        let z = utils.randomInt(11, 21)\n\n        let x;\n        let jump = false\n        if (side == 1) x = -1;\n        if (side == 2) x = 1\n        if (side == 3) {\n            jump = true;\n            this.jump = true;\n            z = utils.randomInt(5, 10)\n        }\n        this.interval = setInterval(() => {\n            if (!jump) this.x += (x * utils.randomInt(3, 5))\n            if (this.x < 0 - this.world.size / 2) {\n                x = 1\n                this.world.game.pool.playStatic(\"player/wall\" + utils.randomInt(1, 3), 0)\n            }\n            if (this.x > this.world.size / 2) {\n                x = -1\n                this.world.game.pool.playStatic(\"player/wall\" + utils.randomInt(1, 3), 0)\n            }\n            sound.pitch += 0.07\n            if (this.y > y) {\n                this.y -= 0.5;\n            }\n            if (this.y < y) {\n                this.y += 0.5;\n            }\n            this.z += 1;\n            if (this.z >= z) {\n                this.y = y;\n                clearInterval(this.interval)\n                this.interval = setInterval(() => {\n                    this.z -= 1;\n                    sound.pitch -= 0.07\n                    if (this.z <= 0) {\n                        this.tileType = 0\n                        clearInterval(this.interval)\n                        if (jump) {\n                            land.play()\n                            land.sound.on(\"ended\",()=> { land.destroy(); });\n                            this.z = 1.6\n                            this.jump = false\n                            this.unableToMove = false;\n                            heart.stop();\n                            heart.destroy();\n                            so.destroyWithTag(\"falling\")\n                            if (this.forceSpeed) {\n                                this.forceSpeed = false\n                                this.slowDown(10)\n                                this.forceSpeed = true\n                            } else {\n                                this.slowDown(10)\n                            }\n                            if (this.forceSpeed) {\n                                this.forceSpeed = false\n                                this.speedUp(this.forcedSpeed)\n                                this.forceSpeed = true\n                            }\n\n\n                        }\n                        if (!jump) {\n                            this.x = 0\n                            fall.play()\n                            this.z = 0\n                            setTimeout(() => {\n                                stand.replay()\n                                heart.stop();\n                                heart.destroy();\n                                stand.sound.on(\"ended\", (() => {\n                                    this.z = 1.6\n                                    stand.destroy();\n                                    this.jump = false\n                                    this.unableToMove = false;\n                                    so.destroyWithTag(\"falling\")\n                                    if (this.forceSpeed) {\n                                        this.forceSpeed = false\n                                        this.slowDown(10)\n                                        this.forceSpeed = true\n                                    } else {\n                                        this.slowDown(10)\n                                    }\n\n                                    if (this.forceSpeed) {\n                                        this.forceSpeed = false\n                                        this.speedUp(this.forcedSpeed)\n                                        this.forceSpeed = true\n                                    }\n                                }))\n                                this.world.scene.setListenerPosition(this.x, this.y, this.z)\n                            }, utils.randomInt(1000, 2000))\n                        }\n                        this.world.scene.setListenerPosition(this.x, this.y, this.z)\n                        sound.stop()\n                        //heart.stop()\n                        this.x = 0\n                        this.emit(\"step\" + this.y)\n                        //if (this.forceSpeed) this.speedUp(this.forcedSpeed)\n                    }\n                    this.world.scene.setListenerPosition(this.x, this.y, this.z)\n                }, this.fallTime)\n            }\n            this.world.scene.setListenerPosition(this.x, this.y, this.z)\n        }, this.fallTime * 1.2)\n    }\n    scoreDeduct() {\n        this.world.game.tick.replay()\n        this.world.game.score -= (25 * this.world.game.level)\n        if (this.world.game.score < this.world.game.bankedScore) {\n            this.world.game.score = this.world.game.bankedScore\n            this.world.game.tick.stop()\n        }\n        this.levelCap = this.world.game.level\n        if (this.levelCap > 15) this.levelCap = 15\n    }\n    throwBomb() {\n        try {\n            //    new StationaryObject(this.world,this.y+0.5, \"bomb_drop\")\n            let fusetime = 975\n            if (getUnlock(\"shortfuse\")) fusetime = fusetime / 3\n            let sound = so.create(\"bomb_start\")\n            sound.play();\n            setTimeout(() => {\n                sound.destroy();\n                new StationaryObject(this.world, this.y + 0.5, \"bomb_explode\")\n                this.emit(\"blowup\")\n            }, fusetime)\n        } catch (e) {\n            console.error(e)\n        }\n    }\n}","import { so } from './soundObject';\r\nimport { Coin } from './coin'\r\nimport { Street } from './street'\r\nimport { Objective } from './objective'\r\nimport { Road } from './road'\r\nimport { Bonus } from './bonus'\r\nimport { utils } from './utilities'\r\nimport { Car } from './car'\r\nimport 'resonance-audio';\r\nconst { ResonanceAudio } = require('resonance-audio')\r\nimport { Player } from './player'\r\nimport { content } from './main'\r\nimport { speech } from './tts';\r\nexport class World {\r\n\tconstructor(game, size = 100) {\r\n\t\tthis.size = size;\r\n\t\tthis.greenLight = false\r\n\r\n\t\tthis.game = game\r\n\t\tthis.dynamicObjects = []\r\n\t\tthis.tiles = []\r\n\t\tthis.context = new AudioContext()\r\n\t\t\t\tthis.scene = new ResonanceAudio(this.context);\r\nthis.scene.setAmbisonicOrder(3)\r\n\t\tthis.scene.output.connect(this.context.destination)\r\n\t\tthis.player = new Player(this)\r\n\t\tthis.player.setMaxListeners(1000)\r\n\t}\r\n\tgenerateTiles() {\r\n\t\tthis.player.removeAllListeners(\"step\")\r\n\t\tthis.player.removeAllListeners(\"blowup\")\r\n\t\tfor (let i = 0; i < this.tiles.length; i++) {\r\n\t\t\tthis.tiles[i].alive = false\r\n\t\t\tthis.tiles[i].destroy();\r\n\t\t\tthis.tiles.splice(i, 1)\r\n\t\t\ti--;\r\n\t\t}\r\n\t\tthis.tiles = []\r\n\t\tlet lastStreet = this.player.y;\r\n\t\t//the below line will sound weird, but I want as many streets as x squares the player can move to either side, so as to have a fair chance at targetting bonuses\r\n\t\tlet lastStreetLimit = lastStreet + this.player.xLimit\r\n\t\tthis.player.nearestStreet = lastStreet + 1\r\n\t\tfor (let i = lastStreet + 1; i <= lastStreetLimit; i++) {\r\n\t\t\tthis.tiles.push(new Street(this, i))\r\n\t\t\tlastStreet = i;\r\n\t\t}\r\n\t\tlet tiles = Math.round(this.game.roadsPerLevel + (this.game.level / 2))\r\n\t\tlet lastRoad = 0;\r\n\t\tthis.player.nearestRoad = lastStreet + 1\r\n\t\tthis.player.furthestStreet = lastStreet;\r\n\t\t//let generator = (this.player.nearestRoad + tiles) - tiles/2\r\n\t\tlet generator = this.player.nearestRoad\r\n\t\tfor (let i = lastStreet + 1; i <= lastStreet + tiles; i++) {\r\n\t\t\tif (generator == i) this.tiles.push(new Road(this, i, true))\r\n\t\t\tif (generator != i) this.tiles.push(new Road(this, i, false))\r\n\t\t\tlastRoad = i;\r\n\t\t}\r\n\t\tthis.player.nearestObjective = lastRoad + 1\r\n\t\tthis.player.furthestRoad = lastRoad;\r\n\t\tthis.tiles.push(new Objective(this, lastRoad + 1))\r\n\t\t//item spawning\r\n\t\tlet chance = utils.randomInt(1, 1)\r\n\t\tfor (let i = 1; i <= chance; i++) {\r\n\t\t\tlet x = utils.randomInt(0 - this.player.xLimit, 0 + this.player.xLimit)\r\n\t\t\tlet random = utils.randomInt(1, 2)\r\n\t\t\tswitch (random) {\r\n\t\t\t\tdefault: break;\r\n\t\t\t\t//coins are dropped on the street\r\n\t\t\t\tcase 1: this.dynamicObjects.push(new Coin(this, x, this.player.nearestStreet + this.player.xLimit, this.player.furthestStreet)); break;\r\n\t\t\t\t//bonuses appear anywhere on the road\r\n\t\t\t\tcase 2: this.dynamicObjects.push(new Bonus(this, x, this.player.nearestRoad, this.player.furthestRoad)); break;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tupdate() {\r\n\r\n\t\tfor (let i = 0; i < this.dynamicObjects.length; i++) {\r\n\t\t\tif (!this.dynamicObjects[i].alive) {\r\n\t\t\t\tif (this.dynamicObjects[i].sound!=null) {\r\nthis.dynamicObjects[i].sound.removeAttribute(\"src\")\r\n\t\t\t\tthis.dynamicObjects[i].sound.load()\r\n}\r\n            this.dynamicObjects[i].sound=null\r\n            this.dynamicObjects[i].mediaSource=null;\r\n            this.dynamicObjects[i].source=null;\r\n\r\n\t\t\t\tif (this.dynamicObjects[i].canHorn) this.dynamicObjects[i].hornSound.removeAttribute(\"src\")\r\n\t\t\t\tif (this.dynamicObjects[i].canHorn) this.dynamicObjects[i].hornSound.load()\r\n\t\t\t\tthis.dynamicObjects.splice(i, 1)\r\n\t\t\t\ti--;\r\n\t\t\t} else {\r\n\t\t\t\tthis.dynamicObjects[i].update()\r\n\t\t\t}\r\n\t\t}\r\n\t\t//leveling\r\n\t\tthis.levelScore = ((this.game.level) * 1500)\r\n\t\tif (this.game.score >= this.levelScore) {\r\n\t\t\tif (!this.game.canLevelNotify) {\r\n\t\t\t\tthis.game.pool.playStatic(\"level_notify\", false)\r\n\t\t\t\tthis.game.canLevelNotify = true\r\n\r\n\t\t\t}\r\n\t\t\tthis.game.canLevel = true\r\n\t\t}\r\n\r\n\t}\r\n}","import { speech } from './tts';\r\nimport { strings } from './strings'\r\nimport { save, increase, decrease, debug, _, content, data } from './main'\r\nimport { SoundHandler } from './soundHandler'\r\nimport Timer from './timer';\r\nimport $ from 'jquery';\r\nimport { utils } from './utilities';\r\nimport { ScrollingText } from './scrollingText';\r\nimport { KeyboardInput } from './input.js';\r\nimport { KeyEvent } from './keycodes.js';\r\nimport { so } from './soundObject';\r\nimport { World } from './world'\r\nimport { Road } from './road';\r\nclass Game {\r\n\tconstructor() {\r\n\t\tthis.canChangeSpeed = true\r\n\t\tthis.bankedScore = 0\r\n\t\tthis.canLevel = false\r\n\t\tthis.canLevelNotify = false\r\n\r\n\t\tthis.tick = so.create(\"tick\")\r\n\t\tthis.scoreSound = so.create(\"scoreCounter\")\r\n\t\tthis.scoreSound.volume = 0.4\r\n\t\tthis.input = new KeyboardInput();\r\n\t\tthis.pool = new SoundHandler()\r\n\t\tthis.input.init();\r\n\t\tthis.timer = Timer({\r\n\t\t\tupdate: () => this.update(),\r\n\t\t\trender: () => this.render()\r\n\t\t}, 1 / 45);\r\n\t\tthis.score = 0\r\n\t\tthis.level = 1\r\n\t\tthis.spawnTime = 2500\r\n\t\tthis.roadsPerLevel = 5\r\n\t}\r\n\r\n\tstart() {\r\n\t\tthis.timer.start();\r\n\t\tthis.world = new World(this, 80)\r\n\t\tif (!debug) this.world.generateTiles()\r\n\t\t//speech.speak(strings.get(\"upArrowMove\"))\r\n\t}\r\n\tupdate(dt) {\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_0)) {\r\n\t\t\tif (data.stoppers >= 1) {\r\n\t\t\t\tthis.world.game.pool.playStatic(\"use_stopper\", false)\r\n\t\t\t\tdata.stoppers--;\r\n\t\t\t\tsave()\r\n\t\t\t\tthis.world.player.slowDown(10)\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tspeech.speak(strings.get(\"noStoppers\"))\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_D) && debug) {\r\n\t\t\tlet debugRoad = new Road(this.world, this.world.player.y+1, true)\r\n\t\t\tlet number = content.numberOfVehicles\r\n\t\t\tdebugRoad.generateCar(number)\r\n\t\t\tdebugRoad.generator = false\r\n\t\t\tthis.world.player.y = 0\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_B)) {\r\n\t\t\tif (data.bombs >= 1 || debug) {\r\n\t\t\t\tthis.world.player.throwBomb()\r\n\t\t\t\tif (!debug) data.bombs--;\r\n\t\t\t\tsave();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tspeech.speak(strings.get(\"noBombs\"))\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_I)) {\r\n\t\t\tlet nothing = true\r\n\t\t\tlet str = \"\"\r\n\t\t\tif (data.jumps > 0) {\r\n\t\t\t\tnothing = false\r\n\t\t\t\tstr += strings.get(\"iJumps\", [data.jumps]) + \", \"\r\n\t\t\t}\r\n\t\t\tif (data.bombs > 0) {\r\n\t\t\t\tnothing = false\r\n\t\t\t\tstr += strings.get(\"iBombs\", [data.bombs]) + \", \"\r\n\t\t\t}\r\n\t\t\tif (data.stoppers > 0) {\r\n\t\t\t\tnothing = false\r\n\t\t\t\tstr += strings.get(\"iStoppers\", [data.stoppers]) + \", \"\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (nothing) {\r\n\t\t\t\tspeech.speak(strings.get(\"emptyInventory\"))\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tspeech.speak(str)\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_UP)) {\r\n\t\t\tthis.world.player.speedUp()\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_DOWN)) {\r\n\t\t\tthis.world.player.slowDown()\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_C)) {\r\n\t\t\tspeech.speak(data.coins + strings.get(\"coins\"))\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_S)) {\r\n\t\t\tspeech.speak(this.score + strings.get(\"points\" + \", \" + strings.get(\"bankedScore\") + this.world.game.bankedScore))\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_X)) {\r\n\t\t\tspeech.speak(this.world.player.nearestRoad + \", \" + this.world.player.furthestRoad)\r\n\t\t\tspeech.speak(this.world.player.x)\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_L)) {\r\n\t\t\tspeech.speak(strings.get(\"level\") + this.level + \" \" + strings.get(\"ws\") + this.world.size+\" spawn time \"+this.world.game.spawnTime)\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_H)) {\r\n\t\t\tspeech.speak(this.world.player.hp + \" \" + strings.get(\"hp\"))\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_1) && this.canChangeSpeed) {\r\n\t\t\tthis.canChangeSpeed = false; setTimeout(() => { this.canChangeSpeed = true }, 800)\r\n\t\t\tthis.world.player.slowDown(10)\r\n\t\t\tthis.world.player.speedUp(1)\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_2) && this.canChangeSpeed) {\r\n\t\t\tthis.canChangeSpeed = false; setTimeout(() => { this.canChangeSpeed = true }, 800)\r\n\r\n\t\t\tthis.world.player.slowDown(10)\r\n\t\t\tthis.world.player.speedUp(2)\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_3) && this.canChangeSpeed) {\r\n\t\t\tthis.canChangeSpeed = false; setTimeout(() => { this.canChangeSpeed = true }, 800)\r\n\r\n\t\t\tthis.world.player.slowDown(10)\r\n\t\t\tthis.world.player.speedUp(3)\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_4) && this.canChangeSpeed) {\r\n\t\t\tthis.canChangeSpeed = false; setTimeout(() => { this.canChangeSpeed = true }, 800)\r\n\r\n\t\t\tthis.world.player.slowDown(10)\r\n\t\t\tthis.world.player.speedUp(4)\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_5) && this.canChangeSpeed) {\r\n\t\t\tthis.canChangeSpeed = false; setTimeout(() => { this.canChangeSpeed = true }, 800)\r\n\r\n\t\t\tthis.world.player.slowDown(10)\r\n\t\t\tthis.world.player.speedUp(5)\r\n\t\t}\r\n\t\tthis.world.update()\r\n\t}\r\n\trender() {\r\n\t}\r\n}\r\nexport { Game }","'use strict';\r\nimport { speech } from './tts';\r\nimport { so } from './soundObject';\r\nconst MenuTypes = {\r\n\tNORMAL: 0,\r\n\tSELECTOR: 1,\r\n\tSLIDER: 2,\r\n\tEDIT: 3,\r\n\tAUDIO: 4,\r\n};\r\nclass MenuItem {\r\n\tconstructor(id, name) {\r\n\t\tthis.name = name;\r\n\t\tthis.id = id;\r\n\t\tthis.type = MenuTypes.NORMAL;\r\n\t}\r\n\r\n\tspeak() {\r\n\t\tspeech.speak(this.name);\r\n\t}\r\n\r\n\tselect() {\r\n\t\treturn this.id;\r\n\t}\r\n}\r\nclass AudioItem extends MenuItem {\r\n\tconstructor(id, name) {\r\n\t\tsuper();\r\n\t\tthis.name = name;\r\n\t\tthis.type = MenuTypes.AUDIO;\r\n\t\tthis.id = id;\r\n\t\tthis.snd = so.create(this.name);\r\n\t}\r\n\r\n\tspeak() {\r\n\t\tthis.snd.stop();\r\n\t\tthis.snd.play();\r\n\t}\r\n\r\n\tselect() {\r\n\t\treturn this.id;\r\n\t}\r\n}\r\n\r\n\r\nclass SelectorItem extends MenuItem {\r\n\tconstructor(id, name, options, defaultOption = 0, selectCallback) {\r\n\t\tsuper();\r\n\t\tthis.id = id;\r\n\t\tthis.name = name;\r\n\t\tthis.options = options;\r\n\t\tthis.type = MenuTypes.SELECTOR;\r\n\t\tthis.currentOption = defaultOption;\r\n\t\tthis.selectCallback = selectCallback;\r\n\t}\r\n\r\n\tspeak() {\r\n\t\tspeech.speak(this.name + '. Selector. Set to ' + this.options[this.currentOption]);\r\n\t}\r\n\r\n\tincrease() {\r\n\t\tif (this.currentOption < this.options.length - 1) {\r\n\t\t\tthis.currentOption++;\r\n\t\t}\r\n\t\tspeech.speak(this.options[this.currentOption]);\r\n\t\tif (typeof this.selectCallback !== 'undefined') {\r\n\t\t\tthis.selectCallback(this.options[this.currentOption]);\r\n\t\t}\r\n\t}\r\n\r\n\tdecrease() {\r\n\t\tif (this.currentOption > 0) {\r\n\t\t\tthis.currentOption--;\r\n\t\t}\r\n\t\tspeech.speak(this.options[this.currentOption]);\r\n\t\tif (typeof this.selectCallback !== 'undefined') {\r\n\t\t\tthis.selectCallback(this.options[this.currentOption]);\r\n\t\t}\r\n\t}\r\n\r\n\tselect() {\r\n\t\treturn this.id;\r\n\t}\r\n}\r\n\r\nclass SliderItem extends MenuItem {\r\n\tconstructor(id, name, from, to, currentValue = 0, increaseBy = 1) {\r\n\t\tsuper();\r\n\t\tthis.id = id;\r\n\t\tthis.name = name;\r\n\t\tthis.minValue = from;\r\n\t\tthis.maxValue = to;\r\n\t\tthis.currentValue = currentValue;\r\n\t\tthis.increaseBy = increaseBy;\r\n\t\tthis.type = MenuTypes.SLIDER;\r\n\t}\r\n\r\n\tspeak() {\r\n\t\tspeech.speak(this.name + '. Slider. Set to ' + this.currentValue);\r\n\t}\r\n\r\n\tincrease() {\r\n\t\tif (this.currentValue < this.maxValue) {\r\n\t\t\tthis.currentValue += this.increaseBy;\r\n\t\t}\r\n\t\tif (this.currentValue > this.maxValue) this.currentValue = this.maxValue;\r\n\t\tspeech.speak(this.currentValue);\r\n\t}\r\n\r\n\tdecrease() {\r\n\t\tif (this.currentValue > this.minValue) {\r\n\t\t\tthis.currentValue -= this.increaseBy;\r\n\t\t}\r\n\t\tif (this.currentValue < this.minValue) this.currentValue = this.minValue;\r\n\t\tspeech.speak(this.currentValue);\r\n\t}\r\n\r\n\tselect() {\r\n\t\treturn this.id;\r\n\t}\r\n}\r\n\r\nclass EditItem extends MenuItem {\r\n\tconstructor(id, name, defaultText = '') {\r\n\t\tsuper();\r\n\t\tthis.id = id;\r\n\t\tthis.name = name;\r\n\t\tthis.text = defaultText;\r\n\t\tthis.type = MenuTypes.EDIT;\r\n\t}\r\n\r\n\tspeak() {\r\n\t\tspeech.speak(this.name + '. Editable. ' + (this.text == '' ? 'Nothing entered.' : 'Set to ' + this.text));\r\n\t}\r\n\r\n\taddChar(char) {\r\n\t\tthis.text += char;\r\n\t\tspeech.speak(char);\r\n\t}\r\n\r\n\tremoveChar() {\r\n\t\tthis.text = this.text.substring(0, this.text.length - 1);\r\n\t\tspeech.speak(this.text);\r\n\t}\r\n\r\n\tselect() {\r\n\t\treturn this.text;\r\n\t}\r\n}\r\nexport { MenuItem, AudioItem, SliderItem, SelectorItem, MenuTypes };\r\n","'use strict';\r\nimport \"babel-polyfill\";\r\nimport { utils } from './utilities';\r\nimport Hammer from 'hammerjs';\r\nimport { speech } from './tts';\r\nimport { so } from './soundObject.js';\r\nimport { MenuTypes, MenuItem } from './menuItem';\r\nimport { KeyEvent } from './keycodes';\r\nimport { KeyboardInput } from './input';\r\n\r\nclass Menu {\r\n\tconstructor(name, menuData, music) {\r\n\t\tthis.kp = event => {\r\n\t\t\tthis.handleInput(event);\r\n\t\t};\r\n\t\tthis.kd = event => {\r\n\t\t\tthis.handleKeys(event);\r\n\t\t};\r\n\t\tthis.fadeTime = 0.6;\r\n\t\tthis.menuData = menuData;\r\n\t\tlet audio = name.split(\" \");\r\n\t\tif (audio.length < 2) this.isAudio = true;\r\n\t\tif (audio.length >= 2) this.isAudio = false;\r\n\t\tthis.silent = false;\r\n\t\tthis.prependAudio = \"\";\r\n\t\tthis.first = true;\r\n\t\tthis.cursor = 0;\r\n\t\tthis.name = name;\r\n\t\tlet dir = so.directory;\r\n\t\tso.directory = \"./sounds/\";\r\n\t\tthis.sndKeyChar = so.create('ui/keyChar');\r\n\t\tthis.sndKeyDelete = so.create('ui/keyDelete');\r\n\t\tthis.sndSliderLeft = so.create('ui/menuSliderLeft');\r\n\t\tthis.sndSliderRight = so.create('ui/menuSliderRight');\r\n\t\tthis.sndBoundary = so.create('ui/menuBoundary');\r\n\t\tthis.sndChoose = so.create('ui/menuChoose');\r\n\t\tthis.sndMove = so.create('ui/menuMove');\r\n\t\tthis.sndOpen = so.create('ui/menuOpen');\r\n\t\tthis.sndSelector = so.create('ui/menuSelector');\r\n\t\tthis.sndWrap = so.create('ui/menuWrap');\r\n\t\tso.directory = dir;\r\n\t\tthis.selectCallback = null;\r\n\t\tif (typeof music !== 'undefined') {\r\n\t\t\tthis.music = music;\r\n\t\t}\r\n\t\tconst id = document.getElementById('touchArea');\r\n\t\tthis.hammer = new Hammer(id);\r\n\t}\r\n\r\n\tnextItem() {\r\n\t\tspeech.stop();\r\n\t\tif (!this.first) {\r\n\t\t\tif (this.cursor < this.menuData.length - 1) {\r\n\t\t\t\tif (!this.silent) this.sndMove.play();\r\n\t\t\t\tthis.cursor++;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (!this.silent) this.sndWrap.play();\r\n\t\t\t\tthis.cursor = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (!this.silent) this.sndMove.play();\r\n\t\t\tthis.first = false;\r\n\t\t}\r\n\t\tif (this.isAudio) {\r\n\t\t\tthis.sndName.stop();\r\n\t\t\tfor (let i = 0; i < this.menuData.length; i++) {\r\n\t\t\t\tif (this.menuData[i].type == MenuTypes.AUDIO) this.menuData[i].snd.stop();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.menuData[this.cursor].speak();\r\n\t}\r\n\r\n\tpreviousItem() {\r\n\t\tspeech.stop();\r\n\r\n\t\tif (this.first) {\r\n\t\t\tthis.first = false;\r\n\t\t\tif (!this.silent) this.sndMove.play();\r\n\t\t}\r\n\t\tif (this.cursor > 0) {\r\n\t\t\tif (!this.silent) this.sndMove.play();\r\n\t\t\tthis.cursor--;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.cursor = this.menuData.length - 1;\r\n\t\t\tif (!this.silent) this.sndWrap.play();\r\n\r\n\t\t}\r\n\t\tif (this.isAudio) {\r\n\t\t\tthis.sndName.stop();\r\n\t\t\tfor (let i in this.menuData) {\r\n\t\t\t\tif (this.menuData[i].type == MenuTypes.AUDIO) this.menuData[i].snd.stop();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.menuData[this.cursor].speak();\r\n\t\tif (typeof this.moveCallback !== \"undefined\") {\r\n\t\t\tthis.moveCallback(this.menuData[this.cursor].id);\r\n\t\t}\r\n\t}\r\n\r\n\tincrease() {\r\n\t\tif (this.menuData[this.cursor].type == MenuTypes.SLIDER || this.menuData[this.cursor].type == MenuTypes.SELECTOR) {\r\n\t\t\tthis.menuData[this.cursor].increase();\r\n\t\t\tif (this.menuData[this.cursor].type == MenuTypes.SLIDER) {\r\n\t\t\t\tif (!this.silent) this.sndSliderRight.play();\r\n\t\t\t} else {\r\n\t\t\t\tif (!this.silent) this.sndSelector.play();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdecrease() {\r\n\t\tif (this.menuData[this.cursor].type == MenuTypes.SLIDER || this.menuData[this.cursor].type == MenuTypes.SELECTOR) {\r\n\t\t\tthis.menuData[this.cursor].decrease();\r\n\t\t\tif (this.menuData[this.cursor].type == MenuTypes.SLIDER) {\r\n\t\t\t\tif (!this.silent) this.sndSliderLeft.play();\r\n\t\t\t} else {\r\n\t\t\t\tif (!this.silent) this.sndSelector.play();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinsertCharacter(char) {\r\n\t\tif (this.menuData[this.cursor].type == MenuTypes.EDIT) {\r\n\t\t\tthis.menuData[this.cursor].addChar(String.fromCharCode(char));\r\n\t\t\tif (!this.silent) this.sndKeyChar.play();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// Char navigation code\r\n\t\tfor (let i = this.cursor + 1; i < this.menuData.length; i++) {\r\n\t\t\tif (this.menuData[i].shortcut == String.fromCharCode(char).toLowerCase()) {\r\n\t\t\t\tthis.cursor = i;\r\n\t\t\t\tthis.select();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this.menuData[i].name.toLowerCase().substr(0, 1) == String.fromCharCode(char).toLowerCase()) {\r\n\t\t\t\tthis.cursor = i;\r\n\t\t\t\tthis.menuData[this.cursor].speak();\r\n\t\t\t\tthis.first = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (let i = 0; i < this.menuData.length; i++) {\r\n\t\t\tif (this.menuData[i].shortcut == String.fromCharCode(char).toLowerCase()) {\r\n\t\t\t\tthis.cursor = i;\r\n\t\t\t\tthis.select();\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.menuData[i].name.toLowerCase().substr(0, 1) == String.fromCharCode(char).toLowerCase()) {\r\n\t\t\t\tthis.cursor = i;\r\n\t\t\t\tthis.menuData[this.cursor].speak();\r\n\t\t\t\tthis.first = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tremoveCharacter() {\r\n\t\tif (this.menuData[this.cursor].type == MenuTypes.EDIT) {\r\n\t\t\tthis.menuData[this.cursor].removeChar();\r\n\t\t\tif (!this.silent) this.sndKeyDelete.play();\r\n\t\t}\r\n\t}\r\n\r\n\thandleInput(event) {\r\n\t\tthis.insertCharacter(event.which);\r\n\t}\r\n\r\n\tdestroySounds() {\r\n\t\tthis.sndKeyChar.destroy();\r\n\t\tthis.sndKeyDelete.destroy();\r\n\t\tthis.sndSliderLeft.destroy();\r\n\t\tthis.sndSliderRight.destroy();\r\n\t\tif (this.isAudio) this.sndName.destroy();\r\n\t\tthis.sndBoundary.destroy();\r\n\t\tthis.sndChoose.destroy();\r\n\t\tthis.sndMove.destroy();\r\n\t\tthis.sndOpen.destroy();\r\n\t\tthis.sndSelector.destroy();\r\n\t\tthis.sndWrap.destroy();\r\n\t\tfor (let i = 0; i < this.menuData.length; i++) {\r\n\t\t\tif (this.menuData[i].type == MenuTypes.AUDIO) this.menuData[i].snd.destroy();\r\n\t\t}\r\n\t\tif (typeof this.music !== 'undefined') {\r\n\t\t\tthis.music.destroy();\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tdestroy() {\r\n\t\tdocument.removeEventListener('keydown', this.kd);\r\n\t\tdocument.removeEventListener('keypress', this.kp);\r\n\t\tthis.hammer.destroy();\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.destroySounds();\r\n\t\t}, this.fadeTime * 1000);\r\n\t}\r\n\r\n\thandleKeys(event) {\r\n\t\tswitch (event.which) {\r\n\t\t\tcase KeyEvent.DOM_VK_RETURN:\r\n\t\t\t\tthis.select();\r\n\t\t\t\tbreak;\r\n\t\t\tcase KeyEvent.DOM_VK_PAGE_UP:\r\n\t\t\t\tthis.music.volume += 0.03;\r\n\t\t\t\tbreak;\r\n\t\t\tcase KeyEvent.DOM_VK_PAGE_DOWN:\r\n\t\t\t\tthis.music.volume -= 0.03;\r\n\t\t\t\tbreak;\r\n\t\t\tcase KeyEvent.DOM_VK_BACK_SPACE:\r\n\t\t\t\tthis.removeCharacter();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase KeyEvent.DOM_VK_DOWN:\r\n\r\n\t\t\t\tthis.nextItem();\r\n\t\t\t\tbreak;\r\n\t\t\tcase KeyEvent.DOM_VK_UP:\r\n\t\t\t\tthis.previousItem();\r\n\t\t\t\tbreak;\r\n\t\t\tcase KeyEvent.DOM_VK_RIGHT:\r\n\r\n\t\t\t\tthis.increase();\r\n\r\n\t\t\t\tbreak;\r\n\t\t\tcase KeyEvent.DOM_VK_LEFT:\r\n\r\n\t\t\t\tthis.decrease();\r\n\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\tasync runSync() {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tthis.run((s) => {\r\n\t\t\t\tresolve(s.selected);\r\n\t\t\t\tthis.destroy();\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\trun(callback) {\r\n\t\tif (typeof this.music === 'object') {\r\n\t\t\tthis.music.volume = 0.8;\r\n\t\t\tthis.music.loop = true;\r\n\t\t\tthis.music.play();\r\n\t\t\tspeech.ducker = this.music;\r\n\r\n\t\t} else if (typeof this.music === 'string') {\r\n\t\t\tthis.music = so.create(this.music, true);\r\n\t\t\tthis.music.volume = 0.8;\r\n\t\t\tthis.music.loop = true;\r\n\t\t\tthis.music.play();\r\n\t\t\tspeech.ducker = this.music;\r\n\t\t} else {\r\n\t\t}\r\n\t\tthis.selectCallback = callback;\r\n\t\tconst that = this;\r\n\t\tdocument.addEventListener('keypress', this.kp);\r\n\t\tdocument.addEventListener('keydown', this.kd);\r\n\r\n\t\tthis.hammer.on(\"swipeleft\", function (event) { that.handleSwipe(0); });\r\n\t\tthis.hammer.on(\"swiperight\", function (event) { that.handleSwipe(1); });\r\n\t\tthis.hammer.on(\"panup\", function (event) { that.handleSwipe(3); });\r\n\t\tthis.hammer.on(\"pandown\", function (event) { that.handleSwipe(4); });\r\n\t\tthis.hammer.on(\"tap\", function (event) { that.handleSwipe(2); });\r\n\t\tif (this.isAudio) {\r\n\t\t\tthis.sndName = so.create(this.name);\r\n\t\t\tthis.sndName.play();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (!this.silent) speech.speak(this.name);\r\n\t\t}\r\n\t\tif (!this.silent) this.sndOpen.play();\r\n\t}\r\n\r\n\thandleSwipe(action) {\r\n\t\tif (action == 3) {\r\n\t\t\tthis.decrease();\r\n\t\t}\r\n\t\tif (action == 4) {\r\n\t\t\tthis.increase();\r\n\t\t}\r\n\r\n\t\tif (action == 0) {\r\n\t\t\tthis.previousItem();\r\n\t\t}\r\n\t\tif (action == 1) {\r\n\t\t\tthis.nextItem();\r\n\t\t}\r\n\t\tif (action == 2) {\r\n\t\t\tthis.select();\r\n\t\t}\r\n\t}\r\n\r\n\tselect() {\r\n\t\t//select function\r\n\t\tconst selected = this.menuData[this.cursor].id;\r\n\t\tconst items = [];\r\n\t\tfor (let i = 0; i < this.menuData.length; i++) {\r\n\t\t\tlet addItem = null;\r\n\t\t\tif (this.menuData[i].type == MenuTypes.SLIDER) {\r\n\t\t\t\taddItem = {\r\n\t\t\t\t\tid: this.menuData[i].id,\r\n\t\t\t\t\tvalue: this.menuData[i].currentValue,\r\n\t\t\t\t\t//name: this.menuData[i].options[this.menuData[i].currentValue]\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tif (this.menuData[i].type == MenuTypes.EDIT) {\r\n\t\t\t\taddItem = {\r\n\t\t\t\t\tid: this.menuData[i].id,\r\n\t\t\t\t\tvalue: this.menuData[i].text\r\n\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tif (this.menuData[i].type == MenuTypes.SELECTOR) {\r\n\t\t\t\taddItem = {\r\n\t\t\t\t\tid: this.menuData[i].id,\r\n\t\t\t\t\tvalue: this.menuData[i].currentOption,\r\n\t\t\t\t\tname: this.menuData[i].options[this.menuData[i].currentOption]\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\titems.push(addItem);\r\n\t\t}\r\n\r\n\t\tconst toReturn = {\r\n\t\t\tselected,\r\n\t\t\tcursor: this.cursor,\r\n\t\t\titems\r\n\t\t};\r\n\t\tif (!this.silent) this.sndChoose.play();\r\n\t\tdocument.removeEventListener('keydown', this.kd);\r\n\t\tdocument.removeEventListener('keypress', this.kp);\r\n\t\tif (this.isAudio) {\r\n\t\t\tthis.sndName.stop();\r\n\t\t\tfor (let i = 0; i < this.menuData.length; i++) {\r\n\t\t\t\tif (this.menuData[i].type == MenuTypes.AUDIO) this.menuData[i].snd.stop();\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!this.silent) this.musicDuration = this.fadeTime * 1000;\r\n\t\tif (typeof this.music === \"undefined\" || this.silent) this.musicDuration = 0;\r\n\r\n\t\tconst that = this;\r\n\t\tif (typeof this.music !== \"undefined\") {\r\n\t\t\tthis.music.sound.fade(0, this.fadeTime);\r\n\t\t}\r\n\t\tif (this.silent) this.musicDuration = 0;\r\n\t\tsetTimeout(() => {\r\n\t\t\tthat.selectCallback(toReturn);\r\n\t\t}, this.musicDuration);\r\n\t}\r\n}\r\nexport { Menu };\r\n","export const debug = false\r\nimport { ScrollingText } from './scrollingText'\r\nimport { utils } from './utilities'\r\nimport { SoundHandler } from './soundHandler'\r\nimport { strings } from './strings'\r\nimport { so } from './soundObject'\r\nexport let _\r\nexport let content = {\r\n\tnumberOfVehicles: 7,\r\n\tbonusTypes: 3,\r\n\tshopItems: {\r\n\t\thyperjump: 500,\r\n\t\tbombs: 250,\r\n\t\tgalleryMembership: 75,\r\n\t\tshortfuse: 450,\r\n\r\n\t}\r\n}\r\nexport var gameID = \"road\";\r\nexport let parsedCars = []\r\nparsedCars.push({})\r\nimport { speech } from './tts'\r\nimport { LanguageSelector } from './languageSelector'\r\nimport { Game } from './game';\r\nexport var version = \"1.0\";\r\nexport let data = {\r\n\tcoins: 0,\r\n\tjumps: 0,\r\n\tunlocks: {\r\n\t\thyperjump: false,\r\n\t},\r\n}\r\nexport var version2 = \"\";\r\n\r\nexport var lang = 0;\r\nexport var ttsVoice;\r\nexport var ttsRate = 1;\r\nimport $ from 'jquery';\r\nimport { Menu } from './menu';\r\nimport { AudioItem, MenuItem, MenuTypes } from './menuItem'\r\ndocument.addEventListener('DOMContentLoaded', setup);\r\nasync function setup() {\r\n\tdocument.getElementById(\"app\").focus();\r\n\tif (localStorage.getItem(\"string_data\") != null) {\r\n\t\tdata = JSON.parse(localStorage.getItem(\"string_data\"))\r\n\t}\r\n\ttry {\r\n\t\tconst fs = require('fs')\r\n\t\tlet file = fs.readFileSync(\"./cars.txt\", \"utf8\")\r\n\t\tconsole.log(file)\r\n\t\tlet lines = file.split(\"\\n\")\r\n\t\tconsole.log(lines[0])\r\n\t\tlines.forEach(element => {\r\n\t\t\tlet elements = element.split(\",\")\r\n\t\t\tlet name = elements[0]\r\n\t\t\tlet speed = Number(elements[1])\r\n\t\t\tlet horning = elements[2]\r\n\t\t\tlet hornable = \"\"\r\n\t\t\tif (horning == 1) {\r\n\t\t\t\thornable = name\r\n\t\t\t}\r\n\t\t\telse if (horning == 0) {\r\n\t\t\t\thornable = \"\"\r\n\t\t\t} else {\r\n\t\t\t\thornable = horning;\r\n\t\t\t}\r\n\t\t\tlet z = Number(elements[3])\r\n\t\t\tlet blowup = 0\r\n\t\t\tlet blow = \"generic\";\r\n\r\n\t\t\tif (typeof elements[4] !== \"undefined\") {\r\n\t\t\t\tblowup = Number(elements[4])\r\n\t\t\t\tconsole.log(blowup)\r\n\t\t\t\tswitch (blowup) {\r\n\t\t\t\t\tcase 0: blow = \"generic\"; break;\r\n\t\t\t\t\tcase 1: blow = name; break;\r\n\t\t\t\t\tdefault: blow = \"generic\"; break;\r\n\t\t\t\t}\r\n\t\t\t\tif (typeof data.bulletGallery === \"undefined\") {\r\n\t\t\t\t\tdata.bulletGallery = {}\r\n\t\t\t\t}\r\n\t\t\t\tif (typeof data.bulletGallery[blow] === \"undefined\") {\r\n\t\t\t\t\tdata.bulletGallery[blow] = false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tparsedCars.push({ sound: \"vehicles/\" + name, speed: speed, hornable: hornable, name: name, z: z, blowup: blow })\r\n\t\t});\r\n\t\tcontent.numberOfVehicles = parsedCars.length - 1\r\n\t} catch (e) {\r\n\t\tconsole.log(\"Error parsing cars file: \" + e)\r\n\t}\r\n\t//the below is an example of a new version notifier. The version2 variable can be used and compared inside a menu or wherever, and would contain the new version of your game based on what your server returns.\r\n\tlet prom = new Promise((resolve, reject) => {\r\n\t\tfetch('http://yourserver.com/versions.php?gameVersionRequest=' + gameID)\r\n\t\t\t.then(event => event.text()) //convert http response into text\r\n\t\t\t.then(data => {\r\n\t\t\t\tversion2 = data;\r\n\t\t\t\tresolve(data); //resolve promise let go.\r\n\t\t\t});\r\n\t});\r\n\tlet langs = new LanguageSelector(\"langSelect\", async (result) => {\r\n\t\tlang = result;\r\n\t\tspeech.setLanguage(lang);\r\n\t\t_ = strings.get\r\n\t\tspeech.setRate(3)\r\n\t\t//await strings.check(2)\r\n\t\tmainMenu();\r\n\t})\r\n}\r\nexport async function mainMenu() {\r\n\tlet music = so.create(\"music/menu\")\r\n\tmusic.volume = 0.6\r\n\tmusic.loop = true;\r\n\tmusic.play()\r\n\tspeech.ducker = music\r\n\tlet items = []\r\n\titems.push(new MenuItem(0, strings.get(\"mStart\")))\r\n\titems.push(new MenuItem(1, strings.get(\"mShop\", [data.coins])))\r\n\titems.push(new MenuItem(2, strings.get(\"mBullet\")))\r\n\tlet menu = new Menu(strings.get(\"mainMenu\"), items)\r\n\tlet selection = await menu.runSync()\r\n\tawait music.fade(0)\r\n\tswitch (selection) {\r\n\t\tcase 0:\r\n\t\t\tlet game = new Game()\r\n\t\t\tgame.start()\r\n\t\t\tbreak;\r\n\t\tcase 1: await shop(); break;\r\n\t\tcase 2:\r\n\t\t\tawait browseGallery()\r\n\t\t\tbreak;\r\n\t\tdefault: break;\r\n\t}\r\n}\r\n\r\nexport function save() {\r\n\tlocalStorage.setItem(\"string_data\", JSON.stringify(data))\r\n}\r\nasync function browseGallery() {\r\n\tif (!getUnlock(\"galleryMembership\")) {\r\n\t\tlet sound = so.create(\"gallery_locked\")\r\n\t\tawait sound.playSync()\r\n\t\tawait new ScrollingText(strings.get(\"galleryLocked\"))\r\n\t\tmainMenu();\r\n\t\treturn;\r\n\t}\r\n\tlet locked = 0, unlocked = 0;\r\n\tlet pool = new SoundHandler()\r\n\tlet items = []\r\n\titems.push(new MenuItem(-1, strings.get(\"mBack\")))\r\n\tlet arr = Object.entries(data.bulletGallery)\r\n\tarr.forEach((v) => {\r\n\t\tif (v[1] == false) {\r\n\t\t\titems.push(new AudioItem(-1, \"blowup/locked\"))\r\n\t\t\tlocked++;\r\n\t\t}\r\n\t\tif (v[1] == true) {\r\n\t\t\titems.push(new AudioItem(-1, \"blowup/\" + v[0]))\r\n\t\t\tunlocked++;\r\n\t\t}\r\n\t})\r\n\r\n\tspeech.speak(strings.get(\"bulletIntro\", [unlocked, (locked + unlocked)]))\r\n\tlet menu = new Menu(\" \", items)\r\n\tmenu.silent = true\r\n\tmenu.run((s) => {\r\n\t\tmenu.destroy();\r\n\t\tmainMenu()\r\n\t\treturn;\r\n\t})\r\n}\r\nexport function getUnlock(v) {\r\n\tif (typeof data.unlocks === \"undefined\") data.unlocks = {}\r\n\tif (typeof data.unlocks[v] === \"undefined\") data.unlocks[v] = false;\r\n\treturn data.unlocks[v]\r\n}\r\nexport function setUnlock(v, value = true) {\r\n\tconsole.log(v)\r\n\tif (typeof data.unlocks === \"undefined\") data.unlocks = {}\r\n\tif (typeof data.unlocks[v] === \"undefined\") data.unlocks[v] = false;\r\n\tdata.unlocks[v] = value\r\n\tsave()\r\n\treturn value;\r\n\r\n}\r\nexport function increase(v, value = 1) {\r\n\tif (typeof data[v] === \"undefined\") {\r\n\t\tdata[v] = value\r\n\t} else {\r\n\t\tdata[v] += value;\r\n\t}\r\n\tsave()\r\n\treturn value;\r\n\r\n}\r\nexport function decrease(v, value = 1) {\r\n\tif (typeof data[v] === \"undefined\") {\r\n\t\tdata[v] = 0 - value\r\n\t} else {\r\n\t\tdata[v] -= value;\r\n\t}\r\n\tsave()\r\n\treturn value;\r\n\r\n}\r\n\r\nexport function setData(v, value) {\r\n\tif (typeof data[v] === \"undefined\") data[v] = value\r\n\tdata[v] = value\r\n\tsave()\r\n\treturn value;\r\n\r\n}\r\nexport function getData(v) {\r\n\tif (typeof data[v] === \"undefined\") data[v] = 0\r\n\treturn data[v]\r\n}\r\nasync function shop() {\r\n\tlet shopAmbience = so.create(\"shop_ambience\")\r\n\tshopAmbience.volume = 0.6\r\n\tshopAmbience.loop = true\r\n\tshopAmbience.play()\r\n\tlet menu;\r\n\tlet result;\r\n\tlet buy = so.create(\"purchase_item\")\r\n\tlet nobuy = so.create(\"no_cash\")\r\n\tdata.coins = 100000\r\n\tspeech.speak(strings.get(\"mShopIntro\"))\r\n\twhile (result != 0) {\r\n\t\tawait utils.sleep(5)\r\n\t\tlet items = []\r\n\t\titems.push(new MenuItem(0, strings.get(\"mShopBack\", [data.coins])))\r\n\t\tfor (var k in content.shopItems) {\r\n\t\t\tif (!getUnlock(k)) {\r\n\t\t\t\titems.push(new MenuItem(k, strings.get(\"shop\" + k) + \": \" + content.shopItems[k] + \" \" + strings.get(\"coins\")))\r\n\t\t\t}\r\n\t\t}\r\n\t\tmenu = new Menu(\" \", items)\r\n\t\tmenu.silent = true\r\n\t\tresult = await menu.runSync()\r\n\t\tif (result != 0) {\r\n\t\t\tif (data.coins >= content.shopItems[result]) {\r\n\t\t\t\tdata.coins -= content.shopItems[result]\r\n\t\t\t\tsetUnlock(result)\r\n\t\t\t\tbuy.replay();\r\n\t\t\t} else {\r\n\t\t\t\tnobuy.replay();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tmenu.destroy()\r\n\tshopAmbience.destroy()\r\n\tawait mainMenu()\r\n\treturn;\r\n}"]}