{"version":3,"sources":["utilities.js","input.js","keycodes.js","tts.js","soundObject.js","scrollingText.js","strings.js","languageSelector.js","soundSource.js","soundHandler.js","timer.js","gameObject.js","item.js","coin.js","tile.js","street.js","objective.js","car.js","road.js","effect.js","bonus.js","player.js","world.js","game.js","menuItem.js","menu.js","main.js"],"names":["GameUtils","calculateDelta","lx","sx","sr","delta","progressPan","current","max","progressPitch","min","minPitch","maxPitch","progressVolume","minVolume","maxVolume","getProportion","distance3D","x1","y1","z1","x2","y2","z2","Math","sqrt","distance","jx","jy","kx","ky","calculateAngle","angle","atan2","PI","isCollide3D","a","b","x","width","y","height","z","depth","randomInt","floor","random","getRandomArbitrary","sleep","ms","Promise","resolve","setTimeout","percent","int1","int2","percentOf","percentage","percented","value","average","arr","startIndex","len","length","val","i","averageInt","neg","num","numericSort","shuffle","j","objSize","obj","size","key","hasOwnProperty","copyObject","Object","assign","create","getPrototypeOf","arraysEqual","arr1","arr2","pauseTimeout","timerId","start","Date","now","clearTimeout","resumeTimeout","remaining","window","callback","randomProperty","keys","findFiles","path","ext","list","fileExt","walk","filesSync","pb","pf","stat","next","push","substr","findFolders","dirsSync","randomElement","utils","EventEmitter","require","KeyboardInput","constructor","keyDown","justPressed","chars","justReleased","justPressedEventCallback","charEventCallback","init","that","document","addEventListener","event","handleKeyDown","handleKeyUp","handleChar","pause","isPaused","resume","which","emit","char","String","fromCharCode","destroy","isDown","isJustPressed","isJustReleased","keysDown","kd","forEach","v","getChars","keysPressed","splice","releaseAllKeys","keysReleased","KeyEvent","DOM_VK_CANCEL","DOM_VK_HELP","DOM_VK_BACK_SPACE","DOM_VK_TAB","DOM_VK_CLEAR","DOM_VK_RETURN","DOM_VK_ENTER","DOM_VK_SHIFT","DOM_VK_CONTROL","DOM_VK_ALT","DOM_VK_PAUSE","DOM_VK_CAPS_LOCK","DOM_VK_ESCAPE","DOM_VK_SPACE","DOM_VK_PAGE_UP","DOM_VK_PAGE_DOWN","DOM_VK_END","DOM_VK_HOME","DOM_VK_LEFT","DOM_VK_UP","DOM_VK_RIGHT","DOM_VK_DOWN","DOM_VK_PRINTSCREEN","DOM_VK_INSERT","DOM_VK_DELETE","DOM_VK_0","DOM_VK_1","DOM_VK_2","DOM_VK_3","DOM_VK_4","DOM_VK_5","DOM_VK_6","DOM_VK_7","DOM_VK_8","DOM_VK_9","DOM_VK_SEMICOLON","DOM_VK_EQUALS","DOM_VK_A","DOM_VK_B","DOM_VK_C","DOM_VK_D","DOM_VK_E","DOM_VK_F","DOM_VK_G","DOM_VK_H","DOM_VK_I","DOM_VK_J","DOM_VK_K","DOM_VK_L","DOM_VK_M","DOM_VK_N","DOM_VK_O","DOM_VK_P","DOM_VK_Q","DOM_VK_R","DOM_VK_S","DOM_VK_T","DOM_VK_U","DOM_VK_V","DOM_VK_W","DOM_VK_X","DOM_VK_Y","DOM_VK_Z","DOM_VK_CONTEXT_MENU","DOM_VK_NUMPAD0","DOM_VK_NUMPAD1","DOM_VK_NUMPAD2","DOM_VK_NUMPAD3","DOM_VK_NUMPAD4","DOM_VK_NUMPAD5","DOM_VK_NUMPAD6","DOM_VK_NUMPAD7","DOM_VK_NUMPAD8","DOM_VK_NUMPAD9","DOM_VK_MULTIPLY","DOM_VK_ADD","DOM_VK_SEPARATOR","DOM_VK_SUBTRACT","DOM_VK_DECIMAL","DOM_VK_DIVIDE","DOM_VK_F1","DOM_VK_F2","DOM_VK_F3","DOM_VK_F4","DOM_VK_F5","DOM_VK_F6","DOM_VK_F7","DOM_VK_F8","DOM_VK_F9","DOM_VK_F10","DOM_VK_F11","DOM_VK_F12","DOM_VK_F13","DOM_VK_F14","DOM_VK_F15","DOM_VK_F16","DOM_VK_F17","DOM_VK_F18","DOM_VK_F19","DOM_VK_F20","DOM_VK_F21","DOM_VK_F22","DOM_VK_F23","DOM_VK_F24","DOM_VK_NUM_LOCK","DOM_VK_SCROLL_LOCK","DOM_VK_COMMA","DOM_VK_PERIOD","DOM_VK_SLASH","DOM_VK_BACK_QUOTE","DOM_VK_OPEN_BRACKET","DOM_VK_BACK_SLASH","DOM_VK_CLOSE_BRACKET","DOM_VK_QUOTE","DOM_VK_META","app","remote","exec","useWebTTS","TTS","webTTS","voices","speechController","ducking","lang","synth","Speech","rate","interrupt","speak","VK_SHIFT","childProcess","kill","unduck","VK_UP","setRate","strings","VK_DOWN","splitSentences","then","data","catch","e","setLanguage","process","platform","setVoice","console","log","voice","err","r","newRate","text","queue","accessibilitySupportEnabled","oldText","speakUnthreaded","listeners","onstart","duck","onend","onerror","error","getElementById","innerHTML","para","createElement","appendChild","createTextNode","setWebTTS","tts","stop","cancel","changeRate","speech","inp","changeVoice","name","voiceArray","k","includes","cb","silent","wl","vl","split","get","input","selection","ducker","stdout","stderr","message","panner","defaults","panningModel","maxDistance","sono","playInBackground","playOnceTimer","SoundObjectItem","file","tag","stream","duckingFirstTime","fileName","sound","src","onComplete","doneLoading","timeout","checkProgress","loaded","Audio","playbackRate","pitch","loop","progress","replay","play","unload","time","oldVolume","volume","fade","pos","forcePlay","playSync","die","evt","once","removeAllListeners","active","playing","pan","effects","add","currentPan","set","seek","currentTime","duration","position","SoundObject","sounds","Array","loadingQueue","queueCallback","loadedSounds","loadingSounds","loadedCallback","queueLength","statusCallback","directory","extension","oneShots","debug","oneShotSound","setStatusCallback","findSound","findSoundIndex","resetQueuedInstance","found","returnObject","loadQueueSync","so","setQueueCallback","loadQueue","createSync","snd","enqueue","handleQueue","resetQueue","setCallback","result","isLoading","loading","stillLoading","playOnce","on","noMore","filename","destroyAll","runningText","undefined","ScrollingText","delimiter","splitText","currentLine","sndOpen","sndContinue","sndClose","id","prom","res","handleKeys","readCurrentLine","copyCurrentLine","advance","handleTap","action","str","removeEventListener","Strings","iJumps","emptyInventory","mainMenu","mStart","mShop","upArrowMove","bonus1","bonus2","selectVoice","mSelectVoice","mLang","newUpdate","mSapi","mReader","rating","mRate","K","Q","A","J","cspades","cdiamonds","cclubs","chearts","dq","langs","mSelect","mBack","yes","no","ok","what","rep","i1","Number","replace","check","lng","LanguageSelector","element","container","buttons","type","focus","module","exports","SoundSource","son","speed","minRate","maxRate","toDestroy","rateShiftSpeed","currentPosition","setPosition","update","SoundHandler","directional","staticSounds","dynamicSounds","currentDynamicSound","maxDynamicSounds","currentStaticSound","maxStaticSounds","reuseSounds","playStatic","slot","findFreeStaticSlot","SoundItem","findFreeDynamicSlot","findDynamicSound","reuse","threeD","GameObject","world","alive","mediaSource","context","createMediaElementSource","source","scene","createSource","sourceWidth","sourceHeight","sourceDepth","connect","Item","player","step","round","target","Coin","coins","game","pool","Tile","hasSomething","scoreType","score","currentSpeed","level","clearInterval","scoreTimeout","levelCap","tileType","Street","stepProgress","furthestStreet","nearestStreet","Objective","setInterval","scoreDeduct","generateTiles","slowDown","Car","tile","side","canHorn","passed","hornSound","hornSource","hornResonanceSource","jump","generateCar","content","numberOfVehicles","spawnTime","jumps","flyTo","nearestObjective","healthLoss","hp","hit","Road","generator","force","carType","dynamicObjects","parsedCars","hornable","nearestRoad","furthestRoad","Effect","onFunction","ofFunction","Bonus","bonuses","unlocks","forceSpeed","bonusType","crawl","oldSpeed","speedUp","forcedSpeed","Player","playerHitSound","center","xLimit","ceil","fallTime","setListenerPosition","unableToMove","speedUpSound","speedDownSound","speeds","speedModifier","move","speedTimeout","number","heart","land","fall","stand","interval","tick","ResonanceAudio","World","tiles","AudioContext","convolution","createConvolver","output","destination","lastStreet","lastStreetLimit","roadsPerLevel","lastRoad","Game","scoreSound","timer","render","dt","debugRoad","nothing","MenuTypes","NORMAL","SELECTOR","SLIDER","EDIT","AUDIO","MenuItem","select","AudioItem","SelectorItem","options","defaultOption","selectCallback","currentOption","increase","decrease","SliderItem","from","to","currentValue","increaseBy","minValue","maxValue","EditItem","defaultText","addChar","removeChar","substring","Menu","menuData","music","kp","handleInput","fadeTime","audio","isAudio","prependAudio","first","cursor","dir","sndKeyChar","sndKeyDelete","sndSliderLeft","sndSliderRight","sndBoundary","sndChoose","sndMove","sndSelector","sndWrap","hammer","Hammer","nextItem","sndName","previousItem","moveCallback","insertCharacter","shortcut","toLowerCase","removeCharacter","destroySounds","runSync","reject","run","s","selected","handleSwipe","items","addItem","toReturn","musicDuration","_","bonusTypes","gameID","version","hyperjump","version2","ttsVoice","ttsRate","setup","localStorage","getItem","JSON","parse","fs","readFileSync","lines","elements","horning","fetch","menu","save","setItem","stringify"],"mappings":"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","file":"main.js","sourceRoot":"js","sourcesContent":["import \"babel-polyfill\";\r\n'use strict';\r\nclass GameUtils {\r\n\tcalculateDelta(lx, sx, sr = 0) {\r\n\t\tsx = sx + sr;\r\n\t\tif (sx < lx) {\r\n\t\t\tdelta = lx - sx;\r\n\t\t}\r\n\t\tif (sx > lx) {\r\n\t\t\tdelta = sx - lx;\r\n\t\t}\r\n\r\n\t}\r\n\tprogressPan(current, max) {\r\n\t\treturn ((current * 200 / max) - 100) / 100;\r\n\t}\r\n\r\n\tprogressPitch(current, min, max, minPitch, maxPitch) {\r\n\t\treturn (current / (min + max)) * (maxPitch - minPitch) + minPitch;\r\n\t}\r\n\r\n\tprogressVolume(current, min, max, minVolume, maxVolume) {\r\n\t\tif (current > max) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\treturn (current / (min + max)) * (maxVolume - minVolume) + minVolume;\r\n\t}\r\n\r\n\tgetProportion(current, min, max, minVolume, maxVolume) {\r\n\t\tif (current > max) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\treturn (current / (min + max)) * (maxVolume - minVolume) + minVolume;\r\n\t}\r\n\r\n\tdistance3D(x1, y1, z1, x2, y2, z2) {\r\n\t\treturn Math.sqrt((x2 - x1) * (x2 - x1) +\r\n\t\t\t(y2 - y1) * (y2 - y1) +\r\n\t\t\t(z2 - z1) * (z2 - z1));\r\n\t}\r\n\r\n\tdistance(jx, jy, kx, ky) {\r\n\t\t// Return Math.hypot(jx-kx, jy-ky)\r\n\t\treturn Math.sqrt(((jx - kx) * (jx - kx)) + ((jy - ky)) * (jy - ky));\r\n\t}\r\n\r\n\tcalculateAngle(x1, y1, x2, y2) {\r\n\t\tlet angle = Math.atan2((y2 - y1), (x2 - x1));\r\n\t\tangle = (angle >= 0) ? 0 : (2 * Math.PI) + angle;\r\n\t\treturn angle;\r\n\t\t// Return Math.atan2((y2 - y1),(x2 - x1));\r\n\t}\r\n\r\n\tisCollide3D(a, b) {\r\n\t\treturn (a.x <= (b.x + b.width) && (a.x + a.width) >= b.x) && (a.y <= (b.y + b.height) && (a.y + a.height) >= b.y) && (a.z <= (b.z + b.depth) && (a.z + a.depth) >= b.z);\r\n\t}\r\n\r\n\trandomInt(min, max) {\r\n\t\treturn Math.floor(Math.random() * (max - min + 1)) + min;\r\n\t}\r\n\r\n\tgetRandomArbitrary(min, max) {\r\n\t\treturn Math.random() * (max - min) + min;\r\n\t}\r\n\r\n\tsleep(ms) {\r\n\t\treturn new Promise(resolve => setTimeout(resolve, ms));\r\n\t}\r\n\r\n\tpercent(int1, int2) {\r\n\t\treturn int1 * 100 / int2;\r\n\t}\r\n\r\n\tpercentOf(int1, int2) {\r\n\t\treturn int2 * int1 / 100;\r\n\t}\r\n\tpercentage(percented, value) {\r\n\t\treturn value * percented / 100;\r\n\t}\r\n\r\n\taverage(arr, startIndex = 0) {\r\n\t\tconst len = arr.length;\r\n\t\tlet val = 0;\r\n\t\tlet average = 0;\r\n\t\tif (arr.length < startIndex) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\r\n\t\tfor (let i = startIndex; i < arr.length; i++) {\r\n\t\t\tval += arr[i];\r\n\t\t}\r\n\r\n\t\taverage = val / (len - startIndex);\r\n\t\treturn average;\r\n\t}\r\n\r\n\taverageInt(arr, startIndex = 0) {\r\n\t\tconst len = arr.length;\r\n\t\tlet val = 0;\r\n\t\tlet average = 0;\r\n\t\tif (arr.length < startIndex) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\r\n\t\tfor (let i = startIndex; i < arr.length; i++) {\r\n\t\t\tval += arr[i];\r\n\t\t}\r\n\r\n\t\taverage = val / (len - startIndex);\r\n\t\treturn Math.floor(average);\r\n\t}\r\n\r\n\tneg(num) {\r\n\t\treturn (num >= 0 ? (num == 0 ? 0 : 1) : -1);\r\n\t}\r\n\r\n\tnumericSort(a, b) {\r\n\t\treturn (a < b ? -1 : (a == b ? 0 : 1));\r\n\t}\r\n\r\n\tshuffle(a) {\r\n\t\tfor (let i = a.length - 1; i > 0; i--) {\r\n\t\t\tconst j = Math.floor(Math.random() * (i + 1));\r\n\t\t\t[a[i], a[j]] = [a[j], a[i]];\r\n\t\t}\r\n\r\n\t\treturn a;\r\n\t}\r\n\r\n\tobjSize(obj) {\r\n\t\tlet size = 0;\r\n\r\n\t\tlet key;\r\n\t\tfor (key in obj) {\r\n\t\t\tif (obj.hasOwnProperty(key)) {\r\n\t\t\t\tsize++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn size;\r\n\t}\r\n\tcopyObject(obj) {\r\n\t\treturn Object.assign(Object.create(Object.getPrototypeOf(obj)), obj);\r\n\t}\r\n\tarraysEqual(arr1, arr2) {\r\n\t\tfor (var i = 0; i < arr1.length; i++) {\r\n\r\n\t\t\tif (arr1[i] !== arr2[i])\r\n\t\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tpauseTimeout(timerId) {\r\n\t\tlet start = Date.now();\r\n\t\tclearTimeout(timerId);\r\n\t};\r\n\r\n\tresumeTimeout(timerId) {\r\n\t\tremaining -= Date.now() - start;\r\n\t\treturn window.setTimeout(callback, remaining);\r\n\t};\r\n\trandomProperty(obj) {\r\n\t\tvar keys = Object.keys(obj)\r\n\t\treturn obj[keys[keys.length * Math.random() << 0]];\r\n\t};\r\n\t\tasync findFiles(path,ext=\"\") {\r\nlet list=[];\r\nlet fileExt=\"\";\r\nawait walk.filesSync(path, (pb, pf, stat, next) => {\r\nif (ext==\"\") {\r\nlist.push(pf);\r\n}\r\nelse {\r\nfileExt=pf.substr(0-ext.length,ext.length);\r\nif (fileExt==ext) {\r\nlist.push(pf);\r\n}\r\n}\r\n});\r\nreturn list;\r\n}\r\nasync findFolders(path) {\r\nlet list=[];\r\nawait walk.dirsSync(path, (pb, pf, stat, next) => {\r\nlist.push(pf);\r\n});\r\nreturn list;\r\n}\nrandomElement(arr) {\n\treturn arr[Math.floor(Math.random() * arr.length)];\n}\r\n}\r\nexport var utils = new GameUtils();\r\n","import $ from 'jquery';\r\nconst EventEmitter = require('events');\r\n'use strict';\r\nclass KeyboardInput extends EventEmitter {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.keyDown = [];\r\n\t\tthis.justPressed = [];\r\n\t\tthis.chars = [];\r\n\t\tthis.justReleased = [];\r\n\t\tthis.justPressedEventCallback = null;\r\n\t\tthis.charEventCallback = null;\r\n\t}\r\n\r\n\tinit() {\r\n\t\tconst that = this;\r\n\t\t// \t\t$(document).keydown(function(event) { that.handleKeyDown(event); });\r\n\t\t// \t\t$(document).keyup(function(event) { that.handleKeyUp(event); });\r\n\t\tdocument.addEventListener('keydown', event => {\r\n\t\t\tthat.handleKeyDown(event);\r\n\t\t});\r\n\t\tdocument.addEventListener('keyup', event => {\r\n\t\t\tthat.handleKeyUp(event);\r\n\t\t});\r\n\t\tdocument.addEventListener('keypress', event => {\r\n\t\t\tthat.handleChar(event);\r\n\t\t});\r\n\t}\r\n\tpause() {\r\n\t\tthis.isPaused = true;\r\n\t}\r\n\tresume() {\r\n\t\tthis.isPaused = false;\r\n\t}\r\n\thandleKeyDown(event) {\r\n\t\tif (this.keyDown[event.which] != true || typeof this.keyDown[event.which] === 'undefined') {\r\n\t\t\tthis.keyDown[event.which] = true;\r\n\t\t\tthis.justPressed[event.which] = true;\r\n\t\t\tthis.emit(event.which);\r\n\t\t\tthis.justReleased[event.which] = false;\r\n\t\t\tif (typeof this.justPressedEventCallback !== 'undefined' && this.justPressedEventCallback != null) {\r\n\t\t\t\tthis.justPressedEventCallback(event.which);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\thandleChar(char) {\r\n\t\tif (char.which < 48 || char.which > 122) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (String.fromCharCode(char.which) != '') {\r\n\t\t\tthis.chars += String.fromCharCode(char.which);\r\n\t\t\tthis.emit(\"chr\" + String.fromCharCode(char.which));\r\n\t\t\tif (typeof this.charEventCallback !== 'undefined' && this.charEventCallback != null) {\r\n\t\t\t\tthis.charEventCallback(String.fromCharCode(char.which));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\thandleKeyUp(event) {\r\n\t\tif (this.keyDown[event.which] == true) {\r\n\t\t\tthis.keyDown[event.which] = false;\r\n\t\t\tthis.justPressed[event.which] = false;\r\n\t\t\tthis.justReleased[event.which] = true;\r\n\t\t\tthis.emit(\"!\" + event.which);\r\n\t\t}\r\n\t\tthis.chars = '';\r\n\t}\r\n\tdestroy() {\r\n\t\tthis.charEventCallback = null;\r\n\t\tthis.justPressedEventCallback = null;\r\n\t}\r\n\tisDown(event) {\r\n\t\tif (this.isPaused) return false;\r\n\t\treturn this.keyDown[event];\r\n\t}\r\n\r\n\tisJustPressed(event) {\r\n\t\tif (this.isPaused) return false;\r\n\t\tif (this.justPressed[event] == true) {\r\n\t\t\tthis.justPressed[event] = false;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tisJustReleased(event) {\r\n\t\tif (this.justReleased[event]) {\r\n\t\t\tthis.justReleased[event] = false;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tkeysDown() {\r\n\t\tconst kd = [];\r\n\t\tthis.keyDown.forEach((v, i) => {\r\n\t\t\tif (v) {\r\n\t\t\t\tkd.push(i);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn kd;\r\n\t}\r\n\r\n\tgetChars() {\r\n\t\tconst kd = this.chars;\r\n\t\tthis.chars = '';\r\n\t\treturn kd;\r\n\t}\r\n\r\n\tkeysPressed() {\r\n\t\tconst kd = [];\r\n\t\tthis.justPressed.forEach((v, i) => {\r\n\t\t\tif (v) {\r\n\t\t\t\tkd.push(i);\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.justPressed.splice();\r\n\t\treturn kd;\r\n\t}\r\n\r\n\treleaseAllKeys() {\r\n\r\n\t}\r\n\r\n\tkeysReleased() {\r\n\t\tconst kd = [];\r\n\t\tthis.justReleased.forEach((v, i) => {\r\n\t\t\tif (v) {\r\n\t\t\t\tkd.push(i);\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.justReleased.splice();\r\n\t\treturn kd;\r\n\t}\r\n}\r\n\r\nexport { KeyboardInput };\r\n","\r\n'use strict';\r\nconst KeyEvent = {\r\nDOM_VK_CANCEL: 3,\r\n\t       DOM_VK_HELP: 6,\r\n\t       DOM_VK_BACK_SPACE: 8,\r\n\t       DOM_VK_TAB: 9,\r\n\t       DOM_VK_CLEAR: 12,\r\n\t       DOM_VK_RETURN: 13,\r\n\t       DOM_VK_ENTER: 14,\r\n\t       DOM_VK_SHIFT: 16,\r\n\t       DOM_VK_CONTROL: 17,\r\n\t       DOM_VK_ALT: 18,\r\n\t       DOM_VK_PAUSE: 19,\r\n\t       DOM_VK_CAPS_LOCK: 20,\r\n\t       DOM_VK_ESCAPE: 27,\r\n\t       DOM_VK_SPACE: 32,\r\n\t       DOM_VK_PAGE_UP: 33,\r\n\t       DOM_VK_PAGE_DOWN: 34,\r\n\t       DOM_VK_END: 35,\r\n\t       DOM_VK_HOME: 36,\r\n\t       DOM_VK_LEFT: 37,\r\n\t       DOM_VK_UP: 38,\r\n\t       DOM_VK_RIGHT: 39,\r\n\t       DOM_VK_DOWN: 40,\r\n\t       DOM_VK_PRINTSCREEN: 44,\r\n\t       DOM_VK_INSERT: 45,\r\n\t       DOM_VK_DELETE: 46,\r\n\t       DOM_VK_0: 48,\r\n\t       DOM_VK_1: 49,\r\n\t       DOM_VK_2: 50,\r\n\t       DOM_VK_3: 51,\r\n\t       DOM_VK_4: 52,\r\n\t       DOM_VK_5: 53,\r\n\t       DOM_VK_6: 54,\r\n\t       DOM_VK_7: 55,\r\n\t       DOM_VK_8: 56,\r\n\t       DOM_VK_9: 57,\r\n\t       DOM_VK_SEMICOLON: 59,\r\n\t       DOM_VK_EQUALS: 61,\r\n\t       DOM_VK_A: 65,\r\n\t       DOM_VK_B: 66,\r\n\t       DOM_VK_C: 67,\r\n\t       DOM_VK_D: 68,\r\n\t       DOM_VK_E: 69,\r\n\t       DOM_VK_F: 70,\r\n\t       DOM_VK_G: 71,\r\n\t       DOM_VK_H: 72,\r\n\t       DOM_VK_I: 73,\r\n\t       DOM_VK_J: 74,\r\n\t       DOM_VK_K: 75,\r\n\t       DOM_VK_L: 76,\r\n\t       DOM_VK_M: 77,\r\n\t       DOM_VK_N: 78,\r\n\t       DOM_VK_O: 79,\r\n\t       DOM_VK_P: 80,\r\n\t       DOM_VK_Q: 81,\r\n\t       DOM_VK_R: 82,\r\n\t       DOM_VK_S: 83,\r\n\t       DOM_VK_T: 84,\r\n\t       DOM_VK_U: 85,\r\n\t       DOM_VK_V: 86,\r\n\t       DOM_VK_W: 87,\r\n\t       DOM_VK_X: 88,\r\n\t       DOM_VK_Y: 89,\r\n\t       DOM_VK_Z: 90,\r\n\t       DOM_VK_CONTEXT_MENU: 93,\r\n\t       DOM_VK_NUMPAD0: 96,\r\n\t       DOM_VK_NUMPAD1: 97,\r\n\t       DOM_VK_NUMPAD2: 98,\r\n\t       DOM_VK_NUMPAD3: 99,\r\n\t       DOM_VK_NUMPAD4: 100,\r\n\t       DOM_VK_NUMPAD5: 101,\r\n\t       DOM_VK_NUMPAD6: 102,\r\n\t       DOM_VK_NUMPAD7: 103,\r\n\t       DOM_VK_NUMPAD8: 104,\r\n\t       DOM_VK_NUMPAD9: 105,\r\n\t       DOM_VK_MULTIPLY: 106,\r\n\t       DOM_VK_ADD: 107,\r\n\t       DOM_VK_SEPARATOR: 108,\r\n\t       DOM_VK_SUBTRACT: 109,\r\n\t       DOM_VK_DECIMAL: 110,\r\n\t       DOM_VK_DIVIDE: 111,\r\n\t       DOM_VK_F1: 112,\r\n\t       DOM_VK_F2: 113,\r\n\t       DOM_VK_F3: 114,\r\n\t       DOM_VK_F4: 115,\r\n\t       DOM_VK_F5: 116,\r\n\t       DOM_VK_F6: 117,\r\n\t       DOM_VK_F7: 118,\r\n\t       DOM_VK_F8: 119,\r\n\t       DOM_VK_F9: 120,\r\n\t       DOM_VK_F10: 121,\r\n\t       DOM_VK_F11: 122,\r\n\t       DOM_VK_F12: 123,\r\n\t       DOM_VK_F13: 124,\r\n\t       DOM_VK_F14: 125,\r\n\t       DOM_VK_F15: 126,\r\n\t       DOM_VK_F16: 127,\r\n\t       DOM_VK_F17: 128,\r\n\t       DOM_VK_F18: 129,\r\n\t       DOM_VK_F19: 130,\r\n\t       DOM_VK_F20: 131,\r\n\t       DOM_VK_F21: 132,\r\n\t       DOM_VK_F22: 133,\r\n\t       DOM_VK_F23: 134,\r\n\t       DOM_VK_F24: 135,\r\n\t       DOM_VK_NUM_LOCK: 144,\r\n\t       DOM_VK_SCROLL_LOCK: 145,\r\n\t       DOM_VK_COMMA: 188,\r\n\t       DOM_VK_PERIOD: 190,\r\n\t       DOM_VK_SLASH: 191,\r\n\t       DOM_VK_BACK_QUOTE: 192,\r\n\t       DOM_VK_OPEN_BRACKET: 219,\r\n\t       DOM_VK_BACK_SLASH: 220,\r\n\t       DOM_VK_CLOSE_BRACKET: 221,\r\n\t       DOM_VK_QUOTE: 222,\r\n\t       DOM_VK_META: 224\r\n};\r\nexport {KeyEvent};\r\n","import \"babel-polyfill\";\r\nconst { app } = require('electron').remote;\n\tconst { exec } = require(\"child_process\");\r\nimport { report } from './main';\r\n\r\n'use strict';\r\n\r\nimport { strings } from './strings';\r\nimport { utils } from './utilities'\r\nimport { lang, ttsVoice, ttsRate } from './main';\r\nimport { KeyboardInput } from './input.js';\r\nimport { KeyEvent } from './keycodes';\r\nconst useWebTTS = true;\r\nimport Speech from 'speak-tts' // es6\r\nclass TTS {\r\n\tconstructor(webTTS = true) {\r\n\t\tthis.voices = []\r\n\t\tthis.speechController = new KeyboardInput();\r\n\t\tthis.speechController.init();\r\n\t\tthis.ducking = false;\r\n\t\tif (lang == 1) this.lang = \"en\";\r\n\t\tif (lang == 2) this.lang = \"es\";\r\n\t\tthis.webTTS = webTTS;\r\n\t\tthis.synth = new Speech()\r\n\t\tthis.rate = 3;\r\n\t\tthis.speechController.justPressedEventCallback = (key) => {\r\n\t\t\tif (this.interrupt) this.speak(\"\", false);\r\n\t\t\tif (key == KeyEvent.VK_SHIFT || key == KeyEvent.DOM_VK_ESCAPE) {\r\n\t\t\t\tthis.speak(\"\", false);\n\t\t\t\tif (this.childProcess) this.childProcess.kill()\n\t\t\t\tthis.unduck()\r\n\t\t\t}\n\t\t\tif (key == KeyEvent.VK_UP && this.speechController.isDown(KeyEvent.DOM_VK_SHIFT)) {\n//rate here\nthis.setRate(this.rate+1)\nstrings.speak('newRate');\n\t\t\t}\n\t\t\tif (key == KeyEvent.VK_DOWN && this.speechController.isDown(KeyEvent.DOM_VK_CONTROL)) {\n//rate here\nthis.setRate(this.rate+1)\nstrings.speak('newRate');\n\t\t\t}\n\t\t\t\n\t\t\t\r\n\t\t};\r\n\r\n\t\tthis.synth.init({\r\n\t\t\tlang: this.lang,\r\n\t\t\trate: this.rate,\r\n\t\t\tsplitSentences: false,\n\t\t\t'listeners': {\n\t\t\t}\n\r\n\t\t})\r\n\t\t\t.then((data) => {\n\t\t\t\tthis.voices = data.voices;\n\t\t\t}).catch(e => {\r\n\t\t\t\treport(e);\r\n\t\t\t})\r\n\t}\r\n\tsetLanguage(lang) {\n\r\n\t\ttry {\r\n\t\t\tif (lang == 1) this.lang = \"en\";\r\n\t\t\tif (lang == 2) this.lang = \"es\";\r\n\t\t\tthis.synth.setLanguage(this.lang)\n\t\t\tif (process.platform=='darwin') this.setVoice(null,true)\n\t\t\t\t\t\t\t\tconsole.log(\"default voice \",this.voice)\n\r\n\t\t} catch (err) {\r\n\t\t\treport(err);\r\n\t\t}\r\n\t}\r\n\tsetRate(r) {\r\n\t\tlet newRate = r;\r\n\t\tif (r < 1) newRate == 1;\r\n\t\tif (r > 10) newRate = 10;\r\n\t\tthis.rate = newRate;\r\n\t\tthis.synth.setRate(newRate);\r\n\t}\r\n\tspeak(text, queue = false) {\r\n\t\tlet sr = app.accessibilitySupportEnabled;\r\n\r\n\t\tif (sr) this.webTTS = false;\r\n\t\tif (!sr) this.webTTS = true;\n\t\tif (process.platform == 'darwin') this.webTTS=true\r\n\t\tif (this.webTTS) {\r\n\t\t\ttry {\n\t\t\t\tlet oldText=text;\r\n\t\t\t\tif (typeof text == \"number\") {\r\n\t\t\t\t\ttext = \" \"+text + \".\";\n\t\t\t\t\t//we need this because some voices fail to process numbers. Why? Don't ask me.\r\n\t\t\t\t}\n\t\t\t\tif (process.platform == 'darwin') {\n\t\t\t\t\tthis.speakUnthreaded(text)\n\t\t\t\t} else {\r\n\t\t\t\tthis.synth.speak({\r\n\t\t\t\t\ttext: text,\r\n\t\t\t\t\tqueue: queue,\r\n\t\t\t\t\tlisteners: {\r\n\t\t\t\t\t\tonstart: () => {\r\n\t\t\t\t\t\t\tthis.duck();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tonend: () => {\r\n\t\t\t\t\t\t\tthis.unduck();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tonerror: (err) => {\r\n\t\t\t\t\t\t\t//this.setVoice(null,true);\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t}\r\n\t\t\t\t})\n\t\t\t\t}\r\n\t\t\t} catch(e) {\n\t\t\t\tconsole.error(e)\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.duck();\r\n\t\t\tdocument.getElementById('speech').innerHTML = '';\r\n\t\t\tconst para = document.createElement('p');\r\n\t\t\tpara.appendChild(document.createTextNode(text));\r\n\t\t\tdocument.getElementById('speech').appendChild(para);\r\n\t\t}\r\n\t} // End speak()\r\n\r\n\tsetWebTTS(tts) {\r\n\t\tthis.webTTS = tts;\r\n\t}\r\n\r\n\tstop() {\r\n\t\tif (this.webTTS) {\r\n\t\t\tthis.synth.cancel();\r\n\t\t}\r\n\t}\r\n\tasync changeRate() {\r\n\t\tlet rate = speech.rate;\r\n\t\tconst inp = new KeyboardInput();\r\n\t\tinp.init();\r\n\t\tstrings.speak('rating');\r\n\t\twhile (!inp.isJustPressed(KeyEvent.DOM_VK_RETURN)) {\r\n\t\t\tawait utils.sleep(5);\r\n\t\t\tif (inp.isJustPressed(KeyEvent.DOM_VK_RIGHT)) {\r\n\t\t\t\trate += 0.25;\r\n\t\t\t\tif (rate > 10) rate = 10;\r\n\r\n\t\t\t\tspeech.setRate(rate)\r\n\t\t\t\tstrings.speak('newRate');\r\n\t\t\t}\r\n\t\t\tif (inp.isJustPressed(KeyEvent.DOM_VK_LEFT)) {\r\n\t\t\t\trate -= 0.25;\r\n\t\t\t\tif (rate < 1) rate = 1;\r\n\t\t\t\tspeech.setRate(rate)\r\n\t\t\t\tstrings.speak('newRate');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tchangeVoice(name) {\r\n\t\tlet voiceArray = []\r\n\t\tfor (var k in this.voices) {\r\n\t\t\tvoiceArray.push(this.voices[k].name)\r\n\t\t}\r\n\t\tif (voiceArray.includes(name)) {\r\n\t\t\tspeech.synth.setVoice(name);\n\t\t\tthis.voice=name\r\n\t\t}\r\n\r\n\t}\r\n\tsetVoice(cb, silent = false) {\r\n\t\t//what language do we want?\r\n\t\tlet wl = \"en\";\r\n\t\tif (lang == 1) wl = \"en\";\r\n\t\tif (lang == 2) wl = \"es\";\r\n\t\tlet voiceArray = []\r\n\t\tfor (var k in this.voices) {\r\n\t\t\t//get the first part of the voice languages\r\n\t\t\tlet vl = this.voices[k].lang.split(\"-\")[0]\r\n\t\t\t//do we want this language?\r\n\t\t\tif (vl == wl) {\r\n\t\t\t\tvoiceArray.push(this.voices[k].name)\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!silent) speech.speak(strings.get(\"selectVoice\", [voiceArray.length]));\r\n\t\tlet input = new KeyboardInput()\r\n\t\tlet selection = -1;\r\n\t\tinput.init();\r\n\t\tif (!silent) {\r\n\t\t\tinput.justPressedEventCallback = ((key) => {\r\n\t\t\t\tif (key == KeyEvent.DOM_VK_DOWN) {\r\n\t\t\t\t\tselection++;\r\n\t\t\t\t\tif (selection >= voiceArray.length) selection = 0;\r\n\t\t\t\t}\r\n\t\t\t\tif (key == KeyEvent.DOM_VK_UP) {\r\n\t\t\t\t\tselection--;\r\n\t\t\t\t\tif (selection <= -1) selection = voiceArray.length - 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (key != KeyEvent.DOM_VK_RETURN && (key == KeyEvent.DOM_VK_UP || key == KeyEvent.DOM_VK_DOWN)) { //dirty hack\r\n\t\t\t\t\tthis.synth.setVoice(voiceArray[selection]);\r\n\t\t\t\t\tspeech.speak(voiceArray[selection])\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t//it is enter\r\n\t\t\t\t\tif (selection != -1) { //don't crash if it's -1.\r\n\t\t\t\t\t\tinput.destroy();\r\n\t\t\t\t\t\tif (typeof cb !== \"undefined\") {\r\n\t\t\t\t\t\t\tcb(voiceArray[selection])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn voiceArray[selection]\r\n\t\t\t\t\t}\r\n\t\t\t\t}//enter action\r\n\t\t\t});//callback\r\n\t\t} //not silent\r\n\t\telse {\r\n\t\t\ttry {\r\n\t\t\t\tthis.synth.setVoice(voiceArray[0]);\n\t\t\t\tthis.voice=voiceArray[0]\r\n\t\t\t\treturn voiceArray[0];\r\n\t\t\t} catch (err) {\r\n\t\t\t\treport(err);\r\n\t\t\t\tthis.synth.setVoice(voiceArray[1]);\n\t\t\t\tthis.voice=voiceArray[1]\r\n\t\t\t\treturn voiceArray[1];\r\n\t\t\t} // catch block\r\n\t\t}//else\r\n\t}//function\r\n\tduck() {\r\n\t\tif (this.ducking) return;\r\n\t\tthis.ducking = true;\r\n\t\tif (typeof this.ducker !== \"undefined\") this.ducker.duck();\r\n\t}\r\n\tunduck() {\r\n\t\tthis.ducking = false;\r\n\t\tif (typeof this.ducker !== \"undefined\") this.ducker.unduck();\r\n\t}\r\nspeakUnthreaded(text) {\n\tlet rate=this.rate*100\nif (this.childProcess) this.childProcess.kill()\nthis.duck()\n\tthis.childProcess=exec('say \"'+text+'\" -r '+rate+ ' -v '+this.voice, (error, stdout, stderr) => {\n\t\tif (error) {\n\t\t\tthrow(`error: ${error.message}`);\n\t\t\treturn;\n\t\t}\n\t\tif (stderr) {\n\t\t\tconsole.log(`stderr: ${stderr}`);\n\t\t\treturn;\n\t\t}\n\t\tconsole.log(`stdout: ${stdout}`);\n\t\tthis.unduck();\n\t});\n}\r\n} // End class\r\nconst speech = new TTS(false);\r\nexport { TTS, speech };\r\n","import \"babel-polyfill\";\r\nimport { report } from './main';\r\nimport { speech } from './tts';\r\nimport panner from 'sono/effects/panner';\r\nconst EventEmitter = require('events');\r\nimport sono from 'sono';\r\nimport { KeyboardInput } from './input';\r\nimport { KeyEvent } from './keycodes';\r\nimport { utils } from './utilities';\r\npanner.defaults = {\r\n\tpanningModel: 'HRTF',\r\n\tmaxDistance: 50,\r\n};\r\nsono.playInBackground = true;\r\nvar playOnceTimer;\r\nclass SoundObjectItem extends EventEmitter {\r\n\tconstructor(file, callback = 0, tag = 0, stream = false) {\r\n\t\tsuper();\r\n\t\tthis.duckingFirstTime = true;\r\n\t\tthis.stream = stream;\r\n\t\tthis.panner = null;\r\n\t\tthis.fileName = file;\r\n\t\tif (typeof file == \"string\") {\r\n\t\t\tif (!stream) {\r\n\t\t\t\tthis.sound = sono.create({\r\n\t\t\t\t\tsrc: file,\r\n\t\t\t\t\tonComplete: () => { this.doneLoading(); }\r\n\t\t\t\t});\r\n\t\t\t\tthis.timeout = setTimeout(() => { this.checkProgress(); }, 2000);\r\n\t\t\t\tthis.loaded = false;\r\n\t\t\t\tthis.callback = callback;\r\n\t\t\t\tthis.tag = tag;\r\n\t\t\t}\r\n\t\t\tif (stream) {\r\n\t\t\t\tthis.loaded = true;\r\n\t\t\t\tthis.callback = callback;\r\n\t\t\t\tthis.tag = tag;\r\n\t\t\t\tthis.sound = sono.create(new Audio(file));\r\n\t\t\t\tthis.doneLoading();\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (typeof file == \"object\") {\r\n\t\t\tthis.sound = sono.create(\"\");\r\n\t\t\tthis.sound.data = file;\r\n\t\t\tthis.loaded = false;\r\n\t\t\tthis.callback = callback;\r\n\t\t\tthis.tag = tag;\r\n\t\t\tthis.doneLoading();\r\n\t\t}\r\n\r\n\r\n\t}\r\n\r\n\tget playbackRate() {\r\n\t\treturn this.sound.playbackRate\r\n\t}\r\n\r\n\tset playbackRate(v) {\r\n\t\treturn this.sound.playbackRate = v;\r\n\t}\r\n\tget pitch() {\r\n\t\treturn this.sound.playbackRate\r\n\t}\r\n\r\n\tset pitch(v) {\r\n\t\treturn this.sound.playbackRate = v;\r\n\t}\r\n\r\n\tset loop(v) {\r\n\t\tthis.sound.loop = v;\r\n\t}\r\n\r\n\tcheckProgress() {\r\n\t\tif (this.stream) return;\r\n\t\tif (this.sound.progress == 0) {\r\n\t\t\tthis.sound.destroy();\r\n\t\t\tthis.sound = sono.create({ src: this.fileName, onComplete: () => { this.doneLoading(); } }, this.stream);\r\n\t\t}\r\n\r\n\t\tif (this.sound.progress == 1) {\r\n\t\t\tthis.doneLoading();\r\n\t\t} else {\r\n\t\t\tthis.timeout = setTimeout(() => { this.checkProgress(); }, 500);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tdoneLoading() {\r\n\t\tif (!this.stream) clearTimeout(this.timeout);\r\n\t\tthis.loaded = true;\r\n\t\tif (this.callback != 0) {\r\n\t\t\tthis.callback();\r\n\t\t}\r\n\t}\r\n\treplay() {\r\n\t\tthis.sound.stop()\r\n\t\tthis.sound.play()\r\n\t}\r\n\tplay() {\r\n\t\t//sometimes, html element sounds complain about having a different connection, so wrap it in a try catch block.\r\n\t\ttry {\r\n\t\t\tthis.sound.play();\r\n\t\t} catch (err) {\r\n\t\t\t//report(err);\r\n\t\t\t//recreate the sound and replay\r\n\t\t\tif (this.stream) this.sound = sono.create(new Audio(this.fileName));\r\n\t\t\tif (!this.stream) this.sound = sono.create({\r\n\t\t\t\tsrc: this.fileName,\r\n\t\t\t\tonComplete: () => { this.doneLoading(); }\r\n\t\t\t});\r\n\t\t\tthis.sound.play();\r\n\t\t}\r\n\t}\r\n\tstop() {\r\n\t\tthis.sound.stop();\r\n\r\n\t}\r\n\tpause() {\r\n\t\tthis.sound.pause();\r\n\t}\r\n\tresume() {\r\n\t\tthis.sound.resume();\r\n\t}\r\n\tdestroy() {\r\n\t\ttry {\r\n\r\n\t\t\tthis.sound.destroy();\r\n\t\t} catch (err) {\r\n\r\n\t\t}\r\n\t}\r\n\tunload() { this.sound.destroy(); }\r\n\tduck(time) {\r\n\t\tif (this.duckingFirstTime) this.oldVolume = this.volume;\r\n\t\tthis.duckingFirstTime = false;\r\n\t\tthis.sound.fade(0.3, 0.15);\r\n\t}\r\n\tunduck(time) {\r\n\t\tthis.sound.fade(this.oldVolume, 0.15);\r\n\t}\r\n\tasync fade(time) {\r\n\t\tthis.sound.fade(0, time / 1000);\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.sound.stop();\r\n\t\t\t\tresolve('ok');\r\n\t\t\t}, time);// End\r\n\t\t});// Promise\r\n\r\n\t}\r\n\r\n\tpos(x, y, z) {\r\n\r\n\t}\r\n\r\n\tforcePlay() {\r\n\t\tthis.sound.stop();\r\n\t\tthis.sound.play();\r\n\t}\r\n\tasync playSync(die = false) {\r\n\t\tconst inp = new KeyboardInput();\r\n\t\tinp.init();\r\n\t\tthis.sound.play();\r\n\r\n\t\tinp.justPressedEventCallback = (evt => {\r\n\t\t\tif (evt == KeyEvent.DOM_VK_Q || evt == KeyEvent.DOM_VK_X || evt == KeyEvent.DOM_VK_ESCAPE || evt == KeyEvent.DOM_VK_SPACE || evt == KeyEvent.DOM_VK_ENTER) {\r\n\t\t\t\tthis.sound.stop();\r\n\t\t\t\tinp.justPressedEventCallback = null;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tthis.sound.once('ended', () => {\r\n\t\t\t\tthis.sound.removeAllListeners();\r\n\t\t\t\tif (die) this.sound.destroy();\r\n\t\t\t\tresolve('ok');\r\n\t\t\t\tinp.justPressedEventCallback = null;\r\n\t\t\t});// End\r\n\t\t\tthis.sound.once('stop', () => {\r\n\t\t\t\tthis.sound.removeAllListeners();\r\n\t\t\t\tif (die) this.sound.destroy();\r\n\t\t\t\tresolve('ok');\r\n\t\t\t\tinp.justPressedEventCallback = null;\r\n\t\t\t});// Stop\r\n\t\t});// Promise\r\n\t}\r\n\r\n\tget active() {\r\n\t\tif (!this.sound.loaded) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (this.sound.progress < 1) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (this.sound.loaded) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t}\r\n\tget playing() {\r\n\t\treturn this.sound.playing;\r\n\t}\r\n\r\n\tget pan() {\r\n\t\tif (!this.panner) {\r\n\t\t\tthis.panner = this.sound.effects.add(panner());\r\n\t\t\tthis.currentPan = 0;\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\treturn this.currentPan;\r\n\t}\r\n\r\n\tset pan(v) {\r\n\t\tif (!this.panner) {\r\n\t\t\tthis.panner = this.sound.effects.add(panner());\r\n\t\t}\r\n\t\tthis.currentPan = v;\r\n\t\treturn this.panner.set(v);\r\n\t}\r\n\tget volume() {\r\n\t\treturn this.sound.volume;\r\n\t}\r\n\tset volume(v) {\r\n\t\tthis.sound.volume = v;\r\n\t}\r\n\r\n\tseek(time) {\r\n\t\treturn this.sound.seek(time);\r\n\t}\r\n\r\n\tget currentTime() {\r\n\t\treturn this.sound.currentTime;\r\n\t}\r\n\r\n\tget duration() {\r\n\t\treturn this.sound.duration * 1000;\r\n\t}\r\n\r\n\tget position() {\r\n\t\treturn this.sound.currentTime;\r\n\t}\r\n\r\n\tset currentTime(v) {\r\n\t\treturn this.sound.seek(v);\r\n\t}\r\n\r\n}\r\n\r\nclass SoundObject {\r\n\tconstructor() {\r\n\t\tthis.sounds = new Array();\r\n\t\tthis.loadingQueue = false;\r\n\t\tthis.queueCallback = 0;\r\n\t\tthis.loadedSounds = 0;\r\n\t\tthis.loadingSounds = 0;\r\n\t\tthis.loadedCallback = 0;\r\n\t\tthis.queue = new Array();\r\n\t\tthis.queueLength = 0;\r\n\t\tthis.statusCallback = null;\r\n\t\tthis.directory = \"./sounds/\";\r\n\t\tthis.extension = \".ogg\";\r\n\t\tthis.oneShots = new Array();\r\n\t\tthis.debug = false;\r\n\r\n\r\n\t\tthis.oneShotSound = null;\r\n\t}\r\n\tsetStatusCallback(callback) {\r\n\t\tthis.statusCallback = callback;\r\n\t}\r\n\tfindSound(file) {\r\n\t\tfor (let i = 0; i < this.sounds.length; i++) {\r\n\t\t\tif (this.sounds[i].fileName == file && this.sounds[i].loaded) {\r\n\t\t\t\treturn this.sounds[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\tfindSoundIndex(file) {\r\n\t\tfor (const i in this.sounds) {\r\n\t\t\tif (this.sounds[i].fileName == file) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t}\r\n\r\n\r\n\tresetQueuedInstance() {\r\n\t\tfor (let i = 0; i < this.sounds.length; i++) {\r\n\t\t\tif (typeof this.sounds[i] != \"undefined\") {\r\n\t\t\t\tif (this.sounds[i].tag == 1) {\r\n\t\t\t\t\tthis.sounds[i].sound.destroy();\r\n\t\t\t\t\tthis.sounds.splice(i, 1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.loadingQueue = false;\r\n\t\tthis.queueCallback = 0;\r\n\t\tthis.loadedSounds = 0;\r\n\t\tthis.loadingSounds = 0;\r\n\t\tthis.loadedCallback = 0;\r\n\t\tthis.queue = new Array();\r\n\t\tthis.queueLength = 0;\r\n\t\tthis.statusCallback = null;\r\n\t}\r\n\r\n\r\n\r\n\tcreate(file, stream = false) {\r\n\t\tfile = this.directory + file + this.extension;\r\n\t\tlet found = -1;\r\n\t\tfound = this.findSound(file);\r\n\t\tlet returnObject = null;\r\n\t\tif (found == -1 || found.sound.data == null) {\r\n\t\t\treturnObject = new SoundObjectItem(file, () => { if (!stream) this.doneLoading(); }, 0, stream);\r\n\t\t\tthis.sounds.push(returnObject);\r\n\t\t} else {\r\n\t\t\treturnObject = new SoundObjectItem(found.sound.data, () => { if (!stream) this.doneLoading(); }, 0, stream);\r\n\t\t\treturnObject.fileName = found.fileName;\r\n\t\t}\r\n\t\treturnObject.fileName = file; //otherwise html element fileNames get fucked up.\r\n\t\treturn returnObject;\r\n\t}\r\n\tasync loadQueueSync() {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tso.setQueueCallback(() => {\r\n\t\t\t\tresolve(true);\r\n\t\t\t});\r\n\t\t\tso.loadQueue();\r\n\t\t});\r\n\t}\r\n\tasync createSync(file, stream = false) {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tfile = this.directory + file + this.extension;\r\n\t\t\tlet found = -1;\r\n\t\t\tfound = this.findSound(file);\r\n\t\t\tlet returnObject = null;\r\n\t\t\tif (found == -1 || found.sound.data == null) {\r\n\t\t\t\treturnObject = new SoundObjectItem(file, () => { if (!stream) this.doneLoading(); }, 0, stream);\r\n\t\t\t\tthis.sounds.push(returnObject);\r\n\t\t\t\tif (stream) resolve(returnObject);\r\n\t\t\t} else {\r\n\t\t\t\treturnObject = new SoundObjectItem(found.sound.data, () => { if (!stream) this.doneLoading(); }, 0, stream);\r\n\t\t\t\tresolve(returnObject);\r\n\t\t\t}\r\n\t\t\treturnObject.fileName = file; //otherwise html element fileNames get fucked up.\r\n\t\t\tif (stream) resolve(returnObject);\r\n\t\t\tif (!stream) {\r\n\t\t\t\treturnObject.sound.once('loaded', () => {\r\n\t\t\t\t\tresolve(returnObject);\r\n\t\t\t\t\tthis.doneLoading();\r\n\t\t\t\t});// End\r\n\t\t\t}//stream\r\n\t\t});// Promise\r\n\t}\r\n\tasync playSync(file) {\r\n\t\tlet snd = await so.createSync(file);\r\n\t\tawait snd.playSync();\r\n\t\tsnd.destroy();\r\n\t}\r\n\r\n\tenqueue(file, stream = false) {\r\n\t\tfile = this.directory + file + this.extension;\r\n\t\tthis.queue.push({ file, stream });\r\n\t\tthis.queueLength = this.queue.length;\r\n\t}\r\n\r\n\tloadQueue() {\r\n\r\n\t\tthis.handleQueue();\r\n\t\tthis.loadingQueue = true;\r\n\r\n\t}\r\n\tsetQueueCallback(callback) {\r\n\t\tthis.queueCallback = callback;\r\n\t}\r\n\tresetQueue() {\r\n\t\tthis.queue = [];\r\n\t\tthis.loadingQueue = false;\r\n\t}\r\n\thandleQueue() {\r\n\t\tif (this.queue.length > 0) {\r\n\t\t\tif (typeof this.statusCallback != \"undefined\" && this.statusCallback != null) {\r\n\t\t\t\tthis.statusCallback(1 - this.queue.length / this.queueLength);\r\n\t\t\t}\r\n\t\t\tif (this.findSound(this.queue[0].file) != -1) {\r\n\t\t\t\tthis.queue.splice(0, 1);\r\n\t\t\t\tthis.handleQueue();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet file = this.queue[0].file;\r\n\t\t\tlet stream = this.queue[0].stream;\r\n\t\t\tthis.queue.splice(0, 1);\r\n\t\t\tthis.sounds.push(new SoundObjectItem(file, () => { this.handleQueue(); }, 1, stream));\r\n\r\n\t\t} else {\r\n\t\t\tthis.loadingQueue = false;\r\n\t\t\tif (typeof this.queueCallback != \"undefined\" && this.queueCallback != 0) {\r\n\t\t\t\tthis.queueCallback();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\tsetCallback(callback) {\r\n\t\tthis.loadedCallback = callback;\r\n\t}\r\n\tdoneLoading() {\r\n\t\tlet result = this.isLoading();\r\n\r\n\t\tif (result == 1) {\r\n\r\n\t\t\tif (typeof this.loadedCallback != \"undefined\" && this.loadedCallback != 0 && this.loadedCallback != null) {\r\n\t\t\t\tthis.loadedCallback();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tisLoading() {\r\n\t\tlet loading = 0;\r\n\t\tthis.loadedSounds = 0;\r\n\t\tthis.loadingSounds = 0;\r\n\t\tlet stillLoading = new Array();\r\n\t\tfor (let i = 0; i < this.sounds.length; i++) {\r\n\t\t\tif (typeof this.sounds[i] != \"undefined\") {\r\n\t\t\t\tif (this.sounds[i].loaded == false) {\r\n\t\t\t\t\tthis.loadingSounds++;\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.loadedSounds++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this.loadedSounds / this.sounds.length;\r\n\t}\r\n\r\n\tplayOnce(file) {\r\n\t\tthis.oneShotSound = this.create(file).sound;\r\n\t\tthis.oneShotSound.stop();\r\n\t\tthis.oneShotSound.play();\r\n\t\tthis.oneShotSound.on(\"ended\", () => {\r\n\t\t\tif (this.oneShotSound.playing == false) this.oneShotSound.destroy();\r\n\t\t});\r\n\r\n\t}\r\n\tdestroy(file, callback = 0) {\r\n\t\tlet noMore = false;\r\n\t\tconst filename = this.directory + file + this.extension;\r\n\t\twhile (!noMore) {\r\n\t\t\tconst found = this.findSoundIndex(filename);\r\n\t\t\tif (found == -1) {\r\n\t\t\t\tnoMore = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.sounds[found].sound.unload();\r\n\t\t\t\tthis.sounds.splice(found, 1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (callback != 0) {\r\n\t\t\tcallback();\r\n\t\t}\r\n\t}\r\n\r\n\tkill(callback = 0) {\r\n\t\twhile (this.sounds.length > 0) {\r\n\t\t\tthis.sounds.splice(0, 1);\r\n\t\t}\r\n\r\n\t\tsono.destroyAll();\r\n\t\tif (callback != 0) {\r\n\t\t\tcallback();\r\n\t\t}\r\n\t}\r\n\r\n}\r\nexport let so = new SoundObject();","import \"babel-polyfill\";\r\n'use strict';\r\nimport $ from 'jquery';\r\nimport {KeyEvent} from './keycodes';\r\nimport {so} from './soundObject';\r\nimport {speech} from './tts';\r\nimport copy from 'copy-to-clipboard';\r\nif (runningText == undefined) {\r\n\tvar runningText = 0;\r\n}\r\nclass ScrollingText {\r\n\tconstructor(text, delimiter = '\\n', callback = 0) {\r\n\t\tthis.callback = callback;\r\n\r\n\t\tthis.text = text;\r\n\t\tthis.delimiter = delimiter;\r\n\t\tthis.splitText = this.text.split(delimiter);\r\n\t\tthis.currentLine = 0;\r\n\t\tthis.sndOpen = so.create('ui/textOpen');\r\n\t\tthis.sndContinue = so.create('ui/textScroll');\r\n\t\tthis.sndClose = so.create('ui/textClose');\r\n\t\tconst id = document.getElementById('touchArea');\r\n\t\t// This.hammer = new Hammer(id);\r\n\t\tthis.init();\r\n\t\tif (this.callback == 0) {\r\n\t\t\treturn this.prom = new Promise(resolve => {\r\n\t\t\t\t\tthis.res = resolve;\r\n\t\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tinit() {\r\n\t\tconst that = this;\r\n\t\trunningText = this;\r\n\t\tdocument.addEventListener('keydown', this.handleKeys);\r\n\t\t// This.hammer.on(\"swipeleft swiperight\", function() { that.handleTap(0); });\r\n\t\t// this.hammer.on(\"tap\", function() { that.handleTap(1); });\r\n\t\tthis.sndOpen.play();\r\n\t\tthis.currentLine = 0;\r\n\t\tthis.readCurrentLine();\r\n\t}\r\n\r\n\thandleKeys(event) {\r\n\t\tswitch (event.which) {\r\n\t\t\tcase KeyEvent.DOM_VK_UP:\r\n\t\t\tcase KeyEvent.DOM_VK_DOWN:\r\n\t\t\tcase KeyEvent.DOM_VK_LEFT:\r\n\t\t\tcase KeyEvent.DOM_VK_RIGHT:\r\n\t\t\t\trunningText.readCurrentLine();\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase KeyEvent.DOM_VK_C:\r\n\t\t\t\trunningText.copyCurrentLine();\r\n\t\t\t\tbreak;\r\n\t\t\tcase KeyEvent.DOM_VK_RETURN:\r\n\t\t\t\trunningText.advance();\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\thandleTap(action) {\r\n\t\tif (action == 0) {\r\n\t\t\tthis.readCurrentLine();\r\n\t\t}\r\n\r\n\t\tif (action == 1) {\r\n\t\t\tthis.advance();\r\n\t\t}\r\n\t}\r\n\r\n\treadCurrentLine() {\r\n\t\tif (this.splitText[this.currentLine][0] == '!') {\r\n\t\t\tconst str = this.splitText[this.currentLine].substr(1);\r\n\t\t\tconst snd = so.create(str, true);\r\n\t\t\tsnd.play();\r\n\t\t\tsnd.sound.once('end', () => {\r\n\t\t\t\t\tthis.advance();\r\n\t\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tspeech.speak(this.splitText[this.currentLine]);\r\n\t\t}\r\n\t}\r\ncopyCurrentLine() {\r\n\t\t\tcopy(this.splitText[this.currentLine]);\t\r\n\t\t\tthis.advance();\r\n}\r\n\r\n\tadvance() {\r\n\t\tif (this.currentLine < this.splitText.length - 1) {\r\n\t\t\tthis.currentLine++;\r\n\t\t\tthis.sndContinue.play();\r\n\t\t\tthis.readCurrentLine();\r\n\t\t} else {\r\n\t\t\tthis.sndClose.play();\r\n\t\t\tthis.sndClose.unload();\r\n\t\t\tthis.sndOpen.unload();\r\n\t\t\tthis.sndContinue.unload();\r\n\t\t\tdocument.removeEventListener('keydown', this.handleKeys);\r\n\t\t\t//\t\t\tThis.hammer.unload();\r\n\t\t\tif (this.callback != 0) {\r\n\t\t\t\tthis.callback();\r\n\t\t\t} else {\r\n\t\t\t\tthis.res();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\nexport {ScrollingText, speech};\r\n","'use strict';\r\nimport { lang } from './main';\r\nimport { utils } from './utilities';\r\nimport { speech } from './tts';\r\nimport { ScrollingText } from './scrollingText';\r\n\r\nclass Strings {\r\n\tconstructor() {\r\n\t\tthis.strings = {};\r\n\t\tthis.strings[1] = {\r\n\t\t\t// New English\r\n\t\t\tiJumps: \"You have %1 hyperjumps\",\r\n\t\t\temptyInventory: \"Your inventory is empty\",\r\n\t\t\tmainMenu: \"Use arrows to move, enter to continue.\",\r\n\t\t\tmStart: \"Start Game\",\r\n\t\t\tmShop: \"Item Shop (You have %1 coins)\",\r\n\t\t\tupArrowMove: \"Press a number between 1 and 5 to start moving, 1 being the slowest speed possible. Letter s to check your score, h checks your health, l to check level.\",\r\n\t\t\tbonus1: \"Health bonus!\",\r\n\t\t\tbonus2: \"Hyper jump!\",\r\n\t\t\tselectVoice: \"%1 voices available, use the up and down arrows to select a voice, enter when you're done.\",\r\n\t\t\tmSelectVoice: \"text to speech voice\",\r\n\t\t\tmLang: 'Change language',\r\n\t\t\tnewUpdate: 'There is a new version available! You have version %1, version %2 is available.',\r\n\t\t\tmSapi: 'Use text to speech for the game',\r\n\t\t\tmReader: 'Use your screen reader for the game',\r\n\t\t\tnewRate: 'This is a text to speech rate test. Please press enter when done',\r\n\t\t\trating: 'Press right and left arrow keys to change the rate. Press enter when done',\r\n\t\t\tmRate: 'Change speech rate',\r\n\r\n\t\t\tK: 'king',\r\n\t\t\tQ: 'queen',\r\n\t\t\tA: 'ace',\r\n\t\t\tJ: 'jack',\r\n\t\t\tcspades: 'spades',\r\n\t\t\tcdiamonds: 'diamonds',\r\n\t\t\tcclubs: 'clubs',\r\n\t\t\tchearts: 'hearts',\r\n\t\t\tdq: 'This is a game of risk. You will risk losing %1 beatcoins. Continue?',\r\n\t\t\tlang: 'English',\r\n\t\t\tlangs: 'Select your language',\r\n\t\t\tmSelect: 'Please select',\r\n\t\t\tmBack: 'go back',\r\n\t\t\tmStart: 'Start Game',\r\n\t\t\tyes: 'Yes',\r\n\t\t\tno: 'no',\r\n\t\t\tok: 'ok',\r\n\t\t};\r\n\t\tthis.strings[2] = {\r\n\t\t\t// New Spanish\r\n\t\t\tmStart: \"Empezar juego\",\r\n\t\t\tmShop: \"Tienda (Tienes %1 monedas)\",\r\n\t\t\tmainMenu: \"Menú Principal. Flechas para navegar, enter para continuar.\",\r\n\t\t};\r\n\t}\r\n\r\n\tget(what, rep = []) {\r\n\t\tlet str;\r\n\t\tif (typeof this.strings[lang][what] !== 'undefined') {\r\n\t\t\tstr = this.strings[lang][what];\r\n\t\t} else if (typeof this.strings[1][what] !== 'undefined') {\r\n\t\t\tstr = this.strings[1][what];\r\n\t\t} else {\r\n\t\t\treturn what;\r\n\t\t}\r\n\t\trep.forEach((v, i) => {\r\n\t\t\tconst i1 = Number(i) + 1;\r\n\t\t\tstr = str.replace('%' + i1, v);\r\n\t\t});\r\n\t\treturn str;\r\n\t}\r\n\r\n\tspeak(what, rep = []) {\r\n\t\tlet str;\r\n\t\tif (typeof this.strings[lang][what] !== 'undefined') {\r\n\t\t\tstr = this.strings[lang][what];\r\n\t\t} else if (typeof this.strings[1][what] !== 'undefined') {\r\n\t\t\tstr = this.strings[1][what];\r\n\t\t} else {\r\n\t\t\tspeech.speak(what);\r\n\t\t}\r\n\t\trep.forEach((v, i) => {\r\n\t\t\tconst i1 = Number(i) + 1;\r\n\t\t\tstr = str.replace('%' + i1, v);\r\n\t\t});\r\n\t\tspeech.speak(str);\r\n\t}\r\n\r\n\tasync check(lng) {\r\n\t\tconst len = utils.objSize(this.strings) - 2;\r\n\t\tfor (const i in this.strings[1]) {\r\n\t\t\tif (!this.strings[lng].hasOwnProperty(i)) {\r\n\t\t\t\tawait new ScrollingText(i + ': ' + this.strings[1][i]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\nexport var strings = new Strings();\r\n","'use strict';\r\nimport { so } from './soundObject';\r\n\r\nimport { KeyboardInput } from './input';\r\nimport { KeyEvent } from './keycodes';\r\nimport { speech } from './tts';\r\nclass LanguageSelector {\r\n\tconstructor(element, callback) {\r\n\t\tthis.langs = [];\r\n\t\tthis.input = new KeyboardInput();\r\n\t\tthis.input.init();\r\n\t\tthis.langs.push(\"select a language. Selecciona un idioma.\");\r\n\t\tthis.langs.push(\"I want to play in English\");\r\n\t\tthis.langs.push(\"Quiero jugar en español.\");\r\n\t\tthis.id = document.getElementById(element);\r\n\t\tthis.callback = callback;\r\n\t\tthis.container = document.createElement('div');\r\n\t\tthis.buttons = [];\r\n\t\tthis.buttons[0] = document.createElement('div');\r\n\t\tthis.buttons[0].innerHTML = this.langs[0];\r\n\t\tthis.container.appendChild(this.buttons[0]);\r\n\t\tfor (let i = 1; i < this.langs.length; i++) {\r\n\t\t\tthis.buttons[i] = document.createElement('input');\r\n\t\t\tthis.buttons[i].type = 'button';\r\n\t\t\tthis.buttons[i].value = this.langs[i];\r\n\t\t\tthis.buttons[i].addEventListener('click', () => {\r\n\t\t\t\tthis.sound.stop()\r\n\t\t\t\tthis.callback(i);\r\n\t\t\t\tthis.container.innerHTML = '';\r\n\t\t\t\tthis.input.removeAllListeners();\r\n\t\t\t\tdocument.getElementById(\"app\").focus();\r\n\t\t\t});\r\n\t\t\tthis.buttons[i].addEventListener('focus', () => {\r\n\t\t\t\tthis.sound.stop();\r\n\t\t\t\tspeech.setLanguage(i);\r\n\t\t\t\tspeech.speak(this.langs[i]);\r\n\t\t\t});\r\n\t\t\tthis.container.appendChild(this.buttons[i]);\r\n\t\t\tthis.input.once(\"chr\" + i, () => {\r\n\t\t\t\tthis.sound.stop()\r\n\t\t\t\tthis.callback(i);\r\n\t\t\t\tthis.container.innerHTML = '';\r\n\t\t\t\tthis.input.removeAllListeners();\r\n\t\t\t\tdocument.getElementById(\"app\").focus();\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.id.appendChild(this.container);\r\n\t\tthis.sound = so.create(\"ui/langSelect\");\r\n\t\tthis.sound.play();\r\n\r\n\t}\r\n}\r\nmodule.exports.LanguageSelector = LanguageSelector;\r\n","'use strict';\r\nimport sono from 'sono';\r\nimport { so } from './soundObject';\r\nimport panner from 'sono/effects/panner';\r\npanner.defaults = {\r\n\tpanningModel: 'HRTF',\r\n\tmaxDistance: 50,\r\n};\r\n/** Simple wrapper for agk-soundobject to quickly create 3D sound sources.\r\n* @constructor\r\n\t* @param {string} file - the path to the file without base directory and extension.\r\n\t* @param {number} x - Initial X coordinate of the sound\r\n\t* @param {number} y - Initial Y coordinate of the sound\r\n\t* @param {number} z - Initial Z coordinate of the sound\r\n\t* @param {boolean} loop - True if the sound should loop\r\n\t* @return {object} A Sound Source object\r\n*/\r\nexport class SoundSource {\r\n\tconstructor(file, x = 0, y = 0, z = 0) {\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\t\tthis.sound = son.create(file);\r\n\t\tthis.pan = this.sound.effects.add(panner());\r\n\t\tthis.pos(this.x, this.y, this.z);\r\n\t\tthis.rate = 1;\r\n\t\tthis.speed = 0;\r\n\t\tthis.minRate = 0.8;\r\n\t\tthis.maxRate = 1.2;\r\n\t\tthis.toDestroy = false;\r\n\t\tthis.rateShiftSpeed = 0.015;\r\n\t\tthis.sound.currentPosition = 0;\r\n\t}\r\n\tset loop(v) {\r\n\t\tthis.sound.loop = v;\r\n\t}\r\n\t/** Plays the sound source */\r\n\tplay() {\r\n\t\t// This.sound.seek(0);\r\n\t\tthis.sound.play();\r\n\t}\r\n\r\n\t/** Positions the sound source in 3D space.\r\n\t* @param {number} x - The new X coordinate of the sound\r\n\t* @param {number} y - The new Y coordinate of the sound\r\n\t* @param {number} z - The new Z coordinate of the sound\r\n*/\r\n\tpos(x, y, z) {\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\t\tthis.pan.setPosition(x, y, z);\r\n\t}\r\n\r\n\t/** Empty update method */\r\n\tupdate() {\r\n\t}\r\n}","import { SoundSource } from './soundSource.js';\r\nimport { so } from './soundObject.js';\r\n\r\nclass SoundHandler {\r\n\tconstructor(directional = false) {\r\n\t\tthis.staticSounds = [];\r\n\t\tthis.dynamicSounds = [];\r\n\t\tthis.currentDynamicSound = 0;\r\n\t\tthis.maxDynamicSounds = 512;\r\n\t\tthis.currentStaticSound = 0;\r\n\t\tthis.maxStaticSounds = 512;\r\n\t\tthis.reuseSounds = true;\r\n\t\tthis.x = 0;\r\n\t\tthis.y = 0;\r\n\t\tthis.z = 0;\r\n\t\tthis.directional = directional;\r\n\t}\r\n\r\n\tplayStatic(file, loop = 1, slot = -1, stream = false) {\r\n\t\tif (slot = -1) {\r\n\t\t\tslot = this.findFreeStaticSlot();\r\n\t\t}\r\n\t\tthis.staticSounds[slot] = new SoundItem(file, this.directional, stream);\r\n\t\tif (loop == 1) {\r\n\t\t\tthis.staticSounds[slot].sound.loop = true;\r\n\t\t}\r\n\t\tthis.staticSounds[slot].sound.play();\r\n\t\treturn slot;\r\n\t}\r\n\r\n\tfindFreeStaticSlot() {\r\n\t\tfor (let i = 0; i < this.maxStaticSounds; i++) {\r\n\t\t\tif (this.staticSounds[i] == -1 || typeof this.staticSounds[i] === 'undefined') {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.currentStaticSound < this.maxStaticSounds) {\r\n\t\t\tthis.currentStaticSound++;\r\n\t\t\treturn this.currentStaticSound;\r\n\t\t}\r\n\t\tthis.currentStaticSound = 0;\r\n\t\treturn this.currentStaticSound;\r\n\t}\r\n\r\n\tfindFreeDynamicSlot() {\r\n\t\tfor (let i = 0; i < this.maxDynamicSounds; i++) {\r\n\t\t\tif (this.dynamicSounds[i] == -1 || typeof this.dynamicSounds[i] === 'undefined') {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.currentDynamicSound < this.maxDynamicSounds) {\r\n\t\t\tthis.currentDynamicSound++;\r\n\t\t\treturn this.currentDynamicSound;\r\n\t\t}\r\n\t\tthis.currentDynamicSound = 0;\r\n\t\treturn this.currentDynamicSound;\r\n\t}\r\n\r\n\tfindDynamicSound(file) {\r\n\t\tfor (let i = 0; i < this.dynamicSounds.length; i++) {\r\n\t\t\tif (this.dynamicSounds[i].file == file) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\r\n\tplay(file) {\r\n\t\tlet slot = 0;\r\n\r\n\t\tlet reuse = 0;\r\n\t\tif (this.reuseSounds) {\r\n\t\t\tslot = this.findDynamicSound(file);\r\n\t\t\treuse = true;\r\n\t\t}\r\n\t\tif (slot == -1 || this.reuseSounds == false) {\r\n\t\t\tslot = this.findFreeDynamicSlot();\r\n\t\t\treuse = false;\r\n\t\t}\r\n\t\tif (typeof this.dynamicSounds[slot] === 'undefined') {\r\n\t\t\tif (reuse == false) {\r\n\t\t\t\tthis.dynamicSounds[slot] = new SoundItem(file, this.directional);\r\n\t\t\t}\r\n\t\t} else if (reuse == false) {\r\n\t\t\tthis.dynamicSounds[slot].sound.destroy();\r\n\t\t\tthis.dynamicSounds[slot] = new SoundItem(file, directional);\r\n\t\t}\r\n\t\tthis.dynamicSounds[slot].sound.play();\r\n\t}\r\n\r\n\tupdate(position) {\r\n\t\tif (this.directional == true) {\r\n\t\t\tfor (let i = 0; i < this.dynamicSounds.length; i++) {\r\n\t\t\t\tthis.dynamicSounds[i].sound.pos(position.x, position.y, position.z);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdestroy() {\r\n\t\tfor (var i = 0; i < this.dynamicSounds.length; i++) {\r\n\t\t\tthis.dynamicSounds[i].destroy();\r\n\t\t\tthis.dynamicSounds.splice(i, 1);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < this.staticSounds.length; i++) {\r\n\t\t\tthis.staticSounds[i].destroy();\r\n\t\t\tthis.staticSounds.splice(i, 1);\r\n\t\t}\r\n\t}\r\n}\r\nclass SoundItem {\r\n\tconstructor(file, threeD = false, stream = false) {\r\n\t\tthis.file = file;\r\n\t\tthis.threeD = threeD;\r\n\t\tif (this.threeD == true) {\r\n\t\t\tthis.sound = new SoundSource(file, 0, 0, 0);\r\n\t\t} else {\r\n\t\t\tthis.sound = so.create(file, stream);\r\n\t\t}\r\n\t}\r\n\r\n\tdestroy() {\r\n\t\tthis.sound.destroy();\r\n\t}\r\n}\r\n\r\nexport { SoundHandler };\r\n","function Timer(callbacks, step) {\r\n\tlet last = 0;\r\n\tlet active = false;\r\n\tlet acc = 0;\r\n\tlet tick = 0;\r\n\tlet inc = step || 1 / 120;\r\n\tlet frameId;\r\n\r\n\tfunction onFrame(time) {\r\n\t\tif (last !== null) {\r\n\t\t\tacc += (time - last) / 1000;\r\n\t\t\twhile (acc > inc) {\r\n\t\t\t\tcallbacks.update(inc, tick);\r\n\t\t\t\ttick += 1;\r\n\t\t\t\tacc -= inc;\r\n\t\t\t}\r\n\t\t}\r\n\t\tlast = time;\r\n\t\tcallbacks.render();\r\n\t\tif (active) {\r\n\t\t\tframeId = requestAnimationFrame(onFrame);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction start() {\r\n\t\tlast = null;\r\n\t\tactive = true;\r\n\t\tframeId = requestAnimationFrame(onFrame);\r\n\t}\r\n\r\n\tfunction stop() {\r\n\t\tactive = false;\r\n\t\tcancelAnimationFrame(frameId);\r\n\t}\r\n\tfunction change(value) {\r\n\t\tinc = value || 1 / 60;\r\n\t\tacc = inc;\r\n\t\ttick = 0;\r\n\t\tstop();\r\n\t\tstart();\r\n\t}\r\n\treturn {\r\n\t\tstart,\r\n\t\t\tstop,\r\n\t\t\tchange\r\n\t};\r\n}\r\n\r\nmodule.exports = Timer;\r\n","const EventEmitter = require('events')\r\nexport class GameObject extends EventEmitter {\r\n\r\n    constructor(world, sound, x, y, z, width, height, depth) {\r\n        super()\r\n        this.world = world\r\n        this.alive = true\r\n        this.x = x\r\n        this.y = y\r\n        this.z = z\r\n        if (sound != \"\") {\r\n            this.sound = document.createElement(\"audio\")\r\n            this.sound.src = \"./sounds/\" + sound + \".ogg\"\r\n            this.mediaSource = this.world.context.createMediaElementSource(this.sound)\r\n            this.source = this.world.scene.createSource();\r\n            this.source.sourceWidth = width;\r\n            this.source.sourceHeight = height\r\n            this.source.sourceDepth = depth;\r\n            this.mediaSource.connect(this.source.input);\r\n            this.source.setPosition(this.x, this.y, this.z)\r\n            this.sound.play()\r\n            this.sound.loop = true\r\n\r\n        }\r\n    }\r\n    update() {\r\n\r\n    }\r\n}","import { GameObject } from './gameObject'\r\nimport { utils } from './utilities'\r\nimport { speech } from './tts'\r\nexport class Item extends GameObject {\r\n    constructor(world, x, y, sound) {\r\n        super(world, sound, x, y, 0, 1, 1, 1)\r\n        this.world.player.on(\"step\" + this.y, (() => {\r\n            if (this.world.player.x == this.x) this.step()\r\n        }))\r\n        this.world.player.on(\"step\" + (this.y + 1), (() => {\r\n            this.destroy()\r\n        }))\r\n        this.world.player.on(\"x\" + this.x, (() => {\r\n            if (!this.alive) return;\r\n            let distance = Math.round(utils.distance(this.world.player.x, this.world.player.y, this.x, this.y))\r\n            if (distance < 8) {\r\n                this.world.player.target.replay()\r\n            }\r\n        }))\r\n    }\r\n    step() {\r\n    }\r\n    destroy() {\r\n        this.alive = false;\r\n    }\r\n    update() {\r\n\r\n    }\r\n}","import { Item } from './item'\r\nimport { data, save } from './main'\r\nimport { speech } from './tts'\r\nexport class Coin extends Item {\r\n    constructor(world, x, y) {\r\n        super(world, x, y, \"loop/coin\")\r\n    }\r\n    step() {\r\n        this.world.player.coins++\r\n        this.world.game.pool.playStatic(\"player/getCoin\",0)\r\n        data.coins = this.world.player.coins\r\n        save()\r\n        this.alive = false\r\n    }\r\n}","import { GameObject } from './gameObject'\r\nimport { utils } from './utilities'\r\nimport { speech } from './scrollingText';\r\n\r\nexport class Tile {\r\n    constructor(world, pos, type, name) {\r\n        this.y = pos;\r\n        this.type = type;\r\n        this.hasSomething = false\r\n        this.world = world;\r\n        this.name = name;\r\n        this.alive = true\r\n        this.world.player.on(\"step\" + this.y, (() => {\r\n            this.step()\r\n        }))\r\n    }\r\n    step() {\r\n        let scoreType = this.type\r\n        if (this.type == 0) scoreType = 1;\r\n        let score = scoreType * this.world.player.currentSpeed\r\n        this.world.game.score += score * this.world.game.level * 50\r\n        if (this.type != 2) {\r\n            clearInterval(this.world.player.scoreTimeout)\r\n            this.world.player.levelCap = this.world.game.level\r\n            if (this.world.player.levelCap > 15) this.levelCap = 15\r\n\r\n        }\r\n        this.world.game.pool.playStatic(\"steps/\" + this.name + utils.randomInt(1, 3), 0)\r\n        this.world.player.tileType = this.type\r\n    }\r\n    update() {\r\n\r\n    }\r\n    destroy() {\r\n\r\n    }\r\n}","import { GameObject } from './gameObject'\r\nimport {utils} from './utilities'\r\nimport { Tile } from './tile'\r\nexport class Street extends Tile {\r\n    constructor(world, pos) {\r\n        super(world, pos, 0, \"street\")\r\n    }\r\n    step() {\r\n        super.step()\r\n        this.world.player.stepProgress.pitch = utils.getProportion(this.y, this.world.player.furthestStreet, this.world.player.nearestStreet, 0.7, 1.3)\r\n        this.world.player.stepProgress.replay()\r\n    }\r\n}","import { GameObject } from './gameObject'\r\nimport { Tile } from './tile'\r\nimport { speech } from './tts'\r\nexport class Objective extends Tile {\r\n    constructor(world, pos) {\r\n        super(world, pos, 2, \"objective\")\r\n    }\r\n    destroy() {\r\n\r\n    }\r\n    step() {\r\n        super.step()\r\n        this.world.game.pool.playStatic(\"steps/objective\", 0)\r\n        this.world.player.scoreTimeout = setInterval(() => {\r\n            this.world.player.scoreDeduct()\r\n        }, 1300 - (this.world.player.levelCap * 75))\r\n        this.world.generateTiles()\r\n        this.world.player.slowDown(10)\r\n    }\r\n}","import { GameObject } from \"./gameObject\";\r\nimport { utils } from \"./utilities\";\r\nimport { speech } from \"./tts\";\r\nimport { data, content } from \"./main\";\r\nexport class Car extends GameObject {\r\n  constructor(\r\n    world,\r\n    tile,\r\n    x,\r\n    y,\r\n    width,\r\n    height,\r\n    depth,\r\n    sound = \"car\",\r\n    speed,\r\n    side,\r\n    z = 1,\r\n    canHorn = \"\",\r\n    name\r\n  ) {\r\n    super(world, sound, x, y, z, width, height, depth);\r\n    this.name = name;\r\n    this.speed = speed;\r\n    this.passed = false;\r\n    this.side = side;\r\n    this.tile = tile;\r\n    this.tile.hasSomething = true;\r\n    this.canHorn = canHorn;\r\n    if (this.canHorn != \"\") {\r\n      if (this.canHorn == 1) this.canHorn = this.name;\r\n      this.hornSound = document.createElement(\"audio\");\r\n      this.hornSound.src = \"./sounds/horn/\" + this.name + \".ogg\";\r\n      this.hornSource = this.world.context.createMediaElementSource(\r\n        this.hornSound\r\n      );\r\n      this.hornResonanceSource = this.world.scene.createSource();\r\n      this.hornSource.connect(this.hornResonanceSource.input);\r\n      //horn follows the player because a it plays only if player is on the road and b we want the player to feel trapped on the road by this honking car since that's what happens\r\n      this.hornResonanceSource.setPosition(this.x, this.world.player.y, this.z);\r\n      this.hornSound.loop = true;\r\n    }\r\n  }\r\n  update() {\r\n    if (this.side == 2) this.x += this.speed;\r\n    if (this.side == 1) this.x -= this.speed;\r\n    if (this.x >= this.world.size / 2 || this.x <= (this.world.size / 2) * -1) {\r\n      this.alive = false;\r\n      if (this.canHorn != \"\") this.hornSound.pause();\r\n      this.tile.hasSomething = false;\r\n    } else {\r\n      //ok, player spans the entire road. So the car sound should equally follow the player to make him feel trapped.\r\n      if (this.world.player.tileType != 1)\r\n        this.source.setPosition(this.x, this.y, this.z);\r\n      if (this.world.player.tileType == 1)\r\n        this.source.setPosition(this.x, this.world.player.y, this.z);\r\n      if (\r\n        this.passed ||\r\n        (this.canHorn != \"\" && this.y != this.world.player.y)\r\n      ) {\r\n        if (this.canHorn != \"\") this.hornSound.pause();\r\n      }\r\n      if (\r\n        !this.passed &&\r\n        this.canHorn != \"\" &&\r\n        this.world.player.tileType == 1\r\n      ) {\r\n        this.hornResonanceSource.setPosition(this.x, this.y, this.z);\r\n        this.hornSound.play();\r\n      }\r\n      if (!this.world.player.jump) {\r\n        if (!this.passed) {\r\n          if (\r\n            Math.round(this.x) == this.world.player.x &&\r\n            this.world.player.tileType != 1\r\n          ) {\r\n            this.passed = true;\r\n            this.tile.hasSomething = false;\r\n            //let score = Math.round(this.speed * (1000 * this.world.game.level));\r\n            //if (this.world.player.tileType != 2) {\r\n//              this.world.game.score += score;\r\n//              speech.speak(score);\r\n            //}\r\n            if (typeof this.tile.timeout !== \"undefined\") {\r\n              clearTimeout(this.tile.timeout);\r\n            }\r\n            this.tile.timeout = setTimeout(() => {\r\n              this.tile.generateCar(\r\n                utils.randomInt(1, content.numberOfVehicles)\r\n              );\r\n            }, utils.randomInt(0, this.world.game.spawnTime - this.world.game.level * 100));\r\n          }\r\n          if (\r\n            !this.passed &&\r\n            this.alive &&\r\n            Math.round(this.x) == this.world.player.x &&\r\n            this.world.player.tileType == 1\r\n          ) {\r\n            if (this.world.player.jumps >= 1) {\r\n              this.world.game.pool.playStatic(\"bonus/hyperjump\", 0);\r\n              this.world.player.jumps--;\r\n              data.jumps = this.world.player.jumps;\r\n              this.world.player.flyTo(\r\n                this.world.player.nearestObjective,\r\n                3,\r\n                \"air\"\r\n              );\r\n            } else {\r\n              let healthLoss = Math.round(this.speed * 45);\r\n              this.world.player.hp -= healthLoss;\r\n              this.world.player.hit();\r\n              this.world.player.flyTo(\r\n                utils.randomInt(\r\n                  this.world.player.nearestStreet,\r\n                  this.world.player.furthestStreet\r\n                ),\r\n                this.side,\r\n                \"air\"\r\n              );\r\n            }\r\n            this.passed = true;\r\n            this.tile.hasSomething = false;\r\n          }\r\n          if (typeof this.tile.timeout !== \"undefined\") {\r\n            clearTimeout(this.tile.timeout);\r\n          }\r\n          this.tile.timeout = setTimeout(() => {\r\n            this.tile.generateCar(utils.randomInt(1, content.numberOfVehicles));\r\n          }, utils.randomInt(0, this.world.game.spawnTime - this.world.game.level * 100));\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { GameObject } from './gameObject'\r\nimport { Car } from './car'\r\nimport { debug } from './main'\r\nimport { parsedCars, content } from './main'\r\nimport { utils } from './utilities'\r\nimport { Tile } from './tile'\r\nimport { speech } from './tts'\r\nexport class Road extends Tile {\r\n    constructor(world, pos, generator = false) {\r\n        super(world, pos, 1, \"road\")\r\n        this.generator = generator\r\n        this.timeout = setTimeout(() => {\r\n            if (!debug) this.generateCar(utils.randomInt(1, content.numberOfVehicles))\r\n        }, utils.randomInt(0, this.world.game.spawnTime - (this.world.game.level * 100)))\r\n    }\r\n    generateCar(force) {\r\n        if (!this.generator || !this.alive) return;\r\n        if (typeof this.timeout !== \"undefined\") clearTimeout(this.timeout)\r\n        this.timeout = setTimeout(() => {\r\n            if (!debug) this.generateCar(utils.randomInt(1, content.numberOfVehicles))\r\n        }, utils.randomInt(0, this.world.game.spawnTime - (this.world.game.level * 100)))\r\n        if (this.hasSomething) return;\r\n        let side = utils.randomInt(1, 2)\r\n        let size = this.world.size / 2\r\n        if (side == 1) size = size * 1\r\n        if (side == 2) size = size * -1\r\n        let carType = force\r\n        try {\r\n            this.world.dynamicObjects.push(new Car(this.world, this, size, this.y, 2, 1, 2, parsedCars[carType].sound, parsedCars[carType].speed, side, parsedCars[carType].z, parsedCars[carType].hornable, parsedCars[carType].name))\r\n        } catch (e) {\r\n            speech.speak(\"Error generating car \" + carType + \": \" + e)\r\n        }\r\n        this.hasSomething = true\r\n    }\r\n    destroy() {\r\n        if (typeof this.timeout !== \"undefined\") clearTimeout(this.timeout)\r\n    }\r\n    step() {\r\n        super.step()\r\n        this.world.player.stepProgress.pitch = utils.getProportion(this.y, this.world.player.nearestRoad, this.world.player.furthestRoad, 0.1, 2.0)\r\n        this.world.player.stepProgress.replay()\r\n    }\r\n}","export class Effect {\r\n    constructor(world, name, time, onFunction, ofFunction) {\r\n        this.world = world\r\n        this.world.game.pool.playStatic(\"effects/\" + name, 0)\r\n        onFunction()\r\n        setTimeout(() => {\r\n            ofFunction()\r\n            this.world.game.pool.playStatic(\"effects/\" + name + \"Off\", 0)\r\n        }, time)\r\n    }\r\n}","import { Item } from './item'\r\nimport { Effect } from './effect'\r\nimport { utils } from './utilities'\r\nimport { strings } from './strings'\r\nimport { data, save, content } from './main'\r\nimport { speech } from './tts'\r\nexport class Bonus extends Item {\r\n    constructor(world, x, y) {\r\n        super(world, x, y, \"loop/bonus\")\r\n    }\r\n    step() {\n        if (!this.alive) return;\r\n        this.alive = false\n        let bonuses=[1,4]\n        if (data.unlocks.jumps) bonuses.push(2)\n        if (!this.world.player.forceSpeed) bonuses.push(3)\nlet        bonusType=utils.randomElement(bonuses)\r\n        switch (bonusType) {\r\n\r\n            case 1:\r\n                this.world.game.pool.playStatic(\"bonus/health\", 0)\r\n                this.world.player.hp += 25\r\n                break;\r\n            case 2:\r\n                this.world.game.pool.playStatic(\"bonus/hyperjump\", 0)\r\n                this.world.player.jumps++\r\n                data.jumps++\r\n                break;\r\n            case 3:\r\n                    let crawl = new Effect(this.world, \"crawl\", 20000, (() => {\r\n                        this.oldSpeed = this.world.player.currentSpeed\r\n                        this.world.player.slowDown(10)\r\n                        this.world.player.speedUp(6)\r\n                        this.world.player.forceSpeed = true\r\n                        this.world.player.forcedSpeed = 6\r\n                    }), (() => {\r\n                        this.world.player.speedUp(this.oldSpeed)\r\n                        this.world.player.forceSpeed = false\r\n                    }))\r\n                break;\n                default:\n                this.world.game.pool.playStatic(\"bonus/fake\", 0)\nbreak;\r\n        }\r\n        setTimeout(() => {\r\n            speech.speak(strings.get(\"bonus\" + bonusType))\r\n        }, 280)\r\n        save()\r\n    }\r\n}","import { GameObject } from './gameObject'\r\nimport { KeyEvent } from './keycodes.js'\r\nimport { so } from './soundObject'\r\nimport { speech } from './tts';\r\nimport { utils } from './utilities'\r\nimport { data, debug } from './main'\r\nconst EventEmitter = require('events');\r\nexport class Player extends GameObject {\r\n    constructor(world) {\r\n        super(world, \"\", 0, 0, 1.6, 1, 0.5, 1.6)\r\n        this.playerHitSound = so.create(\"player/hit\")\r\n        this.forceSpeed = false\r\n        this.stepProgress = so.create(\"steps/progress\")\r\n        this.target = so.create(\"player/target\")\r\n        this.coins = 0\r\n        if (data.coins) this.coins = data.coins;\r\n        this.jumps = 0;\r\n        if (data.jumps) this.jumps = data.jumps\r\n        this.center = so.create(\"ui/center\")\r\n        this.xLimit = Math.ceil(this.world.size / 10)\r\n        this.fallTime = 55\r\n        this.world.scene.setListenerPosition(this.x, this.y, this.z)\r\n        this.unableToMove = false\r\n        this.hp = 100\r\n        this.speedUpSound = so.create(\"ui/speedUp\")\r\n        this.nearestStreet = 0\r\n        this.nearestRoad = 0\r\n        this.nearestObjective = 0\r\n        this.furthestStreet = 0\r\n        this.furthestRoad = 0\r\n\r\n        this.speedDownSound = so.create(\"ui/speedDown\")\r\n        this.speed = 650\r\n        //speed 0 is unused, speeds 1 to 5 are manually attainable, speed 6 is a crawl and speed 7 is super speed.\r\n        this.speeds = [\r\n            0, 650, 530, 420, 350, 235, 890, 120\r\n        ]\r\n        this.speedModifier = 0\r\n        this.currentSpeed = 0\r\n    }\r\n    move() {\r\n        if (this.unableToMove) return;\r\n        this.speedTimeout = setTimeout(() => {\r\n            this.move()\r\n        }, this.speeds[this.currentSpeed] - this.speedModifier)\r\n        if (this.currentSpeed == 0) this.currentSpeed = 1;\r\n        this.xLimit = Math.ceil(this.world.size / 8)\r\n        this.y += 1\r\n\r\n        this.emit(\"step\" + this.y)\r\n        if (this.world.game.input.isDown(KeyEvent.DOM_VK_RIGHT)) {\r\n            this.x++;\r\n            if (this.x > 0 + this.xLimit) this.x = 0 + this.xLimit\r\n            if (this.x == this.world.size / 2) this.center.replay();\r\n        }\r\n        if (this.world.game.input.isDown(KeyEvent.DOM_VK_LEFT)) {\r\n            this.x--;\r\n            if (this.x < 0 - this.xLimit) this.x = 0 - this.xLimit\r\n            if (this.x == this.world.size / 2) this.center.replay();\r\n        }\r\n        this.world.scene.setListenerPosition(this.x, this.y, this.z)\r\n        this.emit(\"x\" + this.x)\r\n    }\r\n    speedUp(number = 1) {\r\n        if (this.forceSpeed) return;\r\n        if (this.unableToMove) return;\r\n        if (this.currentSpeed == 0) {\r\n            this.speedUpSound.pitch = utils.getProportion(1, 1, 5, 0.8, 1.2)\r\n            this.speedUpSound.replay()\r\n            this.move()\r\n        }\r\n        this.currentSpeed += (number - 1);\r\n        if (this.currentSpeed > 7) this.currentSpeed = 7\r\n        this.speedUpSound.pitch = utils.getProportion(this.currentSpeed, 1, 5, 0.8, 1.2)\r\n        this.speedUpSound.replay()\r\n        speech.speak(this.currentSpeed)\r\n    }\r\n    slowDown(number = 1) {\r\n        if (this.forceSpeed) return;\r\n        if (this.unableToMove) return;\r\n        this.currentSpeed -= number;\r\n        //we don't want the player to be able to stop with the down arrow key, but if some item is forcing the player to stop, we can allow it.\r\n        if (number == 1 && this.currentSpeed == 0) this.currentSpeed = 1;\r\n        if (this.currentSpeed <= 0) {\r\n            this.currentSpeed = 0;\r\n            if (typeof this.speedTimeout !== \"undefined\") clearTimeout(this.speedTimeout)\r\n        }\r\n        if (number == 1) this.speedDownSound.pitch = utils.getProportion(this.currentSpeed, 1, 5, 0.8, 1.2)\r\n        if (number == 1) this.speedDownSound.replay()\r\n        speech.speak(this.currentSpeed)\r\n    }\r\n    hit() {\r\n        this.playerHitSound.play()\r\n        this.world.game.pool.playStatic(\"player/impact/\" + utils.randomInt(1, 4), 0)\r\n\r\n    }\r\n    flyTo(y, side, snd) {\r\n        if (this.unableToMove) return;\r\n        this.tileType = -1\r\n        this.unableToMove = true\r\n        let heart = so.create(\"player/heart\")\r\n        heart.play()\r\n        let sound = so.create(snd)\r\n        sound.loop = true\r\n        sound.volume = 0.3\r\n        let land = so.create(\"player/land\")\r\n        let fall = so.create(\"player/fall\" + utils.randomInt(1, 4))\r\n        let stand = so.create(\"player/stand\")\r\n        sound.pitch = 0.7\r\n        sound.play()\r\n        sound.loop = true\r\n        heart.loop = true\r\n        this.slowDown(10)\r\n        let z = utils.randomInt(11, 21)\r\n\r\n        let x;\r\n        let jump = false\r\n        if (side == 1) x = -1;\r\n        if (side == 2) x = 1\r\n        if (side == 3) {\r\n            jump = true;\r\n            this.jump = true;\r\n            z = utils.randomInt(5, 10)\r\n        }\r\n        this.interval = setInterval(() => {\r\n            if (!jump) this.x += (x * utils.randomInt(3, 5))\r\n            if (this.x < 0 - this.world.size / 2) {\r\n                x = 1\r\n                this.world.game.pool.playStatic(\"player/wall\" + utils.randomInt(1, 3), 0)\r\n            }\r\n            if (this.x > this.world.size / 2) {\r\n                x = -1\r\n                this.world.game.pool.playStatic(\"player/wall\" + utils.randomInt(1, 3), 0)\r\n            }\r\n            sound.pitch += 0.07\r\n            if (this.y > y) {\r\n                this.y -= 0.5;\r\n            }\r\n            if (this.y < y) {\r\n                this.y += 0.5;\r\n            }\r\n            this.z += 1;\r\n            if (this.z >= z) {\r\n                this.y = y;\r\n                clearInterval(this.interval)\r\n                this.interval = setInterval(() => {\r\n                    this.z -= 1;\r\n                    sound.pitch -= 0.07\r\n                    if (this.z <= 0) {\r\n                        this.tileType = 0\r\n                        clearInterval(this.interval)\r\n                        if (jump) {\r\n                            land.play()\r\n                            this.z = 1.6\r\n                            this.jump = false\r\n                            this.unableToMove = false;\r\n                            heart.stop();\r\n                            if (this.forceSpeed) {\r\n                                speech.speak(\"Speeding up to \" + this.forcedSpeed)\r\n                                this.forceSpeed = false\r\n                                this.speedUp(this.forcedSpeed)\r\n                                this.forceSpeed = true\r\n                            }\r\n                        }\r\n                        if (!jump) {\r\n                            this.x = 0\r\n                            fall.play()\r\n                            this.z = 0\r\n                            setTimeout(() => {\r\n                                stand.replay()\r\n                                heart.stop();\r\n                                stand.sound.on(\"ended\", (() => {\n                                    this.z = 1.6\r\n                                    this.jump = false\r\n                                    this.unableToMove = false;\r\n                                    if (this.forceSpeed) {\r\n                                        this.forceSpeed = false\r\n                                        this.slowDown(10)\n                                        this.forceSpeed=true\r\n                                    } else {\r\n                                        this.slowDown(10)\r\n                                    }\n                                    \r\n                                    if (this.forceSpeed) {\r\n                                        this.forceSpeed = false\r\n                                        this.speedUp(this.forcedSpeed)\n                                        this.forceSpeed=true\r\n                                    }\r\n                                }))\r\n                                this.world.scene.setListenerPosition(this.x, this.y, this.z)\r\n                            }, utils.randomInt(1000, 2000))\r\n                        }\r\n                        this.world.scene.setListenerPosition(this.x, this.y, this.z)\r\n                        sound.stop()\r\n                        //heart.stop()\r\n                        this.x = 0\r\n                        this.emit(\"step\" + this.y)\r\n                        //if (this.forceSpeed) this.speedUp(this.forcedSpeed)\r\n                    }\r\n                    this.world.scene.setListenerPosition(this.x, this.y, this.z)\r\n                }, this.fallTime)\r\n            }\r\n            this.world.scene.setListenerPosition(this.x, this.y, this.z)\r\n        }, this.fallTime * 1.2)\r\n    }\r\n    scoreDeduct() {\r\n        this.world.game.tick.replay()\r\n        this.world.game.score -= (100 * this.world.game.level)\r\n        if (this.world.game.score < 0) this.world.game.score = 0\r\n        this.levelCap = this.world.game.level\r\n        if (this.levelCap > 15) this.levelCap = 15\r\n    }\r\n}","import { so } from './soundObject';\r\nimport { Coin } from './coin'\r\nimport { Street } from './street'\r\nimport { Objective } from './objective'\r\nimport { Road } from './road'\r\nimport { Bonus } from './bonus'\r\nimport { utils } from './utilities'\r\nimport {Car} from './car'\r\nimport 'resonance-audio';\r\nconst { ResonanceAudio } = require('resonance-audio')\r\nimport { Player } from './player'\r\nimport { content } from './main'\r\nimport { speech } from './tts';\r\nexport class World {\r\n\tconstructor(game, size = 100) {\r\n\t\tthis.size = size;\r\n\t\tthis.game = game\r\n\t\tthis.dynamicObjects = []\r\n\t\tthis.tiles = []\r\n\t\tthis.context = new AudioContext()\r\n\t\tthis.convolution = this.context.createConvolver()\r\n\t\tthis.scene = new ResonanceAudio(this.context);\r\n\t\tthis.convolution.connect(this.scene.output)\r\n\t\tthis.scene.output.connect(this.context.destination)\r\n\t\tthis.player = new Player(this)\r\n\t}\r\n\tgenerateTiles() {\r\n\t\tfor (let i = 0; i < this.tiles.length; i++) {\r\n\t\t\tthis.tiles[i].alive=false\r\n\t\t\tthis.tiles[i].destroy();\r\n\t\t}\r\n\t\tthis.tiles = []\r\n\t\tlet lastStreet = this.player.y;\r\n\t\t//the below line will sound weird, but I want as many streets as x squares the player can move to either side, so as to have a fair chance at targetting bonuses\r\n\t\tlet lastStreetLimit = lastStreet + utils.randomInt(this.player.xLimit, this.player.xLimit + 4)\r\n\t\tthis.player.nearestStreet = lastStreet + 1\r\n\t\tfor (let i = lastStreet + 1; i <= lastStreetLimit; i++) {\r\n\t\t\tthis.tiles.push(new Street(this, i))\r\n\t\t\tlastStreet = i;\r\n\t\t}\r\n\t\tlet tiles = Math.round(this.game.roadsPerLevel + (this.game.level/2))\r\n\t\tlet lastRoad = 0;\r\n\t\tthis.player.nearestRoad = lastStreet + 1\r\n\t\tthis.player.furthestStreet = lastStreet;\r\n\t\t//let generator = (this.player.nearestRoad + tiles) - tiles/2\r\n\t\tlet generator=this.player.nearestRoad\r\n\t\tfor (let i = lastStreet + 1; i <= lastStreet + tiles; i++) {\r\n\t\t\tif (generator == i) this.tiles.push(new Road(this, i, true))\r\n\t\t\tif (generator != i) this.tiles.push(new Road(this, i, false))\r\n\t\t\tlastRoad = i;\r\n\t\t}\r\n\t\tthis.player.nearestObjective = lastRoad + 1\r\n\t\tthis.player.furthestRoad = lastRoad;\r\n\t\tthis.tiles.push(new Objective(this, lastRoad + 1))\r\n\t\t//item spawning, one item chance per level, doesn't always spawn\r\n\t\tfor (let i = 1; i <= this.game.level; i++) {\r\n\t\t\tlet x = utils.randomInt(0 - this.player.xLimit, 0 + this.player.xLimit)\r\n\t\t\tlet random = utils.randomInt(1, 2)\r\n\t\t\tswitch (random) {\r\n\t\t\t\tdefault: break;\r\n\t\t\t\t//coins are dropped on the street\r\n\t\t\t\tcase 1: this.dynamicObjects.push(new Coin(this, x, this.player.nearestStreet + this.player.xLimit, this.player.furthestStreet)); break;\r\n\t\t\t\t//bonuses appear anywhere on the road\r\n\t\t\t\tcase 2: this.dynamicObjects.push(new Bonus(this, x, this.player.nearestRoad, this.player.furthestRoad)); break;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tupdate() {\r\n\t\tfor (let i = 0; i < this.dynamicObjects.length; i++) {\r\n\t\t\tif (!this.dynamicObjects[i].alive) {\r\n\t\t\t\tthis.dynamicObjects[i].sound.pause()\r\n\t\t\t\tthis.dynamicObjects.splice(i, 1)\r\n\t\t\t\ti--;\r\n\t\t\t} else {\r\n\t\t\t\tthis.dynamicObjects[i].update()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","import { speech } from './tts';\r\nimport { strings } from './strings'\r\nimport { debug, _, content, data } from './main'\r\nimport { SoundHandler } from './soundHandler'\r\nimport Timer from './timer';\r\nimport $ from 'jquery';\r\nimport { utils } from './utilities';\r\nimport { ScrollingText } from './scrollingText';\r\nimport { KeyboardInput } from './input.js';\r\nimport { KeyEvent } from './keycodes.js';\r\nimport { so } from './soundObject';\r\nimport { World } from './world'\r\nimport { Road } from './road';\r\nclass Game {\r\n\tconstructor() {\r\n\t\tthis.tick = so.create(\"tick\")\r\n\t\tthis.scoreSound = so.create(\"scoreCounter\")\r\n\t\tthis.scoreSound.volume = 0.4\r\n\t\tthis.input = new KeyboardInput();\r\n\t\tthis.pool = new SoundHandler()\r\n\t\tthis.input.init();\r\n\t\tthis.timer = Timer({\r\n\t\t\tupdate: () => this.update(),\r\n\t\t\trender: () => this.render()\r\n\t\t}, 1 / 45);\r\n\t\tthis.score = 0\r\n\t\tthis.level = 1\r\n\t\tthis.spawnTime = 3000 - (this.level * 100)\r\n\t\tthis.roadsPerLevel = 5\r\n\t}\r\n\r\n\tstart() {\r\n\t\tthis.timer.start();\r\n\t\tthis.world = new World(this, 80)\r\n\t\tif (!debug) this.world.generateTiles()\r\n\t\t//speech.speak(strings.get(\"upArrowMove\"))\r\n\t}\r\n\tupdate(dt) {\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_0)) {\r\n\t\t\tthis.world.player.slowDown(10)\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_D) && debug) {\r\n\t\t\tlet debugRoad = new Road(this.world, 1, true)\r\n\t\t\tlet number = content.numberOfVehicles\r\n\t\t\tdebugRoad.generateCar(number)\r\n\t\t\tdebugRoad.generator = false\r\n\t\t\tthis.world.player.y = 0\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_I)) {\r\n\t\t\tlet nothing = true\r\n\t\t\tif (data.jumps > 0) {\r\n\t\t\t\tnothing = false\r\n\t\t\t\tspeech.speak(strings.get(\"iJumps\", [data.jumps]))\r\n\t\t\t}\r\n\t\t\tif (nothing) {\r\n\t\t\t\tspeech.speak(strings.get(\"emptyInventory\"))\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_UP)) {\r\n\t\t\tthis.world.player.speedUp()\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_DOWN)) {\r\n\t\t\tthis.world.player.slowDown()\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_C)) {\r\n\t\t\tspeech.speak(this.world.player.coins + strings.get(\"coins\"))\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_S)) {\r\n\t\t\tspeech.speak(this.score + strings.get(\"points\"))\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_X)) {\r\n\t\t\tspeech.speak(this.world.player.x + \", \" + this.world.player.y + \", \" + this.world.player.z)\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_L)) {\r\n\t\t\tspeech.speak(strings.get(\"level\") + this.level)\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_H)) {\r\n\t\t\tspeech.speak(this.world.player.hp + \" \" + strings.get(\"hp\"))\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_1)) {\r\n\t\t\tthis.world.player.slowDown(10)\r\n\t\t\tthis.world.player.speedUp(1)\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_2)) {\r\n\t\t\tthis.world.player.slowDown(10)\r\n\t\t\tthis.world.player.speedUp(2)\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_3)) {\r\n\t\t\tthis.world.player.slowDown(10)\r\n\t\t\tthis.world.player.speedUp(3)\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_4)) {\r\n\t\t\tthis.world.player.slowDown(10)\r\n\t\t\tthis.world.player.speedUp(4)\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_5)) {\r\n\t\t\tthis.world.player.slowDown(10)\r\n\t\t\tthis.world.player.speedUp(5)\r\n\t\t}\r\n\t\tthis.world.update()\r\n\t}\r\n\trender() {\r\n\t}\r\n}\r\nexport { Game }","'use strict';\r\nimport {speech} from './tts';\r\nimport {so} from './soundObject';\r\nconst MenuTypes = {\r\n\tNORMAL: 0,\r\n\t\tSELECTOR: 1,\r\n\t\tSLIDER: 2,\r\n\t\tEDIT: 3,\r\n\t\tAUDIO: 4,\r\n};\r\nclass MenuItem {\r\n\tconstructor(id, name) {\r\n\t\tthis.name = name;\n\t\t\t\t\tthis.id = id;\r\n\t\t\tthis.type = MenuTypes.NORMAL;\r\n\t}\r\n\t\r\n\t\tspeak() {\r\n\t\t\tspeech.speak(this.name);\r\n\t\t}\r\n\t\r\n\t\tselect() {\r\n\t\t\treturn this.id;\r\n\t\t}\r\n}\r\nclass AudioItem extends MenuItem{\r\n\tconstructor(id, name) {\r\n\t\tsuper();\r\n\t\t\tthis.name = name;\r\n\t\t\tthis.type = MenuTypes.AUDIO;\r\n\t\t\tthis.id = id;\r\n\t\t\tthis.snd=so.create(this.name);\r\n\t}\r\n\t\r\n\t\tspeak() {\n\t\t\tthis.snd.stop();\r\n\t\t\t\tthis.snd.play();\r\n\t\t}\r\n\t\r\n\t\tselect() {\r\n\t\t\treturn this.id;\r\n\t\t}\r\n}\r\n\r\n\r\nclass SelectorItem extends MenuItem {\r\n\tconstructor(id, name, options, defaultOption = 0, selectCallback) {\r\n\t\tsuper();\r\n\t\t\tthis.id = id;\r\n\t\t\tthis.name = name;\r\n\t\t\tthis.options = options;\r\n\t\t\tthis.type = MenuTypes.SELECTOR;\r\n\t\t\tthis.currentOption = defaultOption;\r\n\t\t\tthis.selectCallback = selectCallback;\r\n\t}\r\n\t\r\n\t\tspeak() {\r\n\t\t\tspeech.speak(this.name + '. Selector. Set to ' + this.options[this.currentOption]);\r\n\t\t}\r\n\t\r\n\t\tincrease() {\r\n\t\t\tif (this.currentOption < this.options.length - 1) {\r\n\t\t\t\tthis.currentOption++;\r\n\t\t\t}\r\n\t\t\tspeech.speak(this.options[this.currentOption]);\r\n\t\t\t\tif (typeof this.selectCallback !== 'undefined') {\r\n\t\t\t\t\tthis.selectCallback(this.options[this.currentOption]);\r\n\t\t\t\t}\r\n\t\t}\r\n\t\r\n\t\tdecrease() {\r\n\t\t\tif (this.currentOption > 0) {\r\n\t\t\t\tthis.currentOption--;\r\n\t\t\t}\r\n\t\t\tspeech.speak(this.options[this.currentOption]);\r\n\t\t\t\tif (typeof this.selectCallback !== 'undefined') {\r\n\t\t\t\t\tthis.selectCallback(this.options[this.currentOption]);\r\n\t\t\t\t}\r\n\t\t}\r\n\t\r\n\t\tselect() {\r\n\t\t\treturn this.id;\r\n\t\t}\r\n}\r\n\r\nclass SliderItem extends MenuItem {\r\n\tconstructor(id, name, from, to, currentValue = 0,increaseBy=1) {\r\n\t\tsuper();\r\n\t\t\tthis.id = id;\r\n\t\t\tthis.name = name;\r\n\t\t\tthis.minValue = from;\r\n\t\t\tthis.maxValue = to;\r\n\t\t\tthis.currentValue = currentValue;\r\n\t\t\tthis.increaseBy=increaseBy;\r\n\t\t\tthis.type = MenuTypes.SLIDER;\r\n\t}\r\n\t\r\n\t\tspeak() {\r\n\t\t\tspeech.speak(this.name + '. Slider. Set to ' + this.currentValue);\r\n\t\t}\r\n\t\r\n\t\tincrease() {\r\n\t\t\tif (this.currentValue < this.maxValue) {\r\n\t\t\t\tthis.currentValue+=this.increaseBy;\r\n\t\t\t}\r\n\t\t\tif (this.currentValue>this.maxValue) this.currentValue=this.maxValue;\r\n\t\t\t\tspeech.speak(this.currentValue);\r\n\t\t}\r\n\t\r\n\t\tdecrease() {\r\n\t\t\tif (this.currentValue > this.minValue) {\r\n\t\t\t\tthis.currentValue-=this.increaseBy;\r\n\t\t\t}\r\n\t\t\tif (this.currentValue<this.minValue) this.currentValue=this.minValue;\r\n\t\t\t\tspeech.speak(this.currentValue);\r\n\t\t}\r\n\t\r\n\t\tselect() {\r\n\t\t\treturn this.id;\r\n\t\t}\r\n}\r\n\r\nclass EditItem extends MenuItem {\r\n\tconstructor(id, name, defaultText = '') {\r\n\t\tsuper();\r\n\t\t\tthis.id = id;\r\n\t\t\tthis.name = name;\r\n\t\t\tthis.text = defaultText;\r\n\t\t\tthis.type = MenuTypes.EDIT;\r\n\t}\r\n\t\r\n\t\tspeak() {\r\n\t\t\tspeech.speak(this.name + '. Editable. ' + (this.text == '' ? 'Nothing entered.' : 'Set to ' + this.text));\r\n\t\t}\r\n\t\r\n\t\taddChar(char) {\r\n\t\t\tthis.text += char;\r\n\t\t\t\tspeech.speak(char);\r\n\t\t}\r\n\t\r\n\t\tremoveChar() {\r\n\t\t\tthis.text = this.text.substring(0, this.text.length - 1);\r\n\t\t\t\tspeech.speak(this.text);\r\n\t\t}\r\n\t\r\n\t\tselect() {\r\n\t\t\treturn this.text;\r\n\t\t}\r\n}\r\nexport {MenuItem,AudioItem,SliderItem,SelectorItem,MenuTypes};\r\n","'use strict';\nimport \"babel-polyfill\";\r\nimport { utils } from './utilities';\r\nimport Hammer from 'hammerjs';\r\nimport { speech } from './tts';\r\nimport { so } from './soundObject.js';\r\nimport { MenuTypes, MenuItem } from './menuItem';\r\nimport { KeyEvent } from './keycodes';\r\nimport { KeyboardInput } from './input';\r\n\r\nclass Menu {\n\tconstructor(name, menuData, music) {\n\t\tthis.kp=event => {\nthis.handleInput(event);\n\t\t\t\t\t};\n\t\tthis.kd=event => {\nthis.handleKeys(event);\n\t\t\t\t\t\t\t};\n\t\tthis.fadeTime = 0.6;\r\n\t\tthis.menuData = menuData;\r\n\t\tlet audio = name.split(\" \");\r\n\t\tif (audio.length < 2) this.isAudio = true;\r\n\t\tif (audio.length >= 2) this.isAudio = false;\r\n\t\tthis.silent = false;\r\n\t\tthis.prependAudio = \"\";\r\n\t\tthis.first = true;\r\n\t\tthis.cursor = 0;\r\n\t\tthis.name = name;\r\n\t\tlet dir = so.directory;\r\n\t\tso.directory = \"./sounds/\";\r\n\t\tthis.sndKeyChar = so.create('ui/keyChar');\r\n\t\tthis.sndKeyDelete = so.create('ui/keyDelete');\r\n\t\tthis.sndSliderLeft = so.create('ui/menuSliderLeft');\r\n\t\tthis.sndSliderRight = so.create('ui/menuSliderRight');\r\n\t\tthis.sndBoundary = so.create('ui/menuBoundary');\r\n\t\tthis.sndChoose = so.create('ui/menuChoose');\r\n\t\tthis.sndMove = so.create('ui/menuMove');\r\n\t\tthis.sndOpen = so.create('ui/menuOpen');\r\n\t\tthis.sndSelector = so.create('ui/menuSelector');\r\n\t\tthis.sndWrap = so.create('ui/menuWrap');\r\n\t\tso.directory = dir;\r\n\t\tthis.selectCallback = null;\r\n\t\tif (typeof music !== 'undefined') {\r\n\t\t\tthis.music = music;\r\n\t\t}\r\n\t\tconst id = document.getElementById('touchArea');\r\n\t\tthis.hammer = new Hammer(id);\r\n\t}\r\n\r\n\tnextItem() {\r\n\t\tspeech.stop();\r\n\t\tif (!this.first) {\r\n\t\t\tif (this.cursor < this.menuData.length - 1) {\r\n\t\t\t\tif (!this.silent) this.sndMove.play();\r\n\t\t\t\tthis.cursor++;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (!this.silent) this.sndWrap.play();\r\n\t\t\t\tthis.cursor = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (!this.silent) this.sndMove.play();\r\n\t\t\tthis.first = false;\r\n\t\t}\r\n\t\tif (this.isAudio) {\r\n\t\t\tthis.sndName.stop();\r\n\t\t\tfor (let i = 0; i < this.menuData.length; i++) {\r\n\t\t\t\tif (this.menuData[i].type == MenuTypes.AUDIO) this.menuData[i].snd.stop();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.menuData[this.cursor].speak();\r\n\t}\r\n\r\n\tpreviousItem() {\r\n\t\tspeech.stop();\r\n\r\n\t\tif (this.first) {\r\n\t\t\tthis.first = false;\r\n\t\t\tif (!this.silent) this.sndMove.play();\r\n\t\t}\r\n\t\tif (this.cursor > 0) {\r\n\t\t\tif (!this.silent) this.sndMove.play();\r\n\t\t\tthis.cursor--;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.cursor = this.menuData.length - 1;\r\n\t\t\tif (!this.silent) this.sndWrap.play();\r\n\r\n\t\t}\r\n\t\tif (this.isAudio) {\r\n\t\t\tthis.sndName.stop();\r\n\t\t\tfor (let i in this.menuData) {\r\n\t\t\t\tif (this.menuData[i].type == MenuTypes.AUDIO) this.menuData[i].snd.stop();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.menuData[this.cursor].speak();\r\n\t\tif (typeof this.moveCallback !== \"undefined\") {\r\n\t\t\tthis.moveCallback(this.menuData[this.cursor].id);\r\n\t\t}\r\n\t}\r\n\r\n\tincrease() {\r\n\t\tif (this.menuData[this.cursor].type == MenuTypes.SLIDER || this.menuData[this.cursor].type == MenuTypes.SELECTOR) {\r\n\t\t\tthis.menuData[this.cursor].increase();\r\n\t\t\tif (this.menuData[this.cursor].type == MenuTypes.SLIDER) {\r\n\t\t\t\tif (!this.silent) this.sndSliderRight.play();\r\n\t\t\t} else {\r\n\t\t\t\tif (!this.silent) this.sndSelector.play();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdecrease() {\r\n\t\tif (this.menuData[this.cursor].type == MenuTypes.SLIDER || this.menuData[this.cursor].type == MenuTypes.SELECTOR) {\r\n\t\t\tthis.menuData[this.cursor].decrease();\r\n\t\t\tif (this.menuData[this.cursor].type == MenuTypes.SLIDER) {\r\n\t\t\t\tif (!this.silent) this.sndSliderLeft.play();\r\n\t\t\t} else {\r\n\t\t\t\tif (!this.silent) this.sndSelector.play();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinsertCharacter(char) {\r\n\t\tif (this.menuData[this.cursor].type == MenuTypes.EDIT) {\r\n\t\t\tthis.menuData[this.cursor].addChar(String.fromCharCode(char));\r\n\t\t\tif (!this.silent) this.sndKeyChar.play();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// Char navigation code\r\n\t\tfor (let i = this.cursor + 1; i < this.menuData.length; i++) {\r\n\t\t\tif (this.menuData[i].shortcut == String.fromCharCode(char).toLowerCase()) {\r\n\t\t\t\tthis.cursor = i;\r\n\t\t\t\tthis.select();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this.menuData[i].name.toLowerCase().substr(0, 1) == String.fromCharCode(char).toLowerCase()) {\r\n\t\t\t\tthis.cursor = i;\r\n\t\t\t\tthis.menuData[this.cursor].speak();\r\n\t\t\t\tthis.first = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (let i = 0; i < this.menuData.length; i++) {\r\n\t\t\tif (this.menuData[i].shortcut == String.fromCharCode(char).toLowerCase()) {\r\n\t\t\t\tthis.cursor = i;\r\n\t\t\t\tthis.select();\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.menuData[i].name.toLowerCase().substr(0, 1) == String.fromCharCode(char).toLowerCase()) {\r\n\t\t\t\tthis.cursor = i;\r\n\t\t\t\tthis.menuData[this.cursor].speak();\r\n\t\t\t\tthis.first = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tremoveCharacter() {\r\n\t\tif (this.menuData[this.cursor].type == MenuTypes.EDIT) {\r\n\t\t\tthis.menuData[this.cursor].removeChar();\r\n\t\t\tif (!this.silent) this.sndKeyDelete.play();\r\n\t\t}\r\n\t}\r\n\r\n\thandleInput(event) {\r\n\t\tthis.insertCharacter(event.which);\r\n\t}\r\n\r\n\tdestroySounds() {\r\n\t\tthis.sndKeyChar.destroy();\r\n\t\tthis.sndKeyDelete.destroy();\r\n\t\tthis.sndSliderLeft.destroy();\r\n\t\tthis.sndSliderRight.destroy();\r\n\t\tif (this.isAudio) this.sndName.destroy();\r\n\t\tthis.sndBoundary.destroy();\r\n\t\tthis.sndChoose.destroy();\r\n\t\tthis.sndMove.destroy();\r\n\t\tthis.sndOpen.destroy();\r\n\t\tthis.sndSelector.destroy();\r\n\t\tthis.sndWrap.destroy();\r\n\t\tfor (let i = 0; i < this.menuData.length; i++) {\r\n\t\t\tif (this.menuData[i].type == MenuTypes.AUDIO) this.menuData[i].snd.destroy();\r\n\t\t}\r\n\t\tif (typeof this.music !== 'undefined') {\r\n\t\t\tthis.music.destroy();\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tdestroy() {\r\ndocument.removeEventListener('keydown',this.kd);\r\ndocument.removeEventListener('keypress',this.kp);\r\n\t\tthis.hammer.destroy();\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.destroySounds();\r\n\t\t}, this.fadeTime * 1000);\r\n\t}\r\n\r\n\thandleKeys(event) {\r\n\t\tswitch (event.which) {\r\n\t\t\tcase KeyEvent.DOM_VK_RETURN:\r\n\t\t\t\tthis.select();\r\n\t\t\t\tbreak;\r\n\t\t\tcase KeyEvent.DOM_VK_PAGE_UP:\r\n\t\t\t\tthis.music.volume += 0.03;\r\n\t\t\t\tbreak;\r\n\t\t\tcase KeyEvent.DOM_VK_PAGE_DOWN:\r\n\t\t\t\tthis.music.volume -= 0.03;\r\n\t\t\t\tbreak;\r\n\t\t\tcase KeyEvent.DOM_VK_BACK_SPACE:\r\n\t\t\t\tthis.removeCharacter();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase KeyEvent.DOM_VK_DOWN:\r\n\r\n\t\t\t\tthis.nextItem();\r\n\t\t\t\tbreak;\r\n\t\t\tcase KeyEvent.DOM_VK_UP:\r\n\t\t\t\tthis.previousItem();\r\n\t\t\t\tbreak;\r\n\t\t\tcase KeyEvent.DOM_VK_RIGHT:\r\n\r\n\t\t\t\tthis.increase();\r\n\r\n\t\t\t\tbreak;\r\n\t\t\tcase KeyEvent.DOM_VK_LEFT:\r\n\r\n\t\t\t\tthis.decrease();\r\n\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\tasync runSync() {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tthis.run((s) => {\r\n\t\t\t\tresolve(s.selected);\r\n\t\t\t\tthis.destroy();\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\trun(callback) {\r\n\t\tif (typeof this.music === 'object') {\r\n\t\t\tthis.music.volume = 0.8;\r\n\t\t\tthis.music.loop = true;\r\n\t\t\tthis.music.play();\r\n\t\t\tspeech.ducker = this.music;\r\n\r\n\t\t} else if (typeof this.music === 'string') {\r\n\t\t\tthis.music = so.create(this.music, true);\r\n\t\t\tthis.music.volume = 0.8;\r\n\t\t\tthis.music.loop = true;\r\n\t\t\tthis.music.play();\r\n\t\t\tspeech.ducker = this.music;\r\n\t\t} else {\r\n\t\t}\r\n\t\tthis.selectCallback = callback;\r\n\t\tconst that = this;\r\n\t\tdocument.addEventListener('keypress', this.kp);\r\ndocument.addEventListener('keydown',this.kd);\n\r\n\t\tthis.hammer.on(\"swipeleft\", function (event) { that.handleSwipe(0); });\r\n\t\tthis.hammer.on(\"swiperight\", function (event) { that.handleSwipe(1); });\r\n\t\tthis.hammer.on(\"panup\", function (event) { that.handleSwipe(3); });\r\n\t\tthis.hammer.on(\"pandown\", function (event) { that.handleSwipe(4); });\r\n\t\tthis.hammer.on(\"tap\", function (event) { that.handleSwipe(2); });\r\n\t\tif (this.isAudio) {\r\n\t\t\tthis.sndName = so.create(this.name);\r\n\t\t\tthis.sndName.play();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tspeech.speak(this.name);\r\n\t\t}\r\n\t\tif (!this.silent) this.sndOpen.play();\r\n\t}\r\n\r\n\thandleSwipe(action) {\r\n\t\tif (action == 3) {\r\n\t\t\tthis.decrease();\r\n\t\t}\r\n\t\tif (action == 4) {\r\n\t\t\tthis.increase();\r\n\t\t}\r\n\r\n\t\tif (action == 0) {\r\n\t\t\tthis.previousItem();\r\n\t\t}\r\n\t\tif (action == 1) {\r\n\t\t\tthis.nextItem();\r\n\t\t}\r\n\t\tif (action == 2) {\r\n\t\t\tthis.select();\r\n\t\t}\r\n\t}\r\n\r\n\tselect() {\r\n\t\t//select function\r\n\t\tconst selected = this.menuData[this.cursor].id;\r\n\t\tconst items = [];\r\n\t\tfor (let i = 0; i < this.menuData.length; i++) {\r\n\t\t\tlet addItem = null;\r\n\t\t\tif (this.menuData[i].type == MenuTypes.SLIDER) {\r\n\t\t\t\taddItem = {\r\n\t\t\t\t\tid: this.menuData[i].id,\r\n\t\t\t\t\tvalue: this.menuData[i].currentValue,\r\n\t\t\t\t\t//name: this.menuData[i].options[this.menuData[i].currentValue]\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tif (this.menuData[i].type == MenuTypes.EDIT) {\r\n\t\t\t\taddItem = {\r\n\t\t\t\t\tid: this.menuData[i].id,\r\n\t\t\t\t\tvalue: this.menuData[i].text\r\n\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tif (this.menuData[i].type == MenuTypes.SELECTOR) {\r\n\t\t\t\taddItem = {\r\n\t\t\t\t\tid: this.menuData[i].id,\r\n\t\t\t\t\tvalue: this.menuData[i].currentOption,\r\n\t\t\t\t\tname: this.menuData[i].options[this.menuData[i].currentOption]\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\titems.push(addItem);\r\n\t\t}\r\n\r\n\t\tconst toReturn = {\r\n\t\t\tselected,\r\n\t\t\tcursor: this.cursor,\r\n\t\t\titems\r\n\t\t};\r\n\t\tif (!this.silent) this.sndChoose.play();\r\n\t\tdocument.removeEventListener('keydown',this.kd);\r\n\t\tdocument.removeEventListener('keypress',this.kp);\r\n\t\tif (this.isAudio) {\r\n\t\t\tthis.sndName.stop();\r\n\t\t\tfor (let i = 0; i < this.menuData.length; i++) {\r\n\t\t\t\tif (this.menuData[i].type == MenuTypes.AUDIO) this.menuData[i].snd.stop();\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!this.silent) this.musicDuration = this.fadeTime * 1000;\r\n\t\tif (typeof this.music === \"undefined\" || this.silent) this.musicDuration = 0;\r\n\r\n\t\tconst that = this;\r\n\t\tif (typeof this.music !== \"undefined\") {\r\n\t\t\tthis.music.sound.fade(0, this.fadeTime);\r\n\t\t}\r\n\t\tif (this.silent) this.musicDuration = 0;\r\n\t\tsetTimeout(() => {\r\n\t\t\tthat.selectCallback(toReturn);\r\n\t\t}, this.musicDuration);\r\n\t}\r\n}\r\nexport { Menu };\r\n","export const debug = false\r\nimport { strings } from './strings'\r\nimport { so } from './soundObject'\r\nexport let _\r\nexport let content = {\r\n\tnumberOfVehicles: 7,\r\n\tbonusTypes: 3,\r\n}\r\nexport var gameID = \"road\";\r\nexport let parsedCars = []\r\nparsedCars.push({})\r\nimport { speech } from './tts'\r\nimport { LanguageSelector } from './languageSelector'\r\nimport { Game } from './game';\r\nexport var version = \"1.0\";\r\nexport let data = {\r\n\tcoins: 0,\r\n\tjumps: 0,\r\n\tunlocks: {\r\n\t\thyperjump: false,\r\n\t},\r\n}\r\nexport var version2 = \"\";\r\n\r\nexport var lang = 0;\r\nexport var ttsVoice;\r\nexport var ttsRate = 1;\r\nimport $ from 'jquery';\r\nimport { Menu } from './menu';\r\nimport { MenuItem, MenuTypes } from './menuItem'\r\ndocument.addEventListener('DOMContentLoaded', setup);\r\nasync function setup() {\r\n\tdocument.getElementById(\"app\").focus();\r\n\tif (localStorage.getItem(\"string_data\") != null) {\r\n\t\tdata = JSON.parse(localStorage.getItem(\"string_data\"))\r\n\t}\r\n\ttry {\r\n\t\tconst fs = require('fs')\r\n\t\tlet file = fs.readFileSync(\"./cars.txt\", \"utf8\")\r\n\t\tconsole.log(file)\r\n\t\tlet lines = file.split(\"\\n\")\r\n\t\tconsole.log(lines[0])\r\n\t\tlines.forEach(element => {\r\n\t\t\tlet elements = element.split(\",\")\r\n\t\t\tlet name = elements[0]\r\n\t\t\tlet speed = Number(elements[1])\r\n\t\t\tlet horning = elements[2]\r\n\t\t\tlet hornable = \"\"\r\n\t\t\tif (horning == 1) {\r\n\t\t\t\thornable = name\r\n\t\t\t}\r\n\t\t\telse if (horning == 0) {\r\n\t\t\t\thornable = \"\"\r\n\t\t\t} else {\r\n\t\t\t\thornable = horning;\r\n\t\t\t}\r\n\t\t\tlet z = Number(elements[3])\r\n\t\t\tparsedCars.push({ sound: \"vehicles/\" + name, speed: speed, hornable: hornable, name: name, z: z })\r\n\t\t});\r\n\t\tcontent.numberOfVehicles = parsedCars.length - 1\r\n\t} catch (e) {\r\n\t\tconsole.log(\"Error parsing cars file: \" + e)\r\n\t}\r\n\t//the below is an example of a new version notifier. The version2 variable can be used and compared inside a menu or wherever, and would contain the new version of your game based on what your server returns.\r\n\tlet prom = new Promise((resolve, reject) => {\r\n\t\tfetch('http://yourserver.com/versions.php?gameVersionRequest=' + gameID)\r\n\t\t\t.then(event => event.text()) //convert http response into text\r\n\t\t\t.then(data => {\r\n\t\t\t\tversion2 = data;\r\n\t\t\t\tresolve(data); //resolve promise let go.\r\n\t\t\t});\r\n\t});\r\n\tlet langs = new LanguageSelector(\"langSelect\", async (result) => {\r\n\t\tlang = result;\r\n\t\tspeech.setLanguage(lang);\r\n\t\t_ = strings.get\r\n\t\tlet music = so.create(\"music/menu\")\r\n\t\tmusic.volume = 0.6\n\t\tmusic.loop=true;\r\n\t\tmusic.play()\n\t\tspeech.ducker=music\r\n\t\tlet items = []\r\n\t\titems.push(new MenuItem(0, strings.get(\"mStart\")))\r\n\t\titems.push(new MenuItem(1, strings.get(\"mShop\", [data.coins])))\r\n\t\tlet menu = new Menu(strings.get(\"mainMenu\"), items)\r\n\t\tlet selection = await menu.runSync()\r\n\t\tawait music.fade(0)\r\n\t\tswitch (selection) {\r\n\t\t\tcase 0:\r\n\t\t\t\tlet game = new Game()\r\n\t\t\t\tgame.start()\r\n\t\t\t\tbreak;\r\n\t\t\tdefault: break;\r\n\t\t}\r\n\t});\r\n}\r\nexport function save() {\r\n\tlocalStorage.setItem(\"string_data\", JSON.stringify(data))\r\n}"]}