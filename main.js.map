{"version":3,"sources":["keycodes.js","utilities.js","strings.js","input.js","tts.js","soundObject.js","scrollingText.js","soundSource.js","soundHandler.js","languageSelector.js","timer.js","gameObject.js","item.js","coin.js","tile.js","street.js","objective.js","stationaryObject.js","car.js","levelPortal.js","road.js","effect.js","bonus.js","player.js","world.js","game.js","menuItem.js","menu.js","main.js"],"names":["KeyEvent","DOM_VK_CANCEL","DOM_VK_HELP","DOM_VK_BACK_SPACE","DOM_VK_TAB","DOM_VK_CLEAR","DOM_VK_RETURN","DOM_VK_ENTER","DOM_VK_SHIFT","DOM_VK_CONTROL","DOM_VK_ALT","DOM_VK_PAUSE","DOM_VK_CAPS_LOCK","DOM_VK_ESCAPE","DOM_VK_SPACE","DOM_VK_PAGE_UP","DOM_VK_PAGE_DOWN","DOM_VK_END","DOM_VK_HOME","DOM_VK_LEFT","DOM_VK_UP","DOM_VK_RIGHT","DOM_VK_DOWN","DOM_VK_PRINTSCREEN","DOM_VK_INSERT","DOM_VK_DELETE","DOM_VK_0","DOM_VK_1","DOM_VK_2","DOM_VK_3","DOM_VK_4","DOM_VK_5","DOM_VK_6","DOM_VK_7","DOM_VK_8","DOM_VK_9","DOM_VK_SEMICOLON","DOM_VK_EQUALS","DOM_VK_A","DOM_VK_B","DOM_VK_C","DOM_VK_D","DOM_VK_E","DOM_VK_F","DOM_VK_G","DOM_VK_H","DOM_VK_I","DOM_VK_J","DOM_VK_K","DOM_VK_L","DOM_VK_M","DOM_VK_N","DOM_VK_O","DOM_VK_P","DOM_VK_Q","DOM_VK_R","DOM_VK_S","DOM_VK_T","DOM_VK_U","DOM_VK_V","DOM_VK_W","DOM_VK_X","DOM_VK_Y","DOM_VK_Z","DOM_VK_CONTEXT_MENU","DOM_VK_NUMPAD0","DOM_VK_NUMPAD1","DOM_VK_NUMPAD2","DOM_VK_NUMPAD3","DOM_VK_NUMPAD4","DOM_VK_NUMPAD5","DOM_VK_NUMPAD6","DOM_VK_NUMPAD7","DOM_VK_NUMPAD8","DOM_VK_NUMPAD9","DOM_VK_MULTIPLY","DOM_VK_ADD","DOM_VK_SEPARATOR","DOM_VK_SUBTRACT","DOM_VK_DECIMAL","DOM_VK_DIVIDE","DOM_VK_F1","DOM_VK_F2","DOM_VK_F3","DOM_VK_F4","DOM_VK_F5","DOM_VK_F6","DOM_VK_F7","DOM_VK_F8","DOM_VK_F9","DOM_VK_F10","DOM_VK_F11","DOM_VK_F12","DOM_VK_F13","DOM_VK_F14","DOM_VK_F15","DOM_VK_F16","DOM_VK_F17","DOM_VK_F18","DOM_VK_F19","DOM_VK_F20","DOM_VK_F21","DOM_VK_F22","DOM_VK_F23","DOM_VK_F24","DOM_VK_NUM_LOCK","DOM_VK_SCROLL_LOCK","DOM_VK_COMMA","DOM_VK_PERIOD","DOM_VK_SLASH","DOM_VK_BACK_QUOTE","DOM_VK_OPEN_BRACKET","DOM_VK_BACK_SLASH","DOM_VK_CLOSE_BRACKET","DOM_VK_QUOTE","DOM_VK_META","GameUtils","calculateDelta","lx","sx","sr","delta","progressPan","current","max","progressPitch","min","minPitch","maxPitch","progressVolume","minVolume","maxVolume","getProportion","distance3D","x1","y1","z1","x2","y2","z2","Math","sqrt","distance","jx","jy","kx","ky","calculateAngle","angle","atan2","PI","isCollide3D","a","b","x","width","y","height","z","depth","randomInt","floor","random","getRandomArbitrary","sleep","ms","Promise","resolve","setTimeout","percent","int1","int2","percentOf","percentage","percented","value","average","arr","startIndex","len","length","val","i","averageInt","neg","num","numericSort","shuffle","j","objSize","obj","size","key","hasOwnProperty","copyObject","Object","assign","create","getPrototypeOf","arraysEqual","arr1","arr2","pauseTimeout","timerId","start","Date","now","clearTimeout","resumeTimeout","remaining","window","callback","randomProperty","keys","findFiles","path","ext","list","fileExt","walk","filesSync","pb","pf","stat","next","push","substr","findFolders","dirsSync","randomElement","utils","Strings","constructor","strings","bankedScore","ws","bonus7","iStoppers","noBombs","noStoppers","shopbombs","bonus3","bonus4","bonus5","bonus6","coins","iBombs","mShopBack","mShopIntro","shophyperjump","shopgalleryMembership","shopshortfuse","galleryLocked","mBullet","locked","bulletIntro","iJumps","emptyInventory","mainMenu","mStart","mShop","level","upArrowMove","bonus1","bonus2","selectVoice","mSelectVoice","mLang","newUpdate","mSapi","mReader","newRate","rating","mRate","K","Q","A","J","cspades","cdiamonds","cclubs","chearts","dq","lang","langs","mSelect","mBack","yes","no","ok","get","what","rep","str","forEach","v","i1","Number","replace","speak","speech","check","lng","ScrollingText","EventEmitter","require","KeyboardInput","keyDown","justPressed","chars","justReleased","justPressedEventCallback","charEventCallback","init","that","document","addEventListener","event","handleKeyDown","handleKeyUp","handleChar","pause","isPaused","resume","which","emit","char","String","fromCharCode","destroy","isDown","isJustPressed","isJustReleased","keysDown","kd","getChars","keysPressed","splice","releaseAllKeys","keysReleased","app","remote","exec","useWebTTS","TTS","webTTS","voices","speechController","ducking","synth","Speech","rate","interrupt","VK_SHIFT","childProcess","kill","unduck","VK_UP","setRate","VK_DOWN","splitSentences","then","data","catch","e","setLanguage","process","platform","setVoice","console","log","voice","err","r","text","queue","accessibilitySupportEnabled","oldText","speakUnthreaded","listeners","onstart","duck","onend","onerror","error","getElementById","innerHTML","para","createElement","appendChild","createTextNode","setWebTTS","tts","stop","cancel","changeRate","inp","changeVoice","name","voiceArray","k","includes","cb","silent","wl","vl","split","input","selection","ducker","stdout","stderr","message","panner","defaults","panningModel","maxDistance","sono","playInBackground","playOnceTimer","SoundObjectItem","file","tag","stream","duckingFirstTime","fileName","sound","src","onComplete","doneLoading","timeout","checkProgress","loaded","Audio","playbackRate","pitch","loop","progress","replay","play","unload","time","oldVolume","volume","fade","pos","forcePlay","playSync","die","evt","once","removeAllListeners","active","playing","pan","effects","add","currentPan","set","seek","currentTime","duration","position","SoundObject","sounds","Array","loadingQueue","queueCallback","loadedSounds","loadingSounds","loadedCallback","queueLength","statusCallback","directory","extension","oneShots","debug","oneShotSound","setStatusCallback","findSound","findSoundIndex","resetQueuedInstance","found","returnObject","loadQueueSync","so","setQueueCallback","loadQueue","createSync","snd","enqueue","handleQueue","resetQueue","setCallback","result","isLoading","loading","stillLoading","playOnce","on","noMore","filename","destroyAll","runningText","undefined","delimiter","splitText","currentLine","sndOpen","sndContinue","sndClose","id","prom","res","handleKeys","readCurrentLine","copyCurrentLine","advance","handleTap","action","removeEventListener","SoundSource","son","speed","minRate","maxRate","toDestroy","rateShiftSpeed","currentPosition","setPosition","update","SoundHandler","directional","staticSounds","dynamicSounds","currentDynamicSound","maxDynamicSounds","currentStaticSound","maxStaticSounds","reuseSounds","playStatic","slot","findFreeStaticSlot","SoundItem","findFreeDynamicSlot","findDynamicSound","reuse","threeD","LanguageSelector","element","container","buttons","type","focus","module","exports","GameObject","world","alive","mediaSource","context","createMediaElementSource","source","scene","createSource","sourceWidth","sourceHeight","sourceDepth","connect","removeAttribute","load","Item","player","step","round","target","Coin","game","pool","Tile","hasSomething","scoreType","score","currentSpeed","clearInterval","scoreTimeout","levelCap","tileType","Street","Objective","canLevel","nearestStreet","setListenerPosition","setInterval","scoreDeduct","generateTiles","slowDown","StationaryObject","Car","tile","side","canHorn","blowUp","blowUpSound","objective","bulletGallery","hornSound","passed","hornSource","hornResonanceSource","jump","generateCar","content","numberOfVehicles","spawnTime","jumps","flyTo","nearestObjective","healthLoss","hp","hit","furthestStreet","LevelPortal","canLevelNotify","Road","generator","force","greenLight","carType","chance","dynamicObjects","parsedCars","hornable","blowup","stepProgress","nearestRoad","furthestRoad","Effect","onFunction","ofFunction","Bonus","bonuses","bonusType","coffeeOn","oldSpeed","speedUp","forceSpeed","forcedSpeed","coffeeOff","Player","playerHitSound","center","xLimit","ceil","fallTime","unableToMove","speedUpSound","speedDownSound","speeds","speedModifier","move","speedTimeout","number","landsound","heart","land","fall","stand","interval","tick","throwBomb","fusetime","ResonanceAudio","World","tiles","AudioContext","convolution","createConvolver","output","destination","setMaxListeners","lastStreet","lastStreetLimit","roadsPerLevel","lastRoad","levelScore","Game","canChangeSpeed","scoreSound","timer","render","dt","stoppers","debugRoad","bombs","nothing","MenuTypes","NORMAL","SELECTOR","SLIDER","EDIT","AUDIO","MenuItem","select","AudioItem","SelectorItem","options","defaultOption","selectCallback","currentOption","increase","decrease","SliderItem","from","to","currentValue","increaseBy","minValue","maxValue","EditItem","defaultText","addChar","removeChar","substring","Menu","menuData","music","kp","handleInput","fadeTime","audio","isAudio","prependAudio","first","cursor","dir","sndKeyChar","sndKeyDelete","sndSliderLeft","sndSliderRight","sndBoundary","sndChoose","sndMove","sndSelector","sndWrap","hammer","Hammer","nextItem","sndName","previousItem","moveCallback","insertCharacter","shortcut","toLowerCase","removeCharacter","destroySounds","runSync","reject","run","s","selected","handleSwipe","items","addItem","toReturn","musicDuration","_","bonusTypes","shopItems","hyperjump","galleryMembership","shortfuse","gameID","version","unlocks","version2","ttsVoice","ttsRate","setup","localStorage","getItem","JSON","parse","fs","readFileSync","lines","elements","horning","blow","fetch","menu","shop","browseGallery","save","setItem","stringify","getUnlock","unlocked","entries","setUnlock","setData","getData","shopAmbience","buy","nobuy"],"mappings":"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","file":"main.js","sourceRoot":"js","sourcesContent":["\r\n'use strict';\r\nconst KeyEvent = {\r\nDOM_VK_CANCEL: 3,\r\n\t       DOM_VK_HELP: 6,\r\n\t       DOM_VK_BACK_SPACE: 8,\r\n\t       DOM_VK_TAB: 9,\r\n\t       DOM_VK_CLEAR: 12,\r\n\t       DOM_VK_RETURN: 13,\r\n\t       DOM_VK_ENTER: 14,\r\n\t       DOM_VK_SHIFT: 16,\r\n\t       DOM_VK_CONTROL: 17,\r\n\t       DOM_VK_ALT: 18,\r\n\t       DOM_VK_PAUSE: 19,\r\n\t       DOM_VK_CAPS_LOCK: 20,\r\n\t       DOM_VK_ESCAPE: 27,\r\n\t       DOM_VK_SPACE: 32,\r\n\t       DOM_VK_PAGE_UP: 33,\r\n\t       DOM_VK_PAGE_DOWN: 34,\r\n\t       DOM_VK_END: 35,\r\n\t       DOM_VK_HOME: 36,\r\n\t       DOM_VK_LEFT: 37,\r\n\t       DOM_VK_UP: 38,\r\n\t       DOM_VK_RIGHT: 39,\r\n\t       DOM_VK_DOWN: 40,\r\n\t       DOM_VK_PRINTSCREEN: 44,\r\n\t       DOM_VK_INSERT: 45,\r\n\t       DOM_VK_DELETE: 46,\r\n\t       DOM_VK_0: 48,\r\n\t       DOM_VK_1: 49,\r\n\t       DOM_VK_2: 50,\r\n\t       DOM_VK_3: 51,\r\n\t       DOM_VK_4: 52,\r\n\t       DOM_VK_5: 53,\r\n\t       DOM_VK_6: 54,\r\n\t       DOM_VK_7: 55,\r\n\t       DOM_VK_8: 56,\r\n\t       DOM_VK_9: 57,\r\n\t       DOM_VK_SEMICOLON: 59,\r\n\t       DOM_VK_EQUALS: 61,\r\n\t       DOM_VK_A: 65,\r\n\t       DOM_VK_B: 66,\r\n\t       DOM_VK_C: 67,\r\n\t       DOM_VK_D: 68,\r\n\t       DOM_VK_E: 69,\r\n\t       DOM_VK_F: 70,\r\n\t       DOM_VK_G: 71,\r\n\t       DOM_VK_H: 72,\r\n\t       DOM_VK_I: 73,\r\n\t       DOM_VK_J: 74,\r\n\t       DOM_VK_K: 75,\r\n\t       DOM_VK_L: 76,\r\n\t       DOM_VK_M: 77,\r\n\t       DOM_VK_N: 78,\r\n\t       DOM_VK_O: 79,\r\n\t       DOM_VK_P: 80,\r\n\t       DOM_VK_Q: 81,\r\n\t       DOM_VK_R: 82,\r\n\t       DOM_VK_S: 83,\r\n\t       DOM_VK_T: 84,\r\n\t       DOM_VK_U: 85,\r\n\t       DOM_VK_V: 86,\r\n\t       DOM_VK_W: 87,\r\n\t       DOM_VK_X: 88,\r\n\t       DOM_VK_Y: 89,\r\n\t       DOM_VK_Z: 90,\r\n\t       DOM_VK_CONTEXT_MENU: 93,\r\n\t       DOM_VK_NUMPAD0: 96,\r\n\t       DOM_VK_NUMPAD1: 97,\r\n\t       DOM_VK_NUMPAD2: 98,\r\n\t       DOM_VK_NUMPAD3: 99,\r\n\t       DOM_VK_NUMPAD4: 100,\r\n\t       DOM_VK_NUMPAD5: 101,\r\n\t       DOM_VK_NUMPAD6: 102,\r\n\t       DOM_VK_NUMPAD7: 103,\r\n\t       DOM_VK_NUMPAD8: 104,\r\n\t       DOM_VK_NUMPAD9: 105,\r\n\t       DOM_VK_MULTIPLY: 106,\r\n\t       DOM_VK_ADD: 107,\r\n\t       DOM_VK_SEPARATOR: 108,\r\n\t       DOM_VK_SUBTRACT: 109,\r\n\t       DOM_VK_DECIMAL: 110,\r\n\t       DOM_VK_DIVIDE: 111,\r\n\t       DOM_VK_F1: 112,\r\n\t       DOM_VK_F2: 113,\r\n\t       DOM_VK_F3: 114,\r\n\t       DOM_VK_F4: 115,\r\n\t       DOM_VK_F5: 116,\r\n\t       DOM_VK_F6: 117,\r\n\t       DOM_VK_F7: 118,\r\n\t       DOM_VK_F8: 119,\r\n\t       DOM_VK_F9: 120,\r\n\t       DOM_VK_F10: 121,\r\n\t       DOM_VK_F11: 122,\r\n\t       DOM_VK_F12: 123,\r\n\t       DOM_VK_F13: 124,\r\n\t       DOM_VK_F14: 125,\r\n\t       DOM_VK_F15: 126,\r\n\t       DOM_VK_F16: 127,\r\n\t       DOM_VK_F17: 128,\r\n\t       DOM_VK_F18: 129,\r\n\t       DOM_VK_F19: 130,\r\n\t       DOM_VK_F20: 131,\r\n\t       DOM_VK_F21: 132,\r\n\t       DOM_VK_F22: 133,\r\n\t       DOM_VK_F23: 134,\r\n\t       DOM_VK_F24: 135,\r\n\t       DOM_VK_NUM_LOCK: 144,\r\n\t       DOM_VK_SCROLL_LOCK: 145,\r\n\t       DOM_VK_COMMA: 188,\r\n\t       DOM_VK_PERIOD: 190,\r\n\t       DOM_VK_SLASH: 191,\r\n\t       DOM_VK_BACK_QUOTE: 192,\r\n\t       DOM_VK_OPEN_BRACKET: 219,\r\n\t       DOM_VK_BACK_SLASH: 220,\r\n\t       DOM_VK_CLOSE_BRACKET: 221,\r\n\t       DOM_VK_QUOTE: 222,\r\n\t       DOM_VK_META: 224\r\n};\r\nexport {KeyEvent};\r\n","import \"babel-polyfill\";\r\n'use strict';\r\nclass GameUtils {\r\n\tcalculateDelta(lx, sx, sr = 0) {\r\n\t\tsx = sx + sr;\r\n\t\tif (sx < lx) {\r\n\t\t\tdelta = lx - sx;\r\n\t\t}\r\n\t\tif (sx > lx) {\r\n\t\t\tdelta = sx - lx;\r\n\t\t}\r\n\r\n\t}\r\n\tprogressPan(current, max) {\r\n\t\treturn ((current * 200 / max) - 100) / 100;\r\n\t}\r\n\r\n\tprogressPitch(current, min, max, minPitch, maxPitch) {\r\n\t\treturn (current / (min + max)) * (maxPitch - minPitch) + minPitch;\r\n\t}\r\n\r\n\tprogressVolume(current, min, max, minVolume, maxVolume) {\r\n\t\tif (current > max) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\treturn (current / (min + max)) * (maxVolume - minVolume) + minVolume;\r\n\t}\r\n\r\n\tgetProportion(current, min, max, minVolume, maxVolume) {\r\n\t\tif (current > max) {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\treturn (current / (min + max)) * (maxVolume - minVolume) + minVolume;\r\n\t}\r\n\r\n\tdistance3D(x1, y1, z1, x2, y2, z2) {\r\n\t\treturn Math.sqrt((x2 - x1) * (x2 - x1) +\r\n\t\t\t(y2 - y1) * (y2 - y1) +\r\n\t\t\t(z2 - z1) * (z2 - z1));\r\n\t}\r\n\r\n\tdistance(jx, jy, kx, ky) {\r\n\t\t// Return Math.hypot(jx-kx, jy-ky)\r\n\t\treturn Math.sqrt(((jx - kx) * (jx - kx)) + ((jy - ky)) * (jy - ky));\r\n\t}\r\n\r\n\tcalculateAngle(x1, y1, x2, y2) {\r\n\t\tlet angle = Math.atan2((y2 - y1), (x2 - x1));\r\n\t\tangle = (angle >= 0) ? 0 : (2 * Math.PI) + angle;\r\n\t\treturn angle;\r\n\t\t// Return Math.atan2((y2 - y1),(x2 - x1));\r\n\t}\r\n\r\n\tisCollide3D(a, b) {\r\n\t\treturn (a.x <= (b.x + b.width) && (a.x + a.width) >= b.x) && (a.y <= (b.y + b.height) && (a.y + a.height) >= b.y) && (a.z <= (b.z + b.depth) && (a.z + a.depth) >= b.z);\r\n\t}\r\n\r\n\trandomInt(min, max) {\r\n\t\treturn Math.floor(Math.random() * (max - min + 1)) + min;\r\n\t}\r\n\r\n\tgetRandomArbitrary(min, max) {\r\n\t\treturn Math.random() * (max - min) + min;\r\n\t}\r\n\r\n\tsleep(ms) {\r\n\t\treturn new Promise(resolve => setTimeout(resolve, ms));\r\n\t}\r\n\r\n\tpercent(int1, int2) {\r\n\t\treturn int1 * 100 / int2;\r\n\t}\r\n\r\n\tpercentOf(int1, int2) {\r\n\t\treturn int2 * int1 / 100;\r\n\t}\r\n\tpercentage(percented, value) {\r\n\t\treturn value * percented / 100;\r\n\t}\r\n\r\n\taverage(arr, startIndex = 0) {\r\n\t\tconst len = arr.length;\r\n\t\tlet val = 0;\r\n\t\tlet average = 0;\r\n\t\tif (arr.length < startIndex) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\r\n\t\tfor (let i = startIndex; i < arr.length; i++) {\r\n\t\t\tval += arr[i];\r\n\t\t}\r\n\r\n\t\taverage = val / (len - startIndex);\r\n\t\treturn average;\r\n\t}\r\n\r\n\taverageInt(arr, startIndex = 0) {\r\n\t\tconst len = arr.length;\r\n\t\tlet val = 0;\r\n\t\tlet average = 0;\r\n\t\tif (arr.length < startIndex) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\r\n\t\tfor (let i = startIndex; i < arr.length; i++) {\r\n\t\t\tval += arr[i];\r\n\t\t}\r\n\r\n\t\taverage = val / (len - startIndex);\r\n\t\treturn Math.floor(average);\r\n\t}\r\n\r\n\tneg(num) {\r\n\t\treturn (num >= 0 ? (num == 0 ? 0 : 1) : -1);\r\n\t}\r\n\r\n\tnumericSort(a, b) {\r\n\t\treturn (a < b ? -1 : (a == b ? 0 : 1));\r\n\t}\r\n\r\n\tshuffle(a) {\r\n\t\tfor (let i = a.length - 1; i > 0; i--) {\r\n\t\t\tconst j = Math.floor(Math.random() * (i + 1));\r\n\t\t\t[a[i], a[j]] = [a[j], a[i]];\r\n\t\t}\r\n\r\n\t\treturn a;\r\n\t}\r\n\r\n\tobjSize(obj) {\r\n\t\tlet size = 0;\r\n\r\n\t\tlet key;\r\n\t\tfor (key in obj) {\r\n\t\t\tif (obj.hasOwnProperty(key)) {\r\n\t\t\t\tsize++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn size;\r\n\t}\r\n\tcopyObject(obj) {\r\n\t\treturn Object.assign(Object.create(Object.getPrototypeOf(obj)), obj);\r\n\t}\r\n\tarraysEqual(arr1, arr2) {\r\n\t\tfor (var i = 0; i < arr1.length; i++) {\r\n\r\n\t\t\tif (arr1[i] !== arr2[i])\r\n\t\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tpauseTimeout(timerId) {\r\n\t\tlet start = Date.now();\r\n\t\tclearTimeout(timerId);\r\n\t};\r\n\r\n\tresumeTimeout(timerId) {\r\n\t\tremaining -= Date.now() - start;\r\n\t\treturn window.setTimeout(callback, remaining);\r\n\t};\r\n\trandomProperty(obj) {\r\n\t\tvar keys = Object.keys(obj)\r\n\t\treturn obj[keys[keys.length * Math.random() << 0]];\r\n\t};\r\n\t\tasync findFiles(path,ext=\"\") {\r\nlet list=[];\r\nlet fileExt=\"\";\r\nawait walk.filesSync(path, (pb, pf, stat, next) => {\r\nif (ext==\"\") {\r\nlist.push(pf);\r\n}\r\nelse {\r\nfileExt=pf.substr(0-ext.length,ext.length);\r\nif (fileExt==ext) {\r\nlist.push(pf);\r\n}\r\n}\r\n});\r\nreturn list;\r\n}\r\nasync findFolders(path) {\r\nlet list=[];\r\nawait walk.dirsSync(path, (pb, pf, stat, next) => {\r\nlist.push(pf);\r\n});\r\nreturn list;\r\n}\nrandomElement(arr) {\n\treturn arr[Math.floor(Math.random() * arr.length)];\n}\r\n}\r\nexport var utils = new GameUtils();\r\n","'use strict';\r\nimport { lang } from './main';\r\nimport { utils } from './utilities';\r\nimport { speech } from './tts';\r\nimport { ScrollingText } from './scrollingText';\r\n\r\nclass Strings {\r\n\tconstructor() {\r\n\t\tthis.strings = {};\r\n\t\tthis.strings[1] = {\r\n\t\t\t// New English\r\n\t\t\tbankedScore: \"With a saved score of\",\r\n\t\t\tws: \"world size\",\r\n\t\t\tbonus7: \"Stopper\",\r\n\t\t\tiStoppers: \"%1 Stoppers\",\r\n\t\t\tnoBombs: \"You don't have any bombs!\",\r\n\t\t\tnoStoppers: \"You don't have any stoppers\",\r\n\t\t\tshopbombs: \"Bombs, to make cars explode by pressing the b key. Also allows unlocking of explosion sounds in the explosions gallery\",\r\n\t\t\tbonus3: \"Slowdown\",\r\n\t\t\tbonus4: \"Nothing!\",\r\n\t\t\tbonus5: \"bomb\",\r\n\t\t\tbonus6: \"Coffee rush\",\r\n\t\t\tcoins: \"coins\",\r\n\t\t\tiBombs: \"%1 Bombs\",\r\n\t\t\tmShopBack: \"Leave shop (You have %1 coins)\",\r\n\t\t\tmShopIntro: \"Welcome to the item shop! Press enter on any item to buy it.\",\r\n\t\t\tshophyperjump: \"Hyper jumps: Allows collecting of hyperjump items, which save you from being hit by incoming cars\",\r\n\t\t\tshopgalleryMembership: \"Explosions gallery lifetime membership\",\r\n\t\t\tshopshortfuse: \"Short fuse: Divides the time it takes for bombs to explode by 3.\",\r\n\t\t\tgalleryLocked: \"The explosions gallery will remain locked until you buy a membership from the store. Darn!\",\r\n\t\t\tmBullet: \"Explosions gallery\",\r\n\t\t\tlocked: \"Locked!\",\r\n\t\t\tbulletIntro: \"Welcome to the explosions gallery! You have unlocked %1 out of %2 possible explosions. Press enter to go back to the main menu.\",\r\n\t\t\tiJumps: \"%1 hyperjumps\",\r\n\t\t\temptyInventory: \"Your inventory is empty\",\r\n\t\t\tmainMenu: \"Use arrows to move, enter to continue.\",\r\n\t\t\tmStart: \"Start Game\",\r\n\t\t\tmShop: \"Item Shop (You have %1 coins)\",\r\n\t\t\tlevel: \"Level\",\r\n\t\t\tupArrowMove: \"Press a number between 1 and 5 to start moving, 1 being the slowest speed possible. Letter s to check your score, h checks your health, l to check level.\",\r\n\t\t\tbonus1: \"Health bonus!\",\r\n\t\t\tbonus2: \"Hyper jump!\",\r\n\t\t\tselectVoice: \"%1 voices available, use the up and down arrows to select a voice, enter when you're done.\",\r\n\t\t\tmSelectVoice: \"text to speech voice\",\r\n\t\t\tmLang: 'Change language',\r\n\t\t\tnewUpdate: 'There is a new version available! You have version %1, version %2 is available.',\r\n\t\t\tmSapi: 'Use text to speech for the game',\r\n\t\t\tmReader: 'Use your screen reader for the game',\r\n\t\t\tnewRate: 'This is a text to speech rate test. Please press enter when done',\r\n\t\t\trating: 'Press right and left arrow keys to change the rate. Press enter when done',\r\n\t\t\tmRate: 'Change speech rate',\r\n\r\n\t\t\tK: 'king',\r\n\t\t\tQ: 'queen',\r\n\t\t\tA: 'ace',\r\n\t\t\tJ: 'jack',\r\n\t\t\tcspades: 'spades',\r\n\t\t\tcdiamonds: 'diamonds',\r\n\t\t\tcclubs: 'clubs',\r\n\t\t\tchearts: 'hearts',\r\n\t\t\tdq: 'This is a game of risk. You will risk losing %1 beatcoins. Continue?',\r\n\t\t\tlang: 'English',\r\n\t\t\tlangs: 'Select your language',\r\n\t\t\tmSelect: 'Please select',\r\n\t\t\tmBack: 'go back',\r\n\t\t\tmStart: 'Start Game',\r\n\t\t\tyes: 'Yes',\r\n\t\t\tno: 'no',\r\n\t\t\tok: 'ok',\r\n\t\t};\r\n\t\tthis.strings[2] = {\r\n\t\t\t// New Spanish\r\n\t\t\tnoBombs: \"No tienes bombas!\",\r\n\t\t\tshopbombs: \"Bombas, para hacer explotar los coches con la tecla b. Tambin podrs desbloquear los sonidos de las explosiones\",\r\n\t\t\tselectVoice: \"%1 voces disponibles. Usa las flechas y enter para cambiar la voz\",\r\n\t\t\tmSelectVoice: \"Voz de la tts\",\r\n\t\t\tmLang: \"Cambiar Idioma\",\r\n\t\t\tnewUpdate: \"Nueva versin disponible! Tienes la %1, la %2 est disponible\",\r\n\t\t\tmSapi: \"Usar SAPI para el juego\",\r\n\t\t\tmReader: \"Usar lector de pantalla\",\r\n\t\t\tnewRate: \"Prueba de la velocidad de la voz. Pulsa enter para dejarla as\",\r\n\t\t\trating: \"Pulsa las flechas izquierda y derecha para cambiar la velocidad y enter para aceptar\",\r\n\t\t\tmRate: \"Cambiar velocidad de la voz.\",\r\n\t\t\tmSelect: \"Por favor, selecciona\",\r\n\t\t\tmBack: \"Volver\",\r\n\t\t\tyes: \"s\",\r\n\t\t\tno: \"no\",\r\n\t\t\tok: \"aceptar\",\r\n\t\t\tiStoppers: \"Frenados %1\",\r\n\t\t\tcoins: \"Monedas\",\r\n\t\t\tiBombs: \"%1 Bombas\",\r\n\t\t\tmShopBack: \"Salir de la tienda (tienes %1 monedas)\",\r\n\t\t\tmShopIntro: \"Te doy la bienvenida a la tienda, donde puedes comprar mejoras para el juego. Pulsa nter en cualquier item para comprarlo.\",\r\n\t\t\tshophyperjump: \"Hipersaltos: Permite obtener los bonus de hipersalto, que saltarn los autos automticamente.\",\r\n\t\t\tshopgalleryMembership: \"Pase de oro para la galera de explosiones\",\r\n\t\t\tshopshortfuse: \"Mecha corta, divide el tiempo de explosin de las bombas por 3\",\r\n\t\t\tgalleryLocked: \"La galera de explosiones estar bloqueada hasta que compres el pase de oro. Vaya!\",\r\n\t\t\tmBullet: \"Galera de explosiones\",\r\n\t\t\tlocked: \"Bloqueado\",\r\n\t\t\tbulletIntro: \"Te doy la bienvenida a la galera de explosiones! Has desbloqueado %1 de %2 explosiones posibles. Pulsa enter para volver al men\",\r\n\t\t\tiJumps: \"Tienes %1 hipersaltos\",\r\n\t\t\temptyInventory: \"Tu inventario est vaco.\",\r\n\t\t\tupArrowMove: \"Pulsa un nmero del 1 al 5 para empezar a moverte, 1 el ms lento. S para ver la puntuacin, h para la energa, l para el nivel, i para el inventario.\",\r\n\t\t\tbonus1: \"Bonus de energa\",\r\n\t\t\tbonus2: \"Hipersalto\",\r\n\t\t\tbonus3: \"Ralentizado\",\r\n\t\t\tbonus4: \"Nada!\",\r\n\t\t\tbonus5: \"bomba\",\r\n\r\n\t\t\tmStart: \"Empezar juego\",\r\n\t\t\tmShop: \"Tienda (Tienes %1 monedas)\",\r\n\t\t\tmainMenu: \"Men Principal. Flechas para navegar, enter para continuar.\",\r\n\t\t};\r\n\t}\r\n\r\n\tget(what, rep = []) {\r\n\t\tlet str;\r\n\t\tif (typeof this.strings[lang][what] !== 'undefined') {\r\n\t\t\tstr = this.strings[lang][what];\r\n\t\t} else if (typeof this.strings[1][what] !== 'undefined') {\r\n\t\t\tstr = this.strings[1][what];\r\n\t\t} else {\r\n\t\t\treturn what;\r\n\t\t}\r\n\t\trep.forEach((v, i) => {\r\n\t\t\tconst i1 = Number(i) + 1;\r\n\t\t\tstr = str.replace('%' + i1, v);\r\n\t\t});\r\n\t\treturn str;\r\n\t}\r\n\r\n\tspeak(what, rep = []) {\r\n\t\tlet str;\r\n\t\tif (typeof this.strings[lang][what] !== 'undefined') {\r\n\t\t\tstr = this.strings[lang][what];\r\n\t\t} else if (typeof this.strings[1][what] !== 'undefined') {\r\n\t\t\tstr = this.strings[1][what];\r\n\t\t} else {\r\n\t\t\tspeech.speak(what);\r\n\t\t}\r\n\t\trep.forEach((v, i) => {\r\n\t\t\tconst i1 = Number(i) + 1;\r\n\t\t\tstr = str.replace('%' + i1, v);\r\n\t\t});\r\n\t\tspeech.speak(str);\r\n\t}\r\n\r\n\tasync check(lng) {\r\n\t\tconst len = utils.objSize(this.strings) - 2;\r\n\t\tfor (const i in this.strings[1]) {\r\n\t\t\tif (!this.strings[lng].hasOwnProperty(i)) {\r\n\t\t\t\tawait new ScrollingText(i + ': ' + this.strings[1][i]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\nexport var strings = new Strings();\r\n","import $ from 'jquery';\r\nconst EventEmitter = require('events');\r\n'use strict';\r\nclass KeyboardInput extends EventEmitter {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.keyDown = [];\r\n\t\tthis.justPressed = [];\r\n\t\tthis.chars = [];\r\n\t\tthis.justReleased = [];\r\n\t\tthis.justPressedEventCallback = null;\r\n\t\tthis.charEventCallback = null;\r\n\t}\r\n\r\n\tinit() {\r\n\t\tconst that = this;\r\n\t\t// \t\t$(document).keydown(function(event) { that.handleKeyDown(event); });\r\n\t\t// \t\t$(document).keyup(function(event) { that.handleKeyUp(event); });\r\n\t\tdocument.addEventListener('keydown', event => {\r\n\t\t\tthat.handleKeyDown(event);\r\n\t\t});\r\n\t\tdocument.addEventListener('keyup', event => {\r\n\t\t\tthat.handleKeyUp(event);\r\n\t\t});\r\n\t\tdocument.addEventListener('keypress', event => {\r\n\t\t\tthat.handleChar(event);\r\n\t\t});\r\n\t}\r\n\tpause() {\r\n\t\tthis.isPaused = true;\r\n\t}\r\n\tresume() {\r\n\t\tthis.isPaused = false;\r\n\t}\r\n\thandleKeyDown(event) {\r\n\t\tif (this.keyDown[event.which] != true || typeof this.keyDown[event.which] === 'undefined') {\r\n\t\t\tthis.keyDown[event.which] = true;\r\n\t\t\tthis.justPressed[event.which] = true;\r\n\t\t\tthis.emit(event.which);\r\n\t\t\tthis.justReleased[event.which] = false;\r\n\t\t\tif (typeof this.justPressedEventCallback !== 'undefined' && this.justPressedEventCallback != null) {\r\n\t\t\t\tthis.justPressedEventCallback(event.which);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\thandleChar(char) {\r\n\t\tif (char.which < 48 || char.which > 122) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (String.fromCharCode(char.which) != '') {\r\n\t\t\tthis.chars += String.fromCharCode(char.which);\r\n\t\t\tthis.emit(\"chr\" + String.fromCharCode(char.which));\r\n\t\t\tif (typeof this.charEventCallback !== 'undefined' && this.charEventCallback != null) {\r\n\t\t\t\tthis.charEventCallback(String.fromCharCode(char.which));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\thandleKeyUp(event) {\r\n\t\tif (this.keyDown[event.which] == true) {\r\n\t\t\tthis.keyDown[event.which] = false;\r\n\t\t\tthis.justPressed[event.which] = false;\r\n\t\t\tthis.justReleased[event.which] = true;\r\n\t\t\tthis.emit(\"!\" + event.which);\r\n\t\t}\r\n\t\tthis.chars = '';\r\n\t}\r\n\tdestroy() {\r\n\t\tthis.charEventCallback = null;\r\n\t\tthis.justPressedEventCallback = null;\r\n\t}\r\n\tisDown(event) {\r\n\t\tif (this.isPaused) return false;\r\n\t\treturn this.keyDown[event];\r\n\t}\r\n\r\n\tisJustPressed(event) {\r\n\t\tif (this.isPaused) return false;\r\n\t\tif (this.justPressed[event] == true) {\r\n\t\t\tthis.justPressed[event] = false;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tisJustReleased(event) {\r\n\t\tif (this.justReleased[event]) {\r\n\t\t\tthis.justReleased[event] = false;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tkeysDown() {\r\n\t\tconst kd = [];\r\n\t\tthis.keyDown.forEach((v, i) => {\r\n\t\t\tif (v) {\r\n\t\t\t\tkd.push(i);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn kd;\r\n\t}\r\n\r\n\tgetChars() {\r\n\t\tconst kd = this.chars;\r\n\t\tthis.chars = '';\r\n\t\treturn kd;\r\n\t}\r\n\r\n\tkeysPressed() {\r\n\t\tconst kd = [];\r\n\t\tthis.justPressed.forEach((v, i) => {\r\n\t\t\tif (v) {\r\n\t\t\t\tkd.push(i);\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.justPressed.splice();\r\n\t\treturn kd;\r\n\t}\r\n\r\n\treleaseAllKeys() {\r\n\r\n\t}\r\n\r\n\tkeysReleased() {\r\n\t\tconst kd = [];\r\n\t\tthis.justReleased.forEach((v, i) => {\r\n\t\t\tif (v) {\r\n\t\t\t\tkd.push(i);\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.justReleased.splice();\r\n\t\treturn kd;\r\n\t}\r\n}\r\n\r\nexport { KeyboardInput };\r\n","import \"babel-polyfill\";\r\nconst { app } = require('electron').remote;\n\tconst { exec } = require(\"child_process\");\r\nimport { report } from './main';\r\n\r\n'use strict';\r\n\r\nimport { strings } from './strings';\r\nimport { utils } from './utilities'\r\nimport { lang, ttsVoice, ttsRate } from './main';\r\nimport { KeyboardInput } from './input.js';\r\nimport { KeyEvent } from './keycodes';\r\nconst useWebTTS = true;\r\nimport Speech from 'speak-tts' // es6\r\nclass TTS {\r\n\tconstructor(webTTS = true) {\r\n\t\tthis.voices = []\r\n\t\tthis.speechController = new KeyboardInput();\r\n\t\tthis.speechController.init();\r\n\t\tthis.ducking = false;\r\n\t\tif (lang == 1) this.lang = \"en\";\r\n\t\tif (lang == 2) this.lang = \"es\";\r\n\t\tthis.webTTS = webTTS;\r\n\t\tthis.synth = new Speech()\r\n\t\tthis.rate = 3;\r\n\t\tthis.speechController.justPressedEventCallback = (key) => {\r\n\t\t\tif (this.interrupt) this.speak(\"\", false);\r\n\t\t\tif (key == KeyEvent.VK_SHIFT || key == KeyEvent.DOM_VK_ESCAPE) {\r\n\t\t\t\tthis.speak(\"\", false);\n\t\t\t\tif (this.childProcess) this.childProcess.kill()\n\t\t\t\tthis.unduck()\r\n\t\t\t}\n\t\t\tif (key == KeyEvent.VK_UP && this.speechController.isDown(KeyEvent.DOM_VK_SHIFT)) {\n//rate here\nthis.setRate(this.rate+1)\nstrings.speak('newRate');\n\t\t\t}\n\t\t\tif (key == KeyEvent.VK_DOWN && this.speechController.isDown(KeyEvent.DOM_VK_CONTROL)) {\n//rate here\nthis.setRate(this.rate+1)\nstrings.speak('newRate');\n\t\t\t}\n\t\t\t\n\t\t\t\r\n\t\t};\r\n\r\n\t\tthis.synth.init({\r\n\t\t\tlang: this.lang,\r\n\t\t\trate: this.rate,\r\n\t\t\tsplitSentences: false,\n\t\t\t'listeners': {\n\t\t\t}\n\r\n\t\t})\r\n\t\t\t.then((data) => {\n\t\t\t\tthis.voices = data.voices;\n\t\t\t}).catch(e => {\r\n\t\t\t\treport(e);\r\n\t\t\t})\r\n\t}\r\n\tsetLanguage(lang) {\n\r\n\t\ttry {\r\n\t\t\tif (lang == 1) this.lang = \"en\";\r\n\t\t\tif (lang == 2) this.lang = \"es\";\r\n\t\t\tthis.synth.setLanguage(this.lang)\n\t\t\tif (process.platform=='darwin') this.setVoice(null,true)\n\t\t\t\t\t\t\t\tconsole.log(\"default voice \",this.voice)\n\r\n\t\t} catch (err) {\r\n\t\t\treport(err);\r\n\t\t}\r\n\t}\r\n\tsetRate(r) {\r\n\t\tlet newRate = r;\r\n\t\tif (r < 1) newRate == 1;\r\n\t\tif (r > 10) newRate = 10;\r\n\t\tthis.rate = newRate;\r\n\t\tthis.synth.setRate(newRate);\r\n\t}\r\n\tspeak(text, queue = false) {\r\n\t\tlet sr = app.accessibilitySupportEnabled;\r\n\r\n\t\tif (sr) this.webTTS = false;\r\n\t\tif (!sr) this.webTTS = true;\n\t\tif (process.platform == 'darwin') this.webTTS=true\r\n\t\tif (this.webTTS) {\r\n\t\t\ttry {\n\t\t\t\tlet oldText=text;\r\n\t\t\t\tif (typeof text == \"number\") {\r\n\t\t\t\t\ttext = \" \"+text + \".\";\n\t\t\t\t\t//we need this because some voices fail to process numbers. Why? Don't ask me.\r\n\t\t\t\t}\n\t\t\t\tif (process.platform == 'darwin') {\n\t\t\t\t\tthis.speakUnthreaded(text)\n\t\t\t\t} else {\r\n\t\t\t\tthis.synth.speak({\r\n\t\t\t\t\ttext: text,\r\n\t\t\t\t\tqueue: queue,\r\n\t\t\t\t\tlisteners: {\r\n\t\t\t\t\t\tonstart: () => {\r\n\t\t\t\t\t\t\tthis.duck();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tonend: () => {\r\n\t\t\t\t\t\t\tthis.unduck();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tonerror: (err) => {\r\n\t\t\t\t\t\t\t//this.setVoice(null,true);\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t}\r\n\t\t\t\t})\n\t\t\t\t}\r\n\t\t\t} catch(e) {\n\t\t\t\tconsole.error(e)\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.duck();\r\n\t\t\tdocument.getElementById('speech').innerHTML = '';\r\n\t\t\tconst para = document.createElement('p');\r\n\t\t\tpara.appendChild(document.createTextNode(text));\r\n\t\t\tdocument.getElementById('speech').appendChild(para);\r\n\t\t}\r\n\t} // End speak()\r\n\r\n\tsetWebTTS(tts) {\r\n\t\tthis.webTTS = tts;\r\n\t}\r\n\r\n\tstop() {\r\n\t\tif (this.webTTS) {\r\n\t\t\tthis.synth.cancel();\r\n\t\t}\r\n\t}\r\n\tasync changeRate() {\r\n\t\tlet rate = speech.rate;\r\n\t\tconst inp = new KeyboardInput();\r\n\t\tinp.init();\r\n\t\tstrings.speak('rating');\r\n\t\twhile (!inp.isJustPressed(KeyEvent.DOM_VK_RETURN)) {\r\n\t\t\tawait utils.sleep(5);\r\n\t\t\tif (inp.isJustPressed(KeyEvent.DOM_VK_RIGHT)) {\r\n\t\t\t\trate += 0.25;\r\n\t\t\t\tif (rate > 10) rate = 10;\r\n\r\n\t\t\t\tspeech.setRate(rate)\r\n\t\t\t\tstrings.speak('newRate');\r\n\t\t\t}\r\n\t\t\tif (inp.isJustPressed(KeyEvent.DOM_VK_LEFT)) {\r\n\t\t\t\trate -= 0.25;\r\n\t\t\t\tif (rate < 1) rate = 1;\r\n\t\t\t\tspeech.setRate(rate)\r\n\t\t\t\tstrings.speak('newRate');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tchangeVoice(name) {\r\n\t\tlet voiceArray = []\r\n\t\tfor (var k in this.voices) {\r\n\t\t\tvoiceArray.push(this.voices[k].name)\r\n\t\t}\r\n\t\tif (voiceArray.includes(name)) {\r\n\t\t\tspeech.synth.setVoice(name);\n\t\t\tthis.voice=name\r\n\t\t}\r\n\r\n\t}\r\n\tsetVoice(cb, silent = false) {\r\n\t\t//what language do we want?\r\n\t\tlet wl = \"en\";\r\n\t\tif (lang == 1) wl = \"en\";\r\n\t\tif (lang == 2) wl = \"es\";\r\n\t\tlet voiceArray = []\r\n\t\tfor (var k in this.voices) {\r\n\t\t\t//get the first part of the voice languages\r\n\t\t\tlet vl = this.voices[k].lang.split(\"-\")[0]\r\n\t\t\t//do we want this language?\r\n\t\t\tif (vl == wl) {\r\n\t\t\t\tvoiceArray.push(this.voices[k].name)\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!silent) speech.speak(strings.get(\"selectVoice\", [voiceArray.length]));\r\n\t\tlet input = new KeyboardInput()\r\n\t\tlet selection = -1;\r\n\t\tinput.init();\r\n\t\tif (!silent) {\r\n\t\t\tinput.justPressedEventCallback = ((key) => {\r\n\t\t\t\tif (key == KeyEvent.DOM_VK_DOWN) {\r\n\t\t\t\t\tselection++;\r\n\t\t\t\t\tif (selection >= voiceArray.length) selection = 0;\r\n\t\t\t\t}\r\n\t\t\t\tif (key == KeyEvent.DOM_VK_UP) {\r\n\t\t\t\t\tselection--;\r\n\t\t\t\t\tif (selection <= -1) selection = voiceArray.length - 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (key != KeyEvent.DOM_VK_RETURN && (key == KeyEvent.DOM_VK_UP || key == KeyEvent.DOM_VK_DOWN)) { //dirty hack\r\n\t\t\t\t\tthis.synth.setVoice(voiceArray[selection]);\r\n\t\t\t\t\tspeech.speak(voiceArray[selection])\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t//it is enter\r\n\t\t\t\t\tif (selection != -1) { //don't crash if it's -1.\r\n\t\t\t\t\t\tinput.destroy();\r\n\t\t\t\t\t\tif (typeof cb !== \"undefined\") {\r\n\t\t\t\t\t\t\tcb(voiceArray[selection])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn voiceArray[selection]\r\n\t\t\t\t\t}\r\n\t\t\t\t}//enter action\r\n\t\t\t});//callback\r\n\t\t} //not silent\r\n\t\telse {\r\n\t\t\ttry {\r\n\t\t\t\tthis.synth.setVoice(voiceArray[0]);\n\t\t\t\tthis.voice=voiceArray[0]\r\n\t\t\t\treturn voiceArray[0];\r\n\t\t\t} catch (err) {\r\n\t\t\t\treport(err);\r\n\t\t\t\tthis.synth.setVoice(voiceArray[1]);\n\t\t\t\tthis.voice=voiceArray[1]\r\n\t\t\t\treturn voiceArray[1];\r\n\t\t\t} // catch block\r\n\t\t}//else\r\n\t}//function\r\n\tduck() {\r\n\t\tif (this.ducking) return;\r\n\t\tthis.ducking = true;\r\n\t\tif (typeof this.ducker !== \"undefined\") this.ducker.duck();\r\n\t}\r\n\tunduck() {\r\n\t\tthis.ducking = false;\r\n\t\tif (typeof this.ducker !== \"undefined\") this.ducker.unduck();\r\n\t}\r\nspeakUnthreaded(text) {\n\tlet rate=this.rate*100\nif (this.childProcess) this.childProcess.kill()\nthis.duck()\n\tthis.childProcess=exec('say \"'+text+'\" -r '+rate+ ' -v '+this.voice, (error, stdout, stderr) => {\n\t\tif (error) {\n\t\t\tthrow(`error: ${error.message}`);\n\t\t\treturn;\n\t\t}\n\t\tif (stderr) {\n\t\t\tconsole.log(`stderr: ${stderr}`);\n\t\t\treturn;\n\t\t}\n\t\tconsole.log(`stdout: ${stdout}`);\n\t\tthis.unduck();\n\t});\n}\r\n} // End class\r\nconst speech = new TTS(false);\r\nexport { TTS, speech };\r\n","import \"babel-polyfill\";\r\nimport { report } from './main';\r\nimport { speech } from './tts';\r\nimport panner from 'sono/effects/panner';\r\nconst EventEmitter = require('events');\r\nimport sono from 'sono';\r\nimport { KeyboardInput } from './input';\r\nimport { KeyEvent } from './keycodes';\r\nimport { utils } from './utilities';\r\npanner.defaults = {\r\n\tpanningModel: 'HRTF',\r\n\tmaxDistance: 50,\r\n};\r\nsono.playInBackground = true;\r\nvar playOnceTimer;\r\nclass SoundObjectItem extends EventEmitter {\r\n\tconstructor(file, callback = 0, tag = 0, stream = false) {\r\n\t\tsuper();\r\n\t\tthis.duckingFirstTime = true;\r\n\t\tthis.stream = stream;\r\n\t\tthis.panner = null;\r\n\t\tthis.fileName = file;\r\n\t\tif (typeof file == \"string\") {\r\n\t\t\tif (!stream) {\r\n\t\t\t\tthis.sound = sono.create({\r\n\t\t\t\t\tsrc: file,\r\n\t\t\t\t\tonComplete: () => { this.doneLoading(); }\r\n\t\t\t\t});\r\n\t\t\t\tthis.timeout = setTimeout(() => { this.checkProgress(); }, 2000);\r\n\t\t\t\tthis.loaded = false;\r\n\t\t\t\tthis.callback = callback;\r\n\t\t\t\tthis.tag = tag;\r\n\t\t\t}\r\n\t\t\tif (stream) {\r\n\t\t\t\tthis.loaded = true;\r\n\t\t\t\tthis.callback = callback;\r\n\t\t\t\tthis.tag = tag;\r\n\t\t\t\tthis.sound = sono.create(new Audio(file));\r\n\t\t\t\tthis.doneLoading();\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (typeof file == \"object\") {\r\n\t\t\tthis.sound = sono.create(\"\");\r\n\t\t\tthis.sound.data = file;\r\n\t\t\tthis.loaded = false;\r\n\t\t\tthis.callback = callback;\r\n\t\t\tthis.tag = tag;\r\n\t\t\tthis.doneLoading();\r\n\t\t}\r\n\r\n\r\n\t}\r\n\r\n\tget playbackRate() {\r\n\t\treturn this.sound.playbackRate\r\n\t}\r\n\r\n\tset playbackRate(v) {\r\n\t\treturn this.sound.playbackRate = v;\r\n\t}\r\n\tget pitch() {\r\n\t\treturn this.sound.playbackRate\r\n\t}\r\n\r\n\tset pitch(v) {\r\n\t\treturn this.sound.playbackRate = v;\r\n\t}\r\n\r\n\tset loop(v) {\r\n\t\tthis.sound.loop = v;\r\n\t}\r\n\r\n\tcheckProgress() {\r\n\t\tif (this.stream) return;\r\n\t\tif (this.sound.progress == 0) {\r\n\t\t\tthis.sound.destroy();\r\n\t\t\tthis.sound = sono.create({ src: this.fileName, onComplete: () => { this.doneLoading(); } }, this.stream);\r\n\t\t}\r\n\r\n\t\tif (this.sound.progress == 1) {\r\n\t\t\tthis.doneLoading();\r\n\t\t} else {\r\n\t\t\tthis.timeout = setTimeout(() => { this.checkProgress(); }, 500);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tdoneLoading() {\r\n\t\tif (!this.stream) clearTimeout(this.timeout);\r\n\t\tthis.loaded = true;\r\n\t\tif (this.callback != 0) {\r\n\t\t\tthis.callback();\r\n\t\t}\r\n\t}\r\n\treplay() {\r\n\t\tthis.sound.stop()\r\n\t\tthis.sound.play()\r\n\t}\r\n\tplay() {\r\n\t\t//sometimes, html element sounds complain about having a different connection, so wrap it in a try catch block.\r\n\t\ttry {\r\n\t\t\tthis.sound.play();\r\n\t\t} catch (err) {\r\n\t\t\t//report(err);\r\n\t\t\t//recreate the sound and replay\r\n\t\t\tif (this.stream) this.sound = sono.create(new Audio(this.fileName));\r\n\t\t\tif (!this.stream) this.sound = sono.create({\r\n\t\t\t\tsrc: this.fileName,\r\n\t\t\t\tonComplete: () => { this.doneLoading(); }\r\n\t\t\t});\r\n\t\t\tthis.sound.play();\r\n\t\t}\r\n\t}\r\n\tstop() {\r\n\t\tthis.sound.stop();\r\n\r\n\t}\r\n\tpause() {\r\n\t\tthis.sound.pause();\r\n\t}\r\n\tresume() {\r\n\t\tthis.sound.resume();\r\n\t}\r\n\tdestroy() {\r\n\t\ttry {\r\n\r\n\t\t\tthis.sound.destroy();\r\n\t\t} catch (err) {\r\n\r\n\t\t}\r\n\t}\r\n\tunload() { this.sound.destroy(); }\r\n\tduck(time) {\r\n\t\tif (this.duckingFirstTime) this.oldVolume = this.volume;\r\n\t\tthis.duckingFirstTime = false;\r\n\t\tthis.sound.fade(0.3, 0.15);\r\n\t}\r\n\tunduck(time) {\r\n\t\tthis.sound.fade(this.oldVolume, 0.15);\r\n\t}\r\n\tasync fade(time) {\r\n\t\tthis.sound.fade(0, time / 1000);\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.sound.stop();\r\n\t\t\t\tresolve('ok');\r\n\t\t\t}, time);// End\r\n\t\t});// Promise\r\n\r\n\t}\r\n\r\n\tpos(x, y, z) {\r\n\r\n\t}\r\n\r\n\tforcePlay() {\r\n\t\tthis.sound.stop();\r\n\t\tthis.sound.play();\r\n\t}\r\n\tasync playSync(die = false) {\r\n\t\tconst inp = new KeyboardInput();\r\n\t\tinp.init();\r\n\t\tthis.sound.play();\r\n\r\n\t\tinp.justPressedEventCallback = (evt => {\r\n\t\t\tif (evt == KeyEvent.DOM_VK_Q || evt == KeyEvent.DOM_VK_X || evt == KeyEvent.DOM_VK_ESCAPE || evt == KeyEvent.DOM_VK_SPACE || evt == KeyEvent.DOM_VK_ENTER) {\r\n\t\t\t\tthis.sound.stop();\r\n\t\t\t\tinp.justPressedEventCallback = null;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tthis.sound.once('ended', () => {\r\n\t\t\t\tthis.sound.removeAllListeners();\r\n\t\t\t\tif (die) this.sound.destroy();\r\n\t\t\t\tresolve('ok');\r\n\t\t\t\tinp.justPressedEventCallback = null;\r\n\t\t\t});// End\r\n\t\t\tthis.sound.once('stop', () => {\r\n\t\t\t\tthis.sound.removeAllListeners();\r\n\t\t\t\tif (die) this.sound.destroy();\r\n\t\t\t\tresolve('ok');\r\n\t\t\t\tinp.justPressedEventCallback = null;\r\n\t\t\t});// Stop\r\n\t\t});// Promise\r\n\t}\r\n\r\n\tget active() {\r\n\t\tif (!this.sound.loaded) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (this.sound.progress < 1) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (this.sound.loaded) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t}\r\n\tget playing() {\r\n\t\treturn this.sound.playing;\r\n\t}\r\n\r\n\tget pan() {\r\n\t\tif (!this.panner) {\r\n\t\t\tthis.panner = this.sound.effects.add(panner());\r\n\t\t\tthis.currentPan = 0;\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\treturn this.currentPan;\r\n\t}\r\n\r\n\tset pan(v) {\r\n\t\tif (!this.panner) {\r\n\t\t\tthis.panner = this.sound.effects.add(panner());\r\n\t\t}\r\n\t\tthis.currentPan = v;\r\n\t\treturn this.panner.set(v);\r\n\t}\r\n\tget volume() {\r\n\t\treturn this.sound.volume;\r\n\t}\r\n\tset volume(v) {\r\n\t\tthis.sound.volume = v;\r\n\t}\r\n\r\n\tseek(time) {\r\n\t\treturn this.sound.seek(time);\r\n\t}\r\n\r\n\tget currentTime() {\r\n\t\treturn this.sound.currentTime;\r\n\t}\r\n\r\n\tget duration() {\r\n\t\treturn this.sound.duration * 1000;\r\n\t}\r\n\r\n\tget position() {\r\n\t\treturn this.sound.currentTime;\r\n\t}\r\n\r\n\tset currentTime(v) {\r\n\t\treturn this.sound.seek(v);\r\n\t}\r\n\r\n}\r\n\r\nclass SoundObject {\r\n\tconstructor() {\r\n\t\tthis.sounds = new Array();\r\n\t\tthis.loadingQueue = false;\r\n\t\tthis.queueCallback = 0;\r\n\t\tthis.loadedSounds = 0;\r\n\t\tthis.loadingSounds = 0;\r\n\t\tthis.loadedCallback = 0;\r\n\t\tthis.queue = new Array();\r\n\t\tthis.queueLength = 0;\r\n\t\tthis.statusCallback = null;\r\n\t\tthis.directory = \"./sounds/\";\r\n\t\tthis.extension = \".ogg\";\r\n\t\tthis.oneShots = new Array();\r\n\t\tthis.debug = false;\r\n\r\n\r\n\t\tthis.oneShotSound = null;\r\n\t}\r\n\tsetStatusCallback(callback) {\r\n\t\tthis.statusCallback = callback;\r\n\t}\r\n\tfindSound(file) {\r\n\t\tfor (let i = 0; i < this.sounds.length; i++) {\r\n\t\t\tif (this.sounds[i].fileName == file && this.sounds[i].loaded) {\r\n\t\t\t\treturn this.sounds[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\tfindSoundIndex(file) {\r\n\t\tfor (const i in this.sounds) {\r\n\t\t\tif (this.sounds[i].fileName == file) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t}\r\n\r\n\r\n\tresetQueuedInstance() {\r\n\t\tfor (let i = 0; i < this.sounds.length; i++) {\r\n\t\t\tif (typeof this.sounds[i] != \"undefined\") {\r\n\t\t\t\tif (this.sounds[i].tag == 1) {\r\n\t\t\t\t\tthis.sounds[i].sound.destroy();\r\n\t\t\t\t\tthis.sounds.splice(i, 1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.loadingQueue = false;\r\n\t\tthis.queueCallback = 0;\r\n\t\tthis.loadedSounds = 0;\r\n\t\tthis.loadingSounds = 0;\r\n\t\tthis.loadedCallback = 0;\r\n\t\tthis.queue = new Array();\r\n\t\tthis.queueLength = 0;\r\n\t\tthis.statusCallback = null;\r\n\t}\r\n\r\n\r\n\r\n\tcreate(file, stream = false) {\r\n\t\tfile = this.directory + file + this.extension;\r\n\t\tlet found = -1;\r\n\t\tfound = this.findSound(file);\r\n\t\tlet returnObject = null;\r\n\t\tif (found == -1 || found.sound.data == null) {\r\n\t\t\treturnObject = new SoundObjectItem(file, () => { if (!stream) this.doneLoading(); }, 0, stream);\r\n\t\t\tthis.sounds.push(returnObject);\r\n\t\t} else {\r\n\t\t\treturnObject = new SoundObjectItem(found.sound.data, () => { if (!stream) this.doneLoading(); }, 0, stream);\r\n\t\t\treturnObject.fileName = found.fileName;\r\n\t\t}\r\n\t\treturnObject.fileName = file; //otherwise html element fileNames get fucked up.\r\n\t\treturn returnObject;\r\n\t}\r\n\tasync loadQueueSync() {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tso.setQueueCallback(() => {\r\n\t\t\t\tresolve(true);\r\n\t\t\t});\r\n\t\t\tso.loadQueue();\r\n\t\t});\r\n\t}\r\n\tasync createSync(file, stream = false) {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tfile = this.directory + file + this.extension;\r\n\t\t\tlet found = -1;\r\n\t\t\tfound = this.findSound(file);\r\n\t\t\tlet returnObject = null;\r\n\t\t\tif (found == -1 || found.sound.data == null) {\r\n\t\t\t\treturnObject = new SoundObjectItem(file, () => { if (!stream) this.doneLoading(); }, 0, stream);\r\n\t\t\t\tthis.sounds.push(returnObject);\r\n\t\t\t\tif (stream) resolve(returnObject);\r\n\t\t\t} else {\r\n\t\t\t\treturnObject = new SoundObjectItem(found.sound.data, () => { if (!stream) this.doneLoading(); }, 0, stream);\r\n\t\t\t\tresolve(returnObject);\r\n\t\t\t}\r\n\t\t\treturnObject.fileName = file; //otherwise html element fileNames get fucked up.\r\n\t\t\tif (stream) resolve(returnObject);\r\n\t\t\tif (!stream) {\r\n\t\t\t\treturnObject.sound.once('loaded', () => {\r\n\t\t\t\t\tresolve(returnObject);\r\n\t\t\t\t\tthis.doneLoading();\r\n\t\t\t\t});// End\r\n\t\t\t}//stream\r\n\t\t});// Promise\r\n\t}\r\n\tasync playSync(file) {\r\n\t\tlet snd = await so.createSync(file);\r\n\t\tawait snd.playSync();\r\n\t\tsnd.destroy();\r\n\t}\r\n\r\n\tenqueue(file, stream = false) {\r\n\t\tfile = this.directory + file + this.extension;\r\n\t\tthis.queue.push({ file, stream });\r\n\t\tthis.queueLength = this.queue.length;\r\n\t}\r\n\r\n\tloadQueue() {\r\n\r\n\t\tthis.handleQueue();\r\n\t\tthis.loadingQueue = true;\r\n\r\n\t}\r\n\tsetQueueCallback(callback) {\r\n\t\tthis.queueCallback = callback;\r\n\t}\r\n\tresetQueue() {\r\n\t\tthis.queue = [];\r\n\t\tthis.loadingQueue = false;\r\n\t}\r\n\thandleQueue() {\r\n\t\tif (this.queue.length > 0) {\r\n\t\t\tif (typeof this.statusCallback != \"undefined\" && this.statusCallback != null) {\r\n\t\t\t\tthis.statusCallback(1 - this.queue.length / this.queueLength);\r\n\t\t\t}\r\n\t\t\tif (this.findSound(this.queue[0].file) != -1) {\r\n\t\t\t\tthis.queue.splice(0, 1);\r\n\t\t\t\tthis.handleQueue();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet file = this.queue[0].file;\r\n\t\t\tlet stream = this.queue[0].stream;\r\n\t\t\tthis.queue.splice(0, 1);\r\n\t\t\tthis.sounds.push(new SoundObjectItem(file, () => { this.handleQueue(); }, 1, stream));\r\n\r\n\t\t} else {\r\n\t\t\tthis.loadingQueue = false;\r\n\t\t\tif (typeof this.queueCallback != \"undefined\" && this.queueCallback != 0) {\r\n\t\t\t\tthis.queueCallback();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\tsetCallback(callback) {\r\n\t\tthis.loadedCallback = callback;\r\n\t}\r\n\tdoneLoading() {\r\n\t\tlet result = this.isLoading();\r\n\r\n\t\tif (result == 1) {\r\n\r\n\t\t\tif (typeof this.loadedCallback != \"undefined\" && this.loadedCallback != 0 && this.loadedCallback != null) {\r\n\t\t\t\tthis.loadedCallback();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tisLoading() {\r\n\t\tlet loading = 0;\r\n\t\tthis.loadedSounds = 0;\r\n\t\tthis.loadingSounds = 0;\r\n\t\tlet stillLoading = new Array();\r\n\t\tfor (let i = 0; i < this.sounds.length; i++) {\r\n\t\t\tif (typeof this.sounds[i] != \"undefined\") {\r\n\t\t\t\tif (this.sounds[i].loaded == false) {\r\n\t\t\t\t\tthis.loadingSounds++;\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.loadedSounds++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this.loadedSounds / this.sounds.length;\r\n\t}\r\n\r\n\tplayOnce(file) {\r\n\t\tthis.oneShotSound = this.create(file).sound;\r\n\t\tthis.oneShotSound.stop();\r\n\t\tthis.oneShotSound.play();\r\n\t\tthis.oneShotSound.on(\"ended\", () => {\r\n\t\t\tif (this.oneShotSound.playing == false) this.oneShotSound.destroy();\r\n\t\t});\r\n\r\n\t}\r\n\tdestroy(file, callback = 0) {\r\n\t\tlet noMore = false;\r\n\t\tconst filename = this.directory + file + this.extension;\r\n\t\twhile (!noMore) {\r\n\t\t\tconst found = this.findSoundIndex(filename);\r\n\t\t\tif (found == -1) {\r\n\t\t\t\tnoMore = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.sounds[found].sound.unload();\r\n\t\t\t\tthis.sounds.splice(found, 1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (callback != 0) {\r\n\t\t\tcallback();\r\n\t\t}\r\n\t}\r\n\r\n\tkill(callback = 0) {\r\n\t\twhile (this.sounds.length > 0) {\r\n\t\t\tthis.sounds.splice(0, 1);\r\n\t\t}\r\n\r\n\t\tsono.destroyAll();\r\n\t\tif (callback != 0) {\r\n\t\t\tcallback();\r\n\t\t}\r\n\t}\r\n\r\n}\r\nexport let so = new SoundObject();","import \"babel-polyfill\";\r\n'use strict';\r\nimport $ from 'jquery';\r\nimport {KeyEvent} from './keycodes';\r\nimport {so} from './soundObject';\r\nimport {speech} from './tts';\r\nimport copy from 'copy-to-clipboard';\r\nif (runningText == undefined) {\r\n\tvar runningText = 0;\r\n}\r\nclass ScrollingText {\r\n\tconstructor(text, delimiter = '\\n', callback = 0) {\r\n\t\tthis.callback = callback;\r\n\r\n\t\tthis.text = text;\r\n\t\tthis.delimiter = delimiter;\r\n\t\tthis.splitText = this.text.split(delimiter);\r\n\t\tthis.currentLine = 0;\r\n\t\tthis.sndOpen = so.create('ui/textOpen');\r\n\t\tthis.sndContinue = so.create('ui/textScroll');\r\n\t\tthis.sndClose = so.create('ui/textClose');\r\n\t\tconst id = document.getElementById('touchArea');\r\n\t\t// This.hammer = new Hammer(id);\r\n\t\tthis.init();\r\n\t\tif (this.callback == 0) {\r\n\t\t\treturn this.prom = new Promise(resolve => {\r\n\t\t\t\t\tthis.res = resolve;\r\n\t\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tinit() {\r\n\t\tconst that = this;\r\n\t\trunningText = this;\r\n\t\tdocument.addEventListener('keydown', this.handleKeys);\r\n\t\t// This.hammer.on(\"swipeleft swiperight\", function() { that.handleTap(0); });\r\n\t\t// this.hammer.on(\"tap\", function() { that.handleTap(1); });\r\n\t\tthis.sndOpen.play();\r\n\t\tthis.currentLine = 0;\r\n\t\tthis.readCurrentLine();\r\n\t}\r\n\r\n\thandleKeys(event) {\r\n\t\tswitch (event.which) {\r\n\t\t\tcase KeyEvent.DOM_VK_UP:\r\n\t\t\tcase KeyEvent.DOM_VK_DOWN:\r\n\t\t\tcase KeyEvent.DOM_VK_LEFT:\r\n\t\t\tcase KeyEvent.DOM_VK_RIGHT:\r\n\t\t\t\trunningText.readCurrentLine();\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase KeyEvent.DOM_VK_C:\r\n\t\t\t\trunningText.copyCurrentLine();\r\n\t\t\t\tbreak;\r\n\t\t\tcase KeyEvent.DOM_VK_RETURN:\r\n\t\t\t\trunningText.advance();\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\thandleTap(action) {\r\n\t\tif (action == 0) {\r\n\t\t\tthis.readCurrentLine();\r\n\t\t}\r\n\r\n\t\tif (action == 1) {\r\n\t\t\tthis.advance();\r\n\t\t}\r\n\t}\r\n\r\n\treadCurrentLine() {\r\n\t\tif (this.splitText[this.currentLine][0] == '!') {\r\n\t\t\tconst str = this.splitText[this.currentLine].substr(1);\r\n\t\t\tconst snd = so.create(str, true);\r\n\t\t\tsnd.play();\r\n\t\t\tsnd.sound.once('end', () => {\r\n\t\t\t\t\tthis.advance();\r\n\t\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tspeech.speak(this.splitText[this.currentLine]);\r\n\t\t}\r\n\t}\r\ncopyCurrentLine() {\r\n\t\t\tcopy(this.splitText[this.currentLine]);\t\r\n\t\t\tthis.advance();\r\n}\r\n\r\n\tadvance() {\r\n\t\tif (this.currentLine < this.splitText.length - 1) {\r\n\t\t\tthis.currentLine++;\r\n\t\t\tthis.sndContinue.play();\r\n\t\t\tthis.readCurrentLine();\r\n\t\t} else {\r\n\t\t\tthis.sndClose.play();\r\n\t\t\tthis.sndClose.unload();\r\n\t\t\tthis.sndOpen.unload();\r\n\t\t\tthis.sndContinue.unload();\r\n\t\t\tdocument.removeEventListener('keydown', this.handleKeys);\r\n\t\t\t//\t\t\tThis.hammer.unload();\r\n\t\t\tif (this.callback != 0) {\r\n\t\t\t\tthis.callback();\r\n\t\t\t} else {\r\n\t\t\t\tthis.res();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\nexport {ScrollingText, speech};\r\n","'use strict';\r\nimport sono from 'sono';\r\nimport { so } from './soundObject';\r\nimport panner from 'sono/effects/panner';\r\npanner.defaults = {\r\n\tpanningModel: 'HRTF',\r\n\tmaxDistance: 50,\r\n};\r\n/** Simple wrapper for agk-soundobject to quickly create 3D sound sources.\r\n* @constructor\r\n\t* @param {string} file - the path to the file without base directory and extension.\r\n\t* @param {number} x - Initial X coordinate of the sound\r\n\t* @param {number} y - Initial Y coordinate of the sound\r\n\t* @param {number} z - Initial Z coordinate of the sound\r\n\t* @param {boolean} loop - True if the sound should loop\r\n\t* @return {object} A Sound Source object\r\n*/\r\nexport class SoundSource {\r\n\tconstructor(file, x = 0, y = 0, z = 0) {\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\t\tthis.sound = son.create(file);\r\n\t\tthis.pan = this.sound.effects.add(panner());\r\n\t\tthis.pos(this.x, this.y, this.z);\r\n\t\tthis.rate = 1;\r\n\t\tthis.speed = 0;\r\n\t\tthis.minRate = 0.8;\r\n\t\tthis.maxRate = 1.2;\r\n\t\tthis.toDestroy = false;\r\n\t\tthis.rateShiftSpeed = 0.015;\r\n\t\tthis.sound.currentPosition = 0;\r\n\t}\r\n\tset loop(v) {\r\n\t\tthis.sound.loop = v;\r\n\t}\r\n\t/** Plays the sound source */\r\n\tplay() {\r\n\t\t// This.sound.seek(0);\r\n\t\tthis.sound.play();\r\n\t}\r\n\r\n\t/** Positions the sound source in 3D space.\r\n\t* @param {number} x - The new X coordinate of the sound\r\n\t* @param {number} y - The new Y coordinate of the sound\r\n\t* @param {number} z - The new Z coordinate of the sound\r\n*/\r\n\tpos(x, y, z) {\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\t\tthis.pan.setPosition(x, y, z);\r\n\t}\r\n\r\n\t/** Empty update method */\r\n\tupdate() {\r\n\t}\r\n}","import { SoundSource } from './soundSource.js';\r\nimport { so } from './soundObject.js';\r\n\r\nclass SoundHandler {\r\n\tconstructor(directional = false) {\r\n\t\tthis.staticSounds = [];\r\n\t\tthis.dynamicSounds = [];\r\n\t\tthis.currentDynamicSound = 0;\r\n\t\tthis.maxDynamicSounds = 512;\r\n\t\tthis.currentStaticSound = 0;\r\n\t\tthis.maxStaticSounds = 512;\r\n\t\tthis.reuseSounds = true;\r\n\t\tthis.x = 0;\r\n\t\tthis.y = 0;\r\n\t\tthis.z = 0;\r\n\t\tthis.directional = directional;\r\n\t}\r\n\r\n\tplayStatic(file, loop = 1, slot = -1, stream = false) {\r\n\t\tif (slot = -1) {\r\n\t\t\tslot = this.findFreeStaticSlot();\r\n\t\t}\r\n\t\tthis.staticSounds[slot] = new SoundItem(file, this.directional, stream);\r\n\t\tif (loop == 1) {\r\n\t\t\tthis.staticSounds[slot].sound.loop = true;\r\n\t\t}\r\n\t\tthis.staticSounds[slot].sound.play();\r\n\t\treturn slot;\r\n\t}\r\n\r\n\tfindFreeStaticSlot() {\r\n\t\tfor (let i = 0; i < this.maxStaticSounds; i++) {\r\n\t\t\tif (this.staticSounds[i] == -1 || typeof this.staticSounds[i] === 'undefined') {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.currentStaticSound < this.maxStaticSounds) {\r\n\t\t\tthis.currentStaticSound++;\r\n\t\t\treturn this.currentStaticSound;\r\n\t\t}\r\n\t\tthis.currentStaticSound = 0;\r\n\t\treturn this.currentStaticSound;\r\n\t}\r\n\r\n\tfindFreeDynamicSlot() {\r\n\t\tfor (let i = 0; i < this.maxDynamicSounds; i++) {\r\n\t\t\tif (this.dynamicSounds[i] == -1 || typeof this.dynamicSounds[i] === 'undefined') {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.currentDynamicSound < this.maxDynamicSounds) {\r\n\t\t\tthis.currentDynamicSound++;\r\n\t\t\treturn this.currentDynamicSound;\r\n\t\t}\r\n\t\tthis.currentDynamicSound = 0;\r\n\t\treturn this.currentDynamicSound;\r\n\t}\r\n\r\n\tfindDynamicSound(file) {\r\n\t\tfor (let i = 0; i < this.dynamicSounds.length; i++) {\r\n\t\t\tif (this.dynamicSounds[i].file == file) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\r\n\tplay(file) {\r\n\t\tlet slot = 0;\r\n\r\n\t\tlet reuse = 0;\r\n\t\tif (this.reuseSounds) {\r\n\t\t\tslot = this.findDynamicSound(file);\r\n\t\t\treuse = true;\r\n\t\t}\r\n\t\tif (slot == -1 || this.reuseSounds == false) {\r\n\t\t\tslot = this.findFreeDynamicSlot();\r\n\t\t\treuse = false;\r\n\t\t}\r\n\t\tif (typeof this.dynamicSounds[slot] === 'undefined') {\r\n\t\t\tif (reuse == false) {\r\n\t\t\t\tthis.dynamicSounds[slot] = new SoundItem(file, this.directional);\r\n\t\t\t}\r\n\t\t} else if (reuse == false) {\r\n\t\t\tthis.dynamicSounds[slot].sound.destroy();\r\n\t\t\tthis.dynamicSounds[slot] = new SoundItem(file, directional);\r\n\t\t}\r\n\t\tthis.dynamicSounds[slot].sound.play();\r\n\t}\r\n\r\n\tupdate(position) {\r\n\t\tif (this.directional == true) {\r\n\t\t\tfor (let i = 0; i < this.dynamicSounds.length; i++) {\r\n\t\t\t\tthis.dynamicSounds[i].sound.pos(position.x, position.y, position.z);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdestroy() {\r\n\t\tfor (var i = 0; i < this.dynamicSounds.length; i++) {\r\n\t\t\tthis.dynamicSounds[i].destroy();\r\n\t\t\tthis.dynamicSounds.splice(i, 1);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < this.staticSounds.length; i++) {\r\n\t\t\tthis.staticSounds[i].destroy();\r\n\t\t\tthis.staticSounds.splice(i, 1);\r\n\t\t}\r\n\t}\r\n}\r\nclass SoundItem {\r\n\tconstructor(file, threeD = false, stream = false) {\r\n\t\tthis.file = file;\r\n\t\tthis.threeD = threeD;\r\n\t\tif (this.threeD == true) {\r\n\t\t\tthis.sound = new SoundSource(file, 0, 0, 0);\r\n\t\t} else {\r\n\t\t\tthis.sound = so.create(file, stream);\r\n\t\t}\r\n\t}\r\n\r\n\tdestroy() {\r\n\t\tthis.sound.destroy();\r\n\t}\r\n}\r\n\r\nexport { SoundHandler };\r\n","'use strict';\r\nimport { so } from './soundObject';\r\n\r\nimport { KeyboardInput } from './input';\r\nimport { KeyEvent } from './keycodes';\r\nimport { speech } from './tts';\r\nclass LanguageSelector {\r\n\tconstructor(element, callback) {\r\n\t\tthis.langs = [];\r\n\t\tthis.input = new KeyboardInput();\r\n\t\tthis.input.init();\r\n\t\tthis.langs.push(\"select a language. Selecciona un idioma.\");\r\n\t\tthis.langs.push(\"I want to play in English\");\r\n\t\tthis.langs.push(\"Quiero jugar en espaol.\");\r\n\t\tthis.id = document.getElementById(element);\r\n\t\tthis.callback = callback;\r\n\t\tthis.container = document.createElement('div');\r\n\t\tthis.buttons = [];\r\n\t\tthis.buttons[0] = document.createElement('div');\r\n\t\tthis.buttons[0].innerHTML = this.langs[0];\r\n\t\tthis.container.appendChild(this.buttons[0]);\r\n\t\tfor (let i = 1; i < this.langs.length; i++) {\r\n\t\t\tthis.buttons[i] = document.createElement('input');\r\n\t\t\tthis.buttons[i].type = 'button';\r\n\t\t\tthis.buttons[i].value = this.langs[i];\r\n\t\t\tthis.buttons[i].addEventListener('click', () => {\r\n\t\t\t\tthis.sound.stop()\r\n\t\t\t\tthis.callback(i);\r\n\t\t\t\tthis.container.innerHTML = '';\r\n\t\t\t\tthis.input.removeAllListeners();\r\n\t\t\t\tdocument.getElementById(\"app\").focus();\r\n\t\t\t});\r\n\t\t\tthis.buttons[i].addEventListener('focus', () => {\r\n\t\t\t\tthis.sound.stop();\r\n\t\t\t\tspeech.setLanguage(i);\r\n\t\t\t\tspeech.speak(this.langs[i]);\r\n\t\t\t});\r\n\t\t\tthis.container.appendChild(this.buttons[i]);\r\n\t\t\tthis.input.once(\"chr\" + i, () => {\r\n\t\t\t\tthis.sound.stop()\r\n\t\t\t\tthis.callback(i);\r\n\t\t\t\tthis.container.innerHTML = '';\r\n\t\t\t\tthis.input.removeAllListeners();\r\n\t\t\t\tdocument.getElementById(\"app\").focus();\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.id.appendChild(this.container);\r\n\t\tthis.sound = so.create(\"ui/langSelect\");\r\n\t\tthis.sound.play();\r\n\r\n\t}\r\n}\r\nmodule.exports.LanguageSelector = LanguageSelector;\r\n","function Timer(callbacks, step) {\r\n\tlet last = 0;\r\n\tlet active = false;\r\n\tlet acc = 0;\r\n\tlet tick = 0;\r\n\tlet inc = step || 1 / 120;\r\n\tlet frameId;\r\n\r\n\tfunction onFrame(time) {\r\n\t\tif (last !== null) {\r\n\t\t\tacc += (time - last) / 1000;\r\n\t\t\twhile (acc > inc) {\r\n\t\t\t\tcallbacks.update(inc, tick);\r\n\t\t\t\ttick += 1;\r\n\t\t\t\tacc -= inc;\r\n\t\t\t}\r\n\t\t}\r\n\t\tlast = time;\r\n\t\tcallbacks.render();\r\n\t\tif (active) {\r\n\t\t\tframeId = requestAnimationFrame(onFrame);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction start() {\r\n\t\tlast = null;\r\n\t\tactive = true;\r\n\t\tframeId = requestAnimationFrame(onFrame);\r\n\t}\r\n\r\n\tfunction stop() {\r\n\t\tactive = false;\r\n\t\tcancelAnimationFrame(frameId);\r\n\t}\r\n\tfunction change(value) {\r\n\t\tinc = value || 1 / 60;\r\n\t\tacc = inc;\r\n\t\ttick = 0;\r\n\t\tstop();\r\n\t\tstart();\r\n\t}\r\n\treturn {\r\n\t\tstart,\r\n\t\t\tstop,\r\n\t\t\tchange\r\n\t};\r\n}\r\n\r\nmodule.exports = Timer;\r\n","const EventEmitter = require('events')\r\nexport class GameObject extends EventEmitter {\r\n\r\n    constructor(world, sound, x, y, z, width, height, depth) {\r\n        super()\r\n        this.world = world\r\n        this.alive = true\r\n        this.x = x\r\n        this.y = y\r\n        this.z = z\r\n        if (sound != \"\") {\r\n            this.sound = document.createElement(\"audio\")\r\n            this.sound.src = \"./sounds/\" + sound + \".ogg\"\r\n            this.mediaSource = this.world.context.createMediaElementSource(this.sound)\r\n            this.source = this.world.scene.createSource();\r\n            this.source.sourceWidth = width;\r\n            this.source.sourceHeight = height\r\n            this.source.sourceDepth = depth;\r\n            this.mediaSource.connect(this.source.input);\r\n            this.source.setPosition(this.x, this.y, this.z)\r\n            this.sound.play()\r\n            this.sound.loop = true\r\n\r\n        }\r\n    }\r\n    update() {\r\n\r\n    }\r\n    destroy() {\r\nthis.alive=false\r\n        if (this.sound != \"\") {\r\n            this.sound.removeAttribute(\"src\");\r\n            this.sound.load()\r\n        }\r\n    }\r\n}","import { GameObject } from './gameObject'\r\nimport { utils } from './utilities'\r\nimport { speech } from './tts'\r\nexport class Item extends GameObject {\r\n    constructor(world, x, y, sound) {\r\n        super(world, sound, x, y, 0, 1, 1, 1)\r\n        this.world.player.on(\"step\" + this.y, (() => {\r\n            if (this.world.player.x == this.x) this.step()\r\n        }))\r\n        this.world.player.on(\"step\" + (this.y + 1), (() => {\r\n            this.destroy()\r\n        }))\r\n        this.world.player.on(\"x\" + this.x, (() => {\r\n            if (!this.alive) return;\r\n            let distance = Math.round(utils.distance(this.world.player.x, this.world.player.y, this.x, this.y))\r\n            if (distance < 8) {\r\n                this.world.player.target.replay()\r\n            }\r\n        }))\r\n    }\r\n    step() {\r\n    }\r\n    update() {\r\n\r\n    }\r\n}","import { Item } from './item'\r\nimport { data, save } from './main'\r\nimport { speech } from './tts'\r\nexport class Coin extends Item {\r\n    constructor(world, x, y) {\r\n        super(world, x, y, \"loop/coin\")\r\n    }\r\n    step() {\r\n        data.coins += this.world.game.level\r\n        this.world.game.pool.playStatic(\"player/getCoin\", 0)\r\n        save()\r\n        this.alive = false\r\n    }\r\n}","import { GameObject } from './gameObject'\r\nimport { utils } from './utilities'\r\nimport { speech } from './scrollingText';\r\n\r\nexport class Tile {\r\n    constructor(world, pos, type, name) {\r\n        this.y = pos;\r\n        this.type = type;\r\n        this.hasSomething = false\r\n        this.world = world;\r\n        this.name = name;\r\n        this.alive = true\r\n        this.world.player.on(\"step\" + this.y, (() => {\r\n            this.step()\r\n        }))\r\n    }\r\n    step() {\r\n        let scoreType = this.type\r\n        if (this.type == 0) scoreType = 1;\r\n        let score = scoreType * this.world.player.currentSpeed\r\n        if (this.type != 2) {\r\n            clearInterval(this.world.player.scoreTimeout)\r\n            this.world.player.levelCap = this.world.game.level\r\n            if (this.world.player.levelCap > 15) this.levelCap = 15\r\n\r\n        }\r\n        this.world.game.pool.playStatic(\"steps/\" + this.name + utils.randomInt(1, 3), 0)\r\n        this.world.player.tileType = this.type\r\n    }\r\n    update() {\r\n\r\n    }\r\n    destroy() {\r\n    }\r\n}","import { GameObject } from './gameObject'\r\nimport { utils } from './utilities'\r\nimport { Tile } from './tile'\r\nexport class Street extends Tile {\r\n    constructor(world, pos) {\r\n        super(world, pos, 0, \"street\")\r\n    }\r\n    step() {\r\n        super.step()\r\n    }\r\n}","import { GameObject } from './gameObject'\r\nimport { Tile } from './tile'\r\nimport { speech } from './tts'\r\nexport class Objective extends Tile {\r\n    constructor(world, pos) {\r\n        super(world, pos, 2, \"objective\")\r\n    }\r\n    destroy() {\r\n\r\n    }\r\n    step() {\r\n        super.step()\r\n        if (this.world.game.canLevel) {\r\n            this.world.player.y = this.world.player.nearestStreet;\r\n            this.world.scene.setListenerPosition(this.world.player.x, this.world.player.y, this.world.player.z)\r\n            this.world.game.pool.playStatic(\"level_forcefield\", false)\r\n            return;\r\n        }\r\n        this.world.game.pool.playStatic(\"steps/objective\", 0)\r\n        this.world.player.scoreTimeout = setInterval(() => {\r\n            this.world.player.scoreDeduct()\r\n        }, 1100 - (this.world.player.levelCap * 50))\r\n        this.world.generateTiles()\r\n        this.world.game.score += (250)\r\n        this.world.player.slowDown(10)\r\n    }\r\n}","import { GameObject } from './gameObject'\r\nimport { utils } from './utilities'\r\nimport { speech } from './tts'\r\nexport class StationaryObject extends GameObject {\r\n    constructor(world, y, sound, loop = false, x = 0) {\r\n        super(world, sound, x, y, 0, 1, 1, 1)\r\n        this.sound.loop = loop\r\n    }\r\n}","import { GameObject } from \"./gameObject\";\r\nimport { StationaryObject } from './stationaryObject'\r\nimport { utils } from \"./utilities\";\r\nimport { speech } from \"./tts\";\r\nimport { save, data, content } from \"./main\";\r\nexport class Car extends GameObject {\r\n  constructor(\r\n    world,\r\n    tile,\r\n    x,\r\n    y,\r\n    width,\r\n    height,\r\n    depth,\r\n    sound = \"car\",\r\n    speed,\r\n    side,\r\n    z = 1,\r\n    canHorn = \"\",\r\n    name, blowUp = \"\",\r\n    obj\r\n  ) {\r\n    super(world, sound, x, y, z, width, height, depth);\r\n    this.blowUpSound = blowUp\r\n    this.objective = obj;\r\n    this.world.player.on(\"blowup\", (() => {\r\n\r\n      if (!this.alive || (this.x < -7 || this.x > 7)) return;\r\n      this.alive = false;\r\n\r\n      if (this.blowUpSound != \"\") new StationaryObject(this.world, this.world.player.y + 2, \"blowup/\" + this.blowUpSound, false, this.x)\r\n      if (this.blowUpSound == \"\") new StationaryObject(this.world, this.world.player.y + 2, \"blowup/generic\", false, this.x)\r\n      if (typeof data.bulletGallery === \"undefined\") {\r\n        data.bulletGallery = {}\r\n      }\r\n      if (this.blowUpSound != \"\") data.bulletGallery[this.blowUpSound] = true\r\n      save()\r\n      if (this.canHorn != \"\") {\r\n        this.hornSound.removeAttribute(\"src\")\r\n        this.hornSound.load()\r\n      }\r\n      this.tile.hasSomething = false;\r\n      this.world.game.score += (this.speed * 550)\r\n    }));\r\n\r\n    this.name = name;\r\n    this.speed = speed;\r\n    this.passed = false;\r\n    this.side = side;\r\n    this.tile = tile;\r\n    this.tile.hasSomething = true;\r\n    this.canHorn = canHorn;\r\n    if (this.canHorn != \"\") {\r\n      if (this.canHorn == 1) this.canHorn = this.name;\r\n      this.hornSound = document.createElement(\"audio\");\r\n      this.hornSound.src = \"./sounds/horn/\" + this.name + \".ogg\";\r\n      this.hornSource = this.world.context.createMediaElementSource(\r\n        this.hornSound\r\n      );\r\n      this.hornResonanceSource = this.world.scene.createSource();\r\n      this.hornSource.connect(this.hornResonanceSource.input);\r\n      //horn follows the player because a it plays only if player is on the road and b we want the player to feel trapped on the road by this honking car since that's what happens\r\n      this.hornResonanceSource.setPosition(this.x, this.world.player.y, this.z);\r\n      this.hornSound.loop = true;\r\n    }\r\n  }\r\n  update() {\r\n    if (this.side == 2) this.x += this.speed;\r\n    if (this.side == 1) this.x -= this.speed;\r\n    if (this.x >= this.world.size / 2 || this.x <= (this.world.size / 2) * -1) {\r\n      this.alive = false;\r\n\r\n      if (this.canHorn != \"\") this.hornSound.pause()\r\n      this.tile.hasSomething = false;\r\n    } else {\r\n      //ok, player spans the entire road. So the car sound should equally follow the player to make him feel trapped.\r\n      if (this.world.player.tileType != 1 || this.world.player.y>this.objective)\r\n        this.source.setPosition(this.x, this.y, this.z);\r\n      if (this.world.player.tileType == 1 && this.world.player.y<this.objective)\r\n        this.source.setPosition(this.x, this.world.player.y, this.z);\r\n      if (\r\n        this.passed ||\r\n        (this.canHorn != \"\" && this.y != this.world.player.y)\r\n      ) {\r\n        if (this.canHorn != \"\") this.hornSound.pause()\r\n      }\r\n      if (\r\n        !this.passed &&\r\n        this.canHorn != \"\" &&\r\n        this.world.player.tileType == 1 && this.world.player.y < this.objective\r\n      ) {\r\n        this.hornResonanceSource.setPosition(this.x, this.y, this.z);\r\n        this.hornSound.play();\r\n      }\r\n      if (!this.world.player.jump) {\r\n        if (!this.passed) {\r\n          if (\r\n            Math.round(this.x) == this.world.player.x &&\r\n            this.world.player.tileType != 1\r\n          ) {\r\n            this.passed = true;\r\n            this.tile.hasSomething = false;\r\n            //let score = Math.round(this.speed * (1000 * this.world.game.level));\r\n            //if (this.world.player.tileType != 2) {\r\n            //              this.world.game.score += score;\r\n            //              speech.speak(score);\r\n            //}\r\n            if (typeof this.tile.timeout !== \"undefined\") {\r\n              clearTimeout(this.tile.timeout);\r\n            }\r\n            this.tile.timeout = setTimeout(() => {\r\n              this.tile.generateCar(\r\n                utils.randomInt(1, content.numberOfVehicles)\r\n              );\r\n            }, utils.randomInt(this.world.game.spawnTime, this.world.game.spawnTime + 300))\r\n          }\r\n          if (\r\n            !this.passed &&\r\n            this.alive &&\r\n            Math.round(this.x) == this.world.player.x &&\r\n            this.world.player.tileType == 1 && this.world.player.y < this.objective\r\n          ) {\r\n            if (data.jumps >= 1) {\r\n              this.world.game.pool.playStatic(\"bonus/hyperjump\", 0);\r\n              data.jumps--;\r\n              save();\r\n              this.world.player.flyTo(this.world.player.nearestObjective,\r\n                3,\r\n                \"air\"\r\n              );\r\n            } else {\r\n              let healthLoss = Math.round(this.speed * 45);\r\n              this.world.player.hp -= healthLoss;\r\n              this.world.player.hit();\r\n              this.world.player.flyTo(\r\n                utils.randomInt(\r\n                  this.world.player.nearestStreet,\r\n                  this.world.player.furthestStreet\r\n                ),\r\n                this.side,\r\n                \"air\"\r\n              );\r\n            }\r\n            this.passed = true;\r\n            this.tile.hasSomething = false;\r\n          }\r\n          if (typeof this.tile.timeout !== \"undefined\") {\r\n            clearTimeout(this.tile.timeout);\r\n          }\r\n          this.tile.timeout = setTimeout(() => {\r\n            this.tile.generateCar(utils.randomInt(1, content.numberOfVehicles));\r\n          }, utils.randomInt(this.world.game.spawnTime, this.world.game.spawnTime + 300))\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { GameObject } from \"./gameObject\";\r\nimport { strings } from './strings'\r\nimport { StationaryObject } from './stationaryObject'\r\nimport { utils } from \"./utilities\";\r\nimport { speech } from \"./tts\";\r\nimport { save, data, content } from \"./main\";\r\nexport class LevelPortal extends GameObject {\r\n  constructor(\r\n    world,\r\n    tile,\r\n    x,\r\n    y,\r\n    width,\r\n    height,\r\n    depth,\r\n    sound = \"car\",\r\n    speed,\r\n    side,\r\n    z = 1,\r\n    canHorn = \"\",\r\n    name, blowUp = \"\"\r\n  ) {\r\n    super(world, sound, x, y, z, width, height, depth);\r\n    this.blowUpSound = blowUp\r\n    this.world.player.on(\"blowup\", (() => {\r\n\r\n      if (!this.alive || (this.x < -7 || this.x > 7)) return;\r\n      this.alive = false;\r\n      if (this.blowUpSound != \"\") new StationaryObject(this.world, this.world.player.y + 2, \"blowup/\" + this.blowUpSound, false, this.x)\r\n      if (this.blowUpSound == \"\") new StationaryObject(this.world, this.world.player.y + 2, \"blowup/generic\", false, this.x)\r\n      if (typeof data.bulletGallery === \"undefined\") {\r\n        data.bulletGallery = {}\r\n      }\r\n      if (this.blowUpSound != \"\") data.bulletGallery[this.blowUpSound] = true\r\n      save()\r\n      this.world.player.hp += 1000\r\n      this.world.game.score = this.world.game.bankedScore\r\n      this.world.game.canLevel = false\r\n      this.world.game.canLevelNotify = false\r\n      if (this.canHorn != \"\") this.hornSound.pause();\r\n      this.tile.hasSomething = false;\r\n    }));\r\n\r\n    this.name = name;\r\n    this.speed = speed;\r\n    this.passed = false;\r\n    this.side = side;\r\n    this.tile = tile;\r\n    this.tile.hasSomething = true;\r\n    this.canHorn = canHorn;\r\n    if (this.canHorn != \"\") {\r\n      if (this.canHorn == 1) this.canHorn = this.name;\r\n      this.hornSound = document.createElement(\"audio\");\r\n      this.hornSound.src = \"./sounds/horn/\" + this.name + \".ogg\";\r\n      this.hornSource = this.world.context.createMediaElementSource(\r\n        this.hornSound\r\n      );\r\n      this.hornResonanceSource = this.world.scene.createSource();\r\n      this.hornSource.connect(this.hornResonanceSource.input);\r\n      //horn follows the player because a it plays only if player is on the road and b we want the player to feel trapped on the road by this honking car since that's what happens\r\n      this.hornResonanceSource.setPosition(this.x, this.world.player.y, this.z);\r\n      this.hornSound.loop = true;\r\n    }\r\n  }\r\n  update() {\r\n    if (this.side == 2) this.x += this.speed;\r\n    if (this.side == 1) this.x -= this.speed;\r\n    if (this.x >= this.world.size / 2 || this.x <= (this.world.size / 2) * -1) {\r\n      this.alive = false;\r\n      if (this.canHorn != \"\") this.hornSound.pause();\r\n      this.tile.hasSomething = false;\r\n    } else {\r\n      //ok, player spans the entire road. So the car sound should equally follow the player to make him feel trapped.\r\n      if (this.world.player.tileType != 1)\r\n        this.source.setPosition(this.x, this.y, this.z);\r\n      if (this.world.player.tileType == 1)\r\n        this.source.setPosition(this.x, this.world.player.y, this.z);\r\n      if (\r\n        this.passed ||\r\n        (this.canHorn != \"\" && this.y != this.world.player.y)\r\n      ) {\r\n        if (this.canHorn != \"\") this.hornSound.pause();\r\n      }\r\n      if (\r\n        !this.passed &&\r\n        this.canHorn != \"\" &&\r\n        this.world.player.tileType == 1\r\n      ) {\r\n        this.hornResonanceSource.setPosition(this.x, this.y, this.z);\r\n        this.hornSound.play();\r\n      }\r\n      if (!this.world.player.jump) {\r\n        if (!this.passed) {\r\n          if (\r\n            Math.round(this.x) == this.world.player.x &&\r\n            this.world.player.tileType != 1\r\n          ) {\r\n            this.passed = true;\r\n            this.tile.hasSomething = false;\r\n            if (typeof this.tile.timeout !== \"undefined\") {\r\n              clearTimeout(this.tile.timeout);\r\n            }\r\n            this.tile.timeout = setTimeout(() => {\r\n              this.tile.generateCar(\r\n                utils.randomInt(1, content.numberOfVehicles)\r\n              );\r\n            }, utils.randomInt(this.world.game.spawnTime, this.world.game.spawnTime + 300))\r\n          }\r\n          if (\r\n            !this.passed &&\r\n            this.alive &&\r\n            Math.round(this.x) == this.world.player.x &&\r\n            this.world.player.tileType == 1\r\n          ) {\r\n            this.passed = true;\r\n            this.tile.hasSomething = false;\r\n\r\n            //level here\r\n            this.world.game.canLevel = false\r\n            this.world.game.bankedScore = this.world.game.level * 1500\r\n            this.world.game.level++;\r\n            this.world.game.spawnTime -= 150;\r\n            if (this.world.game.spawnTime < 200) this.world.game.spawnTime = 200;\r\n            setTimeout(() => {\r\n              speech.speak(strings.get(\"level\") + \" \" + this.world.game.level)\r\n            }, 400)\r\n            this.world.player.flyTo(this.world.player.nearestObjective,\r\n              3,\r\n              \"level_air\", \"level_land\"\r\n            );\r\n            this.world.game.canLevelNotify = false\r\n\r\n            this.world.game.score += (this.world.game.level * 100)\r\n            this.world.size -= Math.round((this.world.game.level));\r\n            //level code end\r\n          }\r\n          if (typeof this.tile.timeout !== \"undefined\") {\r\n            clearTimeout(this.tile.timeout);\r\n          }\r\n          this.tile.timeout = setTimeout(() => {\r\n            this.tile.generateCar(utils.randomInt(1, content.numberOfVehicles));\r\n          }, utils.randomInt(0, this.world.game.spawnTime - this.world.game.level * 100));\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { GameObject } from './gameObject'\r\nimport { Car } from './car'\r\nimport { LevelPortal } from './levelPortal'\r\nimport { debug } from './main'\r\nimport { parsedCars, content } from './main'\r\nimport { utils } from './utilities'\r\nimport { Tile } from './tile'\r\nimport { speech } from './tts'\r\nexport class Road extends Tile {\r\n    constructor(world, pos, generator = false) {\r\n        super(world, pos, 1, \"road\")\r\n        this.generator = generator\r\n        this.timeout = setTimeout(() => {\r\n            if (!debug) this.generateCar(utils.randomInt(1, content.numberOfVehicles))\r\n        }, utils.randomInt(this.world.game.spawnTime, this.world.game.spawnTime + 300))\r\n    }\r\n    generateCar(force) {\r\n        if (!this.generator || !this.alive || this.world.greenLight) return;\r\n        if (typeof this.timeout !== \"undefined\") clearTimeout(this.timeout)\r\n        this.timeout = setTimeout(() => {\r\n            if (!debug) this.generateCar(utils.randomInt(1, content.numberOfVehicles))\r\n        }, utils.randomInt(this.world.game.spawnTime, this.world.game.spawnTime + 300))\r\n        if (this.hasSomething) return;\r\n        let side = utils.randomInt(1, 2)\r\n        let size = this.world.size / 2\r\n        if (side == 1) size = size * 1\r\n        if (side == 2) size = size * -1\r\n        let carType = force\r\n        try {\r\n            let chance = utils.randomInt(1, 100)\r\n            carType=content.numberOfVehicles\r\n\r\n            if (this.world.game.canLevel && chance <= 80) {\r\n                this.world.dynamicObjects.push(new LevelPortal(this.world, this, size, this.y, 2, 1, 2, \"level_portal\", 0.40, side, 1, \"\", \"level_portal\", \"level_portal\"))\r\n            } else {\r\n                this.world.dynamicObjects.push(new Car(this.world, this, size, this.y, 2, 1, 2, parsedCars[carType].sound, parsedCars[carType].speed, side, parsedCars[carType].z, parsedCars[carType].hornable, parsedCars[carType].name, parsedCars[carType].blowup,this.world.player.nearestObjective))\r\n            }\r\n        } catch (e) {\r\n            console.error(\"Error generating car \" + carType + \": \" + e)\r\n        }\r\n        this.hasSomething = true\r\n    }\r\n    destroy() {\r\n        if (typeof this.timeout !== \"undefined\") clearTimeout(this.timeout)\r\n    }\r\n    step() {\r\n        super.step()\r\n        this.world.player.stepProgress.pitch = utils.getProportion(this.y, this.world.player.nearestRoad, this.world.player.furthestRoad, 0.3, 1.7)\r\n        this.world.player.stepProgress.replay()\r\n    }\r\n}","export class Effect {\r\n    constructor(world, name, time, onFunction, ofFunction) {\r\n        this.world = world\r\n        this.world.game.pool.playStatic(\"effects/\" + name, 0)\r\n        onFunction()\r\n        setTimeout(() => {\r\n            ofFunction()\r\n            this.world.game.pool.playStatic(\"effects/\" + name + \"Off\", 0)\r\n        }, time)\r\n    }\r\n}","import { Item } from './item'\r\nimport { Effect } from './effect'\r\nimport { utils } from './utilities'\r\nimport { strings } from './strings'\r\nimport { increase, decrease, getUnlock, setUnlock, data, save, content } from './main'\r\nimport { speech } from './tts'\r\nexport class Bonus extends Item {\r\n    constructor(world, x, y) {\r\n        super(world, x, y, \"loop/bonus\")\r\n    }\r\n    step() {\r\n        if (!this.alive) return;\r\n        this.alive = false\r\n        let bonuses = [1, 4, 7]\r\n        if (getUnlock(\"hyperjump\")) bonuses.push(2)\r\n\r\n        if (getUnlock(\"bombs\")) bonuses.push(5)\r\n        let bonusType = utils.randomElement(bonuses)\r\n        switch (bonusType) {\r\n\r\n            case 1:\r\n                this.world.game.pool.playStatic(\"bonus/health\", 0)\r\n                this.world.player.hp += 100\r\n                break;\r\n            case 2:\r\n                this.world.game.pool.playStatic(\"bonus/hyperjump\", 0)\r\n                increase(\"jumps\")\r\n                break;\r\n            //case 4 is fake bonus so default\r\n            case 5:\r\n                increase(\"bombs\")\r\n                this.world.game.pool.playStatic(\"bonus/bomb\", false)\r\n                break;\r\n            case 7:\r\n                increase(\"stoppers\")\r\n                save()\r\n                this.world.game.pool.playStatic(\"bonus/stopper\", false)\r\n                break;\r\n            default:\r\n                this.world.game.pool.playStatic(\"bonus/fake\", false)\r\n                break;\r\n        }\r\n        setTimeout(() => {\r\n            speech.speak(strings.get(\"bonus\" + bonusType))\r\n        }, 280)\r\n        save()\r\n    }\r\n    coffeeOn(that) {\r\n        that.oldSpeed = that.world.player.currentSpeed\r\n        that.world.player.slowDown(10)\r\n        that.world.player.speedUp(7)\r\n        that.world.player.forceSpeed = true\r\n        that.world.player.forcedSpeed = 7\r\n\r\n    }\r\n    coffeeOff(that) {\r\n        that.world.player.forceSpeed = false\r\n        that.world.player.slowDown(10)\r\n        that.world.player.speedUp(that.oldSpeed)\r\n    }\r\n}","import { GameObject } from './gameObject'\nimport { StationaryObject } from './stationaryObject'\nimport { KeyEvent } from './keycodes.js'\nimport { so } from './soundObject'\nimport { speech } from './tts';\nimport { utils } from './utilities'\nimport { getUnlock, data, debug } from './main'\nconst EventEmitter = require('events');\nexport class Player extends GameObject {\n    constructor(world) {\n        super(world, \"\", 0, 0, 1.6, 1, 0.5, 1.6)\n        this.playerHitSound = so.create(\"player/hit\")\n        this.forceSpeed = false\n        this.stepProgress = so.create(\"steps/progress\")\n        this.target = so.create(\"player/target\")\n        this.coins = 0\n        if (data.coins) this.coins = data.coins;\n        this.jumps = 0;\n        if (data.jumps) this.jumps = data.jumps\n        this.center = so.create(\"ui/center\")\n        this.xLimit = Math.ceil(this.world.size / 13)\n        this.fallTime = 55\n        this.world.scene.setListenerPosition(this.x, this.y, this.z)\n        this.unableToMove = false\n        this.hp = 250\n        this.speedUpSound = so.create(\"ui/speedUp\")\n        this.nearestStreet = 0\n        this.nearestRoad = 0\n        this.nearestObjective = 0\n        this.furthestStreet = 0\n        this.furthestRoad = 0\n\n        this.speedDownSound = so.create(\"ui/speedDown\")\n        this.speed = 650\n        //speed 0 is unused, speeds 1 to 5 are manually attainable, speed 6 is a crawl and speed 7 is super speed.\n        this.speeds = [\n            0, 650, 530, 420, 350, 235, 675, 120\n        ]\n        this.speedModifier = 0\n        this.currentSpeed = 0\n    }\n    move() {\n        if (this.unableToMove) return;\n        this.speedTimeout = setTimeout(() => {\n            this.move()\n        }, this.speeds[this.currentSpeed] - this.speedModifier)\n        if (this.currentSpeed == 0) this.currentSpeed = 1;\n        this.xLimit = Math.ceil(this.world.size / 13)\n        this.y += 1\n\n        this.emit(\"step\" + this.y)\n        if (this.world.game.input.isDown(KeyEvent.DOM_VK_RIGHT)) {\n            this.x++;\n            if (this.x > 0 + this.xLimit) this.x = 0 + this.xLimit\n            if (this.x == 0) this.center.replay();\n        }\n        if (this.world.game.input.isDown(KeyEvent.DOM_VK_LEFT)) {\n            this.x--;\n            if (this.x < 0 - this.xLimit) this.x = 0 - this.xLimit\n            if (this.x == 0) this.center.replay();\n        }\n        this.world.scene.setListenerPosition(this.x, this.y, this.z)\n        this.emit(\"x\" + this.x)\n    }\n    speedUp(number = 1) {\n        if (this.forceSpeed) return;\n        if (this.unableToMove) return;\n        if (this.currentSpeed == 0) {\n            this.speedUpSound.pitch = utils.getProportion(1, 1, 5, 0.8, 1.2)\n            this.speedUpSound.replay()\n            this.move()\n        }\n        this.currentSpeed += (number - 1);\n        if (this.currentSpeed > 7) this.currentSpeed = 7\n        this.speedUpSound.pitch = utils.getProportion(this.currentSpeed, 1, 5, 0.8, 1.2)\n        this.speedUpSound.replay()\n    }\n    slowDown(number = 1) {\n        if (this.forceSpeed) return;\n        if (this.unableToMove) return;\n        this.currentSpeed -= number;\n        //we don't want the player to be able to stop with the down arrow key, but if some item is forcing the player to stop, we can allow it.\n        if (number == 1 && this.currentSpeed == 0) this.currentSpeed = 1;\n        if (this.currentSpeed <= 0) {\n            this.currentSpeed = 0;\n            if (typeof this.speedTimeout !== \"undefined\") clearTimeout(this.speedTimeout)\n        }\n        if (number == 1) this.speedDownSound.pitch = utils.getProportion(this.currentSpeed, 1, 5, 0.8, 1.2)\n        if (number == 1) this.speedDownSound.replay()\n    }\n    hit() {\n        this.playerHitSound.play()\n        this.world.game.pool.playStatic(\"player/impact/\" + utils.randomInt(1, 4), 0)\n\n    }\n    flyTo(y, side, snd, landsound = \"player/land\") {\n        if (this.unableToMove) return;\n        this.tileType = -1\n        this.unableToMove = true\n        let heart = so.create(\"player/heart\")\n        heart.play()\n        let sound = so.create(snd)\n        sound.loop = true\n        sound.volume = 0.3\n        let land = so.create(landsound)\n        let fall = so.create(\"player/fall\" + utils.randomInt(1, 4))\n        let stand = so.create(\"player/stand\")\n        sound.pitch = 0.7\n        sound.play()\n        sound.loop = true\n        heart.loop = true\n        this.slowDown(10)\n        let z = utils.randomInt(11, 21)\n\n        let x;\n        let jump = false\n        if (side == 1) x = -1;\n        if (side == 2) x = 1\n        if (side == 3) {\n            jump = true;\n            this.jump = true;\n            z = utils.randomInt(5, 10)\n        }\n        this.interval = setInterval(() => {\n            if (!jump) this.x += (x * utils.randomInt(3, 5))\n            if (this.x < 0 - this.world.size / 2) {\n                x = 1\n                this.world.game.pool.playStatic(\"player/wall\" + utils.randomInt(1, 3), 0)\n            }\n            if (this.x > this.world.size / 2) {\n                x = -1\n                this.world.game.pool.playStatic(\"player/wall\" + utils.randomInt(1, 3), 0)\n            }\n            sound.pitch += 0.07\n            if (this.y > y) {\n                this.y -= 0.5;\n            }\n            if (this.y < y) {\n                this.y += 0.5;\n            }\n            this.z += 1;\n            if (this.z >= z) {\n                this.y = y;\n                clearInterval(this.interval)\n                this.interval = setInterval(() => {\n                    this.z -= 1;\n                    sound.pitch -= 0.07\n                    if (this.z <= 0) {\n                        this.tileType = 0\n                        clearInterval(this.interval)\n                        if (jump) {\n                            land.play()\n                            this.z = 1.6\n                            this.jump = false\n                            this.unableToMove = false;\n                            heart.stop();\n                            if (this.forceSpeed) {\n                                this.forceSpeed = false\n                                this.slowDown(10)\n                                this.forceSpeed = true\n                            } else {\n                                this.slowDown(10)\n                            }\n\n                            if (this.forceSpeed) {\n                                this.forceSpeed = false\n                                this.speedUp(this.forcedSpeed)\n                                this.forceSpeed = true\n                            }\n\n\n                        }\n                        if (!jump) {\n                            this.x = 0\n                            fall.play()\n                            this.z = 0\n                            setTimeout(() => {\n                                stand.replay()\n                                heart.stop();\n                                stand.sound.on(\"ended\", (() => {\n                                    this.z = 1.6\n                                    this.jump = false\n                                    this.unableToMove = false;\n                                    if (this.forceSpeed) {\n                                        this.forceSpeed = false\n                                        this.slowDown(10)\n                                        this.forceSpeed = true\n                                    } else {\n                                        this.slowDown(10)\n                                    }\n\n                                    if (this.forceSpeed) {\n                                        this.forceSpeed = false\n                                        this.speedUp(this.forcedSpeed)\n                                        this.forceSpeed = true\n                                    }\n                                }))\n                                this.world.scene.setListenerPosition(this.x, this.y, this.z)\n                            }, utils.randomInt(1000, 2000))\n                        }\n                        this.world.scene.setListenerPosition(this.x, this.y, this.z)\n                        sound.stop()\n                        //heart.stop()\n                        this.x = 0\n                        this.emit(\"step\" + this.y)\n                        //if (this.forceSpeed) this.speedUp(this.forcedSpeed)\n                    }\n                    this.world.scene.setListenerPosition(this.x, this.y, this.z)\n                }, this.fallTime)\n            }\n            this.world.scene.setListenerPosition(this.x, this.y, this.z)\n        }, this.fallTime * 1.2)\n    }\n    scoreDeduct() {\n        this.world.game.tick.replay()\n        this.world.game.score -= (25 * this.world.game.level)\n        if (this.world.game.score < this.world.game.bankedScore) {\n            this.world.game.score = this.world.game.bankedScore\n            this.world.game.tick.stop()\n        }\n        this.levelCap = this.world.game.level\n        if (this.levelCap > 15) this.levelCap = 15\n    }\n    throwBomb() {\n        try {\n            //    new StationaryObject(this.world,this.y+0.5, \"bomb_drop\")\n            let fusetime = 975\n            if (getUnlock(\"shortfuse\")) fusetime = fusetime / 3\n            let sound = so.create(\"bomb_start\")\n            sound.play();\n            setTimeout(() => {\n                sound.destroy();\n                new StationaryObject(this.world, this.y + 0.5, \"bomb_explode\")\n                this.emit(\"blowup\")\n            }, fusetime)\n        } catch (e) {\n            console.error(e)\n        }\n    }\n}","import { so } from './soundObject';\r\nimport { Coin } from './coin'\r\nimport { Street } from './street'\r\nimport { Objective } from './objective'\r\nimport { Road } from './road'\r\nimport { Bonus } from './bonus'\r\nimport { utils } from './utilities'\r\nimport { Car } from './car'\r\nimport 'resonance-audio';\r\nconst { ResonanceAudio } = require('resonance-audio')\r\nimport { Player } from './player'\r\nimport { content } from './main'\r\nimport { speech } from './tts';\r\nexport class World {\r\n\tconstructor(game, size = 100) {\r\n\t\tthis.size = size;\r\n\t\tthis.greenLight = false\r\n\r\n\t\tthis.game = game\r\n\t\tthis.dynamicObjects = []\r\n\t\tthis.tiles = []\r\n\t\tthis.context = new AudioContext()\r\n\t\tthis.convolution = this.context.createConvolver()\r\n\t\tthis.scene = new ResonanceAudio(this.context);\r\n\t\tthis.convolution.connect(this.scene.output)\r\n\t\tthis.scene.output.connect(this.context.destination)\r\n\t\tthis.player = new Player(this)\r\n\t\tthis.player.setMaxListeners(1000)\r\n\t}\r\n\tgenerateTiles() {\r\n\t\tthis.player.removeAllListeners(\"step\")\r\n\t\tthis.player.removeAllListeners(\"blowup\")\r\n\t\tfor (let i = 0; i < this.tiles.length; i++) {\r\n\t\t\tthis.tiles[i].alive = false\r\n\t\t\tthis.tiles[i].destroy();\r\n\t\t\tthis.tiles.splice(i, 1)\r\n\t\t\ti--;\r\n\t\t}\r\n\t\tthis.tiles = []\r\n\t\tlet lastStreet = this.player.y;\r\n\t\t//the below line will sound weird, but I want as many streets as x squares the player can move to either side, so as to have a fair chance at targetting bonuses\r\n\t\tlet lastStreetLimit = lastStreet + this.player.xLimit\r\n\t\tthis.player.nearestStreet = lastStreet + 1\r\n\t\tfor (let i = lastStreet + 1; i <= lastStreetLimit; i++) {\r\n\t\t\tthis.tiles.push(new Street(this, i))\r\n\t\t\tlastStreet = i;\r\n\t\t}\r\n\t\tlet tiles = Math.round(this.game.roadsPerLevel + (this.game.level / 2))\r\n\t\tlet lastRoad = 0;\r\n\t\tthis.player.nearestRoad = lastStreet + 1\r\n\t\tthis.player.furthestStreet = lastStreet;\r\n\t\t//let generator = (this.player.nearestRoad + tiles) - tiles/2\r\n\t\tlet generator = this.player.nearestRoad\r\n\t\tfor (let i = lastStreet + 1; i <= lastStreet + tiles; i++) {\r\n\t\t\tif (generator == i) this.tiles.push(new Road(this, i, true))\r\n\t\t\tif (generator != i) this.tiles.push(new Road(this, i, false))\r\n\t\t\tlastRoad = i;\r\n\t\t}\r\n\t\tthis.player.nearestObjective = lastRoad + 1\r\n\t\tthis.player.furthestRoad = lastRoad;\r\n\t\tthis.tiles.push(new Objective(this, lastRoad + 1))\r\n\t\t//item spawning\r\n\t\tlet chance = utils.randomInt(1, 1)\r\n\t\tfor (let i = 1; i <= chance; i++) {\r\n\t\t\tlet x = utils.randomInt(0 - this.player.xLimit, 0 + this.player.xLimit)\r\n\t\t\tlet random = utils.randomInt(1, 2)\r\n\t\t\tswitch (random) {\r\n\t\t\t\tdefault: break;\r\n\t\t\t\t//coins are dropped on the street\r\n\t\t\t\tcase 1: this.dynamicObjects.push(new Coin(this, x, this.player.nearestStreet + this.player.xLimit, this.player.furthestStreet)); break;\r\n\t\t\t\t//bonuses appear anywhere on the road\r\n\t\t\t\tcase 2: this.dynamicObjects.push(new Bonus(this, x, this.player.nearestRoad, this.player.furthestRoad)); break;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tupdate() {\r\n\r\n\t\tfor (let i = 0; i < this.dynamicObjects.length; i++) {\r\n\t\t\tif (!this.dynamicObjects[i].alive) {\r\n\t\t\t\tthis.dynamicObjects[i].sound.removeAttribute(\"src\")\r\n\t\t\t\tthis.dynamicObjects[i].sound.load()\r\n\r\n\t\t\t\tif (this.dynamicObjects[i].canHorn) this.dynamicObjects[i].hornSound.removeAttribute(\"src\")\r\n\t\t\t\tif (this.dynamicObjects[i].canHorn) this.dynamicObjects[i].hornSound.load()\r\n\t\t\t\tthis.dynamicObjects.splice(i, 1)\r\n\t\t\t\ti--;\r\n\t\t\t} else {\r\n\t\t\t\tthis.dynamicObjects[i].update()\r\n\t\t\t}\r\n\t\t}\r\n\t\t//leveling\r\n\t\tthis.levelScore = ((this.game.level) * 1500)\r\n\t\tif (this.game.score >= this.levelScore) {\r\n\t\t\tif (!this.game.canLevelNotify) {\r\n\t\t\t\tthis.game.pool.playStatic(\"level_notify\", false)\r\n\t\t\t\tthis.game.canLevelNotify = true\r\n\r\n\t\t\t}\r\n\t\t\tthis.game.canLevel = true\r\n\t\t}\r\n\r\n\t}\r\n}","import { speech } from './tts';\r\nimport { strings } from './strings'\r\nimport { save, increase, decrease, debug, _, content, data } from './main'\r\nimport { SoundHandler } from './soundHandler'\r\nimport Timer from './timer';\r\nimport $ from 'jquery';\r\nimport { utils } from './utilities';\r\nimport { ScrollingText } from './scrollingText';\r\nimport { KeyboardInput } from './input.js';\r\nimport { KeyEvent } from './keycodes.js';\r\nimport { so } from './soundObject';\r\nimport { World } from './world'\r\nimport { Road } from './road';\r\nclass Game {\r\n\tconstructor() {\r\n\t\tthis.canChangeSpeed = true\r\n\t\tthis.bankedScore = 0\r\n\t\tthis.canLevel = false\r\n\t\tthis.canLevelNotify = false\r\n\r\n\t\tthis.tick = so.create(\"tick\")\r\n\t\tthis.scoreSound = so.create(\"scoreCounter\")\r\n\t\tthis.scoreSound.volume = 0.4\r\n\t\tthis.input = new KeyboardInput();\r\n\t\tthis.pool = new SoundHandler()\r\n\t\tthis.input.init();\r\n\t\tthis.timer = Timer({\r\n\t\t\tupdate: () => this.update(),\r\n\t\t\trender: () => this.render()\r\n\t\t}, 1 / 45);\r\n\t\tthis.score = 0\r\n\t\tthis.level = 1\r\n\t\tthis.spawnTime = 2500\r\n\t\tthis.roadsPerLevel = 5\r\n\t}\r\n\r\n\tstart() {\r\n\t\tthis.timer.start();\r\n\t\tthis.world = new World(this, 80)\r\n\t\tif (!debug) this.world.generateTiles()\r\n\t\t//speech.speak(strings.get(\"upArrowMove\"))\r\n\t}\r\n\tupdate(dt) {\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_0)) {\r\n\t\t\tif (data.stoppers >= 1) {\r\n\t\t\t\tthis.world.game.pool.playStatic(\"use_stopper\", false)\r\n\t\t\t\tdata.stoppers--;\r\n\t\t\t\tsave()\r\n\t\t\t\tthis.world.player.slowDown(10)\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tspeech.speak(strings.get(\"noStoppers\"))\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_D) && debug) {\r\n\t\t\tlet debugRoad = new Road(this.world, 1, true)\r\n\t\t\tlet number = content.numberOfVehicles\r\n\t\t\tdebugRoad.generateCar(number)\r\n\t\t\tdebugRoad.generator = false\r\n\t\t\tthis.world.player.y = 0\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_B)) {\r\n\t\t\tif (data.bombs >= 1) {\r\n\t\t\t\tthis.world.player.throwBomb()\r\n\t\t\t\tdata.bombs--;\r\n\t\t\t\tsave();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tspeech.speak(strings.get(\"noBombs\"))\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_I)) {\r\n\t\t\tlet nothing = true\r\n\t\t\tlet str = \"\"\r\n\t\t\tif (data.jumps > 0) {\r\n\t\t\t\tnothing = false\r\n\t\t\t\tstr += strings.get(\"iJumps\", [data.jumps]) + \", \"\r\n\t\t\t}\r\n\t\t\tif (data.bombs > 0) {\r\n\t\t\t\tnothing = false\r\n\t\t\t\tstr += strings.get(\"iBombs\", [data.bombs]) + \", \"\r\n\t\t\t}\r\n\t\t\tif (data.stoppers > 0) {\r\n\t\t\t\tnothing = false\r\n\t\t\t\tstr += strings.get(\"iStoppers\", [data.stoppers]) + \", \"\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (nothing) {\r\n\t\t\t\tspeech.speak(strings.get(\"emptyInventory\"))\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tspeech.speak(str)\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_UP)) {\r\n\t\t\tthis.world.player.speedUp()\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_DOWN)) {\r\n\t\t\tthis.world.player.slowDown()\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_C)) {\r\n\t\t\tspeech.speak(data.coins + strings.get(\"coins\"))\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_S)) {\r\n\t\t\tspeech.speak(this.score + strings.get(\"points\" + \", \" + strings.get(\"bankedScore\") + this.world.game.bankedScore))\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_X)) {\r\n\t\t\tspeech.speak(this.world.player.nearestRoad + \", \" + this.world.player.furthestRoad)\r\n\t\t\tspeech.speak(this.world.player.x)\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_L)) {\r\n\t\t\tspeech.speak(strings.get(\"level\") + this.level + \" \" + strings.get(\"ws\") + this.world.size+\" spawn time \"+this.world.game.spawnTime)\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_H)) {\r\n\t\t\tspeech.speak(this.world.player.hp + \" \" + strings.get(\"hp\"))\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_1) && this.canChangeSpeed) {\r\n\t\t\tthis.canChangeSpeed = false; setTimeout(() => { this.canChangeSpeed = true }, 800)\r\n\t\t\tthis.world.player.slowDown(10)\r\n\t\t\tthis.world.player.speedUp(1)\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_2) && this.canChangeSpeed) {\r\n\t\t\tthis.canChangeSpeed = false; setTimeout(() => { this.canChangeSpeed = true }, 800)\r\n\r\n\t\t\tthis.world.player.slowDown(10)\r\n\t\t\tthis.world.player.speedUp(2)\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_3) && this.canChangeSpeed) {\r\n\t\t\tthis.canChangeSpeed = false; setTimeout(() => { this.canChangeSpeed = true }, 800)\r\n\r\n\t\t\tthis.world.player.slowDown(10)\r\n\t\t\tthis.world.player.speedUp(3)\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_4) && this.canChangeSpeed) {\r\n\t\t\tthis.canChangeSpeed = false; setTimeout(() => { this.canChangeSpeed = true }, 800)\r\n\r\n\t\t\tthis.world.player.slowDown(10)\r\n\t\t\tthis.world.player.speedUp(4)\r\n\t\t}\r\n\t\tif (this.input.isJustPressed(KeyEvent.DOM_VK_5) && this.canChangeSpeed) {\r\n\t\t\tthis.canChangeSpeed = false; setTimeout(() => { this.canChangeSpeed = true }, 800)\r\n\r\n\t\t\tthis.world.player.slowDown(10)\r\n\t\t\tthis.world.player.speedUp(5)\r\n\t\t}\r\n\t\tthis.world.update()\r\n\t}\r\n\trender() {\r\n\t}\r\n}\r\nexport { Game }","'use strict';\r\nimport { speech } from './tts';\r\nimport { so } from './soundObject';\r\nconst MenuTypes = {\r\n\tNORMAL: 0,\r\n\tSELECTOR: 1,\r\n\tSLIDER: 2,\r\n\tEDIT: 3,\r\n\tAUDIO: 4,\r\n};\r\nclass MenuItem {\r\n\tconstructor(id, name) {\r\n\t\tthis.name = name;\r\n\t\tthis.id = id;\r\n\t\tthis.type = MenuTypes.NORMAL;\r\n\t}\r\n\r\n\tspeak() {\r\n\t\tspeech.speak(this.name);\r\n\t}\r\n\r\n\tselect() {\r\n\t\treturn this.id;\r\n\t}\r\n}\r\nclass AudioItem extends MenuItem {\r\n\tconstructor(id, name) {\r\n\t\tsuper();\r\n\t\tthis.name = name;\r\n\t\tthis.type = MenuTypes.AUDIO;\r\n\t\tthis.id = id;\r\n\t\tthis.snd = so.create(this.name);\r\n\t}\r\n\r\n\tspeak() {\r\n\t\tthis.snd.stop();\r\n\t\tthis.snd.play();\r\n\t}\r\n\r\n\tselect() {\r\n\t\treturn this.id;\r\n\t}\r\n}\r\n\r\n\r\nclass SelectorItem extends MenuItem {\r\n\tconstructor(id, name, options, defaultOption = 0, selectCallback) {\r\n\t\tsuper();\r\n\t\tthis.id = id;\r\n\t\tthis.name = name;\r\n\t\tthis.options = options;\r\n\t\tthis.type = MenuTypes.SELECTOR;\r\n\t\tthis.currentOption = defaultOption;\r\n\t\tthis.selectCallback = selectCallback;\r\n\t}\r\n\r\n\tspeak() {\r\n\t\tspeech.speak(this.name + '. Selector. Set to ' + this.options[this.currentOption]);\r\n\t}\r\n\r\n\tincrease() {\r\n\t\tif (this.currentOption < this.options.length - 1) {\r\n\t\t\tthis.currentOption++;\r\n\t\t}\r\n\t\tspeech.speak(this.options[this.currentOption]);\r\n\t\tif (typeof this.selectCallback !== 'undefined') {\r\n\t\t\tthis.selectCallback(this.options[this.currentOption]);\r\n\t\t}\r\n\t}\r\n\r\n\tdecrease() {\r\n\t\tif (this.currentOption > 0) {\r\n\t\t\tthis.currentOption--;\r\n\t\t}\r\n\t\tspeech.speak(this.options[this.currentOption]);\r\n\t\tif (typeof this.selectCallback !== 'undefined') {\r\n\t\t\tthis.selectCallback(this.options[this.currentOption]);\r\n\t\t}\r\n\t}\r\n\r\n\tselect() {\r\n\t\treturn this.id;\r\n\t}\r\n}\r\n\r\nclass SliderItem extends MenuItem {\r\n\tconstructor(id, name, from, to, currentValue = 0, increaseBy = 1) {\r\n\t\tsuper();\r\n\t\tthis.id = id;\r\n\t\tthis.name = name;\r\n\t\tthis.minValue = from;\r\n\t\tthis.maxValue = to;\r\n\t\tthis.currentValue = currentValue;\r\n\t\tthis.increaseBy = increaseBy;\r\n\t\tthis.type = MenuTypes.SLIDER;\r\n\t}\r\n\r\n\tspeak() {\r\n\t\tspeech.speak(this.name + '. Slider. Set to ' + this.currentValue);\r\n\t}\r\n\r\n\tincrease() {\r\n\t\tif (this.currentValue < this.maxValue) {\r\n\t\t\tthis.currentValue += this.increaseBy;\r\n\t\t}\r\n\t\tif (this.currentValue > this.maxValue) this.currentValue = this.maxValue;\r\n\t\tspeech.speak(this.currentValue);\r\n\t}\r\n\r\n\tdecrease() {\r\n\t\tif (this.currentValue > this.minValue) {\r\n\t\t\tthis.currentValue -= this.increaseBy;\r\n\t\t}\r\n\t\tif (this.currentValue < this.minValue) this.currentValue = this.minValue;\r\n\t\tspeech.speak(this.currentValue);\r\n\t}\r\n\r\n\tselect() {\r\n\t\treturn this.id;\r\n\t}\r\n}\r\n\r\nclass EditItem extends MenuItem {\r\n\tconstructor(id, name, defaultText = '') {\r\n\t\tsuper();\r\n\t\tthis.id = id;\r\n\t\tthis.name = name;\r\n\t\tthis.text = defaultText;\r\n\t\tthis.type = MenuTypes.EDIT;\r\n\t}\r\n\r\n\tspeak() {\r\n\t\tspeech.speak(this.name + '. Editable. ' + (this.text == '' ? 'Nothing entered.' : 'Set to ' + this.text));\r\n\t}\r\n\r\n\taddChar(char) {\r\n\t\tthis.text += char;\r\n\t\tspeech.speak(char);\r\n\t}\r\n\r\n\tremoveChar() {\r\n\t\tthis.text = this.text.substring(0, this.text.length - 1);\r\n\t\tspeech.speak(this.text);\r\n\t}\r\n\r\n\tselect() {\r\n\t\treturn this.text;\r\n\t}\r\n}\r\nexport { MenuItem, AudioItem, SliderItem, SelectorItem, MenuTypes };\r\n","'use strict';\r\nimport \"babel-polyfill\";\r\nimport { utils } from './utilities';\r\nimport Hammer from 'hammerjs';\r\nimport { speech } from './tts';\r\nimport { so } from './soundObject.js';\r\nimport { MenuTypes, MenuItem } from './menuItem';\r\nimport { KeyEvent } from './keycodes';\r\nimport { KeyboardInput } from './input';\r\n\r\nclass Menu {\r\n\tconstructor(name, menuData, music) {\r\n\t\tthis.kp = event => {\r\n\t\t\tthis.handleInput(event);\r\n\t\t};\r\n\t\tthis.kd = event => {\r\n\t\t\tthis.handleKeys(event);\r\n\t\t};\r\n\t\tthis.fadeTime = 0.6;\r\n\t\tthis.menuData = menuData;\r\n\t\tlet audio = name.split(\" \");\r\n\t\tif (audio.length < 2) this.isAudio = true;\r\n\t\tif (audio.length >= 2) this.isAudio = false;\r\n\t\tthis.silent = false;\r\n\t\tthis.prependAudio = \"\";\r\n\t\tthis.first = true;\r\n\t\tthis.cursor = 0;\r\n\t\tthis.name = name;\r\n\t\tlet dir = so.directory;\r\n\t\tso.directory = \"./sounds/\";\r\n\t\tthis.sndKeyChar = so.create('ui/keyChar');\r\n\t\tthis.sndKeyDelete = so.create('ui/keyDelete');\r\n\t\tthis.sndSliderLeft = so.create('ui/menuSliderLeft');\r\n\t\tthis.sndSliderRight = so.create('ui/menuSliderRight');\r\n\t\tthis.sndBoundary = so.create('ui/menuBoundary');\r\n\t\tthis.sndChoose = so.create('ui/menuChoose');\r\n\t\tthis.sndMove = so.create('ui/menuMove');\r\n\t\tthis.sndOpen = so.create('ui/menuOpen');\r\n\t\tthis.sndSelector = so.create('ui/menuSelector');\r\n\t\tthis.sndWrap = so.create('ui/menuWrap');\r\n\t\tso.directory = dir;\r\n\t\tthis.selectCallback = null;\r\n\t\tif (typeof music !== 'undefined') {\r\n\t\t\tthis.music = music;\r\n\t\t}\r\n\t\tconst id = document.getElementById('touchArea');\r\n\t\tthis.hammer = new Hammer(id);\r\n\t}\r\n\r\n\tnextItem() {\r\n\t\tspeech.stop();\r\n\t\tif (!this.first) {\r\n\t\t\tif (this.cursor < this.menuData.length - 1) {\r\n\t\t\t\tif (!this.silent) this.sndMove.play();\r\n\t\t\t\tthis.cursor++;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (!this.silent) this.sndWrap.play();\r\n\t\t\t\tthis.cursor = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (!this.silent) this.sndMove.play();\r\n\t\t\tthis.first = false;\r\n\t\t}\r\n\t\tif (this.isAudio) {\r\n\t\t\tthis.sndName.stop();\r\n\t\t\tfor (let i = 0; i < this.menuData.length; i++) {\r\n\t\t\t\tif (this.menuData[i].type == MenuTypes.AUDIO) this.menuData[i].snd.stop();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.menuData[this.cursor].speak();\r\n\t}\r\n\r\n\tpreviousItem() {\r\n\t\tspeech.stop();\r\n\r\n\t\tif (this.first) {\r\n\t\t\tthis.first = false;\r\n\t\t\tif (!this.silent) this.sndMove.play();\r\n\t\t}\r\n\t\tif (this.cursor > 0) {\r\n\t\t\tif (!this.silent) this.sndMove.play();\r\n\t\t\tthis.cursor--;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.cursor = this.menuData.length - 1;\r\n\t\t\tif (!this.silent) this.sndWrap.play();\r\n\r\n\t\t}\r\n\t\tif (this.isAudio) {\r\n\t\t\tthis.sndName.stop();\r\n\t\t\tfor (let i in this.menuData) {\r\n\t\t\t\tif (this.menuData[i].type == MenuTypes.AUDIO) this.menuData[i].snd.stop();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.menuData[this.cursor].speak();\r\n\t\tif (typeof this.moveCallback !== \"undefined\") {\r\n\t\t\tthis.moveCallback(this.menuData[this.cursor].id);\r\n\t\t}\r\n\t}\r\n\r\n\tincrease() {\r\n\t\tif (this.menuData[this.cursor].type == MenuTypes.SLIDER || this.menuData[this.cursor].type == MenuTypes.SELECTOR) {\r\n\t\t\tthis.menuData[this.cursor].increase();\r\n\t\t\tif (this.menuData[this.cursor].type == MenuTypes.SLIDER) {\r\n\t\t\t\tif (!this.silent) this.sndSliderRight.play();\r\n\t\t\t} else {\r\n\t\t\t\tif (!this.silent) this.sndSelector.play();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdecrease() {\r\n\t\tif (this.menuData[this.cursor].type == MenuTypes.SLIDER || this.menuData[this.cursor].type == MenuTypes.SELECTOR) {\r\n\t\t\tthis.menuData[this.cursor].decrease();\r\n\t\t\tif (this.menuData[this.cursor].type == MenuTypes.SLIDER) {\r\n\t\t\t\tif (!this.silent) this.sndSliderLeft.play();\r\n\t\t\t} else {\r\n\t\t\t\tif (!this.silent) this.sndSelector.play();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinsertCharacter(char) {\r\n\t\tif (this.menuData[this.cursor].type == MenuTypes.EDIT) {\r\n\t\t\tthis.menuData[this.cursor].addChar(String.fromCharCode(char));\r\n\t\t\tif (!this.silent) this.sndKeyChar.play();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// Char navigation code\r\n\t\tfor (let i = this.cursor + 1; i < this.menuData.length; i++) {\r\n\t\t\tif (this.menuData[i].shortcut == String.fromCharCode(char).toLowerCase()) {\r\n\t\t\t\tthis.cursor = i;\r\n\t\t\t\tthis.select();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this.menuData[i].name.toLowerCase().substr(0, 1) == String.fromCharCode(char).toLowerCase()) {\r\n\t\t\t\tthis.cursor = i;\r\n\t\t\t\tthis.menuData[this.cursor].speak();\r\n\t\t\t\tthis.first = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (let i = 0; i < this.menuData.length; i++) {\r\n\t\t\tif (this.menuData[i].shortcut == String.fromCharCode(char).toLowerCase()) {\r\n\t\t\t\tthis.cursor = i;\r\n\t\t\t\tthis.select();\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.menuData[i].name.toLowerCase().substr(0, 1) == String.fromCharCode(char).toLowerCase()) {\r\n\t\t\t\tthis.cursor = i;\r\n\t\t\t\tthis.menuData[this.cursor].speak();\r\n\t\t\t\tthis.first = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tremoveCharacter() {\r\n\t\tif (this.menuData[this.cursor].type == MenuTypes.EDIT) {\r\n\t\t\tthis.menuData[this.cursor].removeChar();\r\n\t\t\tif (!this.silent) this.sndKeyDelete.play();\r\n\t\t}\r\n\t}\r\n\r\n\thandleInput(event) {\r\n\t\tthis.insertCharacter(event.which);\r\n\t}\r\n\r\n\tdestroySounds() {\r\n\t\tthis.sndKeyChar.destroy();\r\n\t\tthis.sndKeyDelete.destroy();\r\n\t\tthis.sndSliderLeft.destroy();\r\n\t\tthis.sndSliderRight.destroy();\r\n\t\tif (this.isAudio) this.sndName.destroy();\r\n\t\tthis.sndBoundary.destroy();\r\n\t\tthis.sndChoose.destroy();\r\n\t\tthis.sndMove.destroy();\r\n\t\tthis.sndOpen.destroy();\r\n\t\tthis.sndSelector.destroy();\r\n\t\tthis.sndWrap.destroy();\r\n\t\tfor (let i = 0; i < this.menuData.length; i++) {\r\n\t\t\tif (this.menuData[i].type == MenuTypes.AUDIO) this.menuData[i].snd.destroy();\r\n\t\t}\r\n\t\tif (typeof this.music !== 'undefined') {\r\n\t\t\tthis.music.destroy();\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tdestroy() {\r\n\t\tdocument.removeEventListener('keydown', this.kd);\r\n\t\tdocument.removeEventListener('keypress', this.kp);\r\n\t\tthis.hammer.destroy();\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.destroySounds();\r\n\t\t}, this.fadeTime * 1000);\r\n\t}\r\n\r\n\thandleKeys(event) {\r\n\t\tswitch (event.which) {\r\n\t\t\tcase KeyEvent.DOM_VK_RETURN:\r\n\t\t\t\tthis.select();\r\n\t\t\t\tbreak;\r\n\t\t\tcase KeyEvent.DOM_VK_PAGE_UP:\r\n\t\t\t\tthis.music.volume += 0.03;\r\n\t\t\t\tbreak;\r\n\t\t\tcase KeyEvent.DOM_VK_PAGE_DOWN:\r\n\t\t\t\tthis.music.volume -= 0.03;\r\n\t\t\t\tbreak;\r\n\t\t\tcase KeyEvent.DOM_VK_BACK_SPACE:\r\n\t\t\t\tthis.removeCharacter();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase KeyEvent.DOM_VK_DOWN:\r\n\r\n\t\t\t\tthis.nextItem();\r\n\t\t\t\tbreak;\r\n\t\t\tcase KeyEvent.DOM_VK_UP:\r\n\t\t\t\tthis.previousItem();\r\n\t\t\t\tbreak;\r\n\t\t\tcase KeyEvent.DOM_VK_RIGHT:\r\n\r\n\t\t\t\tthis.increase();\r\n\r\n\t\t\t\tbreak;\r\n\t\t\tcase KeyEvent.DOM_VK_LEFT:\r\n\r\n\t\t\t\tthis.decrease();\r\n\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\tasync runSync() {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tthis.run((s) => {\r\n\t\t\t\tresolve(s.selected);\r\n\t\t\t\tthis.destroy();\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\trun(callback) {\r\n\t\tif (typeof this.music === 'object') {\r\n\t\t\tthis.music.volume = 0.8;\r\n\t\t\tthis.music.loop = true;\r\n\t\t\tthis.music.play();\r\n\t\t\tspeech.ducker = this.music;\r\n\r\n\t\t} else if (typeof this.music === 'string') {\r\n\t\t\tthis.music = so.create(this.music, true);\r\n\t\t\tthis.music.volume = 0.8;\r\n\t\t\tthis.music.loop = true;\r\n\t\t\tthis.music.play();\r\n\t\t\tspeech.ducker = this.music;\r\n\t\t} else {\r\n\t\t}\r\n\t\tthis.selectCallback = callback;\r\n\t\tconst that = this;\r\n\t\tdocument.addEventListener('keypress', this.kp);\r\n\t\tdocument.addEventListener('keydown', this.kd);\r\n\r\n\t\tthis.hammer.on(\"swipeleft\", function (event) { that.handleSwipe(0); });\r\n\t\tthis.hammer.on(\"swiperight\", function (event) { that.handleSwipe(1); });\r\n\t\tthis.hammer.on(\"panup\", function (event) { that.handleSwipe(3); });\r\n\t\tthis.hammer.on(\"pandown\", function (event) { that.handleSwipe(4); });\r\n\t\tthis.hammer.on(\"tap\", function (event) { that.handleSwipe(2); });\r\n\t\tif (this.isAudio) {\r\n\t\t\tthis.sndName = so.create(this.name);\r\n\t\t\tthis.sndName.play();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (!this.silent) speech.speak(this.name);\r\n\t\t}\r\n\t\tif (!this.silent) this.sndOpen.play();\r\n\t}\r\n\r\n\thandleSwipe(action) {\r\n\t\tif (action == 3) {\r\n\t\t\tthis.decrease();\r\n\t\t}\r\n\t\tif (action == 4) {\r\n\t\t\tthis.increase();\r\n\t\t}\r\n\r\n\t\tif (action == 0) {\r\n\t\t\tthis.previousItem();\r\n\t\t}\r\n\t\tif (action == 1) {\r\n\t\t\tthis.nextItem();\r\n\t\t}\r\n\t\tif (action == 2) {\r\n\t\t\tthis.select();\r\n\t\t}\r\n\t}\r\n\r\n\tselect() {\r\n\t\t//select function\r\n\t\tconst selected = this.menuData[this.cursor].id;\r\n\t\tconst items = [];\r\n\t\tfor (let i = 0; i < this.menuData.length; i++) {\r\n\t\t\tlet addItem = null;\r\n\t\t\tif (this.menuData[i].type == MenuTypes.SLIDER) {\r\n\t\t\t\taddItem = {\r\n\t\t\t\t\tid: this.menuData[i].id,\r\n\t\t\t\t\tvalue: this.menuData[i].currentValue,\r\n\t\t\t\t\t//name: this.menuData[i].options[this.menuData[i].currentValue]\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tif (this.menuData[i].type == MenuTypes.EDIT) {\r\n\t\t\t\taddItem = {\r\n\t\t\t\t\tid: this.menuData[i].id,\r\n\t\t\t\t\tvalue: this.menuData[i].text\r\n\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tif (this.menuData[i].type == MenuTypes.SELECTOR) {\r\n\t\t\t\taddItem = {\r\n\t\t\t\t\tid: this.menuData[i].id,\r\n\t\t\t\t\tvalue: this.menuData[i].currentOption,\r\n\t\t\t\t\tname: this.menuData[i].options[this.menuData[i].currentOption]\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\titems.push(addItem);\r\n\t\t}\r\n\r\n\t\tconst toReturn = {\r\n\t\t\tselected,\r\n\t\t\tcursor: this.cursor,\r\n\t\t\titems\r\n\t\t};\r\n\t\tif (!this.silent) this.sndChoose.play();\r\n\t\tdocument.removeEventListener('keydown', this.kd);\r\n\t\tdocument.removeEventListener('keypress', this.kp);\r\n\t\tif (this.isAudio) {\r\n\t\t\tthis.sndName.stop();\r\n\t\t\tfor (let i = 0; i < this.menuData.length; i++) {\r\n\t\t\t\tif (this.menuData[i].type == MenuTypes.AUDIO) this.menuData[i].snd.stop();\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!this.silent) this.musicDuration = this.fadeTime * 1000;\r\n\t\tif (typeof this.music === \"undefined\" || this.silent) this.musicDuration = 0;\r\n\r\n\t\tconst that = this;\r\n\t\tif (typeof this.music !== \"undefined\") {\r\n\t\t\tthis.music.sound.fade(0, this.fadeTime);\r\n\t\t}\r\n\t\tif (this.silent) this.musicDuration = 0;\r\n\t\tsetTimeout(() => {\r\n\t\t\tthat.selectCallback(toReturn);\r\n\t\t}, this.musicDuration);\r\n\t}\r\n}\r\nexport { Menu };\r\n","export const debug = false\nimport { ScrollingText } from './scrollingText'\nimport { utils } from './utilities'\nimport { SoundHandler } from './soundHandler'\nimport { strings } from './strings'\nimport { so } from './soundObject'\nexport let _\nexport let content = {\n\tnumberOfVehicles: 7,\n\tbonusTypes: 3,\n\tshopItems: {\n\t\thyperjump: 500,\n\t\tbombs: 250,\n\t\tgalleryMembership: 75,\n\t\tshortfuse: 450,\n\n\t}\n}\nexport var gameID = \"road\";\nexport let parsedCars = []\nparsedCars.push({})\nimport { speech } from './tts'\nimport { LanguageSelector } from './languageSelector'\nimport { Game } from './game';\nexport var version = \"1.0\";\nexport let data = {\n\tcoins: 0,\n\tjumps: 0,\n\tunlocks: {\n\t\thyperjump: false,\n\t},\n}\nexport var version2 = \"\";\n\nexport var lang = 0;\nexport var ttsVoice;\nexport var ttsRate = 1;\nimport $ from 'jquery';\nimport { Menu } from './menu';\nimport { AudioItem, MenuItem, MenuTypes } from './menuItem'\ndocument.addEventListener('DOMContentLoaded', setup);\nasync function setup() {\n\tdocument.getElementById(\"app\").focus();\n\tif (localStorage.getItem(\"string_data\") != null) {\n\t\tdata = JSON.parse(localStorage.getItem(\"string_data\"))\n\t}\n\ttry {\n\t\tconst fs = require('fs')\n\t\tlet file = fs.readFileSync(\"./cars.txt\", \"utf8\")\n\t\tconsole.log(file)\n\t\tlet lines = file.split(\"\\n\")\n\t\tconsole.log(lines[0])\n\t\tlines.forEach(element => {\n\t\t\tlet elements = element.split(\",\")\n\t\t\tlet name = elements[0]\n\t\t\tlet speed = Number(elements[1])\n\t\t\tlet horning = elements[2]\n\t\t\tlet hornable = \"\"\n\t\t\tif (horning == 1) {\n\t\t\t\thornable = name\n\t\t\t}\n\t\t\telse if (horning == 0) {\n\t\t\t\thornable = \"\"\n\t\t\t} else {\n\t\t\t\thornable = horning;\n\t\t\t}\n\t\t\tlet z = Number(elements[3])\n\t\t\tlet blowup = 0\n\t\t\tlet blow = \"generic\";\n\n\t\t\tif (typeof elements[4] !== \"undefined\") {\n\t\t\t\tblowup = Number(elements[4])\n\t\t\t\tconsole.log(blowup)\n\t\t\t\tswitch (blowup) {\n\t\t\t\t\tcase 0: blow = \"generic\"; break;\n\t\t\t\t\tcase 1: blow = name; break;\n\t\t\t\t\tdefault: blow = \"generic\"; break;\n\t\t\t\t}\n\t\t\t\tif (typeof data.bulletGallery === \"undefined\") {\n\t\t\t\t\tdata.bulletGallery = {}\n\t\t\t\t}\n\t\t\t\tif (typeof data.bulletGallery[blow] === \"undefined\") {\n\t\t\t\t\tdata.bulletGallery[blow] = false\n\t\t\t\t}\n\t\t\t}\n\t\t\tparsedCars.push({ sound: \"vehicles/\" + name, speed: speed, hornable: hornable, name: name, z: z, blowup: blow })\n\t\t});\n\t\tcontent.numberOfVehicles = parsedCars.length - 1\n\t} catch (e) {\n\t\tconsole.log(\"Error parsing cars file: \" + e)\n\t}\n\t//the below is an example of a new version notifier. The version2 variable can be used and compared inside a menu or wherever, and would contain the new version of your game based on what your server returns.\n\tlet prom = new Promise((resolve, reject) => {\n\t\tfetch('http://yourserver.com/versions.php?gameVersionRequest=' + gameID)\n\t\t\t.then(event => event.text()) //convert http response into text\n\t\t\t.then(data => {\n\t\t\t\tversion2 = data;\n\t\t\t\tresolve(data); //resolve promise let go.\n\t\t\t});\n\t});\n\tlet langs = new LanguageSelector(\"langSelect\", async (result) => {\n\t\tlang = result;\n\t\tspeech.setLanguage(lang);\n\t\t_ = strings.get\n\t\tspeech.setRate(3)\n\t\t//await strings.check(2)\n\t\tmainMenu();\n\t})\n}\nexport async function mainMenu() {\n\tlet music = so.create(\"music/menu\")\n\tmusic.volume = 0.6\n\tmusic.loop = true;\n\tmusic.play()\n\tspeech.ducker = music\n\tlet items = []\n\titems.push(new MenuItem(0, strings.get(\"mStart\")))\n\titems.push(new MenuItem(1, strings.get(\"mShop\", [data.coins])))\n\titems.push(new MenuItem(2, strings.get(\"mBullet\")))\n\tlet menu = new Menu(strings.get(\"mainMenu\"), items)\n\tlet selection = await menu.runSync()\n\tawait music.fade(0)\n\tswitch (selection) {\n\t\tcase 0:\n\t\t\tlet game = new Game()\n\t\t\tgame.start()\n\t\t\tbreak;\n\t\tcase 1: await shop(); break;\n\t\tcase 2:\n\t\t\tawait browseGallery()\n\t\t\tbreak;\n\t\tdefault: break;\n\t}\n}\n\nexport function save() {\n\tlocalStorage.setItem(\"string_data\", JSON.stringify(data))\n}\nasync function browseGallery() {\n\tif (!getUnlock(\"galleryMembership\")) {\n\t\tlet sound = so.create(\"gallery_locked\")\n\t\tawait sound.playSync()\n\t\tawait new ScrollingText(strings.get(\"galleryLocked\"))\n\t\tmainMenu();\n\t\treturn;\n\t}\n\tlet locked = 0, unlocked = 0;\n\tlet pool = new SoundHandler()\n\tlet items = []\n\titems.push(new MenuItem(-1, strings.get(\"mBack\")))\n\tlet arr = Object.entries(data.bulletGallery)\n\tarr.forEach((v) => {\n\t\tif (v[1] == false) {\n\t\t\titems.push(new AudioItem(-1, \"blowup/locked\"))\n\t\t\tlocked++;\n\t\t}\n\t\tif (v[1] == true) {\n\t\t\titems.push(new AudioItem(-1, \"blowup/\" + v[0]))\n\t\t\tunlocked++;\n\t\t}\n\t})\n\n\tspeech.speak(strings.get(\"bulletIntro\", [unlocked, (locked + unlocked)]))\n\tlet menu = new Menu(\" \", items)\n\tmenu.silent = true\n\tmenu.run((s) => {\n\t\tmenu.destroy();\n\t\tmainMenu()\n\t\treturn;\n\t})\n}\nexport function getUnlock(v) {\n\tif (typeof data.unlocks === \"undefined\") data.unlocks = {}\n\tif (typeof data.unlocks[v] === \"undefined\") data.unlocks[v] = false;\n\treturn data.unlocks[v]\n}\nexport function setUnlock(v, value = true) {\n\tconsole.log(v)\n\tif (typeof data.unlocks === \"undefined\") data.unlocks = {}\n\tif (typeof data.unlocks[v] === \"undefined\") data.unlocks[v] = false;\n\tdata.unlocks[v] = value\n\tsave()\n\treturn value;\n\n}\nexport function increase(v, value = 1) {\n\tif (typeof data[v] === \"undefined\") {\n\t\tdata[v] = value\n\t} else {\n\t\tdata[v] += value;\n\t}\n\tsave()\n\treturn value;\n\n}\nexport function decrease(v, value = 1) {\n\tif (typeof data[v] === \"undefined\") {\n\t\tdata[v] = 0 - value\n\t} else {\n\t\tdata[v] -= value;\n\t}\n\tsave()\n\treturn value;\n\n}\n\nexport function setData(v, value) {\n\tif (typeof data[v] === \"undefined\") data[v] = value\n\tdata[v] = value\n\tsave()\n\treturn value;\n\n}\nexport function getData(v) {\n\tif (typeof data[v] === \"undefined\") data[v] = 0\n\treturn data[v]\n}\nasync function shop() {\n\tlet shopAmbience = so.create(\"shop_ambience\")\n\tshopAmbience.volume = 0.6\n\tshopAmbience.loop = true\n\tshopAmbience.play()\n\tlet menu;\n\tlet result;\n\tlet buy = so.create(\"purchase_item\")\n\tlet nobuy = so.create(\"no_cash\")\n\tdata.coins = 100000\n\tspeech.speak(strings.get(\"mShopIntro\"))\n\twhile (result != 0) {\n\t\tawait utils.sleep(5)\n\t\tlet items = []\n\t\titems.push(new MenuItem(0, strings.get(\"mShopBack\", [data.coins])))\n\t\tfor (var k in content.shopItems) {\n\t\t\tif (!getUnlock(k)) {\n\t\t\t\titems.push(new MenuItem(k, strings.get(\"shop\" + k) + \": \" + content.shopItems[k] + \" \" + strings.get(\"coins\")))\n\t\t\t}\n\t\t}\n\t\tmenu = new Menu(\" \", items)\n\t\tmenu.silent = true\n\t\tresult = await menu.runSync()\n\t\tif (result != 0) {\n\t\t\tif (data.coins >= content.shopItems[result]) {\n\t\t\t\tdata.coins -= content.shopItems[result]\n\t\t\t\tsetUnlock(result)\n\t\t\t\tbuy.replay();\n\t\t\t} else {\n\t\t\t\tnobuy.replay();\n\t\t\t}\n\t\t}\n\t}\n\n\tmenu.destroy()\n\tshopAmbience.destroy()\n\tawait mainMenu()\n\treturn;\n}"]}