process.env.HMR_PORT=0;process.env.HMR_HOSTNAME="localhost";parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"XFNl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.KeyEvent=void 0;const _={DOM_VK_CANCEL:3,DOM_VK_HELP:6,DOM_VK_BACK_SPACE:8,DOM_VK_TAB:9,DOM_VK_CLEAR:12,DOM_VK_RETURN:13,DOM_VK_ENTER:14,DOM_VK_SHIFT:16,DOM_VK_CONTROL:17,DOM_VK_ALT:18,DOM_VK_PAUSE:19,DOM_VK_CAPS_LOCK:20,DOM_VK_ESCAPE:27,DOM_VK_SPACE:32,DOM_VK_PAGE_UP:33,DOM_VK_PAGE_DOWN:34,DOM_VK_END:35,DOM_VK_HOME:36,DOM_VK_LEFT:37,DOM_VK_UP:38,DOM_VK_RIGHT:39,DOM_VK_DOWN:40,DOM_VK_PRINTSCREEN:44,DOM_VK_INSERT:45,DOM_VK_DELETE:46,DOM_VK_0:48,DOM_VK_1:49,DOM_VK_2:50,DOM_VK_3:51,DOM_VK_4:52,DOM_VK_5:53,DOM_VK_6:54,DOM_VK_7:55,DOM_VK_8:56,DOM_VK_9:57,DOM_VK_SEMICOLON:59,DOM_VK_EQUALS:61,DOM_VK_A:65,DOM_VK_B:66,DOM_VK_C:67,DOM_VK_D:68,DOM_VK_E:69,DOM_VK_F:70,DOM_VK_G:71,DOM_VK_H:72,DOM_VK_I:73,DOM_VK_J:74,DOM_VK_K:75,DOM_VK_L:76,DOM_VK_M:77,DOM_VK_N:78,DOM_VK_O:79,DOM_VK_P:80,DOM_VK_Q:81,DOM_VK_R:82,DOM_VK_S:83,DOM_VK_T:84,DOM_VK_U:85,DOM_VK_V:86,DOM_VK_W:87,DOM_VK_X:88,DOM_VK_Y:89,DOM_VK_Z:90,DOM_VK_CONTEXT_MENU:93,DOM_VK_NUMPAD0:96,DOM_VK_NUMPAD1:97,DOM_VK_NUMPAD2:98,DOM_VK_NUMPAD3:99,DOM_VK_NUMPAD4:100,DOM_VK_NUMPAD5:101,DOM_VK_NUMPAD6:102,DOM_VK_NUMPAD7:103,DOM_VK_NUMPAD8:104,DOM_VK_NUMPAD9:105,DOM_VK_MULTIPLY:106,DOM_VK_ADD:107,DOM_VK_SEPARATOR:108,DOM_VK_SUBTRACT:109,DOM_VK_DECIMAL:110,DOM_VK_DIVIDE:111,DOM_VK_F1:112,DOM_VK_F2:113,DOM_VK_F3:114,DOM_VK_F4:115,DOM_VK_F5:116,DOM_VK_F6:117,DOM_VK_F7:118,DOM_VK_F8:119,DOM_VK_F9:120,DOM_VK_F10:121,DOM_VK_F11:122,DOM_VK_F12:123,DOM_VK_F13:124,DOM_VK_F14:125,DOM_VK_F15:126,DOM_VK_F16:127,DOM_VK_F17:128,DOM_VK_F18:129,DOM_VK_F19:130,DOM_VK_F20:131,DOM_VK_F21:132,DOM_VK_F22:133,DOM_VK_F23:134,DOM_VK_F24:135,DOM_VK_NUM_LOCK:144,DOM_VK_SCROLL_LOCK:145,DOM_VK_COMMA:188,DOM_VK_PERIOD:190,DOM_VK_SLASH:191,DOM_VK_BACK_QUOTE:192,DOM_VK_OPEN_BRACKET:219,DOM_VK_BACK_SLASH:220,DOM_VK_CLOSE_BRACKET:221,DOM_VK_QUOTE:222,DOM_VK_META:224};exports.KeyEvent=_;
},{}],"CLUq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.utils=void 0,require("babel-polyfill");class e{calculateDelta(e,t,r=0){(t+=r)<e&&(delta=e-t),t>e&&(delta=t-e)}progressPan(e,t){return(200*e/t-100)/100}progressPitch(e,t,r,n,a){return e/(t+r)*(a-n)+n}progressVolume(e,t,r,n,a){return e>r?0:e/(t+r)*(a-n)+n}getProportion(e,t,r,n,a){return e>r?1:e/(t+r)*(a-n)+n}distance3D(e,t,r,n,a,l){return Math.sqrt((n-e)*(n-e)+(a-t)*(a-t)+(l-r)*(l-r))}distance(e,t,r,n){return Math.sqrt((e-r)*(e-r)+(t-n)*(t-n))}calculateAngle(e,t,r,n){let a=Math.atan2(n-t,r-e);return a=a>=0?0:2*Math.PI+a}isCollide3D(e,t){return e.x<=t.x+t.width&&e.x+e.width>=t.x&&e.y<=t.y+t.height&&e.y+e.height>=t.y&&e.z<=t.z+t.depth&&e.z+e.depth>=t.z}randomInt(e,t){return Math.floor(Math.random()*(t-e+1))+e}getRandomArbitrary(e,t){return Math.random()*(t-e)+e}sleep(e){return new Promise(t=>setTimeout(t,e))}percent(e,t){return 100*e/t}percentOf(e,t){return t*e/100}percentage(e,t){return t*e/100}average(e,t=0){const r=e.length;let n=0,a=0;if(e.length<t)return-1;for(let l=t;l<e.length;l++)n+=e[l];return a=n/(r-t)}averageInt(e,t=0){const r=e.length;let n=0,a=0;if(e.length<t)return-1;for(let l=t;l<e.length;l++)n+=e[l];return a=n/(r-t),Math.floor(a)}neg(e){return e>=0?0==e?0:1:-1}numericSort(e,t){return e<t?-1:e==t?0:1}shuffle(e){for(let t=e.length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e}objSize(e){let t,r=0;for(t in e)e.hasOwnProperty(t)&&r++;return r}copyObject(e){return Object.assign(Object.create(Object.getPrototypeOf(e)),e)}arraysEqual(e,t){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}pauseTimeout(e){Date.now();clearTimeout(e)}resumeTimeout(e){return remaining-=Date.now()-start,window.setTimeout(callback,remaining)}randomProperty(e){var t=Object.keys(e);return e[t[t.length*Math.random()<<0]]}async findFiles(e,t=""){let r=[],n="";return await walk.filesSync(e,(e,a,l,o)=>{""==t?r.push(a):(n=a.substr(0-t.length,t.length))==t&&r.push(a)}),r}async findFolders(e){let t=[];return await walk.dirsSync(e,(e,r,n,a)=>{t.push(r)}),t}randomElement(e){return e[Math.floor(Math.random()*e.length)]}}var t=new e;exports.utils=t;
},{}],"EYbI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.strings=void 0;var e=require("./main"),s=require("./utilities"),o=require("./tts"),a=require("./scrollingText");class r{constructor(){this.strings={},this.strings[1]={bankedScore:"With a saved score of",ws:"world size",bonus7:"Stopper",iStoppers:"%1 Stoppers",noBombs:"You don't have any bombs!",noStoppers:"You don't have any stoppers",shopbombs:"Bombs, to make cars explode by pressing the b key. Also allows unlocking of explosion sounds in the explosions gallery",bonus3:"Slowdown",bonus4:"Nothing!",bonus5:"bomb",bonus6:"Coffee rush",coins:"coins",iBombs:"%1 Bombs",mShopBack:"Leave shop (You have %1 coins)",mShopIntro:"Welcome to the item shop! Press enter on any item to buy it.",shophyperjump:"Hyper jumps: Allows collecting of hyperjump items, which save you from being hit by incoming cars",shopgalleryMembership:"Explosions gallery lifetime membership",shopshortfuse:"Short fuse: Divides the time it takes for bombs to explode by 3.",galleryLocked:"The explosions gallery will remain locked until you buy a membership from the store. Darn!",mBullet:"Explosions gallery",locked:"Locked!",bulletIntro:"Welcome to the explosions gallery! You have unlocked %1 out of %2 possible explosions. Press enter to go back to the main menu.",iJumps:"%1 hyperjumps",emptyInventory:"Your inventory is empty",mainMenu:"Use arrows to move, enter to continue.",mStart:"Start Game",mShop:"Item Shop (You have %1 coins)",level:"Level",upArrowMove:"Press a number between 1 and 5 to start moving, 1 being the slowest speed possible. Letter s to check your score, h checks your health, l to check level.",bonus1:"Health bonus!",bonus2:"Hyper jump!",selectVoice:"%1 voices available, use the up and down arrows to select a voice, enter when you're done.",mSelectVoice:"text to speech voice",mLang:"Change language",newUpdate:"There is a new version available! You have version %1, version %2 is available.",mSapi:"Use text to speech for the game",mReader:"Use your screen reader for the game",newRate:"This is a text to speech rate test. Please press enter when done",rating:"Press right and left arrow keys to change the rate. Press enter when done",mRate:"Change speech rate",K:"king",Q:"queen",A:"ace",J:"jack",cspades:"spades",cdiamonds:"diamonds",cclubs:"clubs",chearts:"hearts",dq:"This is a game of risk. You will risk losing %1 beatcoins. Continue?",lang:"English",langs:"Select your language",mSelect:"Please select",mBack:"go back",mStart:"Start Game",yes:"Yes",no:"no",ok:"ok"},this.strings[2]={noBombs:"No tienes bombas!",shopbombs:"Bombas, para hacer explotar los coches con la tecla b. También podrás desbloquear los sonidos de las explosiones",selectVoice:"%1 voces disponibles. Usa las flechas y enter para cambiar la voz",mSelectVoice:"Voz de la tts",mLang:"Cambiar Idioma",newUpdate:"Nueva versión disponible! Tienes la %1, la %2 está disponible",mSapi:"Usar SAPI para el juego",mReader:"Usar lector de pantalla",newRate:"Prueba de la velocidad de la voz. Pulsa enter para dejarla así",rating:"Pulsa las flechas izquierda y derecha para cambiar la velocidad y enter para aceptar",mRate:"Cambiar velocidad de la voz.",mSelect:"Por favor, selecciona",mBack:"Volver",yes:"sí",no:"no",ok:"aceptar",iStoppers:"Frenados %1",coins:"Monedas",iBombs:"%1 Bombas",mShopBack:"Salir de la tienda (tienes %1 monedas)",mShopIntro:"Te doy la bienvenida a la tienda, donde puedes comprar mejoras para el juego. Pulsa énter en cualquier item para comprarlo.",shophyperjump:"Hipersaltos: Permite obtener los bonus de hipersalto, que saltarán los autos automáticamente.",shopgalleryMembership:"Pase de oro para la galería de explosiones",shopshortfuse:"Mecha corta, divide el tiempo de explosión de las bombas por 3",galleryLocked:"La galería de explosiones estará bloqueada hasta que compres el pase de oro. ¡Vaya!",mBullet:"Galería de explosiones",locked:"Bloqueado",bulletIntro:"Te doy la bienvenida a la galería de explosiones! Has desbloqueado %1 de %2 explosiones posibles. Pulsa enter para volver al menú",iJumps:"Tienes %1 hipersaltos",emptyInventory:"Tu inventario está vacío.",upArrowMove:"Pulsa un número del 1 al 5 para empezar a moverte, 1 el más lento. S para ver la puntuación, h para la energía, l para el nivel, i para el inventario.",bonus1:"Bonus de energía",bonus2:"Hipersalto",bonus3:"Ralentizado",bonus4:"Nada!",bonus5:"bomba",mStart:"Empezar juego",mShop:"Tienda (Tienes %1 monedas)",mainMenu:"Menú Principal. Flechas para navegar, enter para continuar."}}get(s,o=[]){let a;if(void 0!==this.strings[e.lang][s])a=this.strings[e.lang][s];else{if(void 0===this.strings[1][s])return s;a=this.strings[1][s]}return o.forEach((e,s)=>{const o=Number(s)+1;a=a.replace("%"+o,e)}),a}speak(s,a=[]){let r;void 0!==this.strings[e.lang][s]?r=this.strings[e.lang][s]:void 0!==this.strings[1][s]?r=this.strings[1][s]:o.speech.speak(s),a.forEach((e,s)=>{const o=Number(s)+1;r=r.replace("%"+o,e)}),o.speech.speak(r)}async check(e){s.utils.objSize(this.strings);for(const s in this.strings[1])this.strings[e].hasOwnProperty(s)||await new a.ScrollingText(s+": "+this.strings[1][s])}}var t=new r;exports.strings=t;
},{"./main":"epB2","./utilities":"CLUq","./tts":"wjcX","./scrollingText":"Pzgz"}],"efjR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.KeyboardInput=void 0;var e=s(require("jquery"));function s(e){return e&&e.__esModule?e:{default:e}}const t=require("events");class h extends t{constructor(){super(),this.keyDown=[],this.justPressed=[],this.chars=[],this.justReleased=[],this.justPressedEventCallback=null,this.charEventCallback=null}init(){const e=this;document.addEventListener("keydown",s=>{e.handleKeyDown(s)}),document.addEventListener("keyup",s=>{e.handleKeyUp(s)}),document.addEventListener("keypress",s=>{e.handleChar(s)})}pause(){this.isPaused=!0}resume(){this.isPaused=!1}handleKeyDown(e){1==this.keyDown[e.which]&&void 0!==this.keyDown[e.which]||(this.keyDown[e.which]=!0,this.justPressed[e.which]=!0,this.emit(e.which),this.justReleased[e.which]=!1,void 0!==this.justPressedEventCallback&&null!=this.justPressedEventCallback&&this.justPressedEventCallback(e.which))}handleChar(e){e.which<48||e.which>122||""!=String.fromCharCode(e.which)&&(this.chars+=String.fromCharCode(e.which),this.emit("chr"+String.fromCharCode(e.which)),void 0!==this.charEventCallback&&null!=this.charEventCallback&&this.charEventCallback(String.fromCharCode(e.which)))}handleKeyUp(e){1==this.keyDown[e.which]&&(this.keyDown[e.which]=!1,this.justPressed[e.which]=!1,this.justReleased[e.which]=!0,this.emit("!"+e.which)),this.chars=""}destroy(){this.charEventCallback=null,this.justPressedEventCallback=null}isDown(e){return!this.isPaused&&this.keyDown[e]}isJustPressed(e){return!this.isPaused&&(1==this.justPressed[e]&&(this.justPressed[e]=!1,!0))}isJustReleased(e){return!!this.justReleased[e]&&(this.justReleased[e]=!1,!0)}keysDown(){const e=[];return this.keyDown.forEach((s,t)=>{s&&e.push(t)}),e}getChars(){const e=this.chars;return this.chars="",e}keysPressed(){const e=[];return this.justPressed.forEach((s,t)=>{s&&e.push(t)}),this.justPressed.splice(),e}releaseAllKeys(){}keysReleased(){const e=[];return this.justReleased.forEach((s,t)=>{s&&e.push(t)}),this.justReleased.splice(),e}}exports.KeyboardInput=h;
},{}],"wjcX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.speech=exports.TTS=void 0,require("babel-polyfill");var e=require("./main"),t=require("./strings"),s=require("./utilities"),i=require("./input.js"),n=require("./keycodes"),r=h(require("speak-tts"));function h(e){return e&&e.__esModule?e:{default:e}}const{app:c}=require("electron").remote,{exec:o}=require("child_process"),a=!0;class l{constructor(s=!0){this.voices=[],this.speechController=new i.KeyboardInput,this.speechController.init(),this.ducking=!1,1==e.lang&&(this.lang="en"),2==e.lang&&(this.lang="es"),this.webTTS=s,this.synth=new r.default,this.rate=3,this.speechController.justPressedEventCallback=(e=>{this.interrupt&&this.speak("",!1),e!=n.KeyEvent.VK_SHIFT&&e!=n.KeyEvent.DOM_VK_ESCAPE||(this.speak("",!1),this.childProcess&&this.childProcess.kill(),this.unduck()),e==n.KeyEvent.VK_UP&&this.speechController.isDown(n.KeyEvent.DOM_VK_SHIFT)&&(this.setRate(this.rate+1),t.strings.speak("newRate")),e==n.KeyEvent.VK_DOWN&&this.speechController.isDown(n.KeyEvent.DOM_VK_CONTROL)&&(this.setRate(this.rate+1),t.strings.speak("newRate"))}),this.synth.init({lang:this.lang,rate:this.rate,splitSentences:!1,listeners:{}}).then(e=>{this.voices=e.voices}).catch(t=>{(0,e.report)(t)})}setLanguage(t){try{1==t&&(this.lang="en"),2==t&&(this.lang="es"),this.synth.setLanguage(this.lang),"darwin"==process.platform&&this.setVoice(null,!0),console.log("default voice ",this.voice)}catch(s){(0,e.report)(s)}}setRate(e){let t=e;e>10&&(t=10),this.rate=t,this.synth.setRate(t)}speak(e,t=!1){let s=c.accessibilitySupportEnabled;if(s&&(this.webTTS=!1),s||(this.webTTS=!0),"darwin"==process.platform&&(this.webTTS=!0),this.webTTS)try{"number"==typeof e&&(e=" "+e+"."),"darwin"==process.platform?this.speakUnthreaded(e):this.synth.speak({text:e,queue:t,listeners:{onstart:()=>{this.duck()},onend:()=>{this.unduck()},onerror:e=>!1}})}catch(i){console.error(i)}else{this.duck(),document.getElementById("speech").innerHTML="";const t=document.createElement("p");t.appendChild(document.createTextNode(e)),document.getElementById("speech").appendChild(t)}}setWebTTS(e){this.webTTS=e}stop(){this.webTTS&&this.synth.cancel()}async changeRate(){let e=u.rate;const r=new i.KeyboardInput;for(r.init(),t.strings.speak("rating");!r.isJustPressed(n.KeyEvent.DOM_VK_RETURN);)await s.utils.sleep(5),r.isJustPressed(n.KeyEvent.DOM_VK_RIGHT)&&((e+=.25)>10&&(e=10),u.setRate(e),t.strings.speak("newRate")),r.isJustPressed(n.KeyEvent.DOM_VK_LEFT)&&((e-=.25)<1&&(e=1),u.setRate(e),t.strings.speak("newRate"))}changeVoice(e){let t=[];for(var s in this.voices)t.push(this.voices[s].name);t.includes(e)&&(u.synth.setVoice(e),this.voice=e)}setVoice(s,r=!1){let h="en";1==e.lang&&(h="en"),2==e.lang&&(h="es");let c=[];for(var o in this.voices){this.voices[o].lang.split("-")[0]==h&&c.push(this.voices[o].name)}r||u.speak(t.strings.get("selectVoice",[c.length]));let a=new i.KeyboardInput,l=-1;if(a.init(),r)try{return this.synth.setVoice(c[0]),this.voice=c[0],c[0]}catch(d){return(0,e.report)(d),this.synth.setVoice(c[1]),this.voice=c[1],c[1]}else a.justPressedEventCallback=(e=>{if(e==n.KeyEvent.DOM_VK_DOWN&&++l>=c.length&&(l=0),e==n.KeyEvent.DOM_VK_UP&&--l<=-1&&(l=c.length-1),e==n.KeyEvent.DOM_VK_RETURN||e!=n.KeyEvent.DOM_VK_UP&&e!=n.KeyEvent.DOM_VK_DOWN){if(-1!=l)return a.destroy(),void 0!==s&&s(c[l]),c[l]}else this.synth.setVoice(c[l]),u.speak(c[l])})}duck(){this.ducking||(this.ducking=!0,void 0!==this.ducker&&this.ducker.duck())}unduck(){this.ducking=!1,void 0!==this.ducker&&this.ducker.unduck()}speakUnthreaded(e){let t=100*this.rate;this.childProcess&&this.childProcess.kill(),this.duck(),this.childProcess=o('say "'+e+'" -r '+t+" -v "+this.voice,(e,t,s)=>{if(e)throw`error: ${e.message}`;s?console.log(`stderr: ${s}`):(console.log(`stdout: ${t}`),this.unduck())})}}exports.TTS=l;const u=new l(!1);exports.speech=u;
},{"./main":"epB2","./strings":"EYbI","./utilities":"CLUq","./input.js":"efjR","./keycodes":"XFNl"}],"pOT6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.so=void 0,require("babel-polyfill");var e=require("./main"),s=require("./tts"),t=d(require("sono/effects/panner")),i=d(require("sono")),n=require("./input"),o=require("./keycodes"),u=require("./utilities");function d(e){return e&&e.__esModule?e:{default:e}}const a=require("events");var h;t.default.defaults={panningModel:"HRTF",maxDistance:50},i.default.playInBackground=!0;class l extends a{constructor(e,s=0,t=0,n=!1){super(),this.duckingFirstTime=!0,this.stream=n,this.panner=null,this.fileName=e,"string"==typeof e?(n||(this.sound=i.default.create({src:e,onComplete:()=>{this.doneLoading()}}),this.timeout=setTimeout(()=>{this.checkProgress()},2e3),this.loaded=!1,this.callback=s,this.tag=t),n&&(this.loaded=!0,this.callback=s,this.tag=t,this.sound=i.default.create(new Audio(e)),this.doneLoading())):"object"==typeof e&&(this.sound=i.default.create(""),this.sound.data=e,this.loaded=!1,this.callback=s,this.tag=t,this.doneLoading())}get playbackRate(){return this.sound.playbackRate}set playbackRate(e){return this.sound.playbackRate=e}get pitch(){return this.sound.playbackRate}set pitch(e){return this.sound.playbackRate=e}set loop(e){this.sound.loop=e}checkProgress(){this.stream||(0==this.sound.progress&&(this.sound.destroy(),this.sound=i.default.create({src:this.fileName,onComplete:()=>{this.doneLoading()}},this.stream)),1==this.sound.progress?this.doneLoading():this.timeout=setTimeout(()=>{this.checkProgress()},500))}doneLoading(){this.stream||clearTimeout(this.timeout),this.loaded=!0,0!=this.callback&&this.callback()}replay(){this.sound.stop(),this.sound.play()}play(){try{this.sound.play()}catch(e){this.stream&&(this.sound=i.default.create(new Audio(this.fileName))),this.stream||(this.sound=i.default.create({src:this.fileName,onComplete:()=>{this.doneLoading()}})),this.sound.play()}}stop(){this.sound.stop()}pause(){this.sound.pause()}resume(){this.sound.resume()}destroy(){try{this.sound.destroy()}catch(e){}}unload(){this.sound.destroy()}duck(e){this.duckingFirstTime&&(this.oldVolume=this.volume),this.duckingFirstTime=!1,this.sound.fade(.3,.15)}unduck(e){this.sound.fade(this.oldVolume,.15)}async fade(e){return this.sound.fade(0,e/1e3),new Promise(s=>{setTimeout(()=>{this.sound.stop(),s("ok")},e)})}pos(e,s,t){}forcePlay(){this.sound.stop(),this.sound.play()}async playSync(e=!1){const s=new n.KeyboardInput;return s.init(),this.sound.play(),s.justPressedEventCallback=(e=>{e!=o.KeyEvent.DOM_VK_Q&&e!=o.KeyEvent.DOM_VK_X&&e!=o.KeyEvent.DOM_VK_ESCAPE&&e!=o.KeyEvent.DOM_VK_SPACE&&e!=o.KeyEvent.DOM_VK_ENTER||(this.sound.stop(),s.justPressedEventCallback=null)}),new Promise(t=>{this.sound.once("ended",()=>{this.sound.removeAllListeners(),e&&this.sound.destroy(),t("ok"),s.justPressedEventCallback=null}),this.sound.once("stop",()=>{this.sound.removeAllListeners(),e&&this.sound.destroy(),t("ok"),s.justPressedEventCallback=null})})}get active(){return!!this.sound.loaded&&(!(this.sound.progress<1)&&(!!this.sound.loaded||void 0))}get playing(){return this.sound.playing}get pan(){return this.panner?this.currentPan:(this.panner=this.sound.effects.add((0,t.default)()),this.currentPan=0,0)}set pan(e){return this.panner||(this.panner=this.sound.effects.add((0,t.default)())),this.currentPan=e,this.panner.set(e)}get volume(){return this.sound.volume}set volume(e){this.sound.volume=e}seek(e){return this.sound.seek(e)}get currentTime(){return this.sound.currentTime}get duration(){return 1e3*this.sound.duration}get position(){return this.sound.currentTime}set currentTime(e){return this.sound.seek(e)}}class r{constructor(){this.sounds=new Array,this.loadingQueue=!1,this.queueCallback=0,this.loadedSounds=0,this.loadingSounds=0,this.loadedCallback=0,this.queue=new Array,this.queueLength=0,this.statusCallback=null,this.directory="./sounds/",this.extension=".ogg",this.oneShots=new Array,this.debug=!1,this.oneShotSound=null}setStatusCallback(e){this.statusCallback=e}findSound(e){for(let s=0;s<this.sounds.length;s++)if(this.sounds[s].fileName==e&&this.sounds[s].loaded)return this.sounds[s];return-1}findSoundIndex(e){for(const s in this.sounds)if(this.sounds[s].fileName==e)return s;return-1}resetQueuedInstance(){for(let e=0;e<this.sounds.length;e++)void 0!==this.sounds[e]&&1==this.sounds[e].tag&&(this.sounds[e].sound.destroy(),this.sounds.splice(e,1));this.loadingQueue=!1,this.queueCallback=0,this.loadedSounds=0,this.loadingSounds=0,this.loadedCallback=0,this.queue=new Array,this.queueLength=0,this.statusCallback=null}create(e,s=!1){e=this.directory+e+this.extension;let t=-1,i=null;return-1==(t=this.findSound(e))||null==t.sound.data?(i=new l(e,()=>{s||this.doneLoading()},0,s),this.sounds.push(i)):(i=new l(t.sound.data,()=>{s||this.doneLoading()},0,s)).fileName=t.fileName,i.fileName=e,i}async loadQueueSync(){return new Promise(e=>{c.setQueueCallback(()=>{e(!0)}),c.loadQueue()})}async createSync(e,s=!1){return new Promise(t=>{e=this.directory+e+this.extension;let i=-1;i=this.findSound(e);let n=null;-1==i||null==i.sound.data?(n=new l(e,()=>{s||this.doneLoading()},0,s),this.sounds.push(n),s&&t(n)):(n=new l(i.sound.data,()=>{s||this.doneLoading()},0,s),t(n)),n.fileName=e,s&&t(n),s||n.sound.once("loaded",()=>{t(n),this.doneLoading()})})}async playSync(e){let s=await c.createSync(e);await s.playSync(),s.destroy()}enqueue(e,s=!1){e=this.directory+e+this.extension,this.queue.push({file:e,stream:s}),this.queueLength=this.queue.length}loadQueue(){this.handleQueue(),this.loadingQueue=!0}setQueueCallback(e){this.queueCallback=e}resetQueue(){this.queue=[],this.loadingQueue=!1}handleQueue(){if(this.queue.length>0){if(void 0!==this.statusCallback&&null!=this.statusCallback&&this.statusCallback(1-this.queue.length/this.queueLength),-1!=this.findSound(this.queue[0].file))return this.queue.splice(0,1),void this.handleQueue();let e=this.queue[0].file,s=this.queue[0].stream;this.queue.splice(0,1),this.sounds.push(new l(e,()=>{this.handleQueue()},1,s))}else this.loadingQueue=!1,void 0!==this.queueCallback&&0!=this.queueCallback&&this.queueCallback()}setCallback(e){this.loadedCallback=e}doneLoading(){1==this.isLoading()&&void 0!==this.loadedCallback&&0!=this.loadedCallback&&null!=this.loadedCallback&&this.loadedCallback()}isLoading(){this.loadedSounds=0,this.loadingSounds=0;new Array;for(let e=0;e<this.sounds.length;e++)void 0!==this.sounds[e]&&(0==this.sounds[e].loaded?this.loadingSounds++:this.loadedSounds++);return this.loadedSounds/this.sounds.length}playOnce(e){this.oneShotSound=this.create(e).sound,this.oneShotSound.stop(),this.oneShotSound.play(),this.oneShotSound.on("ended",()=>{0==this.oneShotSound.playing&&this.oneShotSound.destroy()})}destroy(e,s=0){let t=!1;const i=this.directory+e+this.extension;for(;!t;){const e=this.findSoundIndex(i);-1==e?t=!0:(this.sounds[e].sound.unload(),this.sounds.splice(e,1))}0!=s&&s()}kill(e=0){for(;this.sounds.length>0;)this.sounds.splice(0,1);i.default.destroyAll(),0!=e&&e()}}let c=new r;exports.so=c;
},{"./main":"epB2","./tts":"wjcX","./input":"efjR","./keycodes":"XFNl","./utilities":"CLUq"}],"Pzgz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"speech",{enumerable:!0,get:function(){return i.speech}}),exports.ScrollingText=void 0,require("babel-polyfill");var e=r(require("jquery")),t=require("./keycodes"),s=require("./soundObject"),i=require("./tts"),n=r(require("copy-to-clipboard"));function r(e){return e&&e.__esModule?e:{default:e}}if(null==a)var a=0;class c{constructor(e,t="\n",i=0){this.callback=i,this.text=e,this.delimiter=t,this.splitText=this.text.split(t),this.currentLine=0,this.sndOpen=s.so.create("ui/textOpen"),this.sndContinue=s.so.create("ui/textScroll"),this.sndClose=s.so.create("ui/textClose");document.getElementById("touchArea");if(this.init(),0==this.callback)return this.prom=new Promise(e=>{this.res=e})}init(){a=this,document.addEventListener("keydown",this.handleKeys),this.sndOpen.play(),this.currentLine=0,this.readCurrentLine()}handleKeys(e){switch(e.which){case t.KeyEvent.DOM_VK_UP:case t.KeyEvent.DOM_VK_DOWN:case t.KeyEvent.DOM_VK_LEFT:case t.KeyEvent.DOM_VK_RIGHT:a.readCurrentLine();break;case t.KeyEvent.DOM_VK_C:a.copyCurrentLine();break;case t.KeyEvent.DOM_VK_RETURN:a.advance()}}handleTap(e){0==e&&this.readCurrentLine(),1==e&&this.advance()}readCurrentLine(){if("!"==this.splitText[this.currentLine][0]){const e=this.splitText[this.currentLine].substr(1),t=s.so.create(e,!0);t.play(),t.sound.once("end",()=>{this.advance()})}else i.speech.speak(this.splitText[this.currentLine])}copyCurrentLine(){(0,n.default)(this.splitText[this.currentLine]),this.advance()}advance(){this.currentLine<this.splitText.length-1?(this.currentLine++,this.sndContinue.play(),this.readCurrentLine()):(this.sndClose.play(),this.sndClose.unload(),this.sndOpen.unload(),this.sndContinue.unload(),document.removeEventListener("keydown",this.handleKeys),0!=this.callback?this.callback():this.res())}}exports.ScrollingText=c;
},{"./keycodes":"XFNl","./soundObject":"pOT6","./tts":"wjcX"}],"LZUj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SoundSource=void 0;var t=i(require("sono")),s=require("./soundObject"),e=i(require("sono/effects/panner"));function i(t){return t&&t.__esModule?t:{default:t}}e.default.defaults={panningModel:"HRTF",maxDistance:50};class o{constructor(t,s=0,i=0,o=0){this.x=s,this.y=i,this.z=o,this.sound=son.create(t),this.pan=this.sound.effects.add((0,e.default)()),this.pos(this.x,this.y,this.z),this.rate=1,this.speed=0,this.minRate=.8,this.maxRate=1.2,this.toDestroy=!1,this.rateShiftSpeed=.015,this.sound.currentPosition=0}set loop(t){this.sound.loop=t}play(){this.sound.play()}pos(t,s,e){this.x=t,this.y=s,this.z=e,this.pan.setPosition(t,s,e)}update(){}}exports.SoundSource=o;
},{"./soundObject":"pOT6"}],"aNNL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SoundHandler=void 0;var t=require("./soundSource.js"),i=require("./soundObject.js");class s{constructor(t=!1){this.staticSounds=[],this.dynamicSounds=[],this.currentDynamicSound=0,this.maxDynamicSounds=512,this.currentStaticSound=0,this.maxStaticSounds=512,this.reuseSounds=!0,this.x=0,this.y=0,this.z=0,this.directional=t}playStatic(t,i=1,s=-1,d=!1){return(s=-1)&&(s=this.findFreeStaticSlot()),this.staticSounds[s]=new n(t,this.directional,d),1==i&&(this.staticSounds[s].sound.loop=!0),this.staticSounds[s].sound.play(),s}findFreeStaticSlot(){for(let t=0;t<this.maxStaticSounds;t++)if(-1==this.staticSounds[t]||void 0===this.staticSounds[t])return t;return this.currentStaticSound<this.maxStaticSounds?(this.currentStaticSound++,this.currentStaticSound):(this.currentStaticSound=0,this.currentStaticSound)}findFreeDynamicSlot(){for(let t=0;t<this.maxDynamicSounds;t++)if(-1==this.dynamicSounds[t]||void 0===this.dynamicSounds[t])return t;return this.currentDynamicSound<this.maxDynamicSounds?(this.currentDynamicSound++,this.currentDynamicSound):(this.currentDynamicSound=0,this.currentDynamicSound)}findDynamicSound(t){for(let i=0;i<this.dynamicSounds.length;i++)if(this.dynamicSounds[i].file==t)return i;return-1}play(t){let i=0,s=0;this.reuseSounds&&(i=this.findDynamicSound(t),s=!0),-1!=i&&0!=this.reuseSounds||(i=this.findFreeDynamicSlot(),s=!1),void 0===this.dynamicSounds[i]?0==s&&(this.dynamicSounds[i]=new n(t,this.directional)):0==s&&(this.dynamicSounds[i].sound.destroy(),this.dynamicSounds[i]=new n(t,directional)),this.dynamicSounds[i].sound.play()}update(t){if(1==this.directional)for(let i=0;i<this.dynamicSounds.length;i++)this.dynamicSounds[i].sound.pos(t.x,t.y,t.z)}destroy(){for(var t=0;t<this.dynamicSounds.length;t++)this.dynamicSounds[t].destroy(),this.dynamicSounds.splice(t,1);for(t=0;t<this.staticSounds.length;t++)this.staticSounds[t].destroy(),this.staticSounds.splice(t,1)}}exports.SoundHandler=s;class n{constructor(s,n=!1,d=!1){this.file=s,this.threeD=n,1==this.threeD?this.sound=new t.SoundSource(s,0,0,0):this.sound=i.so.create(s,d)}destroy(){this.sound.destroy()}}
},{"./soundSource.js":"LZUj","./soundObject.js":"pOT6"}],"Nivu":[function(require,module,exports) {
"use strict";var t=require("./soundObject"),e=require("./input"),s=require("./keycodes"),n=require("./tts");class i{constructor(s,i){this.langs=[],this.input=new e.KeyboardInput,this.input.init(),this.langs.push("select a language. Selecciona un idioma."),this.langs.push("I want to play in English"),this.langs.push("Quiero jugar en español."),this.id=document.getElementById(s),this.callback=i,this.container=document.createElement("div"),this.buttons=[],this.buttons[0]=document.createElement("div"),this.buttons[0].innerHTML=this.langs[0],this.container.appendChild(this.buttons[0]);for(let t=1;t<this.langs.length;t++)this.buttons[t]=document.createElement("input"),this.buttons[t].type="button",this.buttons[t].value=this.langs[t],this.buttons[t].addEventListener("click",()=>{this.sound.stop(),this.callback(t),this.container.innerHTML="",this.input.removeAllListeners(),document.getElementById("app").focus()}),this.buttons[t].addEventListener("focus",()=>{this.sound.stop(),n.speech.setLanguage(t),n.speech.speak(this.langs[t])}),this.container.appendChild(this.buttons[t]),this.input.once("chr"+t,()=>{this.sound.stop(),this.callback(t),this.container.innerHTML="",this.input.removeAllListeners(),document.getElementById("app").focus()});this.id.appendChild(this.container),this.sound=t.so.create("ui/langSelect"),this.sound.play()}}module.exports.LanguageSelector=i;
},{"./soundObject":"pOT6","./input":"efjR","./keycodes":"XFNl","./tts":"wjcX"}],"XCzN":[function(require,module,exports) {
function n(n,e){let t,i=0,o=!1,r=0,u=0,a=e||1/120;function c(e){if(null!==i)for(r+=(e-i)/1e3;r>a;)n.update(a,u),u+=1,r-=a;i=e,n.render(),o&&(t=requestAnimationFrame(c))}function f(){i=null,o=!0,t=requestAnimationFrame(c)}function l(){o=!1,cancelAnimationFrame(t)}return{start:f,stop:l,change:function(n){r=a=n||1/60,u=0,l(),f()}}}module.exports=n;
},{}],"k5DX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GameObject=void 0;const s=require("events");class e extends s{constructor(s,e,t,o,i,r,u,c){super(),this.world=s,this.alive=!0,this.x=t,this.y=o,this.z=i,""!=e&&(this.sound=document.createElement("audio"),this.sound.src="./sounds/"+e+".ogg",this.mediaSource=this.world.context.createMediaElementSource(this.sound),this.source=this.world.scene.createSource(),this.source.sourceWidth=r,this.source.sourceHeight=u,this.source.sourceDepth=c,this.mediaSource.connect(this.source.input),this.source.setPosition(this.x,this.y,this.z),this.sound.play(),this.sound.loop=!0)}update(){}destroy(){this.alive=!1,""!=this.sound&&(this.sound.removeAttribute("src"),this.sound.load())}}exports.GameObject=e;
},{}],"hO80":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Item=void 0;var t=require("./gameObject"),e=require("./utilities"),r=require("./tts");class s extends t.GameObject{constructor(t,r,s,i){super(t,i,r,s,0,1,1,1),this.world.player.on("step"+this.y,()=>{this.world.player.x==this.x&&this.step()}),this.world.player.on("step"+(this.y+1),()=>{this.destroy()}),this.world.player.on("x"+this.x,()=>{if(!this.alive)return;Math.round(e.utils.distance(this.world.player.x,this.world.player.y,this.x,this.y))<8&&this.world.player.target.replay()})}step(){}update(){}}exports.Item=s;
},{"./gameObject":"k5DX","./utilities":"CLUq","./tts":"wjcX"}],"HhVf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Coin=void 0;var e=require("./item"),t=require("./main"),o=require("./tts");class r extends e.Item{constructor(e,t,o){super(e,t,o,"loop/coin")}step(){t.data.coins+=this.world.game.level,this.world.game.pool.playStatic("player/getCoin",0),(0,t.save)(),this.alive=!1}}exports.Coin=r;
},{"./item":"hO80","./main":"epB2","./tts":"wjcX"}],"xcJv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Tile=void 0;var e=require("./gameObject"),t=require("./utilities"),s=require("./scrollingText");class i{constructor(e,t,s,i){this.y=t,this.type=s,this.hasSomething=!1,this.world=e,this.name=i,this.alive=!0,this.world.player.on("step"+this.y,()=>{this.step()})}step(){let e=this.type;0==this.type&&(e=1);this.world.player.currentSpeed;2!=this.type&&(clearInterval(this.world.player.scoreTimeout),this.world.player.levelCap=this.world.game.level,this.world.player.levelCap>15&&(this.levelCap=15)),this.world.game.pool.playStatic("steps/"+this.name+t.utils.randomInt(1,3),0),this.world.player.tileType=this.type}update(){}destroy(){}}exports.Tile=i;
},{"./gameObject":"k5DX","./utilities":"CLUq","./scrollingText":"Pzgz"}],"NFvS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Street=void 0;var e=require("./gameObject"),t=require("./utilities"),r=require("./tile");class s extends r.Tile{constructor(e,t){super(e,t,0,"street")}step(){super.step()}}exports.Street=s;
},{"./gameObject":"k5DX","./utilities":"CLUq","./tile":"xcJv"}],"B6mA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Objective=void 0;var e=require("./gameObject"),r=require("./tile"),t=require("./tts");class s extends r.Tile{constructor(e,r){super(e,r,2,"objective")}destroy(){}step(){if(super.step(),this.world.game.canLevel)return this.world.player.y=this.world.player.nearestStreet,this.world.scene.setListenerPosition(this.world.player.x,this.world.player.y,this.world.player.z),void this.world.game.pool.playStatic("level_forcefield",!1);this.world.game.pool.playStatic("steps/objective",0),this.world.player.scoreTimeout=setInterval(()=>{this.world.player.scoreDeduct()},1100-50*this.world.player.levelCap),this.world.generateTiles(),this.world.game.score+=250,this.world.player.slowDown(10)}}exports.Objective=s;
},{"./gameObject":"k5DX","./tile":"xcJv","./tts":"wjcX"}],"rVOc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StationaryObject=void 0;var e=require("./gameObject"),t=require("./utilities"),r=require("./tts");class s extends e.GameObject{constructor(e,t,r,s=!1,o=0){super(e,r,o,t,0,1,1,1),this.sound.loop=s}}exports.StationaryObject=s;
},{"./gameObject":"k5DX","./utilities":"CLUq","./tts":"wjcX"}],"B6Sb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Car=void 0;var t=require("./gameObject"),e=require("./stationaryObject"),i=require("./utilities"),s=require("./tts"),o=require("./main");class h extends t.GameObject{constructor(t,i,s,h,r,l,a,n="car",d,u,p=1,c="",y,w="",m){super(t,n,s,h,p,r,l,a),this.blowUpSound=w,this.objective=m,this.world.player.on("blowup",()=>{!this.alive||this.x<-7||this.x>7||(this.alive=!1,""!=this.blowUpSound&&new e.StationaryObject(this.world,this.world.player.y+2,"blowup/"+this.blowUpSound,!1,this.x),""==this.blowUpSound&&new e.StationaryObject(this.world,this.world.player.y+2,"blowup/generic",!1,this.x),void 0===o.data.bulletGallery&&(o.data.bulletGallery={}),""!=this.blowUpSound&&(o.data.bulletGallery[this.blowUpSound]=!0),(0,o.save)(),""!=this.canHorn&&(this.hornSound.removeAttribute("src"),this.hornSound.load()),this.tile.hasSomething=!1,this.world.game.score+=550*this.speed)}),this.name=y,this.speed=d,this.passed=!1,this.side=u,this.tile=i,this.tile.hasSomething=!0,this.canHorn=c,""!=this.canHorn&&(1==this.canHorn&&(this.canHorn=this.name),this.hornSound=document.createElement("audio"),this.hornSound.src="./sounds/horn/"+this.name+".ogg",this.hornSource=this.world.context.createMediaElementSource(this.hornSound),this.hornResonanceSource=this.world.scene.createSource(),this.hornSource.connect(this.hornResonanceSource.input),this.hornResonanceSource.setPosition(this.x,this.world.player.y,this.z),this.hornSound.loop=!0)}update(){if(2==this.side&&(this.x+=this.speed),1==this.side&&(this.x-=this.speed),this.x>=this.world.size/2||this.x<=this.world.size/2*-1)this.alive=!1,""!=this.canHorn&&this.hornSound.pause(),this.tile.hasSomething=!1;else if((1!=this.world.player.tileType||this.world.player.y>this.objective)&&this.source.setPosition(this.x,this.y,this.z),1==this.world.player.tileType&&this.world.player.y<this.objective&&this.source.setPosition(this.x,this.world.player.y,this.z),(this.passed||""!=this.canHorn&&this.y!=this.world.player.y)&&""!=this.canHorn&&this.hornSound.pause(),!this.passed&&""!=this.canHorn&&1==this.world.player.tileType&&this.world.player.y<this.objective&&(this.hornResonanceSource.setPosition(this.x,this.y,this.z),this.hornSound.play()),!this.world.player.jump&&!this.passed){if(Math.round(this.x)==this.world.player.x&&1!=this.world.player.tileType&&(this.passed=!0,this.tile.hasSomething=!1,void 0!==this.tile.timeout&&clearTimeout(this.tile.timeout),this.tile.timeout=setTimeout(()=>{this.tile.generateCar(i.utils.randomInt(1,o.content.numberOfVehicles))},i.utils.randomInt(this.world.game.spawnTime,this.world.game.spawnTime+300))),!this.passed&&this.alive&&Math.round(this.x)==this.world.player.x&&1==this.world.player.tileType&&this.world.player.y<this.objective){if(o.data.jumps>=1)this.world.game.pool.playStatic("bonus/hyperjump",0),o.data.jumps--,(0,o.save)(),this.world.player.flyTo(this.world.player.nearestObjective,3,"air");else{let t=Math.round(45*this.speed);this.world.player.hp-=t,this.world.player.hit(),this.world.player.flyTo(i.utils.randomInt(this.world.player.nearestStreet,this.world.player.furthestStreet),this.side,"air")}this.passed=!0,this.tile.hasSomething=!1}void 0!==this.tile.timeout&&clearTimeout(this.tile.timeout),this.tile.timeout=setTimeout(()=>{this.tile.generateCar(i.utils.randomInt(1,o.content.numberOfVehicles))},i.utils.randomInt(this.world.game.spawnTime,this.world.game.spawnTime+300))}}}exports.Car=h;
},{"./gameObject":"k5DX","./stationaryObject":"rVOc","./utilities":"CLUq","./tts":"wjcX","./main":"epB2"}],"RRgT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LevelPortal=void 0;var e=require("./gameObject"),t=require("./strings"),i=require("./stationaryObject"),s=require("./utilities"),o=require("./tts"),h=require("./main");class r extends e.GameObject{constructor(e,t,s,o,r,l,a,n="car",d,u,p=1,w="",c,m=""){super(e,n,s,o,p,r,l,a),this.blowUpSound=m,this.world.player.on("blowup",()=>{!this.alive||this.x<-7||this.x>7||(this.alive=!1,""!=this.blowUpSound&&new i.StationaryObject(this.world,this.world.player.y+2,"blowup/"+this.blowUpSound,!1,this.x),""==this.blowUpSound&&new i.StationaryObject(this.world,this.world.player.y+2,"blowup/generic",!1,this.x),void 0===h.data.bulletGallery&&(h.data.bulletGallery={}),""!=this.blowUpSound&&(h.data.bulletGallery[this.blowUpSound]=!0),(0,h.save)(),this.world.player.hp+=1e3,this.world.game.score=this.world.game.bankedScore,this.world.game.canLevel=!1,this.world.game.canLevelNotify=!1,""!=this.canHorn&&this.hornSound.pause(),this.tile.hasSomething=!1)}),this.name=c,this.speed=d,this.passed=!1,this.side=u,this.tile=t,this.tile.hasSomething=!0,this.canHorn=w,""!=this.canHorn&&(1==this.canHorn&&(this.canHorn=this.name),this.hornSound=document.createElement("audio"),this.hornSound.src="./sounds/horn/"+this.name+".ogg",this.hornSource=this.world.context.createMediaElementSource(this.hornSound),this.hornResonanceSource=this.world.scene.createSource(),this.hornSource.connect(this.hornResonanceSource.input),this.hornResonanceSource.setPosition(this.x,this.world.player.y,this.z),this.hornSound.loop=!0)}update(){2==this.side&&(this.x+=this.speed),1==this.side&&(this.x-=this.speed),this.x>=this.world.size/2||this.x<=this.world.size/2*-1?(this.alive=!1,""!=this.canHorn&&this.hornSound.pause(),this.tile.hasSomething=!1):(1!=this.world.player.tileType&&this.source.setPosition(this.x,this.y,this.z),1==this.world.player.tileType&&this.source.setPosition(this.x,this.world.player.y,this.z),(this.passed||""!=this.canHorn&&this.y!=this.world.player.y)&&""!=this.canHorn&&this.hornSound.pause(),this.passed||""==this.canHorn||1!=this.world.player.tileType||(this.hornResonanceSource.setPosition(this.x,this.y,this.z),this.hornSound.play()),this.world.player.jump||this.passed||(Math.round(this.x)==this.world.player.x&&1!=this.world.player.tileType&&(this.passed=!0,this.tile.hasSomething=!1,void 0!==this.tile.timeout&&clearTimeout(this.tile.timeout),this.tile.timeout=setTimeout(()=>{this.tile.generateCar(s.utils.randomInt(1,h.content.numberOfVehicles))},s.utils.randomInt(this.world.game.spawnTime,this.world.game.spawnTime+300))),!this.passed&&this.alive&&Math.round(this.x)==this.world.player.x&&1==this.world.player.tileType&&(this.passed=!0,this.tile.hasSomething=!1,this.world.game.canLevel=!1,this.world.game.bankedScore=1500*this.world.game.level,this.world.game.level++,this.world.game.spawnTime-=150,this.world.game.spawnTime<200&&(this.world.game.spawnTime=200),setTimeout(()=>{o.speech.speak(t.strings.get("level")+" "+this.world.game.level)},400),this.world.player.flyTo(this.world.player.nearestObjective,3,"level_air","level_land"),this.world.game.canLevelNotify=!1,this.world.game.score+=100*this.world.game.level,this.world.size-=Math.round(this.world.game.level)),void 0!==this.tile.timeout&&clearTimeout(this.tile.timeout),this.tile.timeout=setTimeout(()=>{this.tile.generateCar(s.utils.randomInt(1,h.content.numberOfVehicles))},s.utils.randomInt(0,this.world.game.spawnTime-100*this.world.game.level))))}}exports.LevelPortal=r;
},{"./gameObject":"k5DX","./strings":"EYbI","./stationaryObject":"rVOc","./utilities":"CLUq","./tts":"wjcX","./main":"epB2"}],"tw7G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Road=void 0;var e=require("./gameObject"),t=require("./car"),r=require("./levelPortal"),s=require("./main"),i=require("./utilities"),a=require("./tile"),o=require("./tts");class l extends a.Tile{constructor(e,t,r=!1){super(e,t,1,"road"),this.generator=r,this.timeout=setTimeout(()=>{s.debug||this.generateCar(i.utils.randomInt(1,s.content.numberOfVehicles))},i.utils.randomInt(this.world.game.spawnTime,this.world.game.spawnTime+300))}generateCar(e){if(!this.generator||!this.alive||this.world.greenLight)return;if(void 0!==this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{s.debug||this.generateCar(i.utils.randomInt(1,s.content.numberOfVehicles))},i.utils.randomInt(this.world.game.spawnTime,this.world.game.spawnTime+300)),this.hasSomething)return;let a=i.utils.randomInt(1,2),o=this.world.size/2;1==a&&(o*=1),2==a&&(o*=-1);let l=e;try{let e=i.utils.randomInt(1,100);l=s.content.numberOfVehicles,this.world.game.canLevel&&e<=80?this.world.dynamicObjects.push(new r.LevelPortal(this.world,this,o,this.y,2,1,2,"level_portal",.4,a,1,"","level_portal","level_portal")):this.world.dynamicObjects.push(new t.Car(this.world,this,o,this.y,2,1,2,s.parsedCars[l].sound,s.parsedCars[l].speed,a,s.parsedCars[l].z,s.parsedCars[l].hornable,s.parsedCars[l].name,s.parsedCars[l].blowup,this.world.player.nearestObjective))}catch(n){console.error("Error generating car "+l+": "+n)}this.hasSomething=!0}destroy(){void 0!==this.timeout&&clearTimeout(this.timeout)}step(){super.step(),this.world.player.stepProgress.pitch=i.utils.getProportion(this.y,this.world.player.nearestRoad,this.world.player.furthestRoad,.3,1.7),this.world.player.stepProgress.replay()}}exports.Road=l;
},{"./gameObject":"k5DX","./car":"B6Sb","./levelPortal":"RRgT","./main":"epB2","./utilities":"CLUq","./tile":"xcJv","./tts":"wjcX"}],"J6dU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Effect=void 0;class t{constructor(t,e,o,s,c){this.world=t,this.world.game.pool.playStatic("effects/"+e,0),s(),setTimeout(()=>{c(),this.world.game.pool.playStatic("effects/"+e+"Off",0)},o)}}exports.Effect=t;
},{}],"FaAG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Bonus=void 0;var e=require("./item"),r=require("./effect"),o=require("./utilities"),s=require("./strings"),t=require("./main"),l=require("./tts");class p extends e.Item{constructor(e,r,o){super(e,r,o,"loop/bonus")}step(){if(!this.alive)return;this.alive=!1;let e=[1,4,7];(0,t.getUnlock)("hyperjump")&&e.push(2),(0,t.getUnlock)("bombs")&&e.push(5);let r=o.utils.randomElement(e);switch(r){case 1:this.world.game.pool.playStatic("bonus/health",0),this.world.player.hp+=100;break;case 2:this.world.game.pool.playStatic("bonus/hyperjump",0),(0,t.increase)("jumps");break;case 5:(0,t.increase)("bombs"),this.world.game.pool.playStatic("bonus/bomb",!1);break;case 7:(0,t.increase)("stoppers"),(0,t.save)(),this.world.game.pool.playStatic("bonus/stopper",!1);break;default:this.world.game.pool.playStatic("bonus/fake",!1)}setTimeout(()=>{l.speech.speak(s.strings.get("bonus"+r))},280),(0,t.save)()}coffeeOn(e){e.oldSpeed=e.world.player.currentSpeed,e.world.player.slowDown(10),e.world.player.speedUp(7),e.world.player.forceSpeed=!0,e.world.player.forcedSpeed=7}coffeeOff(e){e.world.player.forceSpeed=!1,e.world.player.slowDown(10),e.world.player.speedUp(e.oldSpeed)}}exports.Bonus=p;
},{"./item":"hO80","./effect":"J6dU","./utilities":"CLUq","./strings":"EYbI","./main":"epB2","./tts":"wjcX"}],"qbJK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Player=void 0;var e=require("./gameObject"),t=require("./stationaryObject"),s=require("./keycodes.js"),i=require("./soundObject"),o=require("./tts"),r=require("./utilities"),h=require("./main");const l=require("events");class p extends e.GameObject{constructor(e){super(e,"",0,0,1.6,1,.5,1.6),this.playerHitSound=i.so.create("player/hit"),this.forceSpeed=!1,this.stepProgress=i.so.create("steps/progress"),this.target=i.so.create("player/target"),this.coins=0,h.data.coins&&(this.coins=h.data.coins),this.jumps=0,h.data.jumps&&(this.jumps=h.data.jumps),this.center=i.so.create("ui/center"),this.xLimit=Math.ceil(this.world.size/13),this.fallTime=55,this.world.scene.setListenerPosition(this.x,this.y,this.z),this.unableToMove=!1,this.hp=250,this.speedUpSound=i.so.create("ui/speedUp"),this.nearestStreet=0,this.nearestRoad=0,this.nearestObjective=0,this.furthestStreet=0,this.furthestRoad=0,this.speedDownSound=i.so.create("ui/speedDown"),this.speed=650,this.speeds=[0,650,530,420,350,235,675,120],this.speedModifier=0,this.currentSpeed=0}move(){this.unableToMove||(this.speedTimeout=setTimeout(()=>{this.move()},this.speeds[this.currentSpeed]-this.speedModifier),0==this.currentSpeed&&(this.currentSpeed=1),this.xLimit=Math.ceil(this.world.size/13),this.y+=1,this.emit("step"+this.y),this.world.game.input.isDown(s.KeyEvent.DOM_VK_RIGHT)&&(this.x++,this.x>0+this.xLimit&&(this.x=0+this.xLimit),0==this.x&&this.center.replay()),this.world.game.input.isDown(s.KeyEvent.DOM_VK_LEFT)&&(this.x--,this.x<0-this.xLimit&&(this.x=0-this.xLimit),0==this.x&&this.center.replay()),this.world.scene.setListenerPosition(this.x,this.y,this.z),this.emit("x"+this.x))}speedUp(e=1){this.forceSpeed||this.unableToMove||(0==this.currentSpeed&&(this.speedUpSound.pitch=r.utils.getProportion(1,1,5,.8,1.2),this.speedUpSound.replay(),this.move()),this.currentSpeed+=e-1,this.currentSpeed>7&&(this.currentSpeed=7),this.speedUpSound.pitch=r.utils.getProportion(this.currentSpeed,1,5,.8,1.2),this.speedUpSound.replay())}slowDown(e=1){this.forceSpeed||this.unableToMove||(this.currentSpeed-=e,1==e&&0==this.currentSpeed&&(this.currentSpeed=1),this.currentSpeed<=0&&(this.currentSpeed=0,void 0!==this.speedTimeout&&clearTimeout(this.speedTimeout)),1==e&&(this.speedDownSound.pitch=r.utils.getProportion(this.currentSpeed,1,5,.8,1.2)),1==e&&this.speedDownSound.replay())}hit(){this.playerHitSound.play(),this.world.game.pool.playStatic("player/impact/"+r.utils.randomInt(1,4),0)}flyTo(e,t,s,o="player/land"){if(this.unableToMove)return;this.tileType=-1,this.unableToMove=!0;let h=i.so.create("player/heart");h.play();let l=i.so.create(s);l.loop=!0,l.volume=.3;let p=i.so.create(o),a=i.so.create("player/fall"+r.utils.randomInt(1,4)),n=i.so.create("player/stand");l.pitch=.7,l.play(),l.loop=!0,h.loop=!0,this.slowDown(10);let d,c=r.utils.randomInt(11,21),u=!1;1==t&&(d=-1),2==t&&(d=1),3==t&&(u=!0,this.jump=!0,c=r.utils.randomInt(5,10)),this.interval=setInterval(()=>{u||(this.x+=d*r.utils.randomInt(3,5)),this.x<0-this.world.size/2&&(d=1,this.world.game.pool.playStatic("player/wall"+r.utils.randomInt(1,3),0)),this.x>this.world.size/2&&(d=-1,this.world.game.pool.playStatic("player/wall"+r.utils.randomInt(1,3),0)),l.pitch+=.07,this.y>e&&(this.y-=.5),this.y<e&&(this.y+=.5),this.z+=1,this.z>=c&&(this.y=e,clearInterval(this.interval),this.interval=setInterval(()=>{this.z-=1,l.pitch-=.07,this.z<=0&&(this.tileType=0,clearInterval(this.interval),u&&(p.play(),this.z=1.6,this.jump=!1,this.unableToMove=!1,h.stop(),this.forceSpeed?(this.forceSpeed=!1,this.slowDown(10),this.forceSpeed=!0):this.slowDown(10),this.forceSpeed&&(this.forceSpeed=!1,this.speedUp(this.forcedSpeed),this.forceSpeed=!0)),u||(this.x=0,a.play(),this.z=0,setTimeout(()=>{n.replay(),h.stop(),n.sound.on("ended",()=>{this.z=1.6,this.jump=!1,this.unableToMove=!1,this.forceSpeed?(this.forceSpeed=!1,this.slowDown(10),this.forceSpeed=!0):this.slowDown(10),this.forceSpeed&&(this.forceSpeed=!1,this.speedUp(this.forcedSpeed),this.forceSpeed=!0)}),this.world.scene.setListenerPosition(this.x,this.y,this.z)},r.utils.randomInt(1e3,2e3))),this.world.scene.setListenerPosition(this.x,this.y,this.z),l.stop(),this.x=0,this.emit("step"+this.y)),this.world.scene.setListenerPosition(this.x,this.y,this.z)},this.fallTime)),this.world.scene.setListenerPosition(this.x,this.y,this.z)},1.2*this.fallTime)}scoreDeduct(){this.world.game.tick.replay(),this.world.game.score-=25*this.world.game.level,this.world.game.score<this.world.game.bankedScore&&(this.world.game.score=this.world.game.bankedScore,this.world.game.tick.stop()),this.levelCap=this.world.game.level,this.levelCap>15&&(this.levelCap=15)}throwBomb(){try{let s=975;(0,h.getUnlock)("shortfuse")&&(s/=3);let o=i.so.create("bomb_start");o.play(),setTimeout(()=>{o.destroy(),new t.StationaryObject(this.world,this.y+.5,"bomb_explode"),this.emit("blowup")},s)}catch(e){console.error(e)}}}exports.Player=p;
},{"./gameObject":"k5DX","./stationaryObject":"rVOc","./keycodes.js":"XFNl","./soundObject":"pOT6","./tts":"wjcX","./utilities":"CLUq","./main":"epB2"}],"R4T5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.World=void 0;var e=require("./soundObject"),t=require("./coin"),s=require("./street"),i=require("./objective"),r=require("./road"),a=require("./bonus"),n=require("./utilities"),h=require("./car");require("resonance-audio");var l=require("./player"),o=require("./main"),c=require("./tts");const{ResonanceAudio:u}=require("resonance-audio");class d{constructor(e,t=100){this.size=t,this.greenLight=!1,this.game=e,this.dynamicObjects=[],this.tiles=[],this.context=new AudioContext,this.convolution=this.context.createConvolver(),this.scene=new u(this.context),this.convolution.connect(this.scene.output),this.scene.output.connect(this.context.destination),this.player=new l.Player(this),this.player.setMaxListeners(1e3)}generateTiles(){this.player.removeAllListeners("step"),this.player.removeAllListeners("blowup");for(let t=0;t<this.tiles.length;t++)this.tiles[t].alive=!1,this.tiles[t].destroy(),this.tiles.splice(t,1),t--;this.tiles=[];let e=this.player.y,h=e+this.player.xLimit;this.player.nearestStreet=e+1;for(let t=e+1;t<=h;t++)this.tiles.push(new s.Street(this,t)),e=t;let l=Math.round(this.game.roadsPerLevel+this.game.level/2),o=0;this.player.nearestRoad=e+1,this.player.furthestStreet=e;let c=this.player.nearestRoad;for(let t=e+1;t<=e+l;t++)c==t&&this.tiles.push(new r.Road(this,t,!0)),c!=t&&this.tiles.push(new r.Road(this,t,!1)),o=t;this.player.nearestObjective=o+1,this.player.furthestRoad=o,this.tiles.push(new i.Objective(this,o+1));let u=n.utils.randomInt(1,1);for(let s=1;s<=u;s++){let e=n.utils.randomInt(0-this.player.xLimit,0+this.player.xLimit);switch(n.utils.randomInt(1,2)){default:break;case 1:this.dynamicObjects.push(new t.Coin(this,e,this.player.nearestStreet+this.player.xLimit,this.player.furthestStreet));break;case 2:this.dynamicObjects.push(new a.Bonus(this,e,this.player.nearestRoad,this.player.furthestRoad))}}}update(){for(let e=0;e<this.dynamicObjects.length;e++)this.dynamicObjects[e].alive?this.dynamicObjects[e].update():(this.dynamicObjects[e].sound.removeAttribute("src"),this.dynamicObjects[e].sound.load(),this.dynamicObjects[e].canHorn&&this.dynamicObjects[e].hornSound.removeAttribute("src"),this.dynamicObjects[e].canHorn&&this.dynamicObjects[e].hornSound.load(),this.dynamicObjects.splice(e,1),e--);this.levelScore=1500*this.game.level,this.game.score>=this.levelScore&&(this.game.canLevelNotify||(this.game.pool.playStatic("level_notify",!1),this.game.canLevelNotify=!0),this.game.canLevel=!0)}}exports.World=d;
},{"./soundObject":"pOT6","./coin":"HhVf","./street":"NFvS","./objective":"B6mA","./road":"tw7G","./bonus":"FaAG","./utilities":"CLUq","./car":"B6Sb","./player":"qbJK","./main":"epB2","./tts":"wjcX"}],"QcRT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Game=void 0;var e=require("./tts"),s=require("./strings"),t=require("./main"),i=require("./soundHandler"),r=c(require("./timer")),n=c(require("jquery")),a=require("./utilities"),p=require("./scrollingText"),d=require("./input.js"),o=require("./keycodes.js"),h=require("./soundObject"),u=require("./world"),l=require("./road");function c(e){return e&&e.__esModule?e:{default:e}}class g{constructor(){this.canChangeSpeed=!0,this.bankedScore=0,this.canLevel=!1,this.canLevelNotify=!1,this.tick=h.so.create("tick"),this.scoreSound=h.so.create("scoreCounter"),this.scoreSound.volume=.4,this.input=new d.KeyboardInput,this.pool=new i.SoundHandler,this.input.init(),this.timer=(0,r.default)({update:()=>this.update(),render:()=>this.render()},1/45),this.score=0,this.level=1,this.spawnTime=2500,this.roadsPerLevel=5}start(){this.timer.start(),this.world=new u.World(this,80),t.debug||this.world.generateTiles()}update(i){if(this.input.isJustPressed(o.KeyEvent.DOM_VK_0)&&(t.data.stoppers>=1?(this.world.game.pool.playStatic("use_stopper",!1),t.data.stoppers--,(0,t.save)(),this.world.player.slowDown(10)):e.speech.speak(s.strings.get("noStoppers"))),this.input.isJustPressed(o.KeyEvent.DOM_VK_D)&&t.debug){let e=new l.Road(this.world,this.world.player.y+1,!0),s=t.content.numberOfVehicles;e.generateCar(s),e.generator=!1,this.world.player.y=0}if(this.input.isJustPressed(o.KeyEvent.DOM_VK_B)&&(t.data.bombs>=1||t.debug?(this.world.player.throwBomb(),t.debug||t.data.bombs--,(0,t.save)()):e.speech.speak(s.strings.get("noBombs"))),this.input.isJustPressed(o.KeyEvent.DOM_VK_I)){let i=!0,r="";t.data.jumps>0&&(i=!1,r+=s.strings.get("iJumps",[t.data.jumps])+", "),t.data.bombs>0&&(i=!1,r+=s.strings.get("iBombs",[t.data.bombs])+", "),t.data.stoppers>0&&(i=!1,r+=s.strings.get("iStoppers",[t.data.stoppers])+", "),i?e.speech.speak(s.strings.get("emptyInventory")):e.speech.speak(r)}this.input.isJustPressed(o.KeyEvent.DOM_VK_UP)&&this.world.player.speedUp(),this.input.isJustPressed(o.KeyEvent.DOM_VK_DOWN)&&this.world.player.slowDown(),this.input.isJustPressed(o.KeyEvent.DOM_VK_C)&&e.speech.speak(t.data.coins+s.strings.get("coins")),this.input.isJustPressed(o.KeyEvent.DOM_VK_S)&&e.speech.speak(this.score+s.strings.get("points, "+s.strings.get("bankedScore")+this.world.game.bankedScore)),this.input.isJustPressed(o.KeyEvent.DOM_VK_X)&&(e.speech.speak(this.world.player.nearestRoad+", "+this.world.player.furthestRoad),e.speech.speak(this.world.player.x)),this.input.isJustPressed(o.KeyEvent.DOM_VK_L)&&e.speech.speak(s.strings.get("level")+this.level+" "+s.strings.get("ws")+this.world.size+" spawn time "+this.world.game.spawnTime),this.input.isJustPressed(o.KeyEvent.DOM_VK_H)&&e.speech.speak(this.world.player.hp+" "+s.strings.get("hp")),this.input.isJustPressed(o.KeyEvent.DOM_VK_1)&&this.canChangeSpeed&&(this.canChangeSpeed=!1,setTimeout(()=>{this.canChangeSpeed=!0},800),this.world.player.slowDown(10),this.world.player.speedUp(1)),this.input.isJustPressed(o.KeyEvent.DOM_VK_2)&&this.canChangeSpeed&&(this.canChangeSpeed=!1,setTimeout(()=>{this.canChangeSpeed=!0},800),this.world.player.slowDown(10),this.world.player.speedUp(2)),this.input.isJustPressed(o.KeyEvent.DOM_VK_3)&&this.canChangeSpeed&&(this.canChangeSpeed=!1,setTimeout(()=>{this.canChangeSpeed=!0},800),this.world.player.slowDown(10),this.world.player.speedUp(3)),this.input.isJustPressed(o.KeyEvent.DOM_VK_4)&&this.canChangeSpeed&&(this.canChangeSpeed=!1,setTimeout(()=>{this.canChangeSpeed=!0},800),this.world.player.slowDown(10),this.world.player.speedUp(4)),this.input.isJustPressed(o.KeyEvent.DOM_VK_5)&&this.canChangeSpeed&&(this.canChangeSpeed=!1,setTimeout(()=>{this.canChangeSpeed=!0},800),this.world.player.slowDown(10),this.world.player.speedUp(5)),this.world.update()}render(){}}exports.Game=g;
},{"./tts":"wjcX","./strings":"EYbI","./main":"epB2","./soundHandler":"aNNL","./timer":"XCzN","./utilities":"CLUq","./scrollingText":"Pzgz","./input.js":"efjR","./keycodes.js":"XFNl","./soundObject":"pOT6","./world":"R4T5","./road":"tw7G"}],"URUl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuTypes=exports.SelectorItem=exports.SliderItem=exports.AudioItem=exports.MenuItem=void 0;var t=require("./tts"),e=require("./soundObject");const s={NORMAL:0,SELECTOR:1,SLIDER:2,EDIT:3,AUDIO:4};exports.MenuTypes=s;class i{constructor(t,e){this.name=e,this.id=t,this.type=s.NORMAL}speak(){t.speech.speak(this.name)}select(){return this.id}}exports.MenuItem=i;class r extends i{constructor(t,i){super(),this.name=i,this.type=s.AUDIO,this.id=t,this.snd=e.so.create(this.name)}speak(){this.snd.stop(),this.snd.play()}select(){return this.id}}exports.AudioItem=r;class h extends i{constructor(t,e,i,r=0,h){super(),this.id=t,this.name=e,this.options=i,this.type=s.SELECTOR,this.currentOption=r,this.selectCallback=h}speak(){t.speech.speak(this.name+". Selector. Set to "+this.options[this.currentOption])}increase(){this.currentOption<this.options.length-1&&this.currentOption++,t.speech.speak(this.options[this.currentOption]),void 0!==this.selectCallback&&this.selectCallback(this.options[this.currentOption])}decrease(){this.currentOption>0&&this.currentOption--,t.speech.speak(this.options[this.currentOption]),void 0!==this.selectCallback&&this.selectCallback(this.options[this.currentOption])}select(){return this.id}}exports.SelectorItem=h;class n extends i{constructor(t,e,i,r,h=0,n=1){super(),this.id=t,this.name=e,this.minValue=i,this.maxValue=r,this.currentValue=h,this.increaseBy=n,this.type=s.SLIDER}speak(){t.speech.speak(this.name+". Slider. Set to "+this.currentValue)}increase(){this.currentValue<this.maxValue&&(this.currentValue+=this.increaseBy),this.currentValue>this.maxValue&&(this.currentValue=this.maxValue),t.speech.speak(this.currentValue)}decrease(){this.currentValue>this.minValue&&(this.currentValue-=this.increaseBy),this.currentValue<this.minValue&&(this.currentValue=this.minValue),t.speech.speak(this.currentValue)}select(){return this.id}}exports.SliderItem=n;class a extends i{constructor(t,e,i=""){super(),this.id=t,this.name=e,this.text=i,this.type=s.EDIT}speak(){t.speech.speak(this.name+". Editable. "+(""==this.text?"Nothing entered.":"Set to "+this.text))}addChar(e){this.text+=e,t.speech.speak(e)}removeChar(){this.text=this.text.substring(0,this.text.length-1),t.speech.speak(this.text)}select(){return this.text}}
},{"./tts":"wjcX","./soundObject":"pOT6"}],"Z6FK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Menu=void 0,require("babel-polyfill");var e=require("./utilities"),t=a(require("hammerjs")),s=require("./tts"),i=require("./soundObject.js"),h=require("./menuItem"),n=require("./keycodes"),r=require("./input");function a(e){return e&&e.__esModule?e:{default:e}}class u{constructor(e,s,h){this.kp=(e=>{this.handleInput(e)}),this.kd=(e=>{this.handleKeys(e)}),this.fadeTime=.6,this.menuData=s;let n=e.split(" ");n.length<2&&(this.isAudio=!0),n.length>=2&&(this.isAudio=!1),this.silent=!1,this.prependAudio="",this.first=!0,this.cursor=0,this.name=e;let r=i.so.directory;i.so.directory="./sounds/",this.sndKeyChar=i.so.create("ui/keyChar"),this.sndKeyDelete=i.so.create("ui/keyDelete"),this.sndSliderLeft=i.so.create("ui/menuSliderLeft"),this.sndSliderRight=i.so.create("ui/menuSliderRight"),this.sndBoundary=i.so.create("ui/menuBoundary"),this.sndChoose=i.so.create("ui/menuChoose"),this.sndMove=i.so.create("ui/menuMove"),this.sndOpen=i.so.create("ui/menuOpen"),this.sndSelector=i.so.create("ui/menuSelector"),this.sndWrap=i.so.create("ui/menuWrap"),i.so.directory=r,this.selectCallback=null,void 0!==h&&(this.music=h);const a=document.getElementById("touchArea");this.hammer=new t.default(a)}nextItem(){if(s.speech.stop(),this.first?(this.silent||this.sndMove.play(),this.first=!1):this.cursor<this.menuData.length-1?(this.silent||this.sndMove.play(),this.cursor++):(this.silent||this.sndWrap.play(),this.cursor=0),this.isAudio){this.sndName.stop();for(let e=0;e<this.menuData.length;e++)this.menuData[e].type==h.MenuTypes.AUDIO&&this.menuData[e].snd.stop()}this.menuData[this.cursor].speak()}previousItem(){if(s.speech.stop(),this.first&&(this.first=!1,this.silent||this.sndMove.play()),this.cursor>0?(this.silent||this.sndMove.play(),this.cursor--):(this.cursor=this.menuData.length-1,this.silent||this.sndWrap.play()),this.isAudio){this.sndName.stop();for(let e in this.menuData)this.menuData[e].type==h.MenuTypes.AUDIO&&this.menuData[e].snd.stop()}this.menuData[this.cursor].speak(),void 0!==this.moveCallback&&this.moveCallback(this.menuData[this.cursor].id)}increase(){this.menuData[this.cursor].type!=h.MenuTypes.SLIDER&&this.menuData[this.cursor].type!=h.MenuTypes.SELECTOR||(this.menuData[this.cursor].increase(),this.menuData[this.cursor].type==h.MenuTypes.SLIDER?this.silent||this.sndSliderRight.play():this.silent||this.sndSelector.play())}decrease(){this.menuData[this.cursor].type!=h.MenuTypes.SLIDER&&this.menuData[this.cursor].type!=h.MenuTypes.SELECTOR||(this.menuData[this.cursor].decrease(),this.menuData[this.cursor].type==h.MenuTypes.SLIDER?this.silent||this.sndSliderLeft.play():this.silent||this.sndSelector.play())}insertCharacter(e){if(this.menuData[this.cursor].type==h.MenuTypes.EDIT)return this.menuData[this.cursor].addChar(String.fromCharCode(e)),void(this.silent||this.sndKeyChar.play());for(let t=this.cursor+1;t<this.menuData.length;t++){if(this.menuData[t].shortcut==String.fromCharCode(e).toLowerCase())return this.cursor=t,void this.select();if(this.menuData[t].name.toLowerCase().substr(0,1)==String.fromCharCode(e).toLowerCase())return this.cursor=t,this.menuData[this.cursor].speak(),void(this.first=!1)}for(let t=0;t<this.menuData.length;t++){if(this.menuData[t].shortcut==String.fromCharCode(e).toLowerCase())return this.cursor=t,void this.select();if(this.menuData[t].name.toLowerCase().substr(0,1)==String.fromCharCode(e).toLowerCase())return this.cursor=t,this.menuData[this.cursor].speak(),void(this.first=!1)}}removeCharacter(){this.menuData[this.cursor].type==h.MenuTypes.EDIT&&(this.menuData[this.cursor].removeChar(),this.silent||this.sndKeyDelete.play())}handleInput(e){this.insertCharacter(e.which)}destroySounds(){this.sndKeyChar.destroy(),this.sndKeyDelete.destroy(),this.sndSliderLeft.destroy(),this.sndSliderRight.destroy(),this.isAudio&&this.sndName.destroy(),this.sndBoundary.destroy(),this.sndChoose.destroy(),this.sndMove.destroy(),this.sndOpen.destroy(),this.sndSelector.destroy(),this.sndWrap.destroy();for(let e=0;e<this.menuData.length;e++)this.menuData[e].type==h.MenuTypes.AUDIO&&this.menuData[e].snd.destroy();void 0!==this.music&&this.music.destroy()}destroy(){document.removeEventListener("keydown",this.kd),document.removeEventListener("keypress",this.kp),this.hammer.destroy(),setTimeout(()=>{this.destroySounds()},1e3*this.fadeTime)}handleKeys(e){switch(e.which){case n.KeyEvent.DOM_VK_RETURN:this.select();break;case n.KeyEvent.DOM_VK_PAGE_UP:this.music.volume+=.03;break;case n.KeyEvent.DOM_VK_PAGE_DOWN:this.music.volume-=.03;break;case n.KeyEvent.DOM_VK_BACK_SPACE:this.removeCharacter();break;case n.KeyEvent.DOM_VK_DOWN:this.nextItem();break;case n.KeyEvent.DOM_VK_UP:this.previousItem();break;case n.KeyEvent.DOM_VK_RIGHT:this.increase();break;case n.KeyEvent.DOM_VK_LEFT:this.decrease()}}async runSync(){return new Promise((e,t)=>{this.run(t=>{e(t.selected),this.destroy()})})}run(e){"object"==typeof this.music?(this.music.volume=.8,this.music.loop=!0,this.music.play(),s.speech.ducker=this.music):"string"==typeof this.music&&(this.music=i.so.create(this.music,!0),this.music.volume=.8,this.music.loop=!0,this.music.play(),s.speech.ducker=this.music),this.selectCallback=e;const t=this;document.addEventListener("keypress",this.kp),document.addEventListener("keydown",this.kd),this.hammer.on("swipeleft",function(e){t.handleSwipe(0)}),this.hammer.on("swiperight",function(e){t.handleSwipe(1)}),this.hammer.on("panup",function(e){t.handleSwipe(3)}),this.hammer.on("pandown",function(e){t.handleSwipe(4)}),this.hammer.on("tap",function(e){t.handleSwipe(2)}),this.isAudio?(this.sndName=i.so.create(this.name),this.sndName.play()):this.silent||s.speech.speak(this.name),this.silent||this.sndOpen.play()}handleSwipe(e){3==e&&this.decrease(),4==e&&this.increase(),0==e&&this.previousItem(),1==e&&this.nextItem(),2==e&&this.select()}select(){const e=this.menuData[this.cursor].id,t=[];for(let n=0;n<this.menuData.length;n++){let e=null;this.menuData[n].type==h.MenuTypes.SLIDER&&(e={id:this.menuData[n].id,value:this.menuData[n].currentValue}),this.menuData[n].type==h.MenuTypes.EDIT&&(e={id:this.menuData[n].id,value:this.menuData[n].text}),this.menuData[n].type==h.MenuTypes.SELECTOR&&(e={id:this.menuData[n].id,value:this.menuData[n].currentOption,name:this.menuData[n].options[this.menuData[n].currentOption]}),t.push(e)}const s={selected:e,cursor:this.cursor,items:t};if(this.silent||this.sndChoose.play(),document.removeEventListener("keydown",this.kd),document.removeEventListener("keypress",this.kp),this.isAudio){this.sndName.stop();for(let e=0;e<this.menuData.length;e++)this.menuData[e].type==h.MenuTypes.AUDIO&&this.menuData[e].snd.stop()}this.silent||(this.musicDuration=1e3*this.fadeTime),(void 0===this.music||this.silent)&&(this.musicDuration=0);const i=this;void 0!==this.music&&this.music.sound.fade(0,this.fadeTime),this.silent&&(this.musicDuration=0),setTimeout(()=>{i.selectCallback(s)},this.musicDuration)}}exports.Menu=u;
},{"./utilities":"CLUq","./tts":"wjcX","./soundObject.js":"pOT6","./menuItem":"URUl","./keycodes":"XFNl","./input":"efjR"}],"epB2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mainMenu=S,exports.save=M,exports.getUnlock=_,exports.setUnlock=O,exports.increase=j,exports.decrease=G,exports.setData=D,exports.getData=E,exports.ttsRate=exports.ttsVoice=exports.lang=exports.version2=exports.data=exports.version=exports.parsedCars=exports.gameID=exports.content=exports._=exports.debug=void 0;var e=require("./scrollingText"),t=require("./utilities"),s=require("./soundHandler"),r=require("./strings"),o=require("./soundObject"),n=require("./tts"),a=require("./languageSelector"),l=require("./game"),u=p(require("jquery")),i=require("./menu"),c=require("./menuItem");function p(e){return e&&e.__esModule?e:{default:e}}const g=!1;let d;exports.debug=!1,exports._=d;let m={numberOfVehicles:7,bonusTypes:3,shopItems:{hyperjump:500,bombs:250,galleryMembership:75,shortfuse:450}};exports.content=m;var h="road";exports.gameID=h;let x=[];exports.parsedCars=x,x.push({});var y="1.0";exports.version=y;let v={coins:0,jumps:0,unlocks:{hyperjump:!1}};exports.data=v;var f="";exports.version2=f;var b,w=0;exports.lang=w,exports.ttsVoice=b;var k=1;async function I(){document.getElementById("app").focus(),null!=localStorage.getItem("string_data")&&(exports.data=v=JSON.parse(localStorage.getItem("string_data")));try{let t=require("fs").readFileSync("./cars.txt","utf8");console.log(t);let s=t.split("\n");console.log(s[0]),s.forEach(e=>{let t=e.split(","),s=t[0],r=Number(t[1]),o=t[2],n="";n=1==o?s:0==o?"":o;let a=Number(t[3]),l=0,u="generic";if(void 0!==t[4]){switch(l=Number(t[4]),console.log(l),l){case 0:u="generic";break;case 1:u=s;break;default:u="generic"}void 0===v.bulletGallery&&(v.bulletGallery={}),void 0===v.bulletGallery[u]&&(v.bulletGallery[u]=!1)}x.push({sound:"vehicles/"+s,speed:r,hornable:n,name:s,z:a,blowup:u})}),m.numberOfVehicles=x.length-1}catch(e){console.log("Error parsing cars file: "+e)}new Promise((e,t)=>{fetch("http://yourserver.com/versions.php?gameVersionRequest="+h).then(e=>e.text()).then(t=>{exports.version2=f=t,e(t)})}),new a.LanguageSelector("langSelect",async e=>{exports.lang=w=e,n.speech.setLanguage(w),exports._=d=r.strings.get,n.speech.setRate(3),S()})}async function S(){let e=o.so.create("music/menu");e.volume=.6,e.loop=!0,e.play(),n.speech.ducker=e;let t=[];t.push(new c.MenuItem(0,r.strings.get("mStart"))),t.push(new c.MenuItem(1,r.strings.get("mShop",[v.coins]))),t.push(new c.MenuItem(2,r.strings.get("mBullet")));let s=new i.Menu(r.strings.get("mainMenu"),t),a=await s.runSync();switch(await e.fade(0),a){case 0:(new l.Game).start();break;case 1:await L();break;case 2:await q()}}function M(){localStorage.setItem("string_data",JSON.stringify(v))}async function q(){if(!_("galleryMembership")){let t=o.so.create("gallery_locked");return await t.playSync(),await new e.ScrollingText(r.strings.get("galleryLocked")),void S()}let t=0,a=0,l=(new s.SoundHandler,[]);l.push(new c.MenuItem(-1,r.strings.get("mBack"))),Object.entries(v.bulletGallery).forEach(e=>{0==e[1]&&(l.push(new c.AudioItem(-1,"blowup/locked")),t++),1==e[1]&&(l.push(new c.AudioItem(-1,"blowup/"+e[0])),a++)}),n.speech.speak(r.strings.get("bulletIntro",[a,t+a]));let u=new i.Menu(" ",l);u.silent=!0,u.run(e=>{u.destroy(),S()})}function _(e){return void 0===v.unlocks&&(v.unlocks={}),void 0===v.unlocks[e]&&(v.unlocks[e]=!1),v.unlocks[e]}function O(e,t=!0){return console.log(e),void 0===v.unlocks&&(v.unlocks={}),void 0===v.unlocks[e]&&(v.unlocks[e]=!1),v.unlocks[e]=t,M(),t}function j(e,t=1){return void 0===v[e]?v[e]=t:v[e]+=t,M(),t}function G(e,t=1){return void 0===v[e]?v[e]=0-t:v[e]-=t,M(),t}function D(e,t){return void 0===v[e]&&(v[e]=t),v[e]=t,M(),t}function E(e){return void 0===v[e]&&(v[e]=0),v[e]}async function L(){let e,s,a=o.so.create("shop_ambience");a.volume=.6,a.loop=!0,a.play();let l=o.so.create("purchase_item"),u=o.so.create("no_cash");for(v.coins=1e5,n.speech.speak(r.strings.get("mShopIntro"));0!=s;){await t.utils.sleep(5);let o=[];for(var p in o.push(new c.MenuItem(0,r.strings.get("mShopBack",[v.coins]))),m.shopItems)_(p)||o.push(new c.MenuItem(p,r.strings.get("shop"+p)+": "+m.shopItems[p]+" "+r.strings.get("coins")));(e=new i.Menu(" ",o)).silent=!0,0!=(s=await e.runSync())&&(v.coins>=m.shopItems[s]?(v.coins-=m.shopItems[s],O(s),l.replay()):u.replay())}e.destroy(),a.destroy(),await S()}exports.ttsRate=k,document.addEventListener("DOMContentLoaded",I);
},{"./scrollingText":"Pzgz","./utilities":"CLUq","./soundHandler":"aNNL","./strings":"EYbI","./soundObject":"pOT6","./tts":"wjcX","./languageSelector":"Nivu","./game":"QcRT","./menu":"Z6FK","./menuItem":"URUl"}]},{},["epB2"], null)
//# sourceMappingURL=/main.js.map